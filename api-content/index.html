{"posts":[{"title":"MQTTç®€ä»‹","content":"1 ç®€è¿° MQTTï¼ˆMessage Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®ï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ/è®¢é˜…ï¼ˆpublish/subscribeï¼‰æ¨¡å¼çš„&quot;è½»é‡çº§&quot;é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäºTCP/IPåè®®ä¸Šï¼Œç”±IBMåœ¨1999å¹´å‘å¸ƒã€‚MQTTæœ€å¤§ä¼˜ç‚¹åœ¨äºï¼Œå¯ä»¥ä»¥æå°‘çš„ä»£ç å’Œæœ‰é™çš„å¸¦å®½ï¼Œä¸ºè¿æ¥è¿œç¨‹è®¾å¤‡æä¾›å®æ—¶å¯é çš„æ¶ˆæ¯æœåŠ¡ã€‚ä½œä¸ºä¸€ç§ä½å¼€é”€ã€ä½å¸¦å®½å ç”¨çš„å³æ—¶é€šè®¯åè®®ï¼Œä½¿å…¶åœ¨ç‰©è”ç½‘ã€å°å‹è®¾å¤‡ã€ç§»åŠ¨åº”ç”¨ç­‰æ–¹é¢æœ‰è¾ƒå¹¿æ³›çš„åº”ç”¨ã€‚ MQTTæ˜¯ä¸€ä¸ªåŸºäºå®¢æˆ·ç«¯-æœåŠ¡å™¨çš„æ¶ˆæ¯å‘å¸ƒ/è®¢é˜…ä¼ è¾“åè®®ã€‚MQTTåè®®æ˜¯è½»é‡ã€ç®€å•ã€å¼€æ”¾å’Œæ˜“äºå®ç°çš„ï¼Œè¿™äº›ç‰¹ç‚¹ä½¿å®ƒé€‚ç”¨èŒƒå›´éå¸¸å¹¿æ³›ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒåŒ…æ‹¬å—é™çš„ç¯å¢ƒä¸­ï¼Œå¦‚ï¼šæœºå™¨ä¸æœºå™¨ï¼ˆM2Mï¼‰é€šä¿¡å’Œç‰©è”ç½‘ï¼ˆIoTï¼‰ã€‚å…¶åœ¨ï¼Œé€šè¿‡å«æ˜Ÿé“¾è·¯é€šä¿¡ä¼ æ„Ÿå™¨ã€å¶å°”æ‹¨å·çš„åŒ»ç–—è®¾å¤‡ã€æ™ºèƒ½å®¶å±…ã€åŠä¸€äº›å°å‹åŒ–è®¾å¤‡ä¸­å·²å¹¿æ³›ä½¿ç”¨ã€‚ 2 è®¾è®¡è§„èŒƒ ç”±äºç‰©è”ç½‘çš„ç¯å¢ƒæ˜¯éå¸¸ç‰¹åˆ«çš„ï¼Œæ‰€ä»¥MQTTéµå¾ªä»¥ä¸‹è®¾è®¡åŸåˆ™ï¼š ç²¾ç®€ï¼Œä¸æ·»åŠ å¯æœ‰å¯æ— çš„åŠŸèƒ½ï¼› å‘å¸ƒ/è®¢é˜…ï¼ˆPub/Subï¼‰æ¨¡å¼ï¼Œæ–¹ä¾¿æ¶ˆæ¯åœ¨ä¼ æ„Ÿå™¨ä¹‹é—´ä¼ é€’ï¼› å…è®¸ç”¨æˆ·åŠ¨æ€åˆ›å»ºä¸»é¢˜ï¼Œé›¶è¿ç»´æˆæœ¬ï¼› æŠŠä¼ è¾“é‡é™åˆ°æœ€ä½ä»¥æé«˜ä¼ è¾“æ•ˆç‡ï¼› æŠŠä½å¸¦å®½ã€é«˜å»¶è¿Ÿã€ä¸ç¨³å®šçš„ç½‘ç»œç­‰å› ç´ è€ƒè™‘åœ¨å†…ï¼› æ”¯æŒè¿ç»­çš„ä¼šè¯æ§åˆ¶ï¼› ç†è§£å®¢æˆ·ç«¯è®¡ç®—èƒ½åŠ›å¯èƒ½å¾ˆä½ï¼› æä¾›æœåŠ¡è´¨é‡ç®¡ç†ï¼› å‡è®¾æ•°æ®ä¸å¯çŸ¥ï¼Œä¸å¼ºæ±‚ä¼ è¾“æ•°æ®çš„ç±»å‹ä¸æ ¼å¼ï¼Œä¿æŒçµæ´»æ€§ã€‚ 3 ä¸»è¦ç‰¹æ€§ MQTTåè®®å·¥ä½œåœ¨ä½å¸¦å®½ã€ä¸å¯é çš„ç½‘ç»œçš„è¿œç¨‹ä¼ æ„Ÿå™¨å’Œæ§åˆ¶è®¾å¤‡é€šè®¯è€Œè®¾è®¡çš„åè®®ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä¸»è¦çš„å‡ é¡¹ç‰¹æ€§ï¼š ä½¿ç”¨å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯æ¨¡å¼ï¼Œæä¾›ä¸€å¯¹å¤šçš„æ¶ˆæ¯å‘å¸ƒï¼Œè§£é™¤åº”ç”¨ç¨‹åºè€¦åˆã€‚è¿™ä¸€ç‚¹å¾ˆç±»ä¼¼äºXMPPï¼Œä½†æ˜¯MQTTçš„ä¿¡æ¯å†—ä½™è¿œå°äºXMPPï¼Œå› ä¸ºXMPPä½¿ç”¨XMLæ ¼å¼æ–‡æœ¬æ¥ä¼ é€’æ•°æ®ã€‚ å¯¹è´Ÿè½½å†…å®¹å±è”½çš„æ¶ˆæ¯ä¼ è¾“ã€‚ ä½¿ç”¨TCP/IPæä¾›ç½‘ç»œè¿æ¥ã€‚ä¸»æµçš„MQTTæ˜¯åŸºäºTCPè¿æ¥è¿›è¡Œæ•°æ®æ¨é€çš„ï¼Œä½†æ˜¯åŒæ ·æœ‰åŸºäºUDPçš„ç‰ˆæœ¬ï¼Œå«åšMQTT-SNã€‚è¿™ä¸¤ç§ç‰ˆæœ¬ç”±äºåŸºäºä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œä¼˜ç¼ºç‚¹è‡ªç„¶ä¹Ÿå°±å„æœ‰ä¸åŒäº†ã€‚ æœ‰ä¸‰ç§æ¶ˆæ¯å‘å¸ƒæœåŠ¡è´¨é‡QoS (Quality of Service)ï¼š At Most Once è‡³å¤šä¸€æ¬¡ï¼Œæ¶ˆæ¯å‘å¸ƒå®Œå…¨ä¾èµ–åº•å±‚TCP/IPç½‘ç»œã€‚ä¼šå‘ç”Ÿæ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤ã€‚è¿™ä¸€çº§åˆ«å¯ç”¨äºå¦‚ä¸‹æƒ…å†µï¼Œç¯å¢ƒä¼ æ„Ÿå™¨æ•°æ®ï¼Œä¸¢å¤±ä¸€æ¬¡è¯»è®°å½•æ— æ‰€è°“ï¼Œå› ä¸ºä¸ä¹…åè¿˜ä¼šæœ‰ç¬¬äºŒæ¬¡å‘é€ã€‚è¿™ä¸€ç§æ–¹å¼ä¸»è¦æ™®é€šAPPçš„æ¨é€ï¼Œå€˜è‹¥ä½ çš„æ™ºèƒ½è®¾å¤‡åœ¨æ¶ˆæ¯æ¨é€æ—¶æœªè”ç½‘ï¼Œæ¨é€è¿‡å»æ²¡æ”¶åˆ°ï¼Œå†æ¬¡è”ç½‘ä¹Ÿå°±æ”¶ä¸åˆ°äº†ã€‚ At Least Once è‡³å°‘ä¸€æ¬¡ï¼Œç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ï¼Œä½†æ¶ˆæ¯é‡å¤å¯èƒ½ä¼šå‘ç”Ÿã€‚ Exactly Once æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼Œç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ä¸€æ¬¡ã€‚åœ¨ä¸€äº›è¦æ±‚æ¯”è¾ƒä¸¥æ ¼çš„è®¡è´¹ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ­¤çº§åˆ«ã€‚åœ¨è®¡è´¹ç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯é‡å¤æˆ–ä¸¢å¤±ä¼šå¯¼è‡´ä¸æ­£ç¡®çš„ç»“æœã€‚è¿™ç§æœ€é«˜è´¨é‡çš„æ¶ˆæ¯å‘å¸ƒæœåŠ¡è¿˜å¯ä»¥ç”¨äºå³æ—¶é€šè®¯ç±»çš„APPçš„æ¨é€ï¼Œç¡®ä¿ç”¨æˆ·æ”¶åˆ°ä¸”åªä¼šæ”¶åˆ°ä¸€æ¬¡ã€‚ å°å‹ä¼ è¾“ï¼Œå¼€é”€å¾ˆå°ï¼ˆå›ºå®šé•¿åº¦çš„å¤´éƒ¨æ˜¯2å­—èŠ‚ï¼‰ï¼Œåè®®äº¤æ¢æœ€å°åŒ–ï¼Œä»¥é™ä½ç½‘ç»œæµé‡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ä»‹ç»é‡Œè¯´å®ƒéå¸¸é€‚åˆ&quot;åœ¨ç‰©è”ç½‘é¢†åŸŸï¼Œä¼ æ„Ÿå™¨ä¸æœåŠ¡å™¨çš„é€šä¿¡ï¼Œä¿¡æ¯çš„æ”¶é›†&quot;ï¼Œè¦çŸ¥é“åµŒå…¥å¼è®¾å¤‡çš„è¿ç®—èƒ½åŠ›å’Œå¸¦å®½éƒ½ç›¸å¯¹è–„å¼±ï¼Œä½¿ç”¨è¿™ç§åè®®æ¥ä¼ é€’æ¶ˆæ¯å†é€‚åˆä¸è¿‡äº†ã€‚ ä½¿ç”¨Last Willå’ŒTestamentç‰¹æ€§é€šçŸ¥æœ‰å…³å„æ–¹å®¢æˆ·ç«¯å¼‚å¸¸ä¸­æ–­çš„æœºåˆ¶ã€‚ Last Willï¼šå³é—è¨€æœºåˆ¶ï¼Œç”¨äºé€šçŸ¥åŒä¸€ä¸»é¢˜ä¸‹çš„å…¶ä»–è®¾å¤‡å‘é€é—è¨€çš„è®¾å¤‡å·²ç»æ–­å¼€äº†è¿æ¥ã€‚ Testamentï¼šé—å˜±æœºåˆ¶ï¼ŒåŠŸèƒ½ç±»ä¼¼äºLast Willã€‚ 4 MQTTåè®®åŸç† 4.1 MQTTåè®®å®ç°æ–¹å¼ å®ç°MQTTåè®®éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é€šè®¯å®Œæˆï¼Œåœ¨é€šè®¯è¿‡ç¨‹ä¸­ï¼ŒMQTTåè®®ä¸­æœ‰ä¸‰ç§èº«ä»½ï¼šå‘å¸ƒè€…ï¼ˆPublishï¼‰ã€ä»£ç†ï¼ˆBrokerï¼‰ã€è®¢é˜…è€…ï¼ˆSubscribeï¼‰ã€‚å…¶ä¸­ï¼Œæ¶ˆæ¯çš„å‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½æ˜¯å®¢æˆ·ç«¯ï¼Œæ¶ˆæ¯ä»£ç†æ˜¯æœåŠ¡å™¨ï¼Œæ¶ˆæ¯å‘å¸ƒè€…å¯ä»¥åŒæ—¶æ˜¯è®¢é˜…è€…ã€‚ MQTTä¼ è¾“çš„æ¶ˆæ¯åˆ†ä¸ºï¼šä¸»é¢˜ï¼ˆTopicï¼‰å’Œè´Ÿè½½ï¼ˆPayloadï¼‰ä¸¤éƒ¨åˆ†ï¼š Topicï¼Œå¯ä»¥ç†è§£ä¸ºæ¶ˆæ¯çš„ç±»å‹ï¼Œè®¢é˜…è€…è®¢é˜…ï¼ˆSubscribeï¼‰åï¼Œå°±ä¼šæ”¶åˆ°è¯¥ä¸»é¢˜çš„æ¶ˆæ¯å†…å®¹ï¼ˆPayloadï¼‰ï¼› Payloadï¼Œå¯ä»¥ç†è§£ä¸ºæ¶ˆæ¯çš„å†…å®¹ï¼Œæ˜¯æŒ‡è®¢é˜…è€…å…·ä½“è¦ä½¿ç”¨çš„å†…å®¹ã€‚ 4.2 ç½‘ç»œä¼ è¾“ä¸åº”ç”¨æ¶ˆæ¯ MQTTä¼šæ„å»ºåº•å±‚ç½‘ç»œä¼ è¾“ï¼šå®ƒå°†å»ºç«‹å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¿æ¥ï¼Œæä¾›ä¸¤è€…ä¹‹é—´çš„ä¸€ä¸ªæœ‰åºçš„ã€æ— æŸçš„ã€åŸºäºå­—èŠ‚æµçš„åŒå‘ä¼ è¾“ã€‚ å½“åº”ç”¨æ•°æ®é€šè¿‡MQTTç½‘ç»œå‘é€æ—¶ï¼ŒMQTTä¼šæŠŠä¸ä¹‹ç›¸å…³çš„æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰å’Œä¸»é¢˜åï¼ˆTopicï¼‰ç›¸å…³è¿ã€‚ 4.3 MQTTå®¢æˆ·ç«¯ ä¸€ä¸ªä½¿ç”¨MQTTåè®®çš„åº”ç”¨ç¨‹åºæˆ–è€…è®¾å¤‡ï¼Œå®ƒæ€»æ˜¯å»ºç«‹åˆ°æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥ã€‚å®¢æˆ·ç«¯å¯ä»¥ï¼š å‘å¸ƒå…¶ä»–å®¢æˆ·ç«¯å¯èƒ½ä¼šè®¢é˜…çš„ä¿¡æ¯ï¼› è®¢é˜…å…¶å®ƒå®¢æˆ·ç«¯å‘å¸ƒçš„æ¶ˆæ¯ï¼› é€€è®¢æˆ–åˆ é™¤åº”ç”¨ç¨‹åºçš„æ¶ˆæ¯ï¼› æ–­å¼€ä¸æœåŠ¡å™¨è¿æ¥ã€‚ 4.4 MQTTæœåŠ¡å™¨ MQTTæœåŠ¡å™¨ä»¥ç§°ä¸º&quot;æ¶ˆæ¯ä»£ç†&quot;ï¼ˆBrokerï¼‰ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæˆ–ä¸€å°è®¾å¤‡ã€‚å®ƒä½äºæ¶ˆæ¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´ï¼Œå®ƒå¯ä»¥ï¼š æ¥å—æ¥è‡ªå®¢æˆ·çš„ç½‘ç»œè¿æ¥ï¼› æ¥å—å®¢æˆ·å‘å¸ƒçš„åº”ç”¨ä¿¡æ¯ï¼› å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è®¢é˜…å’Œé€€è®¢è¯·æ±‚ï¼› å‘è®¢é˜…çš„å®¢æˆ·è½¬å‘åº”ç”¨ç¨‹åºæ¶ˆæ¯ã€‚ 4.5 MQTTåè®®ä¸­çš„è®¢é˜…ã€ä¸»é¢˜ã€ä¼šè¯ 4.5.1 è®¢é˜…ï¼ˆSubscriptionï¼‰ è®¢é˜…åŒ…å«ä¸»é¢˜ç­›é€‰å™¨ï¼ˆTopic Filterï¼‰å’Œæœ€å¤§æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ã€‚è®¢é˜…ä¼šä¸ä¸€ä¸ªä¼šè¯ï¼ˆSessionï¼‰å…³è”ã€‚ä¸€ä¸ªä¼šè¯å¯ä»¥åŒ…å«å¤šä¸ªè®¢é˜…ã€‚æ¯ä¸€ä¸ªä¼šè¯ä¸­çš„æ¯ä¸ªè®¢é˜…éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„ä¸»é¢˜ç­›é€‰å™¨ã€‚ 4.5.2 ä¼šè¯ï¼ˆSessionï¼‰ æ¯ä¸ªå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥åå°±æ˜¯ä¸€ä¸ªä¼šè¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æœ‰çŠ¶æ€äº¤äº’ã€‚ä¼šè¯å­˜åœ¨äºä¸€ä¸ªç½‘ç»œä¹‹é—´ï¼Œä¹Ÿå¯èƒ½åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è·¨è¶Šå¤šä¸ªè¿ç»­çš„ç½‘ç»œè¿æ¥ã€‚ 4.5.3 ä¸»é¢˜åï¼ˆTopic Nameï¼‰ è¿æ¥åˆ°ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¶ˆæ¯çš„æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾ä¸æœåŠ¡å™¨çš„è®¢é˜…ç›¸åŒ¹é…ã€‚æœåŠ¡å™¨ä¼šå°†æ¶ˆæ¯å‘é€ç»™è®¢é˜…æ‰€åŒ¹é…æ ‡ç­¾çš„æ¯ä¸ªå®¢æˆ·ç«¯ã€‚ 4.5.4 ä¸»é¢˜ç­›é€‰å™¨ï¼ˆTopic Filterï¼‰ ä¸€ä¸ªå¯¹ä¸»é¢˜åé€šé…ç¬¦ç­›é€‰å™¨ï¼Œåœ¨è®¢é˜…è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œè¡¨ç¤ºè®¢é˜…æ‰€åŒ¹é…åˆ°çš„å¤šä¸ªä¸»é¢˜ã€‚ 4.5.5 è´Ÿè½½ï¼ˆPayloadï¼‰ æ¶ˆæ¯è®¢é˜…è€…æ‰€å…·ä½“æ¥æ”¶çš„å†…å®¹ã€‚ 4.6 MQTTåè®®ä¸­çš„æ–¹æ³• MQTTåè®®ä¸­å®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼ˆä¹Ÿè¢«ç§°ä¸ºåŠ¨ä½œï¼‰ï¼Œæ¥äºè¡¨ç¤ºå¯¹ç¡®å®šèµ„æºæ‰€è¿›è¡Œæ“ä½œã€‚è¿™ä¸ªèµ„æºå¯ä»¥ä»£è¡¨é¢„å…ˆå­˜åœ¨çš„æ•°æ®æˆ–åŠ¨æ€ç”Ÿæˆæ•°æ®ï¼Œè¿™å–å†³äºæœåŠ¡å™¨çš„å®ç°ã€‚é€šå¸¸æ¥è¯´ï¼Œèµ„æºæŒ‡æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–è¾“å‡ºã€‚ä¸»è¦æ–¹æ³•æœ‰ï¼š Connectï¼šç­‰å¾…ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚ Disconnectï¼šç­‰å¾…MQTTå®¢æˆ·ç«¯å®Œæˆæ‰€åšçš„å·¥ä½œï¼Œå¹¶ä¸æœåŠ¡å™¨æ–­å¼€TCP/IPä¼šè¯ã€‚ Subscribeï¼šç­‰å¾…å®Œæˆè®¢é˜…ã€‚ UnSubscribeï¼šç­‰å¾…æœåŠ¡å™¨å–æ¶ˆå®¢æˆ·ç«¯çš„ä¸€ä¸ªæˆ–å¤šä¸ªtopicsè®¢é˜…ã€‚ Publishï¼šMQTTå®¢æˆ·ç«¯å‘é€æ¶ˆæ¯è¯·æ±‚ï¼Œå‘é€å®Œæˆåè¿”å›åº”ç”¨ç¨‹åºçº¿ç¨‹ã€‚ 5 MQTTåè®®æ•°æ®åŒ…ç»“æ„ åœ¨MQTTåè®®ä¸­ï¼Œä¸€ä¸ªMQTTæ•°æ®åŒ…ç”±ï¼šå›ºå®šå¤´ï¼ˆFixed headerï¼‰ã€å¯å˜å¤´ï¼ˆVariable headerï¼‰ã€æ¶ˆæ¯ä½“ï¼ˆpayloadï¼‰ä¸‰éƒ¨åˆ†æ„æˆã€‚ å›ºå®šå¤´ï¼ˆFixed headerï¼‰ï¼šå­˜åœ¨äºæ‰€æœ‰MQTTæ•°æ®åŒ…ä¸­ï¼Œè¡¨ç¤ºæ•°æ®åŒ…ç±»å‹åŠæ•°æ®åŒ…çš„åˆ†ç»„ç±»æ ‡è¯†ã€‚ å¯å˜å¤´ï¼ˆVariable headerï¼‰ï¼šå­˜åœ¨äºéƒ¨åˆ†MQTTæ•°æ®åŒ…ä¸­ï¼Œæ•°æ®åŒ…ç±»å‹å†³å®šäº†å¯å˜å¤´æ˜¯å¦å­˜åœ¨åŠå…¶å…·ä½“å†…å®¹ã€‚ æ¶ˆæ¯ä½“ï¼ˆPayloadï¼‰ï¼šå­˜åœ¨äºéƒ¨åˆ†MQTTæ•°æ®åŒ…ä¸­ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æ”¶åˆ°çš„å…·ä½“å†…å®¹ã€‚ 5.1 MQTTå›ºå®šå¤´ å›ºå®šå¤´å­˜åœ¨äºæ‰€æœ‰MQTTæ•°æ®åŒ…ä¸­ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹ï¼šé¦–å­—èŠ‚(Byte 1) å’Œ å‰©ä½™æ¶ˆæ¯æŠ¥æ–‡é•¿åº¦(1-4å­—èŠ‚) Byte 1 é¦–å­—èŠ‚ï¼š Bit 7 6 5 4 é«˜å››ä½æ— ç¬¦å·å€¼ï¼Œç”¨äºè¡¨ç¤ºMQTTæ¶ˆæ¯çš„æŠ¥æ–‡ç±»å‹(MQTT Control Packet type)ï¼Œæ€»å…±å¯ä»¥è¡¨ç¤º2^4=16ç§åè®®ç±»å‹ã€‚ Bit 3 2 1 0 ä½å››ä½æ— ç¬¦å·å€¼ï¼Œç”¨ä½œæŸäº›æŠ¥æ–‡çš„ç‰¹æ®Šæ ‡è®°(Flags specific to each MQTT Control Packet type)ã€‚ Byte 2â€¦ Remaining Length å‰©ä½™æ¶ˆæ¯æŠ¥æ–‡é•¿åº¦ 5.1.1 MQTTæ•°æ®åŒ…ç±»å‹ MQTT Control Packet type ä½äº é¦–å­—èŠ‚çš„é«˜å››ä½ï¼Œå³Byte 1ä¸­çš„ bits 7-4ï¼Œç›¸äºä¸€ä¸ª4ä½çš„æ— ç¬¦å·å€¼ã€‚ç”¨äºç¡®å®šæŠ¥æ–‡ç±»å‹ã€‚å…±æœ‰2^4=16ç§ï¼Œå…¶ä¸­0000å’Œ1111æ˜¯ä¿ç•™å­—æ®µã€‚å…·ä½“å¦‚ä¸‹ï¼š æŠ¥æ–‡ç±»å‹ å­—æ®µå€¼ æ•°æ®æ–¹å‘ æè¿° ä¿ç•™ 0 ç¦ç”¨ ä¿ç•™ CONNECT 1 Client -&gt; Server å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ CONNACK 2 Server -&gt; Client è¿æ¥ç¡®è®¤ PUBLISH 3 Client &lt;-&gt; Server å‘å¸ƒæ¶ˆæ¯ PUBACK 4 Client &lt;-&gt; Server å‘å¸ƒç¡®è®¤ PUBREC 5 Client &lt;-&gt; Server æ¶ˆæ¯å·²æ¥æ”¶(QoS2ç¬¬ä¸€é˜¶æ®µ) PUBREL 6 Client &lt;-&gt; Server æ¶ˆæ¯é‡Šæ”¾(QoS2ç¬¬äºŒé˜¶æ®µ) PUBCOMP 7 Client &lt;-&gt; Server å‘å¸ƒç»“æŸ(QoS2ç¬¬ä¸‰é˜¶æ®µ) SUBSCRIBE 8 Client -&gt; Server å®¢æˆ·ç«¯è®¢é˜…è¯·æ±‚ SUBACK 9 Server -&gt; Client æœåŠ¡ç«¯è®¢é˜…ç¡®è®¤ UNSUBACRIBE 10 Client -&gt; Server å®¢æˆ·ç«¯å–æ¶ˆè®¢é˜… UNSUBACK 11 Server -&gt; Client æœåŠ¡ç«¯å–æ¶ˆè®¢é˜…ç¡®è®¤ PINGREQ 12 Client -&gt; Server å®¢æˆ·ç«¯å‘é€å¿ƒè·³ PINGRESP 13 Server -&gt; Client æœåŠ¡ç«¯å›å¤å¿ƒè·³ DISCONNECT 14 Client -&gt; Server å®¢æˆ·ç«¯æ–­å¼€è¿æ¥è¯·æ±‚ ä¿ç•™ 15 ç¦ç”¨ ä¿ç•™ 5.1.2 æ ‡è¯†ä½ Flags specific to each MQTT Control Packet type ä½äºé¦–å­—èŠ‚çš„ä½å››ä½ï¼Œå³Byte 1ä¸­bits 3-0ã€‚è¡¨ç¤ºæŸäº›æŠ¥æ–‡ç±»å‹çš„æ§åˆ¶å­—æ®µï¼Œå®é™…ä¸Šåªæœ‰å°‘æ•°æŠ¥æ–‡ç±»å‹æœ‰æ§åˆ¶ä½ã€‚ åœ¨ä¸ä½¿ç”¨æ ‡è¯†ä½çš„æ¶ˆæ¯ç±»å‹ä¸­ï¼Œæ ‡è¯†ä½è¢«ä½œä¸ºä¿ç•™ä½ã€‚å¦‚æœæ”¶åˆ°æ— æ•ˆçš„æ ‡å¿—æ—¶ï¼Œæ¥æ”¶ç«¯å¿…é¡»å…³é—­ç½‘ç»œè¿æ¥ï¼š DUPï¼šå‘å¸ƒæ¶ˆæ¯çš„å‰¯æœ¬ã€‚ç”¨æ¥åœ¨ä¿è¯æ¶ˆæ¯çš„å¯é ä¼ è¾“ï¼Œå¦‚æœè®¾ç½®ä¸º1ï¼Œåˆ™åœ¨ä¸‹é¢çš„å˜é•¿ä¸­å¢åŠ MessageIdï¼Œå¹¶ä¸”éœ€è¦å›å¤ç¡®è®¤ï¼Œä»¥ä¿è¯æ¶ˆæ¯ä¼ è¾“å®Œæˆï¼Œä½†ä¸èƒ½ç”¨äºæ£€æµ‹æ¶ˆæ¯é‡å¤å‘é€ã€‚ QoSï¼šå‘å¸ƒæ¶ˆæ¯çš„æœåŠ¡è´¨é‡ï¼Œå³ï¼šä¿è¯æ¶ˆæ¯ä¼ é€’çš„æ¬¡æ•°ã€‚ Ã˜00ï¼šæœ€å¤šä¸€æ¬¡ï¼Œå³ï¼š&lt;=1 Ã˜01ï¼šè‡³å°‘ä¸€æ¬¡ï¼Œå³ï¼š&gt;=1 Ã˜10ï¼šä¸€æ¬¡ï¼Œå³ï¼š=1 Ã˜11ï¼šé¢„ç•™ RETAINï¼š å‘å¸ƒä¿ç•™æ ‡è¯†ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¦ä¿ç•™è¿™æ¬¡æ¨é€çš„ä¿¡æ¯ï¼Œå¦‚æœæœ‰æ–°çš„è®¢é˜…è€…å‡ºç°ï¼Œå°±æŠŠè¿™æ¶ˆæ¯æ¨é€ç»™å®ƒï¼Œå¦‚æœè®¾æœ‰é‚£ä¹ˆæ¨é€è‡³å½“å‰è®¢é˜…è€…åé‡Šæ”¾ã€‚ 5.1.3 å‰©ä½™é•¿åº¦ï¼ˆRemaining Lengthï¼‰ ç”¨æ¥ä¿å­˜å˜é•¿å¤´éƒ¨(Variable Header)å’Œæ¶ˆæ¯ä½“(Payload)çš„æ€»å¤§å°ã€‚ä»ç¬¬äºŒå­—èŠ‚(Byte 2)å¼€å§‹ï¼Œæœ€é•¿å¯è¾¾4å­—èŠ‚ï¼Œæ‰€ä»¥å‰©ä½™é•¿åº¦èŒƒå›´æ˜¯Byte[2-5]ã€‚é‚£ä¹ˆæ€æ ·ç¡®å®šå…¶é•¿åº¦åˆ°åº•æ˜¯1å­—èŠ‚è¿˜æ˜¯4å­—èŠ‚å‘¢ï¼Ÿå®ƒå…ˆç”¨ä»ä½ä½Bit 0åˆ°Bit 6æ¥å­˜å‚¨ï¼Œå½“å‘ç°ä¸å¤Ÿæ—¶ï¼Œåˆ™å°† æœ€é«˜ä½Bit 7(é»˜è®¤éƒ½æ˜¯é«˜å­—èŠ‚åœ¨å‰)ç½®ä¸º 1ï¼Œè¡¨ç¤ºé•¿åº¦ä¸è¶³ï¼Œéœ€è¦ä½¿ç”¨ä¸‹ä¸€ä¸ªå­—èŠ‚ç»§ç»­ä¿å­˜ï¼Œå°±ç»§ç»­è®¡ç®—å­—èŠ‚é•¿åº¦ï¼›å¦‚æœæ˜¯0ï¼Œé‚£ä¹ˆå°±ä¸å†è®¡ç®—å­—èŠ‚é•¿åº¦ã€‚ æ¶ˆæ¯é•¿åº¦å¯ä»¥ç®€å•ç†è§£ä¸º128è¿›åˆ¶çš„æ•°æ®ï¼Œ4ä½é•¿åº¦æœ€å¤§å¯ä»¥è¡¨ç¤º128, 128*,* 128*128Byte=256MBã€‚ä½†æ˜¯è¿™ä¸ªé•¿åº¦çš„è®¡ç®—æœ‰äº›ç‰¹åˆ«ï¼Œå°±æ˜¯ä½ä½åœ¨å‰ï¼Œé«˜ä½åœ¨å(å› ä¸ºæ­£å¸¸çš„è¡¨ç¤ºæ–¹æ³•æ˜¯é«˜ä½åœ¨å‰ï¼Œä½ä½åœ¨å)ï¼Œå­—èŠ‚æœ€é«˜ä½Bit7ç”¨äºæ ‡è®°æ˜¯å¦éœ€è¦ç»§ç»­è®¡ç®—æ¶ˆæ¯é•¿åº¦ã€‚ä»¥ä¸‹æ˜¯æ¶ˆæ¯é•¿åº¦çš„é•¿åº¦èŒƒå›´ï¼š å­—èŠ‚æ•° é•¿åº¦æœ€å°å€¼ é•¿åº¦æœ€å¤§å€¼ 1 0(0x00) 127(0x7F) 2 128 (0x80, 0x01) 16 383 (0xFF, 0x7F) 3 16 384 (0x80, 0x80, 0x01) 2 097 151 (0xFF, 0xFF, 0x7F) 4 2 097 152 (0x80, 0x80, 0x80, 0x01) 268 435 455 (0xFF, 0xFF, 0xFF, 0x7F) 5.2 MQTTå¯å˜å¤´ MQTTæ•°æ®åŒ…ä¸­åŒ…å«ä¸€ä¸ªå¯å˜å¤´ï¼Œå®ƒé©»ä½äºå›ºå®šçš„å¤´å’Œè´Ÿè½½ä¹‹é—´ã€‚å¯å˜å¤´çš„å†…å®¹å› æ•°æ®åŒ…ç±»å‹è€Œä¸åŒï¼Œè¾ƒå¸¸çš„åº”ç”¨æ˜¯ä½œä¸ºåŒ…çš„æ ‡è¯†ï¼š å¾ˆå¤šç±»å‹æ•°æ®åŒ…ä¸­éƒ½åŒ…æ‹¬ä¸€ä¸ª2å­—èŠ‚çš„æ•°æ®åŒ…æ ‡è¯†å­—æ®µï¼Œè¿™äº›ç±»å‹çš„åŒ…æœ‰ï¼šPUBLISH (QoS &gt; 0)ã€PUBACKã€PUBRECã€PUBRELã€PUBCOMPã€SUBSCRIBEã€SUBACKã€UNSUBSCRIBEã€UNSUBACKã€‚ 5.3 Payloadæ¶ˆæ¯ä½“ Payloadæ¶ˆæ¯ä½“ä½MQTTæ•°æ®åŒ…çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼ŒåŒ…å«CONNECTã€SUBSCRIBEã€SUBACKã€UNSUBSCRIBEå››ç§ç±»å‹çš„æ¶ˆæ¯ï¼š CONNECTï¼Œæ¶ˆæ¯ä½“å†…å®¹ä¸»è¦æ˜¯ï¼šå®¢æˆ·ç«¯çš„ClientIDã€è®¢é˜…çš„Topicã€Messageä»¥åŠç”¨æˆ·åå’Œå¯†ç ã€‚ SUBSCRIBEï¼Œæ¶ˆæ¯ä½“å†…å®¹æ˜¯ä¸€ç³»åˆ—çš„è¦è®¢é˜…çš„ä¸»é¢˜ä»¥åŠQoSã€‚ SUBACKï¼Œæ¶ˆæ¯ä½“å†…å®¹æ˜¯æœåŠ¡å™¨å¯¹äºSUBSCRIBEæ‰€ç”³è¯·çš„ä¸»é¢˜åŠQoSè¿›è¡Œç¡®è®¤å’Œå›å¤ã€‚ UNSUBSCRIBEï¼Œæ¶ˆæ¯ä½“å†…å®¹æ˜¯è¦è®¢é˜…çš„ä¸»é¢˜ã€‚ ","link":"https://kangjn.github.io/post/mqtt-jian-jie/"},{"title":"Vue2.0 + TypeScript é¡¹ç›®æ­å»º","content":"å®‰è£… cli Vue CLI 3 å¯ä»¥ä½¿ç”¨ TypeScript ç”Ÿæˆæ–°å·¥ç¨‹ã€‚åˆ›å»ºæ–¹å¼ï¼š npm install --global @vue/cli 2. åˆ›å»ºä¸€ä¸ªæ–°å·¥ç¨‹ï¼Œå¹¶é€‰æ‹© &quot;Manually select features (æ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§)&quot; é€‰é¡¹ vue create my-project-name vue create my-project-name Vue CLI v4.5.12 ? Please pick a preset: Manually select features ? Check the features needed for your project: Choose Vue version, Babel, TS, PWA, Router, Vuex, CSS Pre-processors, Linter, Unit ? Choose a version of Vue.js that you want to start the project with 2.x ? Use class-style component syntax? Yes ? Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? Yes ? Use history mode for router? (Requires proper server setup for index fallback in production) Yes ? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default): Less ? Pick a linter / formatter config: Standard ? Pick additional lint features: Lint on save ? Pick a unit testing solution: Mocha ? Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files ? Save this as a preset for future projects? No é…ç½® vue.config.js æ ¹ç›®å½•æ–°å»ºvue.config.jsæ–‡ä»¶ 1ã€publicPath é¡¹ç›®æ ¹è·¯å¾„ module.exports = { publicPath: '/',//æ ¹è·¯å¾„ cli3.0ä»¥ä¸Šä½¿ç”¨publicPath } 2ã€assetsDir é™æ€èµ„æºç›®å½•(js,css,img,fonts)è¿™äº›æ–‡ä»¶éƒ½å¯ä»¥å†™é‡Œé¢ module.exports = { assetsDir: 'static',// é™æ€èµ„æºç›®å½•(js,css,img,fonts)è¿™äº›æ–‡ä»¶éƒ½å¯ä»¥å†™é‡Œé¢ } 3ã€outputDir æ‰“åŒ…è¾“å‡ºç›®å½• module.exports = { outputDir: 'dist',//æ‰“åŒ…çš„æ—¶å€™ç”Ÿæˆçš„ä¸€ä¸ªæ–‡ä»¶å } 4ã€lintOnSave æ˜¯å¦å¼€å¯eslintä¿å­˜æ£€æµ‹ ,å®ƒçš„æœ‰æ•ˆå€¼ä¸º true || false || 'error' module.exports = { lintOnSave: 'error',//æ˜¯å¦å¼€å¯eslintä¿å­˜æ£€æµ‹ ,å®ƒçš„æœ‰æ•ˆå€¼ä¸º true || false || 'error' } 5ã€biyi-admin æŒ‡å®šå¯¹ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…è¿›è¡Œbabel-polyfillå¤„ç† module.exports = { transpileDependencies: [ 'biyi-admin', // æŒ‡å®šå¯¹ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…è¿›è¡Œbabel-polyfillå¤„ç† ], } 6ã€productionSourceMap ç”Ÿäº§ç¯å¢ƒæ˜¯å¦ç”Ÿæˆ sourceMap æ–‡ä»¶ module.exports = { productionSourceMap: false, // ç”Ÿäº§ç¯å¢ƒæ˜¯å¦ç”Ÿæˆ sourceMap æ–‡ä»¶ } 7ã€åˆ«åé…ç½® '@' './src' ; '@a' './src/assets' ; '@c' './src/components' ; '@p' './src/pages' const path = require('path'); module.exports = { chainWebpack: config =&gt; { // åˆ«åé…ç½® config.resolve.alias .set('@', path.resolve(__dirname, './src')) .set('@a', path.resolve(__dirname, './src/assets')) .set('@c', path.resolve(__dirname, './src/components')) .set('@p', path.resolve(__dirname, './src/pages')) }, } 8ã€è§£å†³ie11å…¼å®¹ES6 å®‰è£…ä¾èµ– yarn add babel-polyfill module.exports = { chainWebpack: config =&gt; { // è§£å†³ie11å…¼å®¹ES6 config.entry('main').add('babel-polyfill'); }, } 9ã€symlinks ç¬¦å·é“¾æ¥çš„èµ„æºå°†è§£æåˆ°å…¶å®é™…è·¯å¾„ï¼Œè€Œä¸æ˜¯ç¬¦å·é“¾æ¥çš„ä½ module.exports = { chainWebpack: config =&gt; { // ä¿®å¤HMR config.resolve.symlinks(true); }, } 10ã€gzip å‹ç¼© yarn add terser-webpack-plugin --dev yarn add compression-webpack-plugin --dev package.json { &quot;openGzip&quot;: true, } let {version, openGzip} = require('./package.json'); module.exports = { configureWebpack: config =&gt; { if (process.env.NODE_ENV === 'production') { // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;production&quot;; if (openGzip) { config.plugins.push( new CompressionWebpackPlugin({ filename: '[path].gz[query]', algorithm: 'gzip', test: /.js|\\.html|.\\css/, // åŒ¹é…æ–‡ä»¶å threshold: 10240, // åªæœ‰å¤§å°å¤§äºè¯¥å€¼çš„èµ„æºä¼šè¢«å¤„ç† 10240 minRatio: 0.8, // åªæœ‰å‹ç¼©ç‡å°äºè¿™ä¸ªå€¼çš„èµ„æºæ‰ä¼šè¢«å¤„ç† deleteOriginalAssets: false, // åˆ é™¤åŸæ–‡ä»¶ }) ) } } else { // ä¸ºå¼€å‘ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;development&quot;; } }, } 11ã€æ‰“åŒ…æ–‡ä»¶å¤§å°é…ç½® module.exports = { configureWebpack: config =&gt; { if (process.env.NODE_ENV === 'production') { // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;production&quot;; // æ‰“åŒ…æ–‡ä»¶å¤§å°é…ç½® config[&quot;performance&quot;] = { hints: &quot;error&quot;, maxEntrypointSize: 400000, maxAssetSize: 30000000 }; } else { // ä¸ºå¼€å‘ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;development&quot;; } }, } 12ã€å°†æ¯ä¸ªä¾èµ–åŒ…æ‰“åŒ…æˆå•ç‹¬çš„jsæ–‡ä»¶ let {version, openGzip} = require('./package.json'); module.exports = { configureWebpack: config =&gt; { if (process.env.NODE_ENV === 'production') { // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;production&quot;; // å°†æ¯ä¸ªä¾èµ–åŒ…æ‰“åŒ…æˆå•ç‹¬çš„jsæ–‡ä»¶ Object.assign(config, { output: { ...config.output, filename: `static/js/[name].[chunkhash].${version}.js`, chunkFilename: `static/js/[name].[chunkhash].${version}.js` }, }) } else { // ä¸ºå¼€å‘ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;development&quot;; } }, } 13ã€å»é™¤çº¿ä¸Šçš„ console module.exports = { configureWebpack: config =&gt; { if (process.env.NODE_ENV === 'production') { // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;production&quot;; Object.assign(config, { optimization: { minimizer: [ new TerserPlugin({ cache: true, // æ˜¯å¦ç¼“å­˜ // paraller: true, // æ˜¯å¦å¹¶è¡Œæ‰“åŒ… sourceMap: true, terserOptions: { compress: { pure_funcs: [&quot;console.log&quot;] } } }) ], } }) } else { // ä¸ºå¼€å‘ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &quot;development&quot;; } }, } 14ã€cssç›¸å…³é…ç½® æ ¹ç›®å½•åˆ›å»º postcss.config.js module.exports = { plugins: [ // å…¼å®¹æµè§ˆå™¨ï¼Œæ·»åŠ å‰ç¼€ require('autoprefixer')({ overrideBrowserslist: [ &quot;Android 4.1&quot;, &quot;iOS 7.1&quot;, &quot;Chrome &gt; 31&quot;, &quot;ff &gt; 31&quot;, &quot;ie &gt;= 8&quot; //'last 10 versions', // æ‰€æœ‰ä¸»æµæµè§ˆå™¨æœ€è¿‘10ç‰ˆæœ¬ç”¨ ], grid: true }) ] } module.exports = { // cssç›¸å…³é…ç½® css: { extract: false, // æ˜¯å¦ä½¿ç”¨cssåˆ†ç¦»æ’ä»¶ ExtractTextPlugin sourceMap: false, // å¼€å¯ CSS source maps? loaderOptions: { less: { javascriptEnabled: true }, css: {}, // è¿™é‡Œçš„é€‰é¡¹ä¼šä¼ é€’ç»™ css-loader postcss: {} // è¿™é‡Œçš„é€‰é¡¹ä¼šä¼ é€’ç»™ postcss-loader }, // cssé¢„è®¾å™¨é…ç½®é¡¹ è¯¦è§https://cli.vuejs.org/zh/config/#css-loaderoptions requireModuleExtension: true // å¯ç”¨ CSS requireModuleExtension for all css / pre-processor files. }, } 15ã€parallel æ˜¯å¦ä¸º Babel æˆ– TypeScript ä½¿ç”¨ thread-loaderã€‚è¯¥é€‰é¡¹åœ¨ç³»ç»Ÿçš„ CPU æœ‰å¤šäºä¸€ä¸ªå†…æ ¸æ—¶è‡ªåŠ¨å¯ç”¨ï¼Œä»…ä½œç”¨äºç”Ÿäº§æ„å»ºã€‚ module.exports = { parallel: require('os').cpus().length &gt; 1, // æ˜¯å¦ä¸º Babel æˆ– TypeScript ä½¿ç”¨ thread-loaderã€‚è¯¥é€‰é¡¹åœ¨ç³»ç»Ÿçš„ CPU æœ‰å¤šäºä¸€ä¸ªå†…æ ¸æ—¶è‡ªåŠ¨å¯ç”¨ï¼Œä»…ä½œç”¨äºç”Ÿäº§æ„å»ºã€‚ } 16ã€webpack-dev-server ç›¸å…³é…ç½® module.exports = { devServer: { open: true,// æ‰“å¼€è°·æ­Œ host: '0.0.0.0', // å…è®¸å¤–éƒ¨ipè®¿é—® port: 8081, // ç«¯å£ https: false, // å¯ç”¨https overlay: { warnings: true, errors: true }, // é”™è¯¯ã€è­¦å‘Šåœ¨é¡µé¢å¼¹å‡º proxy: { '/api': { target: ${process.env.VUE_APP_BASE_API}/api, changeOrigin: true, // å…è®¸websocketsè·¨åŸŸ // ws: true, pathRewrite: { '^/api': '' } } } // ä»£ç†è½¬å‘é…ç½®ï¼Œç”¨äºè°ƒè¯•ç¯å¢ƒ }, } 17ã€ç¯å¢ƒå˜é‡å’Œæ¨¡å¼ æ ¹ç›®å½•æ·»åŠ  .env æ–‡ä»¶ ã€é»˜è®¤ç¯å¢ƒå˜é‡ã€‘ NODE_ENV = 'production' VUE_APP_MOCK = false VUE_APP_CDN = '' VUE_APP_BASE_API = '' æ ¹ç›®å½•æ·»åŠ  .env.development æ–‡ä»¶ ã€å¼€å‘ç¯å¢ƒå˜é‡ã€‘ NODE_ENV = 'development' VUE_APP_MOCK = true æ ¹ç›®å½•æ·»åŠ  .env.production æ–‡ä»¶ ã€ç”Ÿäº§ç¯å¢ƒå˜é‡ã€‘ NODE_ENV = 'production' VUE_APP_MOCK = false VUE_APP_BASE_API = '' VUE_APP_CDN = '' æœ€ç»ˆ vue.config.js /** @FileName vue.config.js @Author @Version V 0.0.1 @Date @Title Vueé…ç½®æ–‡ä»¶ @Desc **/ const path = require('path'); const TerserPlugin = require('terser-webpack-plugin'); const CompressionWebpackPlugin = require('compression-webpack-plugin'); const isProduction = process.env.NODE_ENV === 'production'; const {version, openGzip} = require('./package.json'); module.exports = { devServer: { open: false, host: '0.0.0.0', port: 8082, https: false, disableHostCheck: true, overlay: { warnings: true, errors: true }, proxy: { '/api': { target: ${process.env.VUE_APP_BASE_API}, changeOrigin: true, // ws: true, pathRewrite: { '^/api': '' } } } }, chainWebpack: config =&gt; { config.entry('main').add('babel-polyfill'); config.resolve.symlinks(true); config.resolve.alias .set('@', path.resolve(__dirname, './src')) .set('@a', path.resolve(__dirname, './src/assets')) .set('@c', path.resolve(__dirname, './src/components')) .set('@p', path.resolve(__dirname, './src/pages')) .set('@l', path.resolve(__dirname, './src/layout')); }, publicPath: '/', assetsDir: 'static', outputDir: 'dist', lintOnSave: 'error', transpileDependencies: ['biyi-admin'], productionSourceMap: false, configureWebpack: config =&gt; { console.log(isProduction); if (isProduction) { config.mode = 'production'; if (openGzip) { config.plugins.push( new CompressionWebpackPlugin({ filename: '[path].gz[query]', algorithm: 'gzip', test: /.js|\\.html|.\\css/, // åŒ¹é…æ–‡ä»¶å threshold: 10240, // åªæœ‰å¤§å°å¤§äºè¯¥å€¼çš„èµ„æºä¼šè¢«å¤„ç† 10240 minRatio: 0.8, // åªæœ‰å‹ç¼©ç‡å°äºè¿™ä¸ªå€¼çš„èµ„æºæ‰ä¼šè¢«å¤„ç† deleteOriginalAssets: false // åˆ é™¤åŸæ–‡ä»¶ }) ); // å°†æ¯ä¸ªä¾èµ–åŒ…æ‰“åŒ…æˆå•ç‹¬çš„jsæ–‡ä»¶ Object.assign(config, { performance: { hints: 'error', maxEntrypointSize: 10000000, maxAssetSize: 30000000 }, output: { ...config.output, filename: `static/js/[name].[chunkhash].${version}.js`, chunkFilename: `static/js/[name].[chunkhash].${version}.js` }, optimization: { minimizer: [ new TerserPlugin({ cache: true, // æ˜¯å¦ç¼“å­˜ // paraller: true, // æ˜¯å¦å¹¶è¡Œæ‰“åŒ… sourceMap: true, terserOptions: { compress: { pure_funcs: ['console.log'] } } }) ] } }); } } else { config.mode = 'development'; } }, css: { extract: false, sourceMap: false, loaderOptions: { less: { javascriptEnabled: true }, css: {}, postcss: {} }, requireModuleExtension: true }, parallel: require('os').cpus().length &gt; 1, pwa: {}, pluginOptions: {} }; package.json { &quot;name&quot;: &quot;big-data-platform&quot;, &quot;version&quot;: &quot;0.1.0&quot;, &quot;private&quot;: true, &quot;openGzip&quot;: true, &quot;scripts&quot;: { &quot;serve&quot;: &quot;vue-cli-service serve&quot;, &quot;build&quot;: &quot;vue-cli-service build&quot;, &quot;test:unit&quot;: &quot;vue-cli-service test:unit&quot;, &quot;lint&quot;: &quot;vue-cli-service lint&quot; }, &quot;dependencies&quot;: { &quot;axios&quot;: &quot;^0.21.1&quot;, &quot;babel-polyfill&quot;: &quot;^6.26.0&quot;, &quot;core-js&quot;: &quot;^3.6.5&quot;, &quot;localforage&quot;: &quot;^1.9.0&quot;, &quot;moment&quot;: &quot;^2.29.1&quot;, &quot;register-service-worker&quot;: &quot;^1.7.1&quot;, &quot;view-design&quot;: &quot;^4.5.0&quot;, &quot;vue&quot;: &quot;^2.6.11&quot;, &quot;vue-class-component&quot;: &quot;^7.2.3&quot;, &quot;vue-property-decorator&quot;: &quot;^9.1.2&quot;, &quot;vue-router&quot;: &quot;^3.2.0&quot;, &quot;vuex&quot;: &quot;^3.4.0&quot; }, &quot;devDependencies&quot;: { &quot;@types/chai&quot;: &quot;^4.2.11&quot;, &quot;@types/mocha&quot;: &quot;^5.2.4&quot;, &quot;@types/mockjs&quot;: &quot;^1.0.3&quot;, &quot;@typescript-eslint/eslint-plugin&quot;: &quot;^4.18.0&quot;, &quot;@typescript-eslint/parser&quot;: &quot;^4.18.0&quot;, &quot;@vue/cli-plugin-babel&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-eslint&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-pwa&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-router&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-typescript&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-unit-mocha&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-vuex&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-service&quot;: &quot;~4.5.0&quot;, &quot;@vue/eslint-config-standard&quot;: &quot;^5.1.2&quot;, &quot;@vue/eslint-config-typescript&quot;: &quot;^7.0.0&quot;, &quot;@vue/test-utils&quot;: &quot;^1.0.3&quot;, &quot;chai&quot;: &quot;^4.1.2&quot;, &quot;compression-webpack-plugin&quot;: &quot;^7.1.2&quot;, &quot;eslint&quot;: &quot;^6.7.2&quot;, &quot;eslint-plugin-import&quot;: &quot;^2.20.2&quot;, &quot;eslint-plugin-node&quot;: &quot;^11.1.0&quot;, &quot;eslint-plugin-promise&quot;: &quot;^4.2.1&quot;, &quot;eslint-plugin-standard&quot;: &quot;^4.0.0&quot;, &quot;eslint-plugin-vue&quot;: &quot;^6.2.2&quot;, &quot;less&quot;: &quot;^3.0.4&quot;, &quot;less-loader&quot;: &quot;^5.0.0&quot;, &quot;mockjs&quot;: &quot;^1.1.0&quot;, &quot;terser-webpack-plugin&quot;: &quot;^5.1.1&quot;, &quot;typescript&quot;: &quot;~4.1.5&quot;, &quot;vue-template-compiler&quot;: &quot;^2.6.11&quot; } } é…ç½®eslint package.json æ–‡ä»¶ { &quot;devDependencies&quot;: { &quot;@typescript-eslint/eslint-plugin&quot;: &quot;^4.18.0&quot;, &quot;@typescript-eslint/parser&quot;: &quot;^4.18.0&quot;, &quot;eslint&quot;: &quot;^6.7.2&quot;, &quot;eslint-plugin-import&quot;: &quot;^2.20.2&quot;, &quot;eslint-plugin-node&quot;: &quot;^11.1.0&quot;, &quot;eslint-plugin-promise&quot;: &quot;^4.2.1&quot;, &quot;eslint-plugin-standard&quot;: &quot;^4.0.0&quot;, &quot;eslint-plugin-vue&quot;: &quot;^6.2.2&quot;, }, } æ ¹ç›®å½•æ·»åŠ  .eslintrc.js é…ç½®æ–‡ä»¶ module.exports = { root: true, env: { node: true }, extends: [ 'plugin:vue/essential', '@vue/standard', '@vue/typescript/recommended' ], parserOptions: { ecmaVersion: 2020 }, rules: { 'no-console': 'off', 'indent': ['off', 2], 'semi': [2, 'always'], // è¯­å¥å¼ºåˆ¶åˆ†å·ç»“å°¾ 'quotes': [2, 'single'], // jså¿…é¡»ä½¿ç”¨å•å¼•å· 'vue/no-parsing-error': 'off', 'no-irregular-whitespace': 'off', 'no-async-promise-executor': 'off', 'space-before-function-paren': 'off', 'object-curly-spacing': ['error', 'never'], 'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off', '@typescript-eslint/no-this-alias': 'off', '@typescript-eslint/ban-ts-ignore': 'off', '@typescript-eslint/no-unused-vars': 'off', '@typescript-eslint/ban-ts-comment': 'off', '@typescript-eslint/no-explicit-any': 'off', '@typescript-eslint/no-empty-function': 'off', '@typescript-eslint/explicit-module-boundary-types': 'off' }, overrides: [ { files: [ '/tests/*.{j,t}s?(x)', '/tests/unit/**/*.spec.{j,t}s?(x)' ], env: { mocha: true } } ] } å·¥å…·ç±»å°è£… Cookieæ“ä½œ /** @FileName cookie.ts @Author @Version V 0.0.1 @Date @Title Cookieæ“ä½œ @Desc **/ /** è®¾ç½®cookie @param name @param value @param hours @param path */ const setCookie = (name: string, value: any, hours: number, path: string) =&gt; { const expires = new Date(); expires.setTime(expires.getTime() + hours * 3600000); const expiresTxt = typeof hours === 'string' ? '' : ;expires=${expires.toUTCString()}; document.cookie = ${escape(name)}=${escape(value)}${expiresTxt}${path === '' ? '' :;path=${path}}; }; /** è·å–cookieå€¼ @param name */ const getCookieValue = (name: string) =&gt; { let nameTxt = escape(name); // è¯»cookieå±æ€§ï¼Œè¿™å°†è¿”å›æ–‡æ¡£çš„æ‰€æœ‰cookie const allCookies = document.cookie; // æŸ¥æ‰¾åä¸ºnameçš„cookieçš„å¼€å§‹ä½ç½® nameTxt += '='; const pos = allCookies.indexOf(nameTxt); // å¦‚æœæ‰¾åˆ°äº†å…·æœ‰è¯¥åå­—çš„cookieï¼Œé‚£ä¹ˆæå–å¹¶ä½¿ç”¨å®ƒçš„å€¼ if (pos !== -1) { // å¦‚æœposå€¼ä¸º-1åˆ™è¯´æ˜æœç´¢'version='å¤±è´¥ const start = pos + nameTxt.length; // cookieå€¼å¼€å§‹çš„ä½ç½® let end = allCookies.indexOf(';', start); // ä»cookieå€¼å¼€å§‹çš„ä½ç½®èµ·æœç´¢ç¬¬ä¸€ä¸ª';'çš„ä½ç½®,å³cookieå€¼ç»“å°¾çš„ä½ç½® if (end === -1) end = allCookies.length; // å¦‚æœendå€¼ä¸º-1è¯´æ˜cookieåˆ—è¡¨é‡Œåªæœ‰ä¸€ä¸ªcookie // æå–cookieçš„å€¼ return allCookies.substring(start, end); // å¯¹å®ƒè§£ç  } return ''; // æœç´¢å¤±è´¥ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² }; /** åˆ é™¤cookie @param name @param path */ const deleteCookie = (name: string, path: string) =&gt; { const expires = new Date(0); document.cookie = ${escape(name)}=;expires=${expires.toUTCString()}${path === '' ? '' :;path=${path}}; }; export default { setCookie, getCookieValue, deleteCookie }; createRoutes yarn add view-design /** @FileName createRoutes.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import Vue from 'vue'; import VueRouter from 'vue-router'; import {LoadingBar} from 'view-design'; Vue.use(VueRouter); const VueRouterPush = VueRouter.prototype.push; VueRouter.prototype.push = function push(to: any): any { const a: any = VueRouterPush.call(this, to); a.catch((err: any) =&gt; err); return a; }; LoadingBar.config({ color: '#ff9900', failedColor: '#ed4014', height: 3, duration: 800 }); const createRouter = (baseRoutes: any = [], routes: any = [], base = '', homeName = 'home', mode: any = 'history', title = '', turnTo: any = () =&gt; { }) =&gt; { const router = new VueRouter({ mode: mode, base: base, routes: [ ...routes, ...baseRoutes ] }); // å…¨å±€å®ˆå« router.beforeEach((to: any, from: any, next: any) =&gt; { LoadingBar.start(); turnTo(to, next, homeName); }); // å…¨å±€åç½®é’©å­ router.afterEach((to: any) =&gt; { if (to.meta.title) { document.title = title ? to.meta.title + '-' + title : to.meta.title; } LoadingBar.finish(); window.scrollTo(0, 0); }); return router; }; export default createRouter; gbk /** @FileName gbk.js @Author @Version V 0.0.1 @Date @Title åºåˆ—åŒ– ååºåˆ—åŒ– @Desc */ / eslint-disable */ const util = function () { var data = function (zipData: any) { return zipData .replace(/#(\\d+)$/g, function (a: any, b: any) { return Array(+b + 3).join('#'); }) .replace(/#/g, '####') .replace(/(\\w\\w)ğŸ˜¦[\\w#]+)(?:,|)/g, function (a: any, hd: any, dt: any) { return dt.replace(/../g, function (a: any) { if (a != &#039;##&#039;) { return hd + a; } else { return a; } }); }); }(&#039;4e:020405060f12171f20212326292e2f313335373c40414244464a5155575a5b6263646567686a6b6c6d6e6f727475767778797a7b7c7d7f808182838485878a#909697999c9d9ea3aaafb0b1b4b6b7b8b9bcbdbec8cccfd0d2dadbdce0e2e6e7e9edeeeff1f4f8f9fafcfe,4f:00020304050607080b0c12131415161c1d212328292c2d2e31333537393b3e3f40414244454748494a4b4c525456616266686a6b6d6e7172757778797a7d8081828586878a8c8e909293959698999a9c9e9fa1a2a4abadb0b1b2b3b4b6b7b8b9babbbcbdbec0c1c2c6c7c8c9cbcccdd2d3d4d5d6d9dbe0e2e4e5e7ebecf0f2f4f5f6f7f9fbfcfdff,50:000102030405060708090a#0b0e1011131516171b1d1e20222324272b2f303132333435363738393b3d3f404142444546494a4b4d5051525354565758595b5d5e5f6061626364666768696a6b6d6e6f70717273747578797a7c7d818283848687898a8b8c8e8f909192939495969798999a9b9c9d9e9fa0a1a2a4a6aaabadaeafb0b1b3b4b5b6b7b8b9bcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdced0d1d2d3d4d5d7d8d9dbdcdddedfe0e1e2e3e4e5e8e9eaebeff0f1f2f4f6f7f8f9fafcfdfeff,51:00010203040508#090a0c0d0e0f1011131415161718191a1b1c1d1e1f2022232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e42474a4c4e4f5052535758595b5d5e5f606163646667696a6f727a7e7f838486878a8b8e8f90919394989a9d9e9fa1a3a6a7a8a9aaadaeb4b8b9babebfc1c2c3c5c8cacdced0d2d3d4d5d6d7d8d9dadcdedfe2e3e5e6e7e8e9eaeceef1f2f4f7fe,52:0405090b0c0f101314151c1e1f2122232526272a2c2f313234353c3e4445464748494b4e4f5253555758#595a5b5d5f6062636466686b6c6d6e7071737475767778797a7b7c7e808384858687898a8b8c8d8e8f91929495969798999a9ca4a5a6a7aeafb0b4b5b6b7b8b9babbbcbdc0c1c2c4c5c6c8cacccdcecfd1d3d4d5d7d9dadbdcdddee0e1e2e3e5e6e7e8e9eaebecedeeeff1f2f3f4f5f6f7f8fbfcfd,53:0102030407090a0b0c0e11121314181b1c1e1f2224252728292b2c2d2f3031323334353637383c3d404244464b4c4d505458595b5d65686a6c6d7276797b7c7d7e80818387888a8e8f#90919293949697999b9c9ea0a1a4a7aaabacadafb0b1b2b3b4b5b7b8b9babcbdbec0c3c4c5c6c7cecfd0d2d3d5dadcdddee1e2e7f4fafeff,54:000205070b1418191a1c2224252a303336373a3d3f4142444547494c4d4e4f515a5d5e5f6061636567696a6b6c6d6e6f7074797a7e7f8183858788898a8d919397989c9e9fa0a1a2a5aeb0b2b5b6b7b9babcbec3c5cacbd6d8dbe0e1e2e3e4ebeceff0f1f4f5f6f7f8f9fbfe,55:0002030405080a0b0c0d0e121315161718191a1c1d1e1f212526#28292b2d3234353638393a3b3d40424547484b4c4d4e4f515253545758595a5b5d5e5f60626368696b6f7071727374797a7d7f85868c8d8e9092939596979a9b9ea0a1a2a3a4a5a6a8a9aaabacadaeafb0b2b4b6b8babcbfc0c1c2c3c6c7c8cacbcecfd0d5d7d8d9dadbdee0e2e7e9edeef0f1f4f6f8f9fafbfcff,56:0203040506070a0b0d1011121314151617191a1c1d202122252628292a2b2e2f30333537383a3c3d3e404142434445464748494a4b4f5051525355565a5b5d5e5f6061#636566676d6e6f70727374757778797a7d7e7f80818283848788898a8b8c8d9091929495969798999a9b9c9d9e9fa0a1a2a4a5a6a7a8a9aaabacadaeb0b1b2b3b4b5b6b8b9babbbdbebfc0c1c2c3c4c5c6c7c8c9cbcccdcecfd0d1d2d3d5d6d8d9dce3e5e6e7e8e9eaeceeeff2f3f6f7f8fbfc,57:00010205070b0c0d0e0f101112131415161718191a1b1d1e202122242526272b313234353637383c3d3f414344454648494b52535455565859626365676c6e707172747578797a7d7e7f80#818788898a8d8e8f90919495969798999a9c9d9e9fa5a8aaacafb0b1b3b5b6b7b9babbbcbdbebfc0c1c4c5c6c7c8c9cacccdd0d1d3d6d7dbdcdee1e2e3e5e6e7e8e9eaebeceef0f1f2f3f5f6f7fbfcfeff,58:0103040508090a0c0e0f101213141617181a1b1c1d1f222325262728292b2c2d2e2f31323334363738393a3b3c3d3e3f4041424345464748494a4b4e4f505253555657595a5b5c5d5f6061626364666768696a6d6e6f707172737475767778797a7b7c7d7f82848687888a8b8c#8d8e8f909194959697989b9c9da0a1a2a3a4a5a6a7aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbdbebfc0c2c3c4c6c7c8c9cacbcccdcecfd0d2d3d4d6d7d8d9dadbdcdddedfe0e1e2e3e5e6e7e8e9eaedeff1f2f4f5f7f8fafbfcfdfeff,59:000103050608090a0b0c0e1011121317181b1d1e2021222326282c30323335363b3d3e3f404345464a4c4d505253595b5c5d5e5f616364666768696a6b6c6d6e6f70717275777a7b7c7e7f8085898b8c8e8f90919495989a9b9c9d9fa0a1a2a6#a7acadb0b1b3b4b5b6b7b8babcbdbfc0c1c2c3c4c5c7c8c9cccdcecfd5d6d9dbdedfe0e1e2e4e6e7e9eaebedeeeff0f1f2f3f4f5f6f7f8fafcfdfe,5a:00020a0b0d0e0f101214151617191a1b1d1e2122242627282a2b2c2d2e2f3033353738393a3b3d3e3f414243444547484b4c4d4e4f5051525354565758595b5c5d5e5f60616364656668696b6c6d6e6f7071727378797b7c7d7e808182838485868788898a8b8c8d8e8f9091939495969798999c9d9e9fa0a1a2a3a4a5a6a7a8a9abac#adaeafb0b1b4b6b7b9babbbcbdbfc0c3c4c5c6c7c8cacbcdcecfd0d1d3d5d7d9dadbdddedfe2e4e5e7e8eaecedeeeff0f2f3f4f5f6f7f8f9fafbfcfdfeff,5b:0001020304050607080a0b0c0d0e0f10111213141518191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303133353638393a3b3c3d3e3f4142434445464748494a4b4c4d4e4f52565e606167686b6d6e6f7274767778797b7c7e7f82868a8d8e90919294969fa7a8a9acadaeafb1b2b7babbbcc0c1c3c8c9cacbcdcecf#d1d4d5d6d7d8d9dadbdce0e2e3e6e7e9eaebecedeff1f2f3f4f5f6f7fdfe,5c:0002030507080b0c0d0e10121317191b1e1f2021232628292a2b2d2e2f303233353637434446474c4d5253545657585a5b5c5d5f62646768696a6b6c6d70727374757677787b7c7d7e808384858687898a8b8e8f9293959d9e9fa0a1a4a5a6a7a8aaaeafb0b2b4b6b9babbbcbec0c2c3c5c6c7c8c9cacccdcecfd0d1d3d4d5d6d7d8dadbdcdddedfe0e2e3e7e9ebeceeeff1f2f3f4f5f6f7f8f9fafcfdfeff,5d:00#01040508090a0b0c0d0f10111213151718191a1c1d1f2021222325282a2b2c2f3031323335363738393a3b3c3f4041424344454648494d4e4f5051525354555657595a5c5e5f6061626364656667686a6d6e7071727375767778797a7b7c7d7e7f8081838485868788898a8b8c8d8e8f9091929394959697989a9b9c9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b8b9babbbcbdbebfc0c1c2c3c4c6c7c8c9cacbcccecfd0d1d2d3d4d5d6d7d8d9dadcdfe0e3e4eaeced#f0f5f6f8f9fafbfcff,5e:000407090a0b0d0e1213171e1f20212223242528292a2b2c2f303233343536393a3e3f404143464748494a4b4d4e4f50515253565758595a5c5d5f60636465666768696a6b6c6d6e6f70717577797e8182838588898c8d8e92989b9da1a2a3a4a8a9aaabacaeafb0b1b2b4babbbcbdbfc0c1c2c3c4c5c6c7c8cbcccdcecfd0d4d5d7d8d9dadcdddedfe0e1e2e3e4e5e6e7e9ebecedeeeff0f1f2f3f5f8f9fbfcfd,5f:050607090c0d0e10121416191a1c1d1e21222324#282b2c2e30323334353637383b3d3e3f4142434445464748494a4b4c4d4e4f5154595a5b5c5e5f60636567686b6e6f72747576787a7d7e7f83868d8e8f919394969a9b9d9e9fa0a2a3a4a5a6a7a9abacafb0b1b2b3b4b6b8b9babbbebfc0c1c2c7c8cacbced3d4d5dadbdcdedfe2e3e5e6e8e9eceff0f2f3f4f6f7f9fafc,60:0708090b0c10111317181a1e1f2223242c2d2e3031323334363738393a3d3e404445464748494a4c4e4f5153545657585b5c5e5f606165666e71727475777e80#8182858687888a8b8e8f909193959798999c9ea1a2a4a5a7a9aaaeb0b3b5b6b7b9babdbebfc0c1c2c3c4c7c8c9cccdcecfd0d2d3d4d6d7d9dbdee1e2e3e4e5eaf1f2f5f7f8fbfcfdfeff,61:02030405070a0b0c1011121314161718191b1c1d1e21222528292a2c2d2e2f303132333435363738393a3b3c3d3e4041424344454647494b4d4f50525354565758595a5b5c5e5f606163646566696a6b6c6d6e6f717273747678797a7b7c7d7e7f808182838485868788898a8c8d8f9091929395#969798999a9b9c9e9fa0a1a2a3a4a5a6aaabadaeafb0b1b2b3b4b5b6b8b9babbbcbdbfc0c1c3c4c5c6c7c9cccdcecfd0d3d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e7e8e9eaebecedeeeff0f1f2f3f4f6f7f8f9fafbfcfdfe,62:00010203040507091314191c1d1e2023262728292b2d2f303132353638393a3b3c424445464a4f50555657595a5c5d5e5f6061626465687172747577787a7b7d818283858687888b8c8d8e8f9094999c9d9ea3a6a7a9aaadaeafb0b2b3b4b6b7b8babec0c1#c3cbcfd1d5dddee0e1e4eaebf0f2f5f8f9fafb,63:00030405060a0b0c0d0f10121314151718191c2627292c2d2e30313334353637383b3c3e3f40414447484a51525354565758595a5b5c5d60646566686a6b6c6f707273747578797c7d7e7f81838485868b8d9193949597999a9b9c9d9e9fa1a4a6abafb1b2b5b6b9bbbdbfc0c1c2c3c5c7c8cacbccd1d3d4d5d7d8d9dadbdcdddfe2e4e5e6e7e8ebeceeeff0f1f3f5f7f9fafbfcfe,64:0304060708090a0d0e111215161718191a1d1f222324#252728292b2e2f3031323335363738393b3c3e404243494b4c4d4e4f505153555657595a5b5c5d5f60616263646566686a6b6c6e6f70717273747576777b7c7d7e7f8081838688898a8b8c8d8e8f90939497989a9b9c9d9fa0a1a2a3a5a6a7a8aaabafb1b2b3b4b6b9bbbdbebfc1c3c4c6c7c8c9cacbcccfd1d3d4d5d6d9dadbdcdddfe0e1e3e5e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,65:01020304050607080a0b0c0d0e0f10111314151617191a1b1c1d1e1f2021#222324262728292a2c2d30313233373a3c3d404142434446474a4b4d4e5052535457585a5c5f606164656768696a6d6e6f7173757678797a7b7c7d7e7f8081828384858688898a8d8e8f92949596989a9d9ea0a2a3a6a8aaacaeb1b2b3b4b5b6b7b8babbbebfc0c2c7c8c9cacdd0d1d3d4d5d8d9dadbdcdddedfe1e3e4eaebf2f3f4f5f8f9fbfcfdfeff,66:0104050708090b0d1011121617181a1b1c1e2122232426292a2b2c2e3032333738393a3b3d3f40424445464748494a4d4e505158#595b5c5d5e6062636567696a6b6c6d7172737578797b7c7d7f808183858688898a8b8d8e8f909293949598999a9b9c9e9fa0a1a2a3a4a5a6a9aaabacadafb0b1b2b3b5b6b7b8babbbcbdbfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8dadedfe0e1e2e3e4e5e7e8eaebecedeeeff1f5f6f8fafbfd,67:010203040506070c0e0f1112131618191a1c1e20212223242527292e303233363738393b3c3e3f414445474a4b4d5254555758595a5b5d62636466676b6c6e717476#78797a7b7d8082838586888a8c8d8e8f9192939496999b9fa0a1a4a6a9acaeb1b2b4b9babbbcbdbebfc0c2c5c6c7c8c9cacbcccdced5d6d7dbdfe1e3e4e6e7e8eaebedeef2f5f6f7f8f9fafbfcfe,68:01020304060d1012141518191a1b1c1e1f20222324252627282b2c2d2e2f30313435363a3b3f474b4d4f52565758595a5b5c5d5e5f6a6c6d6e6f707172737578797a7b7c7d7e7f8082848788898a8b8c8d8e90919294959698999a9b9c9d9e9fa0a1a3a4a5a9aaabacaeb1b2b4b6b7b8#b9babbbcbdbebfc1c3c4c5c6c7c8cacccecfd0d1d3d4d6d7d9dbdcdddedfe1e2e4e5e6e7e8e9eaebecedeff2f3f4f6f7f8fbfdfeff,69:00020304060708090a0c0f11131415161718191a1b1c1d1e21222325262728292a2b2c2e2f313233353637383a3b3c3e4041434445464748494a4b4c4d4e4f50515253555658595b5c5f616264656768696a6c6d6f7072737475767a7b7d7e7f8183858a8b8c8e8f909192939697999a9d9e9fa0a1a2a3a4a5a6a9aaacaeafb0b2b3b5b6b8b9babcbd#bebfc0c2c3c4c5c6c7c8c9cbcdcfd1d2d3d5d6d7d8d9dadcdddee1e2e3e4e5e6e7e8e9eaebeceeeff0f1f3f4f5f6f7f8f9fafbfcfe,6a:000102030405060708090b0c0d0e0f10111213141516191a1b1c1d1e20222324252627292b2c2d2e30323334363738393a3b3c3f40414243454648494a4b4c4d4e4f515253545556575a5c5d5e5f60626364666768696a6b6c6d6e6f70727374757677787a7b7d7e7f81828385868788898a8b8c8d8f929394959698999a9b9c9d9e9fa1a2a3a4a5a6#a7a8aaadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,6b:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f252628292a2b2c2d2e2f303133343536383b3c3d3f4041424445484a4b4d4e4f5051525354555657585a5b5c5d5e5f606168696b6c6d6e6f7071727374757677787a7d7e7f808588#8c8e8f909194959798999c9d9e9fa0a2a3a4a5a6a7a8a9abacadaeafb0b1b2b6b8b9babbbcbdbec0c3c4c6c7c8c9caccced0d1d8dadcdddedfe0e2e3e4e5e6e7e8e9ecedeef0f1f2f4f6f7f8fafbfcfeff,6c:000102030408090a0b0c0e12171c1d1e2023252b2c2d31333637393a3b3c3e3f434445484b4c4d4e4f5152535658595a62636566676b6c6d6e6f71737577787a7b7c7f8084878a8b8d8e9192959697989a9c9d9ea0a2a8acafb0b4b5b6b7bac0c1c2c3c6c7c8cbcdcecfd1d2d8#d9dadcdddfe4e6e7e9ecedf2f4f9ff,6d:000203050608090a0d0f101113141516181c1d1f20212223242628292c2d2f30343637383a3f404244494c50555657585b5d5f6162646567686b6c6d707172737576797a7b7d7e7f8081838486878a8b8d8f9092969798999a9ca2a5acadb0b1b3b4b6b7b9babbbcbdbec1c2c3c8c9cacdcecfd0d2d3d4d5d7dadbdcdfe2e3e5e7e8e9eaedeff0f2f4f5f6f8fafdfeff,6e:0001020304060708090b0f12131518191b1c1e1f222627282a2c2e30313335#3637393b3c3d3e3f40414245464748494a4b4c4f5051525557595a5c5d5e606162636465666768696a6c6d6f707172737475767778797a7b7c7d8081828487888a8b8c8d8e91929394959697999a9b9d9ea0a1a3a4a6a8a9abacadaeb0b3b5b8b9bcbebfc0c3c4c5c6c8c9cacccdced0d2d6d8d9dbdcdde3e7eaebecedeeeff0f1f2f3f5f6f7f8fafbfcfdfeff,6f:000103040507080a0b0c0d0e101112161718191a1b1c1d1e1f212223252627282c2e303234353738393a3b3c3d3f404142#43444548494a4c4e4f5051525354555657595a5b5d5f60616364656768696a6b6c6f707173757677797b7d7e7f808182838586878a8b8f909192939495969798999a9b9d9e9fa0a2a3a4a5a6a8a9aaabacadaeafb0b1b2b4b5b7b8babbbcbdbebfc1c3c4c5c6c7c8cacbcccdcecfd0d3d4d5d6d7d8d9dadbdcdddfe2e3e4e5e6e7e8e9eaebecedf0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,70:000102030405060708090a0b0c0d0e0f1012131415161718191c1d1e1f2021222425262728292a#2b2c2d2e2f30313233343637383a3b3c3d3e3f404142434445464748494a4b4d4e505152535455565758595a5b5c5d5f606162636465666768696a6e7172737477797a7b7d818283848687888b8c8d8f90919397989a9b9e9fa0a1a2a3a4a5a6a7a8a9aab0b2b4b5b6babebfc4c5c6c7c9cbcccdcecfd0d1d2d3d4d5d6d7dadcdddee0e1e2e3e5eaeef0f1f2f3f4f5f6f8fafbfcfeff,71:0001020304050607080b0c0d0e0f111214171b1c1d1e1f2021222324252728292a2b2c2d2e323334#353738393a3b3c3d3e3f4041424344464748494b4d4f505152535455565758595a5b5d5f6061626365696a6b6c6d6f707174757677797b7c7e7f8081828385868788898b8c8d8e909192939596979a9b9c9d9ea1a2a3a4a5a6a7a9aaabadaeafb0b1b2b4b6b7b8babbbcbdbebfc0c1c2c4c5c6c7c8c9cacbcccdcfd0d1d2d3d6d7d8d9dadbdcdddedfe1e2e3e4e6e8e9eaebecedeff0f1f2f3f4f5f6f7f8fafbfcfdfeff,72:0001020304050708090a0b0c0d0e0f101112131415161718191a#1b1c1e1f2021222324252627292b2d2e2f3233343a3c3e40414243444546494a4b4e4f505153545557585a5c5e60636465686a6b6c6d707173747677787b7c7d828385868788898c8e9091939495969798999a9b9c9d9ea0a1a2a3a4a5a6a7a8a9aaabaeb1b2b3b5babbbcbdbebfc0c5c6c7c9cacbcccfd1d3d4d5d6d8dadb#95,30:000102,00b702:c9c7,00a830:0305,2014ff5e20:162618191c1d,30:141508090a0b0c0d0e0f16171011,00:b1d7f7,22:362728110f2a2908371aa52520,231222:992b2e614c483d1d606e6f64651e3534,26:4240,00b020:3233,2103ff0400a4ff:e0e1,203000a7211626:0605,25:cbcfcec7c6a1a0b3b2,203b21:92909193,30:13#95,21:70717273747576777879#4,24:88898a8b8c8d8e8f909192939495969798999a9b7475767778797a7b7c7d7e7f808182838485868760616263646566676869##,32:20212223242526272829##,21:606162636465666768696a6b#97,ff:010203e505060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5de3#95,30:4142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f808182838485868788898a8b8c8d8e8f90919293#106a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6#103,03:9192939495969798999a9b9c9d9e9fa0a1a3a4a5a6a7a8a9#6b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c3c4c5c6c7c8c9#5,fe:3536393a3f403d3e41424344##3b3c373831#3334#104$,04:10111213141501161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f#1330313233343551363738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f#11,02:cacbd9,20:13152535,21:050996979899,22:151f23526667bf,25:505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f7071727381828384858687#88898a8b8c8d8e8f939495bcbde2e3e4e5,2609229530:121d1e#9,010100e101ce00e0011300e9011b00e8012b00ed01d000ec014d00f301d200f2016b00fa01d400f901:d6d8dadc,00:fcea,0251e7c701:4448,e7c802:61#2,31:05060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20212223242526272829#19,30:212223242526272829,32a333:8e8f9c9d9ea1c4ced1d2d5,fe30ff:e2e4#,212132:31#,20:10#1,30:fc9b9cfdfe069d9e,fe:494a4b4c4d4e4f50515254555657595a5b5c5d5e5f6061#626364656668696a6b,e7:e7e8e9eaebecedeeeff0f1f2f3,30:07#11,25:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b#13,72:dcdddfe2e3e4e5e6e7eaebf5f6f9fdfeff,73:00020405060708090b0c0d0f1011121418191a1f2023242627282d2f30323335363a3b3c3d404142434445464748#494a4b4c4e4f515354555658595a5b5c5d5e5f6162636465666768696a6b6e7071#9272737475767778797a7b7c7d7f808182838586888a8c8d8f90929394959798999a9c9d9ea0a1a3a4a5a6a7a8aaacadb1b4b5b6b8b9bcbdbebfc1c3c4c5c6c7#cbccced2d3d4d5d6d7d8dadbdcdddfe1e2e3e4e6e8eaebeceeeff0f1f3f4f5f6f7#92f8f9fafbfcfdfeff,74:0001020407080b0c0d0e1112131415161718191c1d1e1f2021232427292b2d2f31323738393a3b3d3e3f4042434445464748494a4b4c4d#4e4f505152535456585d606162636465666768696a6b6c6e6f717273747578797a#927b7c7d7f8284858688898a8c8d8f9192939495969798999a9b9d9fa0a1a2a3a4a5a6aaabacadaeafb0b1b2b3b4b5b6b7b8b9bbbcbdbebfc0c1c2c3c4c5c6c7#c8c9cacbcccdcecfd0d1d3d4d5d6d7d8d9dadbdddfe1e5e7e8e9eaebecedf0f1f2#92f3f5f8f9fafbfcfdfe,75:0001020305060708090a0b0c0e1012141516171b1d1e202122232426272a2e3436393c3d3f414243444647494a4d5051525355565758#5d5e5f60616263646768696b6c6d6e6f7071737576777a7b7c7d7e808182848587#92$88898a8c8d8e909395989b9c9ea2a6a7a8a9aaadb6b7babbbfc0c1c6cbcccecfd0d1d3d7d9dadcdddfe0e1e5e9ecedeeeff2f3f5f6f7f8fafbfdfe,76:02040607#08090b0d0e0f11121314161a1c1d1e212327282c2e2f31323637393a3b3d414244#9245464748494a4b4e4f50515253555758595a5b5d5f6061626465666768696a6c6d6e7071727374757677797a7c7f80818385898a8c8d8f9092949597989a9b#9c9d9e9fa0a1a2a3a5a6a7a8a9aaabacadafb0b3b5b6b7b8b9babbbcbdbec0c1c3,554a963f57c3632854ce550954c076:914c,853c77ee827e788d72319698978d6c285b894ffa630966975cb880fa684880ae660276ce51f9655671ac7ff1888450b2596561ca6fb382ad634c625253ed54277b06516b75a45df462d48dcb9776628a8019575d97387f627238767d67cf767e64464f708d2562dc7a17659173ed642c6273822c9881677f724862:6ecc,4f3474e3534a529e7eca90a65e2e6886699c81807ed168d278c5868c9551508d8c2482de80de53058912526576:c4c7c9cbccd3d5d9dadcdddee0e1e2e3e4e6e7e8e9eaebecedf0f3f5f6f7fafbfdff,77:00020305060a0c0e0f1011121314151617181b1c1d1e21232425272a2b#2c2e3031323334393b3d3e3f4244454648494a4b4c4d4e4f52535455565758595c,858496f94fdd582199715b9d62:b1a5,66b48c799c8d7206676f789160b253:5117,8f8880cc8d1d94a1500d72c8590760eb711988ab595482ef672c7b285d297ef7752d6cf58e668ff8903c9f3b6bd491197b145f7c78a784d6853d6b:d5d9d6,5e:0187,75f995ed655d5f:0ac5,8f9f58c181c2907f965b97ad8fb97f168d2c62414fbf53:d85e,8f:a8a9ab,904d68075f6a819888689cd6618b522b762a5f6c658c6fd26ee85bbe644851:75b0,67c44e1979c9997c70b377:5d5e5f606467696a6d6e6f7071727374757677787a7b7c818283868788898a8b8f90939495969798999a9b9c9d9ea1a3a4a6a8abadaeafb1b2b4b6b7b8b9ba#bcbec0c1c2c3c4c5c6c7c8c9cacbcccecfd0d1d2d3d4d5d6d8d9dadddedfe0e1e4,75c55e7673bb83e064ad62e894b56ce2535a52c3640f94c27b944f2f5e1b823681:168a,6e246cca9a736355535c54fa886557e04e0d5e036b657c3f90e8601664e6731c88c16750624d8d22776c8e2991c75f6983dc8521991053c286956b8b60:ede8,707f82:cd31,4ed36ca785cf64cd7cd969fd66f9834953957b564fa7518c6d4b5c428e6d63d253c983:2c36,67e578b4643d5bdf5c945dee8be762c667f48c7a640063ba8749998b8c177f2094f24ea7961098a4660c731677:e6e8eaeff0f1f2f4f5f7f9fafbfc,78:0304050607080a0b0e0f101315191b1e20212224282a2b2e2f31323335363d3f414243444648494a4b4d4f51535458595a#5b5c5e5f606162636465666768696f7071727374757678797a7b7d7e7f80818283,573a5c1d5e38957f507f80a05382655e7545553150218d856284949e671d56326f6e5de2543570928f66626f64a463a35f7b6f8890f481e38fb05c1866685ff16c8996488d81886c649179f057ce6a59621054484e587a0b60e96f848bda627f901e9a8b79e4540375f4630153196c608fdf5f1b9a70803b9f7f4f885c3a8d647fc565a570bd51:45b2,866b5d075ba062bd916c75748e0c7a2061017b794ec77ef877854e1181ed521d51fa6a7153a88e87950496cf6ec19664695a78:848586888a8b8f9092949596999d9ea0a2a4a6a8a9aaabacadaeafb5b6b7b8babbbcbdbfc0c2c3c4c6c7c8cccdcecfd1d2d3d6d7d8dadbdcdddedfe0e1e2e3#e4e5e6e7e9eaebedeeeff0f1f3f5f6f8f9fbfcfdfeff,79:00020304060708090a0b0c,784050a877d7641089e6590463e35ddd7a7f693d4f20823955984e3275ae7a975e:628a,95ef521b5439708a6376952457826625693f918755076df37eaf882262337ef075b5832878c196cc8f9e614874f78bcd6b64523a8d506b21806a847156f153064e:ce1b,51d17c97918b7c074fc38e7f7be17a9c64675d1450ac810676017cb96dec7fe067515b:58f8,78cb64:ae13,63:aa2b,9519642d8fbe7b5476296253592754466b7950a362345e266b864ee38d37888b5f85902e79:0d0e0f1011121415161718191a1b1c1d1f2021222325262728292a2b2c2d2e2f3031323335363738393d3f42434445474a4b4c4d4e4f505152545558596163#6466696a6b6c6e70717273747576797b7c7d7e7f8283868788898b8c8d8e909192,6020803d62c54e39535590f863b880c665e66c2e4f4660ee6de18bde5f3986cb5f536321515a83616863520063638e4850125c9b79775bfc52307a3b60bc905376d75f:b797,76848e6c706f767b7b4977aa51f3909358244f4e6ef48fea654c7b1b72c46da47fdf5ae162b55e95573084827b2c5e1d5f1f90127f1498a063826ec7789870b95178975b57ab75354f4375385e9760e659606dc06bbf788953fc96d551cb52016389540a94938c038dcc7239789f87768fed8c0d53e079:939495969798999b9c9d9e9fa0a1a2a3a4a5a6a8a9aaabacadaeafb0b1b2b4b5b6b7b8bcbfc2c4c5c7c8cacccecfd0d3d4d6d7d9dadbdcdddee0e1e2e5e8ea#eceef1f2f3f4f5f6f7f9fafcfeff,7a:0104050708090a0c0f10111213151618191b1c,4e0176ef53ee948998769f0e952d5b9a8ba24e:221c,51ac846361c252a8680b4f97606b51bb6d1e515c6296659796618c46901775d890fd77636bd272:8aec,8bfb583577798d4c675c9540809a5ea66e2159927aef77ed953b6bb565ad7f0e58065151961f5bf958a954288e726566987f56e4949d76fe9041638754c659:1a3a,579b8eb267358dfa8235524160f0581586fe5ce89e454fc4989d8bb95a2560765384627c904f9102997f6069800c513f80335c1499756d314e8c7a:1d1f21222425262728292a2b2c2d2e2f303132343536383a3e4041424344454748494a4b4c4d4e4f50525354555658595a5b5c5d5e5f606162636465666768#696a6b6c6d6e6f717273757b7c7d7e828587898a8b8c8e8f909394999a9b9ea1a2,8d3053d17f5a7b4f4f104e4f96006cd573d085e95e06756a7ffb6a0a77fe94927e4151e170e653cd8fd483038d2972af996d6cdb574a82b365b980aa623f963259a84eff8bbf7eba653e83f2975e556198de80a5532a8bfd542080ba5e9f6cb88d3982ac915a54296c1b52067eb7575f711a6c7e7c89594b4efd5fff61247caa4e305c0167ab87025cf0950b98ce75af70fd902251af7f1d8bbd594951e44f5b5426592b657780a45b7562:76c2,8f905e456c1f7b264f:0fd8,670d7a:a3a4a7a9aaabaeafb0b1b2b4b5b6b7b8b9babbbcbdbec0c1c2c3c4c5c6c7c8c9cacccdcecfd0d1d2d3d4d5d7d8dadbdcdde1e2e4e7e8e9eaebeceef0f1f2f3#f4f5f6f7f8fbfcfe,7b:0001020507090c0d0e1012131617181a1c1d1f21222327292d,6d:6eaa,798f88b15f17752b629a8f854fef91dc65a781:2f51,5e9c81508d74526f89868d4b590d50854ed8961c723681798d1f5bcc8ba3964459877f1a549056:760e,8be565396982949976d66e895e72751867:46d1,7aff809d8d76611f79c665628d635188521a94a27f38809b7eb25c976e2f67607bd9768b9ad8818f7f947cd5641e95507a3f54:4ae5,6b4c640162089e3d80f3759952729769845b683c86e496:0194,94ec4e2a54047ed968398ddf801566f45e9a7fb97b:2f303234353637393b3d3f404142434446484a4d4e535557595c5e5f61636465666768696a6b6c6d6f70737476787a7c7d7f81828384868788898a8b8c8e8f#9192939698999a9b9e9fa0a3a4a5aeafb0b2b3b5b6b7b9babbbcbdbebfc0c2c3c4,57c2803f68975de5653b529f606d9f9a4f9b8eac516c5bab5f135de96c5e62f18d21517194a952fe6c9f82df72d757a267848d2d591f8f9c83c754957b8d4f306cbd5b6459d19f1353e486ca9aa88c3780a16545987e56fa96c7522e74dc52505be1630289024e5662d0602a68fa51735b9851a089c27ba199867f5060ef704c8d2f51495e7f901b747089c4572d78455f529f9f95fa8f689b3c8be17678684267dc8d:ea35,523d8f8a6eda68cd950590ed56fd679c88f98fc754c87b:c5c8c9cacbcdcecfd0d2d4d5d6d7d8dbdcdedfe0e2e3e4e7e8e9ebecedeff0f2f3f4f5f6f8f9fafbfdff,7c:0001020304050608090a0d0e101112131415171819#1a1b1c1d1e20212223242528292b2c2d2e2f3031323334353637393a3b3c3d3e42,9ab85b696d776c264ea55bb39a87916361a890af97e9542b6db55bd251fd558a7f:55f0,64bc634d65f161be608d710a6c:5749,592f676d822a58d5568e8c6a6beb90dd597d801753f76d695475559d83:77cf,683879be548c4f55540876d28c8996026cb36db88d6b89109e648d3a563f9ed175d55f8872e0606854fc4ea86a2a886160528f7054c470d886799e3f6d2a5b8f5f187ea255894faf7334543c539a501954:0e7c,4e4e5ffd745a58f6846b80e1877472d07cca6e567c:434445464748494a4b4c4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f70717275767778797a7e7f8081828384858687#888a8b8c8d8e8f90939496999a9ba0a1a3a6a7a8a9abacadafb0b4b5b6b7b8babb,5f27864e552c62a44e926caa623782b154d7534e733e6ed1753b521253168bdd69d05f8a60006dee574f6b2273af68538fd87f13636260a3552475ea8c6271156da35ba65e7b8352614c9ec478fa87577c27768751f060f6714c66435e4c604d8c0e707063258f895fbd606286d456de6bc160946167534960e066668d3f79fd4f1a70e96c478b:b3f2,7ed88364660f5a5a9b426d:51f7,8c416d3b4f19706b83b7621660d1970d8d27797851fb57:3efa,673a75787a3d79ef7b957c:bfc0c2c3c4c6c9cbcecfd0d1d2d3d4d8dadbdddee1e2e3e4e5e6e7e9eaebecedeef0f1f2f3f4f5f6f7f9fafcfdfeff,7d:000102030405060708090b0c0d0e0f10#1112131415161718191a1b1c1d1e1f212324252628292a2c2d2e30313233343536,808c99658ff96fc08ba59e2159ec7ee97f095409678168d88f917c4d96c653ca602575be6c7253735ac97ea7632451e0810a5df184df628051805b634f0e796d524260b86d4e5b:c4c2,8b:a1b0,65e25fcc964559937e:e7aa,560967b759394f735bb652a0835a988a8d3e753294be50477a3c4ef767b69a7e5ac16b7c76d1575a5c167b3a95f4714e517c80a9827059787f04832768c067ec78:b177,62e363617b804fed526a51cf835069db92748d:f531,89c1952e7bad4ef67d:3738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6f70717273747576#78797a7b7c7d7e7f808182838485868788898a8b8c8d8e8f909192939495969798,506582305251996f6e:1085,6da75efa50f559dc5c066d466c5f7586848b686859568bb253209171964d854969127901712680f64ea490ca6d479a845a0756bc640594f077eb4fa5811a72e189d2997a7f347ede527f655991758f:7f83,53eb7a9663:eda5,768679f888579636622a52ab8282685467706377776b7aed6d017ed389e359d0621285c982a5754c501f4ecb75a58beb5c4a5dfe7b4b65a491d14eca6d25895f7d2795264ec58c288fdb9773664b79818fd170ec6d787d:999a9b9c9d9e9fa0a1a2a3a4a5a7a8a9aaabacadafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9#dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fa,5c3d52b283465162830e775b66769cb84eac60ca7c:beb3,7ecf4e958b66666f988897595883656c955c5f8475c997567a:dfde,51c070af7a9863ea7a767ea0739697ed4e4570784e5d915253a965:51e7,81fc8205548e5c31759a97a062d872d975bd5c459a7983ca5c40548077e94e3e6cae805a62d2636e5de851778ddd8e1e952f4ff153e560e770ac526763509e435a1f5026773753777ee26485652b628963985014723589c951b38bc07edd574783cc94a7519b541b5cfb7d:fbfcfdfeff,7e:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f30313233343536373839#3a3c3d3e3f40424344454648494a4b4c4d4e4f505152535455565758595a5b5c5d,4fca7ae36d5a90e19a8f55805496536154af5f0063e9697751ef6168520a582a52d8574e780d770b5eb761777ce062:5b97,4ea27095800362f770e49760577782db67ef68f578d5989779d158f354b353ef6e34514b523b5ba28bfe80af554357a660735751542d7a7a60505b5463a762a053e362635bc767af54ed7a9f82e691775e9388e4593857ae630e8de880ef57577b774fa95feb5bbd6b3e53217b5072c2684677:ff36,65f751b54e8f76d45cbf7aa58475594e9b4150807e:5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f8081838485868788898a8b8c8d8e8f909192939495969798999a9c9d9e#aeb4bbbcd6e4ecf9,7f:0a101e37393b3c3d3e3f404143464748494a4b4c4d4e4f5253,998861276e8357646606634656f062:ec69,5ed39614578362c955878721814a8fa3556683b167658d5684dd5a6a680f62e67bee961151706f9c8c3063fd89c861d27f0670c26ee57405699472fc5eca90ce67176d6a635e52b3726280014f6c59e5916a70d96d9d52d24e5096f7956d857e78ca7d2f5121579264c2808b7c7b6cea68f1695e51b7539868a872819ece7bf172f879bb6f137406674e91cc9ca4793c83:8954,540f68174e3d538952b1783e5386522950884f:8bd0,7f:56595b5c5d5e6063646566676b6c6d6f7073757677787a7b7c7d7f8082838485868788898b8d8f9091929395969798999b9ca0a2a3a5a6a8a9aaabacadaeb1#b3b4b5b6b7babbbec0c2c3c4c6c7c8c9cbcdcfd0d1d2d3d6d7d9dadbdcdddee2e3,75e27acb7c926ca596b6529b748354e94fe9805483b28fde95705ec9601c6d9f5e18655b813894fe604b70bc7ec37cae51c968817cb1826f4e248f8691cf667e4eae8c0564a9804a50da759771ce5be58fbd6f664e86648295635ed66599521788c270c852a3730e7433679778f797164e3490bb9cde6dcb51db8d41541d62ce73b283f196f69f8494c34f367f9a51cc707596755cad988653e64ee46e9c740969b4786b998f7559521876246d4167f3516d9f99804b54997b3c7abf7f:e4e7e8eaebecedeff2f4f5f6f7f8f9fafdfeff,80:020708090a0e0f11131a1b1d1e1f2123242b2c2d2e2f303234393a3c3e404144454748494e4f505153555657#595b5c5d5e5f6061626364656667686b6c6d6e6f7072737475767778797a7b7c7d,9686578462e29647697c5a0464027bd36f0f964b82a6536298855e90708963b35364864f9c819e93788c97328d:ef42,9e7f6f5e79845f559646622e9a74541594dd4fa365c55c:6561,7f1586516c2f5f8b73876ee47eff5ce6631b5b6a6ee653754e7163a0756562a18f6e4f264ed16ca67eb68bba841d87ba7f57903b95237ba99aa188f8843d6d1b9a867edc59889ebb739b780186829a:6c82,561b541757cb4e709ea653568fc881097792999286ee6ee1851366fc61626f2b80:7e818285888a8d8e8f909192949597999ea3a6a7a8acb0b3b5b6b8b9bbc5c7c8c9cacbcfd0d1d2d3d4d5d8dfe0e2e3e6eef5f7f9fbfeff,81:000103040507080b#0c1517191b1c1d1f202122232425262728292a2b2d2e3033343537393a3b3c3d3f,8c298292832b76f26c135fd983bd732b8305951a6bdb77db94c6536f830251925e3d8c8c8d384e4873ab679a68859176970971646ca177095a9295416bcf7f8e66275bd059b95a9a95:e8f7,4eec84:0c99,6aac76df9530731b68a65b5f772f919a97617cdc8ff78c1c5f257c7379d889c56ccc871c5bc65e4268c977207ef551:954d,52c95a297f05976282d763cf778485d079d26e3a5e9959998511706d6c1162bf76bf654f60af95fd660e879f9e2394ed54:0d7d,8c2c647881:40414243444547494d4e4f525657585b5c5d5e5f6162636466686a6b6c6f727375767778818384858687898b8c8d8e90929394959697999a9e9fa0a1a2a4a5#a7a9abacadaeafb0b1b2b4b5b6b7b8b9bcbdbebfc4c5c7c8c9cbcdcecfd0d1d2d3,647986116a21819c78e864699b5462b9672b83ab58a89ed86cab6f205bde964c8c0b725f67d062c772614ea959c66bcd589366ae5e5552df6155672876ee776672677a4662ff54:ea50,94a090a35a1c7eb36c164e435976801059485357753796be56ca63208111607c95f96dd65462998151855ae980fd59ae9713502a6ce55c3c62df4f60533f817b90066eba852b62c85e7478be64b5637b5ff55a18917f9e1f5c3f634f80425b7d556e95:4a4d,6d8560a867e072de51dd5b8181:d4d5d6d7d8d9dadbdcdddedfe0e1e2e4e5e6e8e9ebeeeff0f1f2f5f6f7f8f9fafdff,82:030708090a0b0e0f111315161718191a1d2024252627292e323a3c3d3f#404142434546484a4c4d4e5051525354555657595b5c5d5e606162636465666769,62e76cde725b626d94ae7ebd81136d53519c5f04597452aa6012597366968650759f632a61e67cef8bfa54e66b279e256bb485d5545550766ca4556a8db4722c5e156015743662cd6392724c5f986e436d3e65006f5876d878d076fc7554522453db4e535e9e65c180:2ad6,629b5486522870ae888d8dd16ce1547880da57f988f48d54966a914d4f696c9b55b776c6783062a870f96f8e5f6d84ec68da787c7bf781a8670b9e4f636778b0576f7812973962:79ab,528874356bd782:6a6b6c6d71757677787b7c808183858687898c90939495969a9b9ea0a2a3a7b2b5b6babbbcbfc0c2c3c5c6c9d0d6d9dadde2e7e8e9eaecedeef0f2f3f5f6f8#fafcfdfeff,83:000a0b0d1012131618191d1e1f20212223242526292a2e3032373b3d,5564813e75b276ae533975de50fb5c418b6c7bc7504f72479a9798d86f0274e27968648777a562fc98918d2b54c180584e52576a82f9840d5e7351ed74f68bc45c4f57616cfc98875a4678349b448feb7c955256625194fa4ec68386846183e984b257d467345703666e6d668c3166dd7011671f6b3a6816621a59bb4e0351c46f0667d26c8f517668cb59476b6775665d0e81109f5065d779:4841,9a918d775c824e5e4f01542f5951780c56686c148fc45f036c:7de3,8bab639083:3e3f41424445484a4b4c4d4e5355565758595d6270717273747576797a7e7f808182838487888a8b8c8d8f909194959697999a9d9fa1a2a3a4a5a6a7acadae#afb5bbbebfc2c3c4c6c8c9cbcdced0d1d2d3d5d7d9dadbdee2e3e4e6e7e8ebeced,60706d3d7275626694:8ec5,53438fc17b7e4edf8c264e7e9ed494:b1b3,524d6f5c90636d458c3458115d4c6b:2049,67aa545b81547f8c589985375f3a62a26a47953965726084686577a74e544fa85de7979864ac7fd85ced4fcf7a8d520783044e14602f7a8394a64fb54eb279e6743452e482b964d279bd5bdd6c8197528f7b6c22503e537f6e0564ce66746c3060c598778bf75e86743c7a7779cb4e1890b174036c4256da914b6cc58d8b533a86c666f28eaf5c489a716e2083:eeeff3f4f5f6f7fafbfcfeff,84:0002050708090a10121314151617191a1b1e1f20212223292a2b2c2d2e2f30323334353637393a3b3e3f404142434445474849#4a4b4c4d4e4f505253545556585d5e5f606264656667686a6e6f70727477797b7c,53d65a369f8b8da353bb570898a76743919b6cc9516875ca62f372ac52:389d,7f3a7094763853749e4a69b7786e96c088d97fa471:36c3,518967d374e458e4651856b78ba9997662707ed560f970ed58ec4e:c1ba,5fcd97e74efb8ba45203598a7eab62544ecd65e5620e833884c98363878d71946eb65bb97ed2519763c967d480898339881551125b7a59828fb14e736c5d516589258f6f962e854a745e95:10f0,6da682e55f3164926d128428816e9cc3585e8d5b4e0953c184:7d7e7f8081838485868a8d8f90919293949596989a9b9d9e9fa0a2a3a4a5a6a7a8a9aaabacadaeb0b1b3b5b6b7bbbcbec0c2c3c5c6c7c8cbcccecfd2d4d5d7#d8d9dadbdcdee1e2e4e7e8e9eaebedeeeff1f2f3f4f5f6f7f8f9fafbfdfe,85:000102,4f1e6563685155d34e2764149a9a626b5ac2745f82726da968ee50e7838e7802674052396c997eb150bb5565715e7b5b665273ca82eb67495c715220717d886b95ea965564c58d6181b355846c5562477f2e58924f2455468d4f664c4e0a5c1a88f368a2634e7a0d70e7828d52fa97f65c1154e890b57ecd59628d4a86c782:0c0d,8d6664445c0461516d89793e8bbe78377533547b4f388eab6df15a207ec5795e6c885ba15a76751a80be614e6e1758f075:1f25,727253477ef385:030405060708090a0b0d0e0f101214151618191b1c1d1e2022232425262728292a2d2e2f303132333435363e3f404142444546474b4c4d4e4f505152535455#57585a5b5c5d5f60616263656667696a6b6c6d6e6f707173757677787c7d7f8081,770176db526980dc57235e08593172ee65bd6e7f8bd75c388671534177f362fe65f64ec098df86805b9e8bc653f277e24f7f5c4e9a7659cb5f0f793a58eb4e1667ff4e8b62ed8a93901d52bf662f55dc566c90024ed54f8d91ca99706c0f5e0260435ba489c68bd56536624b99965b:88ff,6388552e53d77626517d852c67a268b36b8a62928f9353d482126dd1758f4e668d4e5b70719f85af66:91d9,7f7287009ecd9f205c5e672f8ff06811675f620d7ad658855eb665706f3185:82838688898a8b8c8d8e909192939495969798999a9d9e9fa0a1a2a3a5a6a7a9abacadb1b2b3b4b5b6b8babbbcbdbebfc0c2c3c4c5c6c7c8cacbcccdced1d2#d4d6d7d8d9dadbdddedfe0e1e2e3e5e6e7e8eaebecedeeeff0f1f2f3f4f5f6f7f8,60555237800d6454887075295e05681362f4971c53cc723d8c016c3477617a0e542e77ac987a821c8bf47855671470c165af64955636601d79c153f84e1d6b7b80865bfa55e356db4f:3a3c,99725df3677e80386002988290015b8b8b:bcf5,641c825864de55fd82cf91654fd77d20901f7c9f50f358516eaf5bbf8bc980839178849c7b97867d96:8b8f,7ee59ad3788e5c817a57904296a7795f5b59635f7b0b84d168ad55067f2974107d2295016240584c4ed65b835979585485:f9fafcfdfe,86:0001020304060708090a0b0c0d0e0f10121314151718191a1b1c1d1e1f20212223242526282a2b2c2d2e2f3031323334353637393a3b3d3e3f40#4142434445464748494a4b4c525355565758595b5c5d5f6061636465666768696a,736d631e8e:4b0f,80ce82d462ac53f06cf0915e592a60016c70574d644a8d2a762b6ee9575b6a8075f06f6d8c:2d08,57666bef889278b363a253f970ad6c645858642a580268e0819b55107cd650188eba6dcc8d9f70eb638f6d9b6ed47ee68404684390036dd896768ba85957727985e4817e75bc8a8a68af52548e22951163d098988e44557c4f5366ff568f60d56d9552435c4959296dfb586b75:301c,606c82148146631167618fe2773a8d:f334,94c15e165385542c70c386:6d6f7072737475767778838485868788898e8f90919294969798999a9b9e9fa0a1a2a5a6abadaeb2b3b7b8b9bbbcbdbebfc1c2c3c5c8cccdd2d3d5d6d7dadc#dde0e1e2e3e5e6e7e8eaebeceff5f6f7fafbfcfdff,87:010405060b0c0e0f10111416,6c405ef7505c4ead5ead633a8247901a6850916e77b3540c94dc5f647ae5687663457b527edf75db507762955934900f51f879c37a8156fe5f9290146d825c60571f541051546e4d56e263a89893817f8715892a9000541e5c6f81c062:d658,81319e3596409a:6e7c,692d59a562d3553e631654c786d96d3c5a0374e6889c6b6a59168c4c5f2f6e7e73a9987d4e3870f75b8c7897633d665a769660cb5b9b5a494e0781556c6a738b4ea167897f515f8065fa671b5fd859845a0187:191b1d1f20242627282a2b2c2d2f303233353638393a3c3d404142434445464a4b4d4f505152545556585a5b5c5d5e5f6162666768696a6b6c6d6f71727375#7778797a7f8081848687898a8c8e8f90919294959698999a9b9c9d9ea0a1a2a3a4,5dcd5fae537197e68fdd684556f4552f60df4e3a6f4d7ef482c7840e59d44f:1f2a,5c3e7eac672a851a5473754f80c355829b4f4f4d6e2d8c135c096170536b761f6e29868a658795fb7eb9543b7a337d0a95ee55e17fc174ee631d87176da17a9d621165a1536763e16c835deb545c94a84e4c6c618bec5c4b65e0829c68a754:3e34,6b:cb66,4e9463425348821e4f:0dae,575e620a96fe6664726952:ffa1,609f8bef661471996790897f785277fd6670563b54389521727a87:a5a6a7a9aaaeb0b1b2b4b6b7b8b9bbbcbebfc1c2c3c4c5c7c8c9cccdcecfd0d4d5d6d7d8d9dadcdddedfe1e2e3e4e6e7e8e9ebecedeff0f1f2f3f4f5f6f7f8#fafbfcfdff,88:0001020405060708090b0c0d0e0f101112141718191a1c1d1e1f2023,7a00606f5e0c6089819d591560dc718470ef6eaa6c5072806a8488ad5e2d4e605ab3559c94e36d177cfb9699620f7ec6778e867e5323971e8f9666875ce14fa072ed4e0b53a6590f54136380952851484ed99c9c7ea454b88d248854823795f26d8e5f265acc663e966973:b02e,53bf817a99857fa15baa96:7750,7ebf76f853a2957699997bb189446e584e617fd479658be660f354cd4eab98795df76a6150cf54118c618427785d9704524a54ee56a395006d885bb56dc6665388:2425262728292a2b2c2d2e2f30313334353637383a3b3d3e3f414243464748494a4b4e4f505152535556585a5b5c5d5e5f6066676a6d6f717374757678797a#7b7c80838687898a8c8e8f90919394959798999a9b9d9e9fa0a1a3a5a6a7a8a9aa,5c0f5b5d6821809655787b11654869544e9b6b47874e978b534f631f643a90aa659c80c18c10519968b0537887f961c86c:c4fb,8c225c5185aa82af950c6b238f9b65b05f:fbc3,4fe18845661f8165732960fa51745211578b5f6290a2884c91925e78674f602759d351:44f6,80f853086c7996c4718a4f:11ee,7f9e673d55c5950879c088967ee3589f620c9700865a5618987b5f908bb884c4915753d965ed5e8f755c60647d6e5a7f7e:eaed,8f6955a75ba360ac65cb738488:acaeafb0b2b3b4b5b6b8b9babbbdbebfc0c3c4c7c8cacbcccdcfd0d1d3d6d7dadbdcdddee0e1e6e7e9eaebecedeeeff2f5f6f7fafbfdff,89:0001030405060708#090b0c0d0e0f1114151617181c1d1e1f20222324262728292c2d2e2f3132333537,9009766377297eda9774859b5b667a7496ea884052cb718f5faa65ec8be25bfb9a6f5de16b896c5b8b:adaf,900a8fc5538b62bc9e:262d,54404e2b82bd7259869c5d1688596daf96c554d14e9a8bb6710954bd960970df6df976d04e25781487125ca95ef68a00989c960e708e6cbf594463a9773c884d6f148273583071d5538c781a96c155015f6671305bb48c1a9a8c6b83592e9e2f79e76768626c4f6f75a17f8a6d0b96336c274ef075d2517b68376f3e908081705996747689:38393a3b3c3d3e3f40424345464748494a4b4c4d4e4f505152535455565758595a5b5c5d6061626364656768696a6b6c6d6e6f707172737475767778797a7c#7d7e808284858788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1,64475c2790657a918c2359da54ac8200836f898180006930564e8036723791ce51b64e5f987563964e1a53f666f3814b591c6db24e0058f9533b63d694f14f:9d0a,886398905937905779fb4eea80f075916c825b9c59e85f5d69058681501a5df24e5977e34ee5827a6291661390915c794ebf5f7981c69038808475ab4ea688d4610f6bc55fc64e4976ca6ea28b:e3ae,8c0a8bd15f027f:fccc,7ece83:356b,56e06bb797f3963459fb541f94f66deb5bc5996e5c395f15969089:a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c3cdd3d4d5d7d8d9dbdddfe0e1e2e4e7e8e9eaecedeef0f1f2f4f5f6f7f8f9fa#fbfcfdfeff,8a:01020304050608090a0b0c0d0e0f101112131415161718191a1b1c1d,537082f16a315a749e705e947f2883b984:2425,836787478fce8d6276c85f719896786c662054df62e54f6381c375c85eb896cd8e0a86f9548f6cf36d8c6c38607f52c775285e7d4f1860a05fe75c24753190ae94c072b96cb96e389149670953:cbf3,4f5191c98bf153c85e7c8fc26de44e8e76c26986865e611a82064f:59de,903e9c7c61096e:1d14,96854e885a3196e84e0e5c7f79b95b878bed7fbd738957df828b90c15401904755bb5cea5fa161086b3272f180b28a:891e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3f4041424344454647494a4b4c4d4e4f505152535455565758595a5b5c5d5e#5f606162636465666768696a6b6c6d6e6f7071727374757677787a7b7c7d7e7f80,6d745bd388d598848c6b9a6d9e336e0a51:a443,57a38881539f63f48f9556ed54585706733f6e907f188fdc82d1613f6028966266f07ea68d:8ac3,94a55cb37ca4670860a6960580184e9190e75300966851418fd08574915d665597f55b55531d78386742683d54c9707e5bb08f7d518d572854b1651266828d:5e43,810f846c906d7cdf51ff85fb67a365e96fa186a48e81566a90207682707671e58d2362e952196cfd8d3c600e589e618e66fe8d60624e55b36e23672d8f678a:81828384858687888b8c8d8e8f9091929495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2#c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3,94e195f87728680569a8548b4e4d70b88bc86458658b5b857a84503a5be877bb6be18a797c986cbe76cf65a98f975d2d5c5586386808536062187ad96e5b7efd6a1f7ae05f706f335f20638c6da867564e085e108d264ed780c07634969c62db662d627e6cbc8d7571677f695146808753ec906e629854f286f08f998005951785178fd96d5973cd659f771f7504782781fb8d1e94884fa6679575b98bca9707632f9547963584b8632377415f8172f04e896014657462ef6b63653f8a:e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,8b:0001020304050608090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20212223#24252728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445,5e2775c790d18bc1829d679d652f5431871877e580a281026c414e4b7ec7804c76f4690d6b966267503c4f84574063076b628dbe53ea65e87eb85fd763:1ab7,81:f3f4,7f6e5e1c5cd95236667a79e97a1a8d28709975d46ede6cbb7a924e2d76c55fe0949f88777ec879cd80bf91cd4ef24f17821f54685dde6d328bcc7ca58f7480985e1a549276b15b99663c9aa473e0682a86db6731732a8b:f8db,90107af970db716e62c477a956314e3b845767f152a986c08d2e94f87b518b:464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f6061626364656768696a6b6d6e6f707172737475767778797a7b7c7d7e7f80818283848586#8788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9facb1bbc7d0ea,8c:091e,4f4f6ce8795d9a7b6293722a62fd4e1378168f6c64b08d5a7bc668695e8488c55986649e58ee72b6690e95258ffd8d5857607f008c0651c6634962d95353684c74228301914c55447740707c6d4a517954a88d4459ff6ecb6dc45b5c7d2b4ed47c7d6ed35b5081ea6e0d5b579b0368d58e2a5b977efc603b7eb590b98d70594f63cd79df8db3535265cf79568bc5963b7ec494bb7e825634918967007f6a5c0a907566285de64f5067de505a4f5c57505e:a7#3,8c:38393a3b3c3d3e3f4042434445484a4b4d4e4f5051525354565758595b5c5d5e5f60636465666768696c6d6e6f707172747576777b7c7d7e7f808183848687#888b8d8e8f90919293959697999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacad,4e:8d0c,51404e105eff53454e:15981e,9b325b6c56694e2879ba4e3f53154e47592d723b536e6c1056df80e499976bd3777e9f174e:369f,9f104e:5c6993,82885b5b556c560f4ec453:8d9da3a5ae,97658d5d53:1af5262e3e,8d5c53:6663,52:02080e2d333f404c5e615c,84af52:7d82819093,51827f544e:bbc3c9c2e8e1ebde,4f1b4ef34f:2264,4ef54f:2527092b5e67,65384f:5a5d,8c:aeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebec#edeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,8d:000102030405060708090a0b0c0d,4f:5f57323d76749189838f7e7baa7cac94e6e8eac5dae3dcd1dff8,50:294c,4ff350:2c0f2e2d,4ffe50:1c0c25287e4355484e6c7ba5a7a9bad6,510650:edece6ee,51:070b,4edd6c3d4f:5865ce,9fa06c467c74516e5dfd9ec999985181591452f9530d8a07531051eb591951554ea051564eb388:6ea4,4eb5811488d279805b3488037fb851:abb1bdbc,8d:0e0f101112131415161718191a1b1c205152575f6568696a6c6e6f717278797a7b7c7d7e7f808283868788898c8d8e8f90929395969798999a9b9c9d9ea0a1#a2a4a5a6a7a8a9aaabacadaeafb0b2b6b7b9bbbdc0c1c2c5c7c8c9cacdd0d2d3d4,51:c796a2a5,8b:a0a6a7aab4b5b7c2c3cbcfced2d3d4d6d8d9dcdfe0e4e8e9eef0f3f6f9fcff,8c:000204070c0f1112141516191b181d1f202125272a2b2e2f32333536,53:697a,96:1d2221312a3d3c4249545f676c7274888d97b0,90:979b9d99aca1b4b3b6ba,8d:d5d8d9dce0e1e2e5e6e7e9edeef0f1f2f4f6fcfeff,8e:00010203040607080b0d0e1011121315161718191a1b1c202124252627282b2d303233343637383b3c3e#3f4345464c4d4e4f505354555657585a5b5c5d5e5f60616263646567686a6b6e71,90:b8b0cfc5bed0c4c7d3e6e2dcd7dbebeffe,91:04221e23312f394346,520d594252:a2acadbe,54ff52:d0d6f0,53df71ee77cd5ef451:f5fc,9b2f53b65f01755a5def57:4ca9a1,58:7ebcc5d1,57:292c2a33392e2f5c3b4269856b867c7b686d7673ada48cb2cfa7b493a0d5d8dad9d2b8f4eff8e4dd,8e:73757778797a7b7d7e808283848688898a8b8c8d8e91929395969798999a9b9d9fa0a1a2a3a4a5a6a7a8a9aaadaeb0b1b3b4b5b6b7b8b9bbbcbdbebfc0c1c2#c3c4c5c6c7c8c9cacbcccdcfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4,58:0b0d,57:fded,58:001e194420656c81899a80,99a89f1961ff82:797d7f8f8aa8848e919799abb8beb0c8cae398b7aecbccc1a9b4a1aa9fc4cea4e1,830982:f7e4,83:0f07,82:dcf4d2d8,830c82:fbd3,83:111a061415,82:e0d5,83:1c515b5c08923c34319b5e2f4f47435f4017602d3a336665,8e:e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,8f:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20212223#2425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f4041424344,83:681b696c6a6d6eb078b3b4a0aa939c857cb6a97db87b989ea8babcc1,840183:e5d8,580784:180b,83:ddfdd6,84:1c381106,83:d4df,84:0f03,83:f8f9eac5c0,842683:f0e1,84:5c515a597387887a89783c4669768c8e316dc1cdd0e6bdd3cabfbae0a1b9b497e5e3,850c750d853884f085:391f3a,8f:45464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f6061626364656a808c929da0a1a2a4a5a6a7aaacadaeafb2b3b4b5b7b8babbbcbfc0c3c6#c9cacbcccdcfd2d6d7dae0e1e3e7eceff1f2f4f5f6fafbfcfeff,90:07080c0e131518,85:563b,84:fffc,85:594868645e7a,77a285:43727ba4a8878f79ae9c85b9b7b0d3c1dcff,86:270529163c,5efe5f0859:3c41,803759:555a58,530f5c:22252c34,62:4c6a9fbbcadad7ee,632262f663:394b43adf6717a8eb46dac8a69aebcf2f8e0ffc4dece,645263:c6be,64:45410b1b200c26215e846d96,90:191c2324252728292a2b2c303132333437393a3d3f4043454648494a4b4c4e545556595a5c5d5e5f6061646667696a6b6c6f70717273767778797a7b7c7e81#84858687898a8c8d8e8f90929496989a9c9e9fa0a4a5a7a8a9abadb2b7bcbdbfc0,64:7ab7b899bac0d0d7e4e2,65:09252e,5f:0bd2,75195f1153:5ff1fde9e8fb,54:1216064b5253545643215759233282947771649a9b8476669dd0adc2b4d2a7a6d3d472a3d5bbbfccd9dadca9aaa4ddcfde,551b54e7552054fd551454f355:22230f11272a678fb5496d41553f503c,90:c2c3c6c8c9cbcccdd2d4d5d6d8d9dadedfe0e3e4e5e9eaeceef0f1f2f3f5f6f7f9fafbfcff,91:00010305060708090a0b0c0d0e0f1011121314151617181a1b1c#1d1f20212425262728292a2b2c2d2e30323334353637383a3b3c3d3e3f40414244,55:375675767733305c8bd283b1b988819f7ed6917bdfbdbe9499eaf7c9,561f55:d1ebecd4e6ddc4efe5f2f3cccde8f5e4,8f9456:1e080c012423,55fe56:00272d5839572c4d62595c4c548664716b7b7c8593afd4d7dde1f5ebf9ff,57:040a091c,5e:0f191411313b3c,91:454748515354555658595b5c5f606667686b6d737a7b7c808182838486888a8e8f939495969798999c9d9e9fa0a1a4a5a6a7a8a9abacb0b1b2b3b6b7b8b9bb#bcbdbebfc0c1c2c3c4c5c6c8cbd0d2d3d4d5d6d7d8d9dadbdddedfe0e1e2e3e4e5,5e:3744545b5e61,5c:8c7a8d9096889899919a9cb5a2bdacabb1a3c1b7c4d2e4cbe5,5d:020327262e241e061b583e343d6c5b6f5d6b4b4a697482999d,8c735d:b7c5,5f:73778287898c95999ca8adb5bc,88625f6172:adb0b4b7b8c3c1cecdd2e8efe9f2f4f7,730172f3730372fa91:e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,92:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f2021222324#25262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445,72fb73:1713210a1e1d152239252c3831504d57606c6f7e,821b592598e759:2402,99:636768696a6b6c74777d8084878a8d9091939495,5e:80918b96a5a0b9b5beb3,8d535e:d2d1dbe8ea,81ba5f:c4c9d6cf,60035fee60045f:e1e4fe,60:0506,5f:eaedf8,60:1935261b0f0d292b0a3f2178797b7a42,92:464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f7071727375767778797a7b7c7d7e7f808182838485#868788898a8b8c8d8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7,60:6a7d969aad9d83928c9becbbb1ddd8c6dab4,61:20261523,60f461:000e2b4a75ac94a7b7d4f5,5fdd96b395:e9ebf1f3f5f6fcfe,96:030406080a0b0c0d0f12151617191a,4e2c723f62156c:35545c4aa38590948c6869747686a9d0d4adf7f8f1d7b2e0d6faebeeb1d3effe,92:a8a9aaabacadafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8#e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,93:00010203040506070809,6d:39270c43480704190e2b4d2e351a4f525433916f9ea05e93945c607c63,6e1a6d:c7c5de,6e0e6d:bfe0,6e116d:e6ddd9,6e166dab6e0c6dae6e:2b6e4e6bb25f865354322544dfb198e0,6f2d6e:e2a5a7bdbbb7d7b4cf8fc29f,6f:6246472415,6ef96f:2f364b742a0929898d8c78727c7ad1,93:0a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3f40414243444546474849#4a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696b,6f:c9a7b9b6c2e1eedee0ef,70:1a231b39354f5e,5b:80849593a5b8,752f9a9e64345b:e4ee,89305bf08e478b078f:b6d3d5e5eee4e9e6f3e8,90:05040b26110d162135362d2f445152506858625b,66b990:747d8288838b,5f:50575658,5c3b54ab5c:5059,5b715c:6366,7fbc5f:2a292d,82745f3c9b3b5c6e59:81838da9aaa3,93:6c6d6e6f707172737475767778797a7b7c7d7e7f808182838485868788898a8b8c8d8e909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaab#acadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cbcccd,59:97caab9ea4d2b2afd7be,5a:0506,59dd5a0859:e3d8f9,5a:0c09323411231340674a553c6275,80ec5a:aa9b777abeebb2d2d4b8e0e3f1d6e6d8dc,5b:091716323740,5c:151c,5b:5a6573515362,9a:7577787a7f7d808185888a90929396989b9c9d9fa0a2a3a5a7,7e:9fa1a3a5a8a9,93:cecfd0d1d2d3d4d5d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,94:000102030405060708090a0b0c0d#0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e,7e:adb0bec0c1c2c9cbccd0d4d7dbe0e1e8ebeeeff1f2,7f0d7e:f6fafbfe,7f:01020307080b0c0f111217191c1b1f212223242526272a2b2c2d2f3031323335,5e7a757f5ddb753e909573:8e91aea29fcfc2d1b7b3c0c9c8e5d9,987c740a73:e9e7debaf2,74:0f2a5b262528302e2c,94:2f303132333435363738393a3b3c3d3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6c6d6e6f#707172737475767778797a7b7c7d7e7f8081828384919698c7cfd3d4dae6fb,95:1c20,74:1b1a415c575559776d7e9c8e8081878b9ea8a990a7d2ba,97:eaebec,67:4c535e4869a5876a7398a775a89ead8b777cf0,680967d8680a67:e9b0,680c67:d9b5dab3dd,680067:c3b8e2,680e67:c1fd,68:323360614e624464831d55664167403e4a4929b58f7477936bc2,696e68fc69:1f20,68f995:27333d43484b555a606e74757778797a7b7c7d7e808182838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aa#abacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacb,692468f069:0b0157,68e369:10713960425d846b80987834cc8788ce896663799ba7bbabadd4b1c1cadf95e08dff,6a2f69ed6a:171865,69f26a:443ea0505b358e793d28587c9190a997ab,73:3752,6b:8182878492938d9a9ba1aa,8f:6b6d71727375767877797a7c7e818284878b,95:cccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7ecff,96:0713181b1e20232425262728292b2c2d2f303738393a3e41434a4e4f5152535657#58595a5c5d5e606365666b6d6e6f70717378797a7b7c7d7e7f808182838487898a,8f:8d8e8f989a,8ece62:0b171b1f222125242c,81e774:eff4ff,75:0f1113,65:34eeeff0,66:0a19,677266:031500,708566:f71d34313635,800666:5f54414f56615777848ca79dbedbdce6e9,8d:3233363b3d4045464849474d5559,89:c7cacbcccecfd0d1,72:6e9f5d666f7e7f848b8d8f92,63:0832b0,96:8c8e91929395969a9b9d9e9fa0a1a2a3a4a5a6a8a9aaabacadaeafb1b2b4b5b7b8babbbfc2c3c8cacbd0d1d3d4d6d7d8d9dadbdcdddedfe1e2e3e4e5e6e7eb#ecedeef0f1f2f4f5f8fafbfcfdff,97:0203050a0b0c10111214151718191a1b1d1f20,64:3fd8,80046b:eaf3fdf5f9,6c:0507060d1518191a2129242a32,65:35556b,72:4d525630,8662521680:9f9c93bc,670a80:bdb1abadb4b7e7e8e9eadbc2c4d9cdd7,671080:ddebf1f4ed,81:0d0e,80:f2fc,671581128c5a81:361e2c1832484c5374595a7160697c7d6d67,584d5ab581:888291,6ed581:a3aacc,672681:cabb,97:2122232425262728292b2c2e2f3133343536373a3b3c3d3f404142434445464748494a4b4c4d4e4f5051545557585a5c5d5f63646667686a6b6c6d6e6f7071#72757778797a7b7d7e7f8081828384868788898a8c8e8f9093959697999a9b9c9d,81:c1a6,6b:243739434659,98:d1d2d3d5d9da,6bb35f406bc289f365909f5165:93bcc6c4c3ccced2d6,70:809c969dbbc0b7abb1e8ca,71:1013162f31735c6845724a787a98b3b5a8a0e0d4e7f9,72:1d28,706c71:1866b9,62:3e3d434849,79:3b4046495b5c535a6257606f677a858a9aa7b3,5f:d1d0,97:9e9fa1a2a4a5a6a7a8a9aaacaeb0b1b3b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3#e4e5e8eeeff0f1f2f4f7f8f9fafbfcfdfeff,98:000102030405060708090a0b0c0d0e,60:3c5d5a67415963ab,61:060d5da99dcbd1,620680:807f,6c:93f6,6dfc77:f6f8,78:0009171811,65ab78:2d1c1d393a3b1f3c252c23294e6d56572650474c6a9b939a879ca1a3b2b9a5d4d9c9ecf2,790578f479:13241e34,9f9b9e:f9fbfc,76f177:040d,76f977:07081a22192d263538505147435a68,98:0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b4c4d#4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e,77:62657f8d7d808c919fa0b0b5bd,75:3a404e4b485b727983,7f:58615f,8a487f:68747179817e,76:cde5,883294:8586878b8a8c8d8f909497959a9b9ca3a4abaaadacafb0b2b4b6b7b8b9babcbdbfc4c8c9cacbcccdced0d1d2d5d6d7d9d8dbdedfe0e2e4e5e7e8ea,98:6f70717273748b8e929599a3a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcfd0d4d6d7dbdcdde0e1e2e3e4#e5e6e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,99:0001020304050607,94:e9ebeeeff3f4f5f7f9fcfdff,95:03020607090a0d0e0f1213141516181b1d1e1f222a2b292c3132343637383c3e3f4235444546494c4e4f525354565758595b5e5f5d61626465666768696a6b6c6f7172733a,77:e7ec,96c979:d5ede3eb,7a065d477a:03021e14,99:08090a0b0c0e0f1112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2f303132333435363738393a3b3c3d3e3f40414243444546474849#4a4b4c4d4e4f50515253565758595a5b5c5d5e5f60616264667378797b7e828389,7a:393751,9ecf99a57a7076:888e9399a4,74:dee0,752c9e:202228292a2b2c3231363837393a3e414244464748494b4c4e5155575a5b5c5e63666768696a6b6c716d73,75:929496a09daca3b3b4b8c4b1b0c3c2d6cde3e8e6e4ebe7,760375:f1fcff,76:1000050c170a25181519,99:8c8e9a9b9c9d9e9fa0a1a2a3a4a6a7a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8#d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9,76:1b3c2220402d303f35433e334d5e545c566b6f,7fca7a:e6787980868895a6a0aca8adb3,88:6469727d7f82a2c6b7bcc9e2cee3e5f1,891a88:fce8fef0,89:2119131b0a342b3641667b,758b80e576:b2b4,77dc80:1214161c20222526272928310b3543464d526971,898398:788083,99:fafbfcfdfeff,9a:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738#393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f50515253545556575859,98:898c8d8f949a9b9e9fa1a2a5a6,86:4d546c6e7f7a7c7ba88d8bac9da7a3aa93a9b6c4b5ceb0bab1afc9cfb4e9f1f2edf3d0,871386:def4dfd8d1,87:0307,86f887:080a0d09233b1e252e1a3e48343129373f82227d7e7b60704c6e8b53637c64596593afa8d2,9a:5a5b5c5d5e5f606162636465666768696a6b7283898d8e949599a6a9aaabacadaeafb2b3b4b5b9bbbdbebfc3c4c6c7c8c9cacdcecfd0d2d4d5d6d7d9dadbdc#dddee0e2e3e4e5e7e8e9eaeceef0f1f2f3f4f5f6f7f8fafcfdfeff,9b:000102040506,87:c68885ad9783abe5acb5b3cbd3bdd1c0cadbeae0ee,88:1613,87fe88:0a1b21393c,7f:36424445,82107a:fafd,7b:080304150a2b0f47382a192e31202524333e1e585a45754c5d606e7b62727190a6a7b8ac9da885aa9ca2abb4d1c1ccdddae5e6ea,7c0c7b:fefc,7c:0f160b,9b:07090a0b0c0d0e1011121415161718191a1b1c1d1e2021222425262728292a2b2c2d2e3031333435363738393a3d3e3f40464a4b4c4e50525355565758595a#5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b,7c:1f2a26384140,81fe82:010204,81ec884482:2122232d2f282b383b33343e44494b4f5a5f68,88:7e8588d8df,895e7f:9d9fa7afb0b2,7c7c65497c:919d9c9ea2b2bcbdc1c7cccdc8c5d7e8,826e66a87f:bfced5e5e1e6e9eef3,7cf87d:77a6ae,7e:479b,9e:b8b4,8d:73849491b1676d,8c:4749,91:4a504e4f64,9b:7c7d7e7f808182838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9ba#bbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadb,91:626170696f7d7e7274798c85908d91a2a3aaadaeafb5b4ba,8c559e7e8d:b8eb,8e:055969,8d:b5bfbcbac4d6d7dadececfdbc6ecf7f8e3f9fbe4,8e098dfd8e:141d1f2c2e232f3a4039353d3149414251524a70767c6f74858f94909c9e,8c:78828a859894,659b89:d6dedadc,9b:dcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,9c:000102030405060708090a0b0c0d0e0f101112131415161718191a#1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b,89:e5ebef,8a3e8b26975396:e9f3ef,97:0601080f0e2a2d303e,9f:808385868788898a8c,9efe9f:0b0d,96:b9bcbdced2,77bf96e092:8eaec8,93:3e6aca8f,94:3e6b,9c:7f8285868788,7a239c:8b8e90919294959a9b9e9fa0a1a2a3a5a6a7a8a9abadaeb0b1b2b3b4b5b6b7babbbcbdc4c5c6c7cacb3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a#7b7d7e808384898a8c8f93969798999daaacafb9bebfc0c1c2c8c9d1d2dadbe0e1cccdcecfd0d3d4d5d7d8d9dcdddfe2,97:7c85919294afaba3b2b4,9a:b1b0b7,9e589a:b6babcc1c0c5c2cbccd1,9b:45434749484d51,98e899:0d2e5554,9a:dfe1e6efebfbedf9,9b:080f131f23,9e:bdbe,7e3b9e:8287888b92,93d69e:9d9fdbdcdde0dfe2e9e7e5eaef,9f:222c2f39373d3e44,9c:e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,9d:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f2021#22232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142#92434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f8081#82838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2#92a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1#e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,9e:000102#92030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e24272e30343b3c404d5052535456595d5f606162656e6f727475767778797a7b7c7d80#8183848586898a8c8d8e8f90919495969798999a9b9c9ea0a1a2a3a4a5a7a8a9aa#92abacadaeafb0b1b2b3b5b6b7b9babcbfc0c1c2c3c5c6c7c8cacbccd0d2d3d5d6d7d9dadee1e3e4e6e8ebecedeef0f1f2f3f4f5f6f7f8fafdff,9f:000102030405#060708090a0c0f1112141516181a1b1c1d1e1f21232425262728292a2b2d2e3031#923233343536383a3c3f4041424345464748494a4b4c4d4e4f52535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778#797a7b7c7d7e81828d8e8f9091929394959697989c9d9ea1a2a3a4a5,f9:2c7995e7f1#92,fa:0c0d0e0f111314181f20212324272829,e8:15161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f40414243#4445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f6061626364'), U2Ghash: any = {}, G2Uhash: any = {}; // @ts-ignore !function (data: any) { let k = 0; data = data.match(/..../g); for (let i = 0x81; i &lt;= 0xfe; i += 1) { for (let j = 0x40; j &lt;= 0xFE; j += 1) { U2Ghash[data[k += 1]] = (%${i.toString(16)}%${j.toString(16)}) .toUpperCase(); } } for (const key in U2Ghash) { G2Uhash[U2Ghash[key]] = key; } }(data); function isAscii(unicode: any) { return ((unicode === 0x20AC) || (unicode &lt;= 0x007F &amp;&amp; unicode &gt;= 0x0000)); } return { encode: function (str: any) { return str.replace(/./g, (a: any) =&gt; { const code = a.charCodeAt(0); if (isAscii(code)) { return encodeURIComponent(a); } const key = code.toString(16); // @ts-ignore if (key.length !== 4) key = (000${key}).match(/..../)[0]; return U2Ghash[key] || a; }); }, decode: function (str: any) { return str.replace(/%[0-9A-F]{2}%[0-9A-F]{2}/g, (a: any) =&gt; { if (a in G2Uhash) { // @ts-ignore return String.fromCharCode(`0x{G2Uhash[a]}`); } return a; }).replace(/%[\\w]{2}/g, (a: any) =&gt; decodeURIComponent(a)); } }; }(); export default util; å­˜å‚¨localStorage /** @FileName lStorage.ts @Author @Version V 0.0.1 @Date @Title å­˜å‚¨localStorage @Desc **/ const isNull = (obj: any) =&gt; typeof obj === 'undefined' || obj === null; const trim = (str: any) =&gt; isNull(str) ? '' : (${str}).replace(/[1]+|[\\s\\uFEFF\\xA0]+$/g, ''); const getAll = () =&gt; { const len = localStorage.length; // è·å–é•¿åº¦ // console.log(len); // è¾“å‡º5 const arr: Array = []; // å®šä¹‰æ•°æ®é›† for (let i = 0; i &lt; len; i += 1) { // è·å–key ç´¢å¼•ä»0å¼€å§‹ const getKey = localStorage.key(i) || ''; // è·å–keyå¯¹åº”çš„å€¼ const getVal = localStorage.getItem(getKey); // æ”¾è¿›æ•°ç»„ arr[i] = { key: getKey, val: getVal }; } return arr; }; const removeItem = (key: string) =&gt; { if (!key &amp;&amp; typeof window === 'undefined') return; window.localStorage.removeItem(key); }; const setItem = (key: string, content: any) =&gt; { if (!key &amp;&amp; typeof window === 'undefined') return; let contentTxt = content; if (typeof content !== 'string') { contentTxt = JSON.stringify(content); } window.localStorage.setItem(key, contentTxt); }; const getItem = (key: string) =&gt; { if (!key &amp;&amp; typeof window === 'undefined') return ''; return window.localStorage.getItem(key) || ''; }; const removeDataFromKey = (key = '') =&gt; { const all: any = getAll(); for (let i = 0, len = all.length; i &lt; len; i += 1) { if (trim(all[i].key).indexOf(key) !== -1) { removeItem(all[i].key); } } }; export default { // å­˜å‚¨localStorage setItem, // è·å–localStorage getItem, // åˆ é™¤localStorage removeItem, // ä»localStorageåˆ é™¤æ‰€æœ‰ä¿å­˜çš„æ•°æ® clear: () =&gt; window.localStorage.clear(), // è·å–æ‰€æœ‰çš„ ç¼“å­˜æ•°æ® getAll, // åˆ é™¤æŒ‡å®š keyåŒ¹é…çš„æ•°æ® removeDataFromKey }; sessionStorageæ“ä½œ /** @FileName sStorage.ts @Author @Version V 0.0.1 @Date @Title sessionStorageæ“ä½œ @Desc **/ const setItem = (key: string, content: any) =&gt; { if (!key &amp;&amp; typeof window === 'undefined') return; sessionStorage.setItem(key, JSON.stringify(content)); }; const getItem = (key: string) =&gt; { if (!key &amp;&amp; typeof window === 'undefined') return; return JSON.parse(sessionStorage.getItem(key) || ''); }; const removeItem = (key: string) =&gt; { if (!key &amp;&amp; typeof window === 'undefined') return; sessionStorage.removeItem(key); }; const clear = () =&gt; { sessionStorage.clear(); }; export default { setItem, getItem, removeItem, clear }; mockjs åŠ¨æ€æ¨¡æ‹Ÿæ•°æ® yarn add mockjs --dev /** @FileName mock.ts @Author @Version V 0.0.1 @Date @Title åŠ¨æ€æ¨¡æ‹Ÿæ•°æ® @Desc **/ import Mock from 'mockjs'; class MockJs { private baseUrl: string; constructor(baseUrl = '') { this.baseUrl = baseUrl; } /** åŸºç¡€æ–¹æ³• @param path æ‹¦æˆªçš„è·¯å¾„ @param params è¿”å›çš„æ¨¡æ‹Ÿæ•°æ® @param method æ‹¦æˆªçš„method */ action(path: string, params: any, method = 'post') { Mock.mock(new RegExp(^${this.baseUrl + path}), method, params); } get(path: string, params: any) { return this.action(path, params, 'get'); } post(path: string, params: any) { return this.action(path, params, 'post'); } put(path: string, params: any) { return this.action(path, params, 'put'); } patch(path: string, params: any) { return this.action(path, params, 'patch'); } delete(path: string, params: any) { return this.action(path, params, 'delete'); } head(path: string, params: any) { return this.action(path, params, 'head'); } options(path: string, params: any) { return this.action(path, params, 'options'); } tpl(data: any = '', msg = 'æˆåŠŸ', status = 200) { return {msg, data, status}; } } export default MockJs; Tools é€šç”¨å·¥å…·ç±» /** @FileName tools.ts @Author @Version V 0.0.1 @Date @Title é€šç”¨å·¥å…·ç±» @Desc **/ import ViewUI from 'view-design'; /* eslint-disable / const utils = { getUUID(len: number, radix: number) { const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''); const uuid = []; let i; radix = radix || chars.length; if (len) { for (i = 0; i &lt; len; i += 1) uuid[i] = chars[0 | Math.random() * radix]; } else { let r; uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-'; uuid[14] = '4'; for (i = 0; i &lt; 36; i += 1) { if (!uuid[i]) { r = 0 | Math.random() * 16; uuid[i] = chars[(i === 19) ? (r &amp; 0x3) | 0x8 : r]; } } } return uuid.join(''); }, getResult(arr = [], id = '', find = 'id', result = 'value') { let value = ''; if (id === undefined || id === null || !find || !result) { return ''; } arr.map((e) =&gt; { if (e[find] === id) { value = e[result]; } return e; }); return value; }, object: { isObject(obj: any) { return typeof obj === 'object'; }, isFunction(obj: any) { return typeof obj === 'function'; }, isArray(obj: any) { return this.isNotNull(obj) &amp;&amp; obj.constructor === Array; }, isNull(obj: any) { return typeof obj === 'undefined' || obj === null || this.length(obj) === 0; }, isNotNull(obj: any) { return !this.isNull(obj); }, length(obj: any) { let count = 0; for (const i in obj) { // å¦‚æœåŒ…å«é™¤å®ƒçš„åŸå‹æœ¬èº«ä¹‹å¤–çš„å±æ€§ if (Object.prototype.hasOwnProperty.call(obj, i)) { count += 1; } } return count; }, getChildrenPath(obj: any, c: any, k: any): any { if (this.isNull(obj)) { return null; } if (obj === c) { return k; } if (this.isObject(obj)) { let v; for (const key in obj) { if (!Object.prototype.hasOwnProperty.call(obj, key)) continue; v = this.getChildrenPath(obj[key], c, key); if (utils.string.isNotBlank(v)) { return ${utils.string.isNotBlank(k) ?{k}.` : &#039;&#039;}{v}; } } } return null; }, merge(t: any, s: any, mergeArray = false) { for (const k in s) { if (!Object.prototype.hasOwnProperty.call(s, k) || typeof s[k] === 'undefined' || s[k] === null) continue; const item = s[k]; switch (item.constructor) { case Object: { if (t[k] &amp;&amp; t[k].constructor === Object) { this.merge(t[k], item); } else { t[k] = item; } break; } case Array: { if (item.length &lt; 1) { break; } if (mergeArray &amp;&amp; t[k] &amp;&amp; t[k].constructor === Array) { t[k] = [...t[k], ...item]; } else { t[k] = item; } break; } case String: { if (item.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '').length &gt; 0) { t[k] = item; } break; } default: { t[k] = item; } } } return t; } }, string: { trim(str: any) { return utils.object.isNull(str) ? '' : ({str}`).replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+/g, ''); }, isBlank(str: any) { return utils.object.isNull(str) || this.trim(str).length === 0; }, isNotBlank(str: any) { return !this.isBlank(str); }, isEmpty(str: any) { return utils.object.isNull(str) || (${str}).length === 0; }, isNotEmpty(str: any) { return !this.isEmpty(str); }, equalsIgnoreCase(a: any, b: any) { if (utils.object.isNull(a) || utils.object.isNull(b)) { return false; } return (${a}).toLowerCase() === (${b}).toLowerCase(); } }, list: { isEmpty(l: any) { return utils.object.isNull(l) || l.length &lt; 1; }, isNotEmpty(l: any) { return !utils.list.isEmpty(l); }, stringToList(s: any) { const txt = typeof s === 'string' ? s.split(',') : s; return s &amp;&amp; s.length &gt; 0 ? txt : []; }, find(l: any, k: any, v: any, j: any) { const n = []; if (utils.list.isNotEmpty(l)) { for (let i = 0, len = l.length, r = l[i]; i &lt; len; i += 1) { if (j ? r[k] === v : ${r[k]} === ${v}) n.push(r); } } return n; }, indexOf(l: any, k: any, v: any, b: any, j: any) { let n = -1; if (utils.list.isNotEmpty(l)) { for (let i = b || 0, len = l.length, r = l[i]; i &lt; len; i += 1) { if (j ? r[k] === v : ${r[k]} === ${v}) { n = i; break; } } } return n; } }, map: { mapsExtVal(maps: any, key: any) { const list = []; for (let i = 0, len = maps.length; i &lt; len; i += 1) { list.push(maps[i][key]); } return list; }, listToMap(list: any, key: any) { if (utils.object.isNull(list) || utils.string.isEmpty(key)) { return null; } const map: any = {}; for (let i = 0, len = list.length; i &lt; len; i += 1) { const row = list[i]; map[row[key]] = row; } return map; }, isEqualForString(a: any, b: any) { return utils.map.isEqual(a, b, null, true); }, isEmpty(m: any) { return utils.object.isNull(m) || this.keys(m).length &lt; 1; }, isNotEmpty(m: any) { return !this.isEmpty(m); }, isEqual(a: any, b: any, isWeak: any, isString: any) { if (utils.object.isNull(a) &amp;&amp; utils.object.isNull(b)) { return true; } if (utils.object.isNull(a) || utils.object.isNull(b)) { return false; } const aks: any = this.keys(a); const bks: any = this.keys(b); const aksl: number = aks.length; const bksl: number = bks.length; if (aksl !== bksl) { return false; } for (let i = 0; i &lt; aksl; i += 1) { if (isWeak || isString ? ${a[aks[i]]} !== ${b[aks[i]]} : a[aks[i]] !== b[aks[i]]) { return false; } } return true; }, keys(m: any): any[] { const keys: any[] = []; for (const key in m) { if (Object.prototype.hasOwnProperty.call(m, key)) { keys.push(key); } } return keys; }, vals(m: any) { const l = []; const keys = utils.map.keys(m); for (let i = 0, len = keys.length; i &lt; len; i += 1) { l.push(m[keys[i]]); } return l; } }, // æ ¼å¼åŒ–æ‰‹æœºå· éšè—ä¸­é—´æ•°æ® formatPhoneNumber(phone: string) { if (!phone) return ''; return ${String(phone).slice(0, 3)}****${String(phone).slice(-4)}; }, // æ•°ç»„è½¬ ç™¾åˆ†æ¯” numberToPercentage(percentage: any) { if (percentage == null) return '--'; const num: any = (Math.round(percentage * 10000) / 100).toFixed(2); return Number(percentage) === 0 ? '0%' : ${Math.abs(num)}%; }, /* @param {Array} target ç›®æ ‡æ•°ç»„ @param {Array} arr éœ€è¦æŸ¥è¯¢çš„æ•°ç»„ @description åˆ¤æ–­è¦æŸ¥è¯¢çš„æ•°ç»„æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ åŒ…å«åœ¨ç›®æ ‡æ•°ç»„ä¸­ / hasOneOf: (targetarr: any, arr: any) =&gt; { return targetarr.some((: any) =&gt; arr.indexOf() &gt; -1); }, onMsg: (callback: any) =&gt; { window.onmessage = (res: any) =&gt; { callback(res); }; }, /* å¿«æ·é”®æ³¨å†Œ @param kes @param fun */ compositeKey: (kes: string, fun: any) =&gt; { const k = kes || ''; const fn = fun || function () { }; const ks = k.split('+'); if (ks.length &lt; 2) { console.info('not composite key'); return; } document.addEventListener('keydown', function (e) { const ctrl = e.ctrlKey, shift = e.shiftKey, alt = e.altKey; // @ts-ignore let keyIdent = e.keyIdentifier; if (ctrl &amp;&amp; (ks.indexOf('ctrl') === -1)) { return; } if (shift &amp;&amp; (ks.indexOf('shift') === -1)) { return; } if (alt &amp;&amp; (ks.indexOf('alt') === -1)) { return; } if (e.keyCode &gt; 47 &amp;&amp; e.keyCode &lt; 91) { keyIdent = String.fromCharCode(e.keyCode); } if (keyIdent &amp;&amp; keyIdent.toLowerCase() === ks[ks.length - 1]) { fn(e); } }); }, /** æ¶ˆæ¯é€šç”¨æ¨¡æ¿ @param type @param content @param duration / message: (type: string, content: string, duration = 6) =&gt; { // @ts-ignore ViewUI.Message[type]({ background: true, closable: true, content, duration }); }, /* å¼¹çª—é€šç”¨æ¨¡æ¿ @param type @param title @param content @param okCallBack @param cancelCallBack / modal: (type = 'info', title: string, content = '', okCallBack = () =&gt; { }, cancelCallBack = () =&gt; { }) =&gt; { // @ts-ignore ViewUI.Modal[type]({ title: title, content: content, onOk: () =&gt; { okCallBack(); }, onCancel: () =&gt; { cancelCallBack(); } }); }, /* é€šçŸ¥é€šç”¨æ¨¡æ¿ @param type @param title @param desc @param duration / notice: (type: string, title: string, desc: string, duration = 6) =&gt; { // @ts-ignore ViewUI.Notice[type]({ title, desc, duration }); }, /* éå†å¯¹è±¡ è¿”å› key value @param obj @param callback */ forIn: (obj: any, callback: any) =&gt; { Object.entries(obj).forEach(entry =&gt; { callback(...entry); }); } }; export default utils; vueTools /** @FileName vueTools.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import createRoutes from './createRoutes'; /** è·¯ç”±æƒé™åˆ¤æ–­å¤„ @param to @param next @param homeName / const turnTo = (to: any, next: any, homeName = 'home') =&gt; { next(); }; /* åˆ›å»ºè·¯ç”± @param title æ¨¡æ¿é€šç”¨æ ‡é¢˜ @param baseRoutes åŸºç¡€è·¯ç”± @param routes æ¨¡æ¿è·¯ç”± @param base è·¯ç”±æ ¹åœ°å€ï¼Œçº¿ä¸Šç»Ÿä¸€ / @param homeName ä¸»ç•Œé¢è·¯ç”±å @param mode è·¯ç”±æ¨¡å¼ é»˜è®¤ history */ const createRoute = (baseRoutes: any = [], routes: any = [], base = '', homeName = 'home', mode: any = 'history') =&gt; { if (process.env.NODE_ENV === 'production') base = ''; const title = ''; // @ts-ignore return createRoutes(baseRoutes, routes, base, homeName, mode, title, turnTo); }; export default {createRoute}; log /** @FileName log.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import moment from './moment'; import lStorage from './lStorage'; import fStorage from 'localforage'; const maxLog = 50; const setErrorLog = (key: string, info: any) =&gt; { if (typeof window !== 'undefined') { lStorage.setItem(key, info); } else { console.log('[ ERROR ]', info); } }; const setApiLog = (key: string, info: any) =&gt; { if (typeof window !== 'undefined') { // @ts-ignore info.time = moment.format(); const storage = fStorage.createInstance({name: key}); storage.keys().then((keys: any) =&gt; { if (keys.length &gt; maxLog) { const num = keys.length - maxLog; const newArr = keys.slice(0, num); newArr.forEach((item: any) =&gt; { storage.removeItem(item).then(() =&gt; { // å½“å€¼è¢«ç§»é™¤åï¼Œæ­¤å¤„ä»£ç è¿è¡Œ }).catch((err: any) =&gt; { console.log(err); }); }); } }).catch((err: any) =&gt; { console.error(err); }); // @ts-ignore if (info.status !== 200) { setErrorLog('errorMSG', info); } storage.setItem(moment.format(new Date(), 'x'), JSON.stringify(info)); } else { // @ts-ignore info.time = moment.format(); console.log('[ API ]', info); } }; const setConsoleLog = (key: string, info: any) =&gt; { if (typeof window !== 'undefined') { // @ts-ignore info.time = moment.format(); const storage = fStorage.createInstance({name: key}); storage.keys().then((keys: any) =&gt; { if (keys.length &gt; maxLog) { const num = keys.length - maxLog; const newArr = keys.slice(0, num); newArr.forEach((item: any) =&gt; { storage.removeItem(item).then(() =&gt; { // å½“å€¼è¢«ç§»é™¤åï¼Œæ­¤å¤„ä»£ç è¿è¡Œ }).catch((err: any) =&gt; { console.log(err); }); }); } }).catch((err: any) =&gt; { console.error(err); }); storage.setItem(moment.format(new Date(), 'x'), JSON.stringify(info)); } else { // @ts-ignore info.time = moment.format(); console.log('[ API ]', info); } }; const consoleMSG = (type: string, title: string, args: any) =&gt; { if (type === 'table') { // @ts-ignore console.log([ ${type} ] =&gt; ${title}); console.table([...args]); } // @ts-ignore console[type]([ ${type} ] =&gt; ${title}, args); const consoleInfo = { title: title, type, url: location.pathname + location.search, data: args }; setConsoleLog('logStorage', consoleInfo); }; export default { setConsoleLog, setErrorLog, setApiLog, info: (title: string, args: any) =&gt; consoleMSG('info', title, args), error: (title: string, args: any) =&gt; consoleMSG('error', title, args), debug: (title: string, args: any) =&gt; consoleMSG('debug', title, args), warn: (title: string, args: any) =&gt; consoleMSG('warn', title, args), table: (title: string, args: any) =&gt; consoleMSG('table', title, args) }; Axios /** @FileName axios.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import lStorage from './lStorage'; import ViewUI from 'view-design'; import tools from './tools'; import log from './log'; import axios from 'axios'; class HttpRequest { private baseUrl: string; private queue = {}; constructor(baseUrl = '') { this.baseUrl = baseUrl; this.queue = {}; } private static apiMsgTemplate(apiInfo: any) { return &lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;p style=&quot;color: red;font-size: 14px;&quot;&gt;è¯·æˆªå›¾ç»™ç®¡ç†å‘˜ï¼Œä»¥ä¾¿å¿«æ·ä¿®å¤é”™è¯¯ï¼&lt;/p&gt;&lt;p&gt;é”™è¯¯: ${apiInfo.statusText}&lt;/p&gt;&lt;p&gt;method: ${apiInfo.request.method}&lt;/p&gt;&lt;p style=&quot;margin: 5px 0;&quot;&gt;URL:&lt;br&gt; ${apiInfo.request.url}&lt;/p&gt;&lt;p&gt;å‚æ•°ï¼š&lt;br&gt;${apiInfo.request.data.toString()}&lt;/p&gt;&lt;/div&gt;; } private getInsideConfig() { return { baseURL: this.baseUrl, timeout: 10000, responseType: 'json', headers: { 'If-Modified-Since': 0, 'Cache-Control': 'no-cache' } }; } private destroy(url: string) { // @ts-ignore delete this.queue[url]; if (!Object.keys(this.queue).length) { // @ts-ignore ViewUI.LoadingBar.finish(); } } private unusualStatus(code: number, apiInfo: any) { switch (code) { case 0: tools.message('info', ${apiInfo.statusText}, 10); break; case 400: tools.notice('warning', è¯·æ±‚å‚æ•°é”™è¯¯: ${apiInfo.status}, HttpRequest.apiMsgTemplate(apiInfo), 15); break; case 401: // this.notice('warning', 'ç™»å½•ä¿¡æ¯', 'ç™»å½•è¶…æ—¶æˆ–æœªç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•ï¼'); tools.modal('warning', 'ç™»å½•ä¿¡æ¯', 'ç™»å½•è¶…æ—¶æˆ–æœªç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•ï¼', () =&gt; { lStorage.setItem('userInfo', ''); lStorage.setItem('isLogin', false); lStorage.setItem('Authorization', ''); lStorage.setItem('errorMSG', ''); location.href = '/login?done=' + location.href; }); break; case 404: tools.notice('info', èµ„æºæœªæ‰¾åˆ°: ${apiInfo.status}, HttpRequest.apiMsgTemplate(apiInfo), 15); break; case 405: tools.notice('warning', è¯·æ±‚ç±»å‹é”™è¯¯: ${apiInfo.status}, HttpRequest.apiMsgTemplate(apiInfo), 15); break; case 500: tools.notice('error', æœåŠ¡å™¨é”™è¯¯: ${apiInfo.status}, HttpRequest.apiMsgTemplate(apiInfo), 15); break; case 503: tools.notice('info', æœåŠ¡å™¨é”™è¯¯: ${apiInfo.status}, 'æœåŠ¡å™¨ç»´æŠ¤ä¸­ï¼Œè¯·ç¨åå†è¯•ï¼', 15); break; default: tools.message('error', ${apiInfo.status} : ${apiInfo.statusText}); break; } } interceptors(instance: any, url: string) { // è¯·æ±‚æ‹¦æˆª instance.interceptors.request.use( (config: any) =&gt; { // æ·»åŠ å…¨å±€çš„loading... if (!Object.keys(this.queue).length) { // @ts-ignore ViewUI.LoadingBar.start(); } // @ts-ignore this.queue[url] = true; return config; }, (error: any) =&gt; Promise.reject(error) ); // axios å“åº”æ‹¦æˆª instance.interceptors.response.use( (res: any) =&gt; { this.destroy(url); const {data: {data}, config, request: {responseURL}} = res; const response = res.request; const apiInfo = { status: response.status, statusText: (data &amp;&amp; data.msg) || response.statusText, request: { url: responseURL, api: config.baseURL + config.url || '', method: config.method, data: config.data || '' }, response: { data: data || '' } }; log.setApiLog('apiLogStorage', apiInfo); return data || ''; }, (error: any) =&gt; { this.destroy(url); let apiInfo: any; if (error.response) { const {response: {status, statusText, data, config, request: {responseURL}}} = error; apiInfo = { status, statusText: (data &amp;&amp; data.msg) || statusText, request: { url: responseURL, api: config.baseURL + config.url || '', method: config.method, data: config.data || '' }, response: { data: data || '' } }; } else { const {config, message} = JSON.parse(JSON.stringify(error)); const {request} = error; apiInfo = { status: request.status, statusText: message || request.statusText || '', request: { url: '', api: config.baseURL + config.url || '', method: config.method, data: config.data || '' }, response: { data: '' } }; } log.setApiLog('apiLogStorage', apiInfo); this.unusualStatus(apiInfo.status, apiInfo); if (apiInfo.response &amp;&amp; apiInfo.response.data) { return Promise.reject(apiInfo.response.data); } return Promise.reject(error); } ); } request(options: any) { const instance = axios.create(); options = Object.assign(this.getInsideConfig(), options); this.interceptors(instance, options.url); return instance(options); } } export default HttpRequest; API request /** @FileName api.request.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import HttpRequest from './axios'; import lStorage from './lStorage'; const getTokenToLocalStorage = () =&gt; { return lStorage.getItem('Authorization') || ''; }; class API { private baseUrl: string; private axios: any; constructor(baseUrl = '') { this.baseUrl = baseUrl; this.axios = new HttpRequest(baseUrl); } /** post è¯·æ±‚ @param url æ¥å£url @param data å‚æ•° @param method */ post(url: string, data: any, method = 'post') { return this.axios.request({ url, // data: qs.stringify(data), from æ ‡ç‚¹ä¼ å‚ data, method, headers: { Authorization: getTokenToLocalStorage() } }); } /** put è¯·æ±‚ @param url æ¥å£url @param data å‚æ•° */ put(url: string, data: any) { return this.post(url, data, 'put'); } /** patch è¯·æ±‚ @param url æ¥å£url @param data å‚æ•° */ patch(url: string, data: any) { return this.post(url, data, 'patch'); } /** get è¯·æ±‚ @param url æ¥å£url @param params å‚æ•° @param method */ get(url: string, params: any, method = 'get') { return this.axios.request({ url, params, method, headers: { Authorization: getTokenToLocalStorage() } }); } /** delete è¯·æ±‚ @param url æ¥å£url @param params å‚æ•° */ delete(url: string, params: any) { return this.get(url, params, 'delete'); } /** head è¯·æ±‚ @param url æ¥å£url @param params å‚æ•° */ head(url: string, params: any) { return this.get(url, params, 'head'); } /** options è¯·æ±‚ @param url æ¥å£url @param params å‚æ•° */ options(url: string, params: any) { return this.get(url, params, 'options'); } /** axiosæœ¬ç‰ˆæœ¬ä¸æ”¯æŒjsonp è‡ªå·±æ‹“å±•ä¸€ä¸ª @param url */ jsonp(url: string) { if (!url) { console.error('Axios.JSONP è‡³å°‘éœ€è¦ä¸€ä¸ªurlå‚æ•°!'); return; } return new Promise((resolve: any) =&gt; { // @ts-ignore window.jsonCallBack = (result: any) =&gt; { resolve(result); }; const JSONP = document.createElement('script'); JSONP.type = 'text/javascript'; JSONP.src = ${url}&amp;callback=jsonCallBack; document.getElementsByTagName('head')[0].appendChild(JSONP); setTimeout(() =&gt; { document.getElementsByTagName('head')[0].removeChild(JSONP); }, 500); }); } } export default API; å·¥å…·ç±»ç»Ÿä¸€å¯¼å‡º /** @FileName index.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import moment from './moment'; import log from './log'; import API from './api.request'; import cookie from './cookie'; import gbk from './gbk'; import lStorage from './lStorage'; import sStorage from './sStorage'; import tools from './tools'; import MockJs from './mock'; import createRoutes from './createRoutes'; export default { ...tools, moment, cookie, log, API, gbk, lStorage, sStorage, MockJs, createRoutes }; API &amp; Mock ç›¸å…³æ–‡ä»¶ç›®å½• â”œâ”€node_modules â”œâ”€public â”‚ â””â”€img â”‚ â””â”€icons â”œâ”€src â”‚ â”œâ”€assets â”‚ â”œâ”€components â”‚ â”‚ â””â”€log â”‚ â”œâ”€data â”‚ â”‚ â”œâ”€api â”‚ â”‚ â”‚ â””â”€test â”‚ â”‚ â””â”€mock â”‚ â”‚ â””â”€test â”‚ â”œâ”€layout â”‚ â”œâ”€libs â”‚ â”œâ”€router â”‚ â”œâ”€store â”‚ â””â”€views â””â”€tests â””â”€unit api 1ã€æ–°å»º /src/data/api ç›®å½• 2ã€æ–°å»º /src/data/api/test/index.ts æ–‡ä»¶ æ¥å£è°ƒç”¨é…ç½® /** @FileName index.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import tools from '@/libs/index'; const baseUrl = '/api'; const api = new tools.API(baseUrl); export default { // è·å–ç”¨æˆ·ä¿¡æ¯ http://192.192.192.201:9001/app/mock/1/user/info getUserInfoData: () =&gt; api.get('/user/info', {}) }; 3ã€æ–°å»º /src/data/api/index.ts æ–‡ä»¶ å¯¼å‡ºæ¥å£ï¼Œ /** @FileName index.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import test from './test'; export default {test}; 4ã€æ–°å»º /src/index.ts æ–‡ä»¶ æ‰€æœ‰é€šç”¨å¼•ç”¨é…ç½®ï¼Œæ–¹ä¾¿ä»¥ååšå¤šå…¥å£é¡¹ç›® /** @FileName index.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import Vue from 'vue'; import ViewUI from 'view-design'; import tools from '@/libs/index'; import api from '@/data/api'; import 'view-design/dist/styles/iview.css'; Vue.use(ViewUI); declare module 'vue/types/vue' { interface Vue { api: any; log: any; CDN: any; tool: any; config: any; } } console.log(process.env); Vue.prototype.config = process.env; Vue.prototype.log = tools.log; Vue.prototype.tool = tools; Vue.prototype.api = api; Vue.prototype.CDN = (path: string) =&gt; ${process.env.VUE_APP_CDN || ''}${path}; Vue.config.productionTip = false; 5ã€ /src/main.ts å¯¼å…¥/src/index.ts import Vue from 'vue'; import App from './App.vue'; import router from './router'; import store from './store'; import '@/index'; new Vue({ router, store, render: h =&gt; h(App) }).$mount('#app'); 6ã€é¡µé¢è°ƒç”¨ api æ¥å£ /src/views/Home.vue import {Component, Vue} from 'vue-property-decorator'; import HelloWorld from '@/components/HelloWorld.vue'; // @ is an alias to /src @Component({ components: { HelloWorld } }) export default class Home extends Vue { mounted() { this.getUserInfoAction(); } async getUserInfoAction() { try { const idCard = '33082219510203094X'; const data = await this.api.test.getUserInfoData(idCard); this.log.info('æ¥å£æµ‹è¯•ä¿¡æ¯ - get', data); return data; } catch (e) { this.log.error('æ¥å£æµ‹è¯•ä¿¡æ¯ - get', e); } } } Mock 1ã€æ–°å»º /src/data/mock ç›®å½• 2ã€æ–°å»º /src/data/mock/test/index.ts æ–‡ä»¶ mocké…ç½®ï¼Œç›®å½•ç»“æ„å’Œapiä¿æŒä¸€è‡´ï¼Œæ–¹ä¾¿åæœŸç»´æŠ¤ /** @FileName index.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import tools from '@/libs/index'; const baseUrl = '/api'; const mock = new tools.MockJs(baseUrl); mock.get('/user/info', mock.tpl({title: '@title'})); 3ã€æ ¹ç›®å½• .env æ–‡ä»¶é…ç½®mockå¼€å…³ NODE_ENV = 'development' VUE_APP_MOCK = true 4ã€/src/index.ts å¯¼å…¥mock /** @FileName index.ts @Author @Version V 0.0.1 @Date @Title @Desc **/ import Vue from 'vue'; import ViewUI from 'view-design'; import tools from '@/libs/index'; import api from '@/data/api'; import 'view-design/dist/styles/iview.css'; /* eslint-disable */ if (process.env.VUE_APP_MOCK === 'true') require('./data/mock'); Vue.use(ViewUI); declare module 'vue/types/vue' { interface Vue { api: any; log: any; CDN: any; tool: any; config: any; } } console.log(process.env); Vue.prototype.config = process.env; Vue.prototype.log = tools.log; Vue.prototype.tool = tools; Vue.prototype.api = api; Vue.prototype.CDN = (path: string) =&gt; ${process.env.VUE_APP_CDN || ''}${path}; Vue.config.productionTip = false; \\s\\uFEFF\\xA0 â†©ï¸ ","link":"https://kangjn.github.io/post/vue20-typescript-xiang-mu-da-jian/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(ä¸ƒ)ï¼šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œä¸€æ–‡è¯»æ‡‚è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹","content":"1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ 1.1 åŸºæœ¬å¸¸è¯† æˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸€ä¸‹å‡ ä¸ªå¸¸è¯†ï¼š 1ï¼‰è®¡ç®—æœºçš„æ ¸å¿ƒæ˜¯CPUï¼Œå®ƒæ‰¿æ‹…äº†æ‰€æœ‰çš„è®¡ç®—ä»»åŠ¡ï¼› 2ï¼‰æ“ä½œç³»ç»Ÿæ˜¯è®¡ç®—æœºçš„ç®¡ç†è€…ï¼Œå®ƒè´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦ã€èµ„æºçš„åˆ†é…å’Œç®¡ç†ï¼Œç»Ÿé¢†æ•´ä¸ªè®¡ç®—æœºç¡¬ä»¶ï¼› 3ï¼‰åº”ç”¨ç¨‹åºåˆ™æ˜¯å…·æœ‰æŸç§åŠŸèƒ½çš„ç¨‹åºï¼Œç¨‹åºæ˜¯è¿è¡Œäºæ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„ã€‚ è¿›ç¨‹æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸Šçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œæ˜¯åº”ç”¨ç¨‹åºè¿è¡Œçš„è½½ä½“ã€‚è¿›ç¨‹æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œä»æ¥æ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†å®šä¹‰ã€‚ è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†åˆå’Œè¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆï¼š 1ï¼‰ç¨‹åºç”¨äºæè¿°è¿›ç¨‹è¦å®Œæˆçš„åŠŸèƒ½ï¼Œæ˜¯æ§åˆ¶è¿›ç¨‹æ‰§è¡Œçš„æŒ‡ä»¤é›†ï¼› 2ï¼‰æ•°æ®é›†åˆæ˜¯ç¨‹åºåœ¨æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„æ•°æ®å’Œå·¥ä½œåŒºï¼› 3ï¼‰ç¨‹åºæ§åˆ¶å—(Program Control Blockï¼Œç®€ç§°PCB)ï¼ŒåŒ…å«è¿›ç¨‹çš„æè¿°ä¿¡æ¯å’Œæ§åˆ¶ä¿¡æ¯ï¼Œæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ è¿›ç¨‹å…·æœ‰çš„ç‰¹å¾ï¼š 1ï¼‰åŠ¨æ€æ€§ï¼šè¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ä¸´æ—¶çš„ï¼Œæœ‰ç”Ÿå‘½æœŸçš„ï¼Œæ˜¯åŠ¨æ€äº§ç”Ÿï¼ŒåŠ¨æ€æ¶ˆäº¡çš„ï¼› 2ï¼‰å¹¶å‘æ€§ï¼šä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åŒå…¶ä»–è¿›ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œï¼› 3ï¼‰ç‹¬ç«‹æ€§ï¼šè¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼› 4ï¼‰ç»“æ„æ€§ï¼šè¿›ç¨‹ç”±ç¨‹åºã€æ•°æ®å’Œè¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚ 1.2 ä¸ºä»€ä¹ˆè¦æœ‰å¤šè¿›ç¨‹ï¼Ÿ å¤šè¿›ç¨‹ç›®çš„ï¼šæé«˜cpuçš„ä½¿ç”¨ç‡ã€‚ **ä¸€ä¸ªä¾‹å­ï¼š**ä¸€ä¸ªç”¨æˆ·ç°åœ¨æ—¢æƒ³ä½¿ç”¨æ‰“å°æœºï¼Œåˆæƒ³ç©æ¸¸æˆã€‚ *å‡è®¾åªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼ˆå…ˆä¸è°ˆå¤šçº¿ç¨‹ï¼‰ï¼š* ä»æ“ä½œç³»ç»Ÿçš„å±‚é¢çœ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰“å°æœºçš„æ­¥éª¤æœ‰å¦‚ä¸‹ï¼š 1ï¼‰ä½¿ç”¨CPUæ‰§è¡Œç¨‹åºï¼Œå»ç¡¬ç›˜è¯»å–éœ€è¦æ‰“å°çš„æ–‡ä»¶ï¼Œç„¶åCPUä¼šé•¿æ—¶é—´çš„ç­‰å¾…ï¼Œç›´åˆ°ç¡¬ç›˜è¯»å†™å®Œæˆï¼› 2ï¼‰ä½¿ç”¨CPUæ‰§è¡Œç¨‹åºï¼Œè®©æ‰“å°æœºæ‰“å°è¿™äº›å†…å®¹ï¼Œç„¶åCPUä¼šé•¿æ—¶é—´çš„ç­‰å¾…ï¼Œç­‰å¾…æ‰“å°ç»“æŸã€‚ **åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼š**å…¶å®CPUçš„ä½¿ç”¨ç‡å…¶å®éå¸¸çš„ä½ã€‚ æ‰“å°ä¸€ä¸ªæ–‡ä»¶ä»å¤´åˆ°å°¾éœ€è¦çš„æ—¶é—´å¯èƒ½æ˜¯1åˆ†é’Ÿï¼Œè€Œcpuä½¿ç”¨çš„æ—¶é—´æ€»å’Œå¯èƒ½åŠ èµ·æ¥åªæœ‰å‡ ç§’é’Ÿã€‚è€Œåé¢å¦‚æœå•è¿›ç¨‹æ‰§è¡Œæ¸¸æˆçš„ç¨‹åºçš„æ—¶å€™ï¼ŒCPUä¹ŸåŒæ ·ä¼šæœ‰å¤§é‡çš„ç©ºé—²æ—¶é—´ã€‚ *ä½¿ç”¨å¤šè¿›ç¨‹åï¼š* å½“CPUåœ¨ç­‰å¾…ç¡¬ç›˜è¯»å†™æ–‡ä»¶ï¼Œæˆ–è€…åœ¨ç­‰å¾…æ‰“å°æœºæ‰“å°çš„æ—¶å€™ï¼ŒCPUå¯ä»¥å»æ‰§è¡Œæ¸¸æˆçš„ç¨‹åºï¼Œè¿™æ ·CPUå°±èƒ½å°½å¯èƒ½é«˜çš„æé«˜ä½¿ç”¨ç‡ã€‚ å†å…·ä½“ä¸€ç‚¹è¯´ï¼Œå…¶å®ä¹Ÿæé«˜äº†æ•ˆç‡ã€‚å› ä¸ºåœ¨ç­‰å¾…æ‰“å°æœºçš„æ—¶å€™ï¼Œè¿™æ—¶å€™æ˜¾å¡ä¹Ÿæ˜¯é—²ç½®çš„ï¼Œå¦‚æœç”¨å¤šè¿›ç¨‹å¹¶è¡Œçš„è¯ï¼Œæ¸¸æˆè¿›ç¨‹å®Œå…¨å¯ä»¥å¹¶è¡Œä½¿ç”¨æ˜¾å¡ï¼Œå¹¶ä¸”ä¸æ‰“å°æœºä¹‹é—´ä¹Ÿä¸ä¼šäº’ç›¸å½±å“ã€‚ 1.3 å°ç»“ä¸€ä¸‹ **è¿›ç¨‹ï¼Œç›´è§‚ç‚¹è¯´ï¼š**ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šçš„ç¨‹åºè¿è¡Œä»¥åï¼Œä¼šåœ¨å†…å­˜ç©ºé—´é‡Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜ä½“ï¼Œè¿™ä¸ªå†…å­˜ä½“æœ‰è‡ªå·±ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œæœ‰è‡ªå·±çš„å †ï¼Œä¸Šçº§æŒ‚é å•ä½æ˜¯æ“ä½œç³»ç»Ÿã€‚ æ“ä½œç³»ç»Ÿä¼šä»¥è¿›ç¨‹ä¸ºå•ä½ï¼Œåˆ†é…ç³»ç»Ÿèµ„æºï¼ˆCPUæ—¶é—´ç‰‡ã€å†…å­˜ç­‰èµ„æºï¼‰ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ã€‚ 2ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ 2.1 åŸºæœ¬å¸¸è¯† æ—©æœŸï¼šæ“ä½œç³»ç»Ÿä¸­å¹¶æ²¡æœ‰çº¿ç¨‹çš„æ¦‚å¿µï¼Œè¿›ç¨‹æ˜¯èƒ½æ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚ä»»åŠ¡è°ƒåº¦é‡‡ç”¨çš„æ˜¯æ—¶é—´ç‰‡è½®è½¬çš„æŠ¢å å¼è°ƒåº¦æ–¹å¼ï¼Œè€Œè¿›ç¨‹æ˜¯ä»»åŠ¡è°ƒåº¦çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰å„è‡ªç‹¬ç«‹çš„ä¸€å—å†…å­˜ï¼Œä½¿å¾—å„ä¸ªè¿›ç¨‹ä¹‹é—´å†…å­˜åœ°å€ç›¸äº’éš”ç¦»ã€‚ åæ¥ï¼šéšç€è®¡ç®—æœºçš„å‘å±•ï¼Œå¯¹CPUçš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œè¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢å¼€é”€è¾ƒå¤§ï¼Œå·²ç»æ— æ³•æ»¡è¶³è¶Šæ¥è¶Šå¤æ‚çš„ç¨‹åºçš„è¦æ±‚äº†ã€‚äºæ˜¯å°±å‘æ˜äº†çº¿ç¨‹ã€‚ çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ï¼š 1ï¼‰æ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒï¼› 2ï¼‰æ˜¯å¤„ç†å™¨è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆä¹Ÿå°±æ˜¯æ‰€åœ¨è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼‰ã€‚ä¸€ä¸ªæ ‡å‡†çš„çº¿ç¨‹ç”±çº¿ç¨‹IDã€å½“å‰æŒ‡ä»¤æŒ‡é’ˆï¼ˆPCï¼‰ã€å¯„å­˜å™¨å’Œå †æ ˆç»„æˆã€‚è€Œè¿›ç¨‹ç”±å†…å­˜ç©ºé—´ï¼ˆä»£ç ã€æ•°æ®ã€è¿›ç¨‹ç©ºé—´ã€æ‰“å¼€çš„æ–‡ä»¶ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆã€‚ **å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š**åœ¨ä»»åŠ¡ç®¡ç†å™¨çš„è¿›ç¨‹ä¸€æ é‡Œï¼Œæœ‰é“è¯å…¸å’Œæœ‰é“äº‘ç¬”è®°å°±æ˜¯è¿›ç¨‹ï¼Œè€Œåœ¨è¿›ç¨‹ä¸‹åˆæœ‰ç€å¤šä¸ªæ‰§è¡Œä¸åŒä»»åŠ¡çš„çº¿ç¨‹ã€‚ 2.2 ä»»åŠ¡è°ƒåº¦ çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿè¦ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹æ“ä½œç³»ç»Ÿçš„ä¸€äº›ç›¸å…³æ¦‚å¿µã€‚ å¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿï¼ˆå¦‚Windowsã€Linuxï¼‰çš„ä»»åŠ¡è°ƒåº¦æ˜¯é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„æŠ¢å å¼è°ƒåº¦æ–¹å¼ã€‚ **åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼š**å½“ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå‡ æ¯«ç§’åï¼Œä¼šç”±æ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼ˆè´Ÿè´£ç®¡ç†å„ä¸ªä»»åŠ¡ï¼‰è¿›è¡Œè°ƒåº¦ï¼Œé€šè¿‡ç¡¬ä»¶çš„è®¡æ•°å™¨ä¸­æ–­å¤„ç†å™¨ï¼Œè®©è¯¥çº¿ç¨‹å¼ºåˆ¶æš‚åœå¹¶å°†è¯¥çº¿ç¨‹çš„å¯„å­˜å™¨æ”¾å…¥å†…å­˜ä¸­ï¼Œé€šè¿‡æŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨å†³å®šæ¥ä¸‹æ¥æ‰§è¡Œå“ªä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä»å†…å­˜ä¸­æ¢å¤è¯¥çº¿ç¨‹çš„å¯„å­˜å™¨ï¼Œæœ€åæ¢å¤è¯¥çº¿ç¨‹çš„æ‰§è¡Œï¼Œä»è€Œå»æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚ **ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼š**ä»»åŠ¡æ‰§è¡Œçš„é‚£ä¸€å°æ®µæ—¶é—´å«åšæ—¶é—´ç‰‡ï¼Œä»»åŠ¡æ­£åœ¨æ‰§è¡Œæ—¶çš„çŠ¶æ€å«è¿è¡ŒçŠ¶æ€ï¼Œè¢«æš‚åœçš„çº¿ç¨‹ä»»åŠ¡çŠ¶æ€å«åšå°±ç»ªçŠ¶æ€ï¼Œæ„ä¸ºç­‰å¾…ä¸‹ä¸€ä¸ªå±äºå®ƒçš„æ—¶é—´ç‰‡çš„åˆ°æ¥ã€‚ è¿™ç§æ–¹å¼ä¿è¯äº†æ¯ä¸ªçº¿ç¨‹è½®æµæ‰§è¡Œï¼Œç”±äºCPUçš„æ‰§è¡Œæ•ˆç‡éå¸¸é«˜ï¼Œæ—¶é—´ç‰‡éå¸¸çŸ­ï¼Œåœ¨å„ä¸ªä»»åŠ¡ä¹‹é—´å¿«é€Ÿåœ°åˆ‡æ¢ï¼Œç»™äººçš„æ„Ÿè§‰å°±æ˜¯å¤šä¸ªä»»åŠ¡åœ¨â€œåŒæ—¶è¿›è¡Œâ€ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å¹¶å‘ï¼ˆåˆ«è§‰å¾—å¹¶å‘æœ‰å¤šé«˜æ·±ï¼Œå®ƒçš„å®ç°å¾ˆå¤æ‚ï¼Œä½†å®ƒçš„æ¦‚å¿µå¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€å¥è¯ï¼šå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼‰ã€‚ å¤šä»»åŠ¡è¿è¡Œè¿‡ç¨‹çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š â–² æ“ä½œç³»ç»Ÿä¸­çš„ä»»åŠ¡è°ƒåº¦ 2.3 è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ« å‰é¢è®²äº†è¿›ç¨‹ä¸çº¿ç¨‹ï¼Œä½†å¯èƒ½ä½ è¿˜è§‰å¾—è¿·ç³Šï¼Œæ„Ÿè§‰ä»–ä»¬å¾ˆç±»ä¼¼ã€‚çš„ç¡®ï¼Œè¿›ç¨‹ä¸çº¿ç¨‹æœ‰ç€åƒä¸ä¸‡ç¼•çš„å…³ç³»ã€‚ ä¸‹é¢å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥ç†ä¸€ç†ï¼š 1ï¼‰çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ï¼Œè€Œè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼› 2ï¼‰ä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œçº¿ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­ä»£ç çš„ä¸åŒæ‰§è¡Œè·¯çº¿ï¼› 3ï¼‰è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä½†åŒä¸€è¿›ç¨‹ä¸‹çš„å„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®é›†ã€å †ç­‰ï¼‰åŠä¸€äº›è¿›ç¨‹çº§çš„èµ„æºï¼ˆå¦‚æ‰“å¼€æ–‡ä»¶å’Œä¿¡å·ï¼‰ï¼ŒæŸè¿›ç¨‹å†…çš„çº¿ç¨‹åœ¨å…¶å®ƒè¿›ç¨‹ä¸å¯è§ï¼› 4ï¼‰çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢è¦å¿«å¾—å¤šã€‚ ä»¥ä¸‹çº¿ç¨‹ä¸è¿›ç¨‹å…³ç³»çš„ç¤ºæ„å›¾ã€‚ â–² è¿›ç¨‹ä¸çº¿ç¨‹çš„èµ„æºå…±äº«å…³ç³» â–² å•çº¿ç¨‹ä¸å¤šçº¿ç¨‹çš„å…³ç³» **æ€»ä¹‹ï¼š**çº¿ç¨‹å’Œè¿›ç¨‹éƒ½æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œçº¿ç¨‹æ˜¯ä¸€ç§æ¯”è¿›ç¨‹æ›´å°çš„æŠ½è±¡ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹éƒ½å¯ç”¨äºå®ç°å¹¶å‘ã€‚ åœ¨æ—©æœŸçš„æ“ä½œç³»ç»Ÿä¸­å¹¶æ²¡æœ‰çº¿ç¨‹çš„æ¦‚å¿µï¼Œè¿›ç¨‹æ˜¯èƒ½æ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚å®ƒç›¸å½“äºä¸€ä¸ªè¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿›ç¨‹æœ¬èº«å°±æ˜¯çº¿ç¨‹ã€‚æ‰€ä»¥çº¿ç¨‹æœ‰æ—¶è¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ï¼ˆLightweight Processï¼ŒLWPï¼‰ã€‚ â–² æ—©æœŸçš„æ“ä½œç³»ç»Ÿåªæœ‰è¿›ç¨‹ï¼Œæ²¡æœ‰çº¿ç¨‹ åæ¥ï¼šéšç€è®¡ç®—æœºçš„å‘å±•ï¼Œå¯¹å¤šä¸ªä»»åŠ¡ä¹‹é—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•ˆç‡è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œå°±æŠ½è±¡å‡ºä¸€ä¸ªæ›´å°çš„æ¦‚å¿µâ€”â€”çº¿ç¨‹ï¼Œä¸€èˆ¬ä¸€ä¸ªè¿›ç¨‹ä¼šæœ‰å¤šä¸ªï¼ˆä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªï¼‰çº¿ç¨‹ã€‚ â–² çº¿ç¨‹çš„å‡ºç°ï¼Œä½¿å¾—ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ 2.4 å¤šçº¿ç¨‹ä¸å¤šæ ¸ ä¸Šé¢æåˆ°çš„æ—¶é—´ç‰‡è½®è½¬çš„è°ƒåº¦æ–¹å¼è¯´ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œä¸€å°æ®µæ—¶é—´åå¼ºåˆ¶æš‚åœå»æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡è½®æµæ‰§è¡Œã€‚å¾ˆå¤šæ“ä½œç³»ç»Ÿçš„ä¹¦éƒ½è¯´â€œåŒä¸€æ—¶é—´ç‚¹åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œâ€ã€‚ é‚£æœ‰äººå¯èƒ½å°±è¦é—®åŒæ ¸å¤„ç†å™¨å‘¢ï¼Ÿéš¾é“ä¸¤ä¸ªæ ¸ä¸æ˜¯åŒæ—¶è¿è¡Œå—ï¼Ÿ å…¶å®ï¼šâ€œåŒä¸€æ—¶é—´ç‚¹åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œâ€è¿™å¥è¯æ˜¯ä¸å‡†ç¡®çš„ï¼Œè‡³å°‘å®ƒæ˜¯ä¸å…¨é¢çš„ã€‚é‚£å¤šæ ¸å¤„ç†å™¨çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ˜¯æ€æ ·æ‰§è¡Œå‘¢ï¼Ÿè¿™å°±éœ€è¦äº†è§£å†…æ ¸çº¿ç¨‹ã€‚ ***å¤šæ ¸(å¿ƒ)å¤„ç†å™¨æ˜¯æŒ‡ï¼š***åœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šé›†æˆå¤šä¸ªè¿ç®—æ ¸å¿ƒä»è€Œæé«˜è®¡ç®—èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šä¸ªçœŸæ­£å¹¶è¡Œè®¡ç®—çš„å¤„ç†æ ¸å¿ƒï¼Œæ¯ä¸€ä¸ªå¤„ç†æ ¸å¿ƒå¯¹åº”ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ã€‚ å†…æ ¸çº¿ç¨‹ï¼ˆKernel Threadï¼ŒKLTï¼‰ï¼šå°±æ˜¯ç›´æ¥ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„çº¿ç¨‹ï¼Œè¿™ç§çº¿ç¨‹ç”±å†…æ ¸æ¥å®Œæˆçº¿ç¨‹åˆ‡æ¢ï¼Œå†…æ ¸é€šè¿‡æ“ä½œè°ƒåº¦å™¨å¯¹çº¿ç¨‹è¿›è¡Œè°ƒåº¦ï¼Œå¹¶è´Ÿè´£å°†çº¿ç¨‹çš„ä»»åŠ¡æ˜ å°„åˆ°å„ä¸ªå¤„ç†å™¨ä¸Šã€‚ ä¸€èˆ¬ä¸€ä¸ªå¤„ç†æ ¸å¿ƒå¯¹åº”ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œæ¯”å¦‚å•æ ¸å¤„ç†å™¨å¯¹åº”ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼ŒåŒæ ¸å¤„ç†å™¨å¯¹åº”ä¸¤ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œå››æ ¸å¤„ç†å™¨å¯¹åº”å››ä¸ªå†…æ ¸çº¿ç¨‹ã€‚ ç°åœ¨çš„ç”µè„‘ä¸€èˆ¬æ˜¯åŒæ ¸å››çº¿ç¨‹ã€å››æ ¸å…«çº¿ç¨‹ï¼Œæ˜¯é‡‡ç”¨è¶…çº¿ç¨‹æŠ€æœ¯å°†ä¸€ä¸ªç‰©ç†å¤„ç†æ ¸å¿ƒæ¨¡æ‹Ÿæˆä¸¤ä¸ªé€»è¾‘å¤„ç†æ ¸å¿ƒï¼Œå¯¹åº”ä¸¤ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨æ“ä½œç³»ç»Ÿä¸­çœ‹åˆ°çš„CPUæ•°é‡æ˜¯å®é™…ç‰©ç†CPUæ•°é‡çš„ä¸¤å€ï¼Œå¦‚ä½ çš„ç”µè„‘æ˜¯åŒæ ¸å››çº¿ç¨‹ï¼Œæ‰“å¼€â€œä»»åŠ¡ç®¡ç†å™¨ -&gt; æ€§èƒ½â€å¯ä»¥çœ‹åˆ°4ä¸ªCPUçš„ç›‘è§†å™¨ï¼Œå››æ ¸å…«çº¿ç¨‹å¯ä»¥çœ‹åˆ°8ä¸ªCPUçš„ç›‘è§†å™¨ã€‚ â–² åŒæ ¸å››çº¿ç¨‹åœ¨Windows8ä¸‹æŸ¥çœ‹çš„ç»“æœ è¶…çº¿ç¨‹æŠ€æœ¯ï¼šå°±æ˜¯åˆ©ç”¨ç‰¹æ®Šçš„ç¡¬ä»¶æŒ‡ä»¤ï¼ŒæŠŠä¸€ä¸ªç‰©ç†èŠ¯ç‰‡æ¨¡æ‹Ÿæˆä¸¤ä¸ªé€»è¾‘å¤„ç†æ ¸å¿ƒï¼Œè®©å•ä¸ªå¤„ç†å™¨éƒ½èƒ½ä½¿ç”¨çº¿ç¨‹çº§å¹¶è¡Œè®¡ç®—ï¼Œè¿›è€Œå…¼å®¹å¤šçº¿ç¨‹æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ï¼Œå‡å°‘äº†CPUçš„é—²ç½®æ—¶é—´ï¼Œæé«˜çš„CPUçš„è¿è¡Œæ•ˆç‡ã€‚è¿™ç§è¶…çº¿ç¨‹æŠ€æœ¯ï¼ˆå¦‚åŒæ ¸å››çº¿ç¨‹ï¼‰ç”±å¤„ç†å™¨ç¡¬ä»¶çš„å†³å®šï¼ŒåŒæ—¶ä¹Ÿéœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒæ‰èƒ½åœ¨è®¡ç®—æœºä¸­è¡¨ç°å‡ºæ¥ã€‚ ç¨‹åºä¸€èˆ¬ä¸ä¼šç›´æ¥å»ä½¿ç”¨å†…æ ¸çº¿ç¨‹ï¼Œè€Œæ˜¯å»ä½¿ç”¨å†…æ ¸çº¿ç¨‹çš„ä¸€ç§é«˜çº§æ¥å£â€”â€”è½»é‡çº§è¿›ç¨‹ï¼ˆLightweight Processï¼ŒLWPï¼‰ï¼Œè½»é‡çº§è¿›ç¨‹å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šæ‰€è®²çš„çº¿ç¨‹ï¼Œä¹Ÿè¢«å«åšç”¨æˆ·çº¿ç¨‹ã€‚ ç”±äºæ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½ç”±ä¸€ä¸ªå†…æ ¸çº¿ç¨‹æ”¯æŒï¼Œå› æ­¤åªæœ‰å…ˆæ”¯æŒå†…æ ¸çº¿ç¨‹ï¼Œæ‰èƒ½æœ‰è½»é‡çº§è¿›ç¨‹ã€‚ ç”¨æˆ·çº¿ç¨‹ä¸å†…æ ¸çº¿ç¨‹çš„å¯¹åº”å…³ç³»æœ‰ä¸‰ç§æ¨¡å‹ï¼š 1ï¼‰ä¸€å¯¹ä¸€æ¨¡å‹ï¼› 2ï¼‰å¤šå¯¹ä¸€æ¨¡å‹ï¼› 3ï¼‰å¤šå¯¹å¤šæ¨¡å‹ã€‚ åœ¨ä¸‹é¢çš„æ–‡å­—ä¸­ï¼Œå°†ä»¥4ä¸ªå†…æ ¸çº¿ç¨‹ã€3ä¸ªç”¨æˆ·çº¿ç¨‹ä¸ºä¾‹å¯¹ä¸‰ç§æ¨¡å‹è¿›è¡Œè¯´æ˜ã€‚ 2.5 ä¸€å¯¹ä¸€æ¨¡å‹ **å¯¹äºä¸€å¯¹ä¸€æ¨¡å‹æ¥è¯´ï¼š**ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å°±å”¯ä¸€åœ°å¯¹åº”ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼ˆåè¿‡æ¥ä¸ä¸€å®šæˆç«‹ï¼Œä¸€ä¸ªå†…æ ¸çº¿ç¨‹ä¸ä¸€å®šæœ‰å¯¹åº”çš„ç”¨æˆ·çº¿ç¨‹ï¼‰ã€‚ **è¿™æ ·ï¼š**å¦‚æœCPUæ²¡æœ‰é‡‡ç”¨è¶…çº¿ç¨‹æŠ€æœ¯ï¼ˆå¦‚å››æ ¸å››çº¿ç¨‹çš„è®¡ç®—æœºï¼‰ï¼Œä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å°±å”¯ä¸€åœ°æ˜ å°„åˆ°ä¸€ä¸ªç‰©ç†CPUçš„å†…æ ¸çº¿ç¨‹ï¼Œçº¿ç¨‹ä¹‹é—´çš„å¹¶å‘æ˜¯çœŸæ­£çš„å¹¶å‘ã€‚ ä¸€å¯¹ä¸€æ¨¡å‹ä½¿ç”¨æˆ·çº¿ç¨‹å…·æœ‰ä¸å†…æ ¸çº¿ç¨‹ä¸€æ ·çš„ä¼˜ç‚¹ï¼šä¸€ä¸ªçº¿ç¨‹å› æŸç§åŸå› é˜»å¡æ—¶å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œä¸å—å½±å“ï¼ˆæ­¤å¤„ï¼Œä¸€å¯¹ä¸€æ¨¡å‹ä¹Ÿå¯ä»¥è®©å¤šçº¿ç¨‹ç¨‹åºåœ¨å¤šå¤„ç†å™¨çš„ç³»ç»Ÿä¸Šæœ‰æ›´å¥½çš„è¡¨ç°ï¼‰ã€‚ ä½†ä¸€å¯¹ä¸€æ¨¡å‹ä¹Ÿæœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š 1ï¼‰è®¸å¤šæ“ä½œç³»ç»Ÿé™åˆ¶äº†å†…æ ¸çº¿ç¨‹çš„æ•°é‡ï¼Œå› æ­¤ä¸€å¯¹ä¸€æ¨¡å‹ä¼šä½¿ç”¨æˆ·çº¿ç¨‹çš„æ•°é‡å—åˆ°é™åˆ¶ï¼› 2ï¼‰è®¸å¤šæ“ä½œç³»ç»Ÿå†…æ ¸çº¿ç¨‹è°ƒåº¦æ—¶ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€è¾ƒå¤§ï¼Œå¯¼è‡´ç”¨æˆ·çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡ä¸‹é™ã€‚ â–² ä¸€å¯¹ä¸€æ¨¡å‹ 2.6 å¤šå¯¹ä¸€æ¨¡å‹ å¤šå¯¹ä¸€æ¨¡å‹å°†å¤šä¸ªç”¨æˆ·çº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ä¸Šï¼Œçº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ç”±ç”¨æˆ·æ€çš„ä»£ç æ¥è¿›è¡Œï¼Œç³»ç»Ÿå†…æ ¸æ„Ÿå—ä¸åˆ°çº¿ç¨‹çš„å®ç°æ–¹å¼ã€‚ç”¨æˆ·çº¿ç¨‹çš„å»ºç«‹ã€åŒæ­¥ã€é”€æ¯ç­‰éƒ½åœ¨ç”¨æˆ·æ€ä¸­å®Œæˆï¼Œä¸éœ€è¦å†…æ ¸çš„ä»‹å…¥ã€‚ å› æ­¤ï¼Œç›¸å¯¹ä¸€å¯¹ä¸€æ¨¡å‹ï¼š 1ï¼‰å¤šå¯¹ä¸€æ¨¡å‹çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢é€Ÿåº¦è¦å¿«è®¸å¤šï¼› 2ï¼‰å¤šå¯¹ä¸€æ¨¡å‹å¯¹ç”¨æˆ·çº¿ç¨‹çš„æ•°é‡å‡ ä¹æ— é™åˆ¶ã€‚ ä½†å¤šå¯¹ä¸€æ¨¡å‹ä¹Ÿæœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š 1ï¼‰å¦‚æœå…¶ä¸­ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹é˜»å¡ï¼Œé‚£ä¹ˆå…¶å®ƒæ‰€æœ‰çº¿ç¨‹éƒ½å°†æ— æ³•æ‰§è¡Œï¼Œå› ä¸ºæ­¤æ—¶å†…æ ¸çº¿ç¨‹ä¹Ÿéšä¹‹é˜»å¡äº†ï¼› 2ï¼‰åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸Šï¼Œå¤„ç†å™¨æ•°é‡çš„å¢åŠ å¯¹å¤šå¯¹ä¸€æ¨¡å‹çš„çº¿ç¨‹æ€§èƒ½ä¸ä¼šæœ‰æ˜æ˜¾çš„å¢åŠ ï¼Œå› ä¸ºæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹éƒ½æ˜ å°„åˆ°ä¸€ä¸ªå¤„ç†å™¨ä¸Šäº†ã€‚ â–² å¤šå¯¹ä¸€æ¨¡å‹ 2.7 å¤šå¯¹å¤šæ¨¡å‹ å¤šå¯¹å¤šæ¨¡å‹ç»“åˆäº†ä¸€å¯¹ä¸€æ¨¡å‹å’Œå¤šå¯¹ä¸€æ¨¡å‹çš„ä¼˜ç‚¹ï¼šå°†å¤šä¸ªç”¨æˆ·çº¿ç¨‹æ˜ å°„åˆ°å¤šä¸ªå†…æ ¸çº¿ç¨‹ä¸Šï¼Œç”±çº¿ç¨‹åº“è´Ÿè´£åœ¨å¯ç”¨çš„å¯è°ƒåº¦å®ä½“ä¸Šè°ƒåº¦ç”¨æˆ·çº¿ç¨‹ã€‚ è¿™ä½¿å¾—çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢éå¸¸å¿«ï¼šå› ä¸ºå®ƒé¿å…äº†ç³»ç»Ÿè°ƒç”¨ã€‚ä½†æ˜¯å¢åŠ äº†å¤æ‚æ€§å’Œä¼˜å…ˆçº§å€’ç½®çš„å¯èƒ½æ€§ï¼Œä»¥åŠåœ¨ç”¨æˆ·æ€è°ƒåº¦ç¨‹åºå’Œå†…æ ¸è°ƒåº¦ç¨‹åºä¹‹é—´æ²¡æœ‰å¹¿æ³›ï¼ˆä¸”é«˜æ˜‚ï¼‰åè°ƒçš„æ¬¡ä¼˜è°ƒåº¦ã€‚ å¤šå¯¹å¤šæ¨¡å‹çš„ä¼˜ç‚¹æœ‰ï¼š 1ï¼‰ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹çš„é˜»å¡ä¸ä¼šå¯¼è‡´æ‰€æœ‰çº¿ç¨‹çš„é˜»å¡ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æœ‰åˆ«çš„å†…æ ¸çº¿ç¨‹è¢«è°ƒåº¦æ¥æ‰§è¡Œï¼› 2ï¼‰å¤šå¯¹å¤šæ¨¡å‹å¯¹ç”¨æˆ·çº¿ç¨‹çš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼› 3ï¼‰åœ¨å¤šå¤„ç†å™¨çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå¤šå¯¹å¤šæ¨¡å‹çš„çº¿ç¨‹ä¹Ÿèƒ½å¾—åˆ°ä¸€å®šçš„æ€§èƒ½æå‡ï¼Œä½†æå‡çš„å¹…åº¦ä¸å¦‚ä¸€å¯¹ä¸€æ¨¡å‹çš„é«˜ã€‚ â–² å¤šå¯¹å¤šæ¨¡å‹ åœ¨ç°åœ¨æµè¡Œçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå¤§éƒ½é‡‡ç”¨å¤šå¯¹å¤šçš„æ¨¡å‹ã€‚ 2.8 æŸ¥çœ‹è¿›ç¨‹ä¸çº¿ç¨‹ ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯å¤šè¿›ç¨‹çš„ï¼Œå¦‚ä½•æŸ¥çœ‹å‘¢ï¼Ÿ åœ¨Windowsä¸‹æˆ‘ä»¬åªé¡»æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨å°±èƒ½æŸ¥çœ‹ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è¿›ç¨‹å’Œçº¿ç¨‹æ•°ã€‚æŒ‰â€œCtrl+Alt+Delâ€æˆ–å³é”®å¿«æ·å·¥å…·æ æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ã€‚ æŸ¥çœ‹è¿›ç¨‹æ•°å’Œçº¿ç¨‹æ•°ï¼š åœ¨â€œè¿›ç¨‹â€é€‰é¡¹å¡ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåº”ç”¨ç¨‹åºåŒ…å«çš„çº¿ç¨‹æ•°ã€‚ å¦‚æœä¸€ä¸ªåº”ç”¨ç¨‹åºæœ‰å¤šä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°æ¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚åœ¨ä¸Šå›¾ä¸­ï¼ŒGoogleçš„Chromeæµè§ˆå™¨å°±æœ‰å¤šä¸ªè¿›ç¨‹ã€‚ åŒæ—¶ï¼Œå¦‚æœæ‰“å¼€äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªå®ä¾‹ä¹Ÿä¼šæœ‰å¤šä¸ªè¿›ç¨‹ï¼Œå¦‚ä¸Šå›¾ä¸­æˆ‘æ‰“å¼€äº†ä¸¤ä¸ªcmdçª—å£ï¼Œå°±æœ‰ä¸¤ä¸ªcmdè¿›ç¨‹ã€‚å¦‚æœçœ‹ä¸åˆ°çº¿ç¨‹æ•°è¿™ä¸€åˆ—ï¼Œå¯ä»¥å†ç‚¹å‡»â€œæŸ¥çœ‹ -&gt; é€‰æ‹©åˆ—â€èœå•ï¼Œå¢åŠ ç›‘å¬çš„åˆ—ã€‚ æŸ¥çœ‹CPUå’Œå†…å­˜çš„ä½¿ç”¨ç‡ï¼šåœ¨æ€§èƒ½é€‰é¡¹å¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹CPUå’Œå†…å­˜çš„ä½¿ç”¨ç‡ï¼Œæ ¹æ®CPUä½¿ç”¨è®°å½•çš„ç›‘è§†å™¨çš„ä¸ªæ•°è¿˜èƒ½çœ‹å‡ºé€»è¾‘å¤„ç†æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œå¦‚æˆ‘çš„åŒæ ¸å››çº¿ç¨‹çš„è®¡ç®—æœºå°±æœ‰å››ä¸ªç›‘è§†å™¨ã€‚ â–² æŸ¥çœ‹CPUå’Œå†…å­˜çš„ä½¿ç”¨ç‡ 2.9 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ å½“çº¿ç¨‹çš„æ•°é‡å°äºå¤„ç†å™¨çš„æ•°é‡æ—¶ï¼Œçº¿ç¨‹çš„å¹¶å‘æ˜¯çœŸæ­£çš„å¹¶å‘ï¼Œä¸åŒçš„çº¿ç¨‹è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šã€‚ ä½†å½“çº¿ç¨‹çš„æ•°é‡å¤§äºå¤„ç†å™¨çš„æ•°é‡æ—¶ï¼Œçº¿ç¨‹çš„å¹¶å‘ä¼šå—åˆ°ä¸€äº›é˜»ç¢ï¼Œæ­¤æ—¶å¹¶ä¸æ˜¯çœŸæ­£çš„å¹¶å‘ï¼Œå› ä¸ºæ­¤æ—¶è‡³å°‘æœ‰ä¸€ä¸ªå¤„ç†å™¨ä¼šè¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚ åœ¨å•ä¸ªå¤„ç†å™¨è¿è¡Œå¤šä¸ªçº¿ç¨‹æ—¶ï¼Œå¹¶å‘æ˜¯ä¸€ç§æ¨¡æ‹Ÿå‡ºæ¥çš„çŠ¶æ€ã€‚æ“ä½œç³»ç»Ÿé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼è½®æµæ‰§è¡Œæ¯ä¸€ä¸ªçº¿ç¨‹ã€‚ç°åœ¨ï¼Œå‡ ä¹æ‰€æœ‰çš„ç°ä»£æ“ä½œç³»ç»Ÿé‡‡ç”¨çš„éƒ½æ˜¯æ—¶é—´ç‰‡è½®è½¬çš„æŠ¢å å¼è°ƒåº¦æ–¹å¼ï¼Œå¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„Unixã€Linuxã€WindowsåŠmacOSç­‰æµè¡Œçš„æ“ä½œç³»ç»Ÿã€‚ æˆ‘ä»¬çŸ¥é“çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ï¼Œä¹Ÿæ˜¯ä»»åŠ¡æ‰§è¡Œçš„æœ€å°å•ä½ã€‚åœ¨æ—©æœŸåªæœ‰è¿›ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æœ‰äº”ç§çŠ¶æ€ï¼Œåˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡(ç­‰å¾…)ã€é€€å‡ºã€‚æ—©æœŸçš„è¿›ç¨‹ç›¸å½“äºç°åœ¨çš„åªæœ‰å•ä¸ªçº¿ç¨‹çš„è¿›ç¨‹ï¼Œé‚£ä¹ˆç°åœ¨çš„å¤šçº¿ç¨‹ä¹Ÿæœ‰äº”ç§çŠ¶æ€ï¼Œç°åœ¨çš„å¤šçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸æ—©æœŸè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸç±»ä¼¼ã€‚ â–² æ—©æœŸè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹æœ‰ä¸‰ç§çŠ¶æ€ï¼šå°±ç»ªã€è¿è¡Œã€é˜»å¡ï¼Œåˆ›å»ºå’Œé€€å‡ºçŠ¶æ€æè¿°çš„æ˜¯è¿›ç¨‹çš„åˆ›å»ºè¿‡ç¨‹å’Œé€€å‡ºè¿‡ç¨‹ã€‚ æ—©æœŸè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸè¯¦ç»†è¯´æ˜å¦‚ä¸‹ï¼š åˆ›å»ºï¼šè¿›ç¨‹æ­£åœ¨åˆ›å»ºï¼Œè¿˜ä¸èƒ½è¿è¡Œã€‚æ“ä½œç³»ç»Ÿåœ¨åˆ›å»ºè¿›ç¨‹æ—¶è¦è¿›è¡Œçš„å·¥ä½œåŒ…æ‹¬åˆ†é…å’Œå»ºç«‹è¿›ç¨‹æ§åˆ¶å—è¡¨é¡¹ã€å»ºç«‹èµ„æºè¡¨æ ¼å¹¶åˆ†é…èµ„æºã€åŠ è½½ç¨‹åºå¹¶å»ºç«‹åœ°å€ç©ºé—´ï¼› å°±ç»ªï¼šæ—¶é—´ç‰‡å·²ç”¨å®Œï¼Œæ­¤çº¿ç¨‹è¢«å¼ºåˆ¶æš‚åœï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªå±äºå®ƒçš„æ—¶é—´ç‰‡åˆ°æ¥ï¼› è¿è¡Œï¼šæ­¤çº¿ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œæ­£åœ¨å ç”¨æ—¶é—´ç‰‡ï¼› é˜»å¡ï¼šä¹Ÿå«ç­‰å¾…çŠ¶æ€ï¼Œç­‰å¾…æŸä¸€äº‹ä»¶(å¦‚IOæˆ–å¦ä¸€ä¸ªçº¿ç¨‹)æ‰§è¡Œå®Œï¼› é€€å‡ºï¼šè¿›ç¨‹å·²ç»“æŸï¼Œæ‰€ä»¥ä¹Ÿç§°ç»“æŸçŠ¶æ€ï¼Œé‡Šæ”¾æ“ä½œç³»ç»Ÿåˆ†é…çš„èµ„æºã€‚ â–² çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸè·Ÿè¿›ç¨‹å¾ˆç±»ä¼¼ï¼š åˆ›å»ºï¼šä¸€ä¸ªæ–°çš„çº¿ç¨‹è¢«åˆ›å»ºï¼Œç­‰å¾…è¯¥çº¿ç¨‹è¢«è°ƒç”¨æ‰§è¡Œï¼› å°±ç»ªï¼šæ—¶é—´ç‰‡å·²ç”¨å®Œï¼Œæ­¤çº¿ç¨‹è¢«å¼ºåˆ¶æš‚åœï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªå±äºå®ƒçš„æ—¶é—´ç‰‡åˆ°æ¥ï¼› è¿è¡Œï¼šæ­¤çº¿ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œæ­£åœ¨å ç”¨æ—¶é—´ç‰‡ï¼› é˜»å¡ï¼šä¹Ÿå«ç­‰å¾…çŠ¶æ€ï¼Œç­‰å¾…æŸä¸€äº‹ä»¶(å¦‚IOæˆ–å¦ä¸€ä¸ªçº¿ç¨‹)æ‰§è¡Œå®Œï¼› é€€å‡ºï¼šä¸€ä¸ªçº¿ç¨‹å®Œæˆä»»åŠ¡æˆ–è€…å…¶ä»–ç»ˆæ­¢æ¡ä»¶å‘ç”Ÿï¼Œè¯¥çº¿ç¨‹ç»ˆæ­¢è¿›å…¥é€€å‡ºçŠ¶æ€ï¼Œé€€å‡ºçŠ¶æ€é‡Šæ”¾è¯¥çº¿ç¨‹æ‰€åˆ†é…çš„èµ„æºã€‚ 3ã€ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ 3.1 åŸºæœ¬å¸¸è¯† åç¨‹ï¼šè‹±æ–‡Coroutinesï¼Œæ˜¯ä¸€ç§åŸºäºçº¿ç¨‹ä¹‹ä¸Šï¼Œä½†åˆæ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ï¼Œè¿™ç§ç”±ç¨‹åºå‘˜è‡ªå·±å†™ç¨‹åºæ¥ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹å«åšâ€œç”¨æˆ·ç©ºé—´çº¿ç¨‹â€ï¼Œå…·æœ‰å¯¹å†…æ ¸æ¥è¯´ä¸å¯è§çš„ç‰¹æ€§ã€‚ å› ä¸ºæ˜¯è‡ªä¸»å¼€è¾Ÿçš„å¼‚æ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥å¾ˆå¤šäººä¹Ÿæ›´å–œæ¬¢å«å®ƒä»¬çº¤ç¨‹ï¼ˆFiberï¼‰ï¼Œæˆ–è€…ç»¿è‰²çº¿ç¨‹ï¼ˆGreenThreadï¼‰ã€‚ æ­£å¦‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ä¸€æ ·ï¼Œä¸€ä¸ªçº¿ç¨‹ä¹Ÿå¯ä»¥æ‹¥æœ‰å¤šä¸ªåç¨‹ã€‚ 3.2 åç¨‹çš„ç›®çš„ å¯¹äºJavaç¨‹åºå‘˜æ¥è¯´ï¼Œåœ¨ä¼ ç»Ÿçš„J2EEç³»ç»Ÿä¸­éƒ½æ˜¯åŸºäºæ¯ä¸ªè¯·æ±‚å ç”¨ä¸€ä¸ªçº¿ç¨‹å»å®Œæˆå®Œæ•´çš„ä¸šåŠ¡é€»è¾‘ï¼ˆåŒ…æ‹¬äº‹åŠ¡ï¼‰ã€‚æ‰€ä»¥ç³»ç»Ÿçš„ååèƒ½åŠ›å–å†³äºæ¯ä¸ªçº¿ç¨‹çš„æ“ä½œè€—æ—¶ã€‚ å¦‚æœé‡åˆ°å¾ˆè€—æ—¶çš„I/Oè¡Œä¸ºï¼Œåˆ™æ•´ä¸ªç³»ç»Ÿçš„ååç«‹åˆ»ä¸‹é™ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™çº¿ç¨‹ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œå¦‚æœçº¿ç¨‹å¾ˆå¤šçš„æ—¶å€™ï¼Œä¼šå­˜åœ¨å¾ˆå¤šçº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€ï¼ˆç­‰å¾…è¯¥çº¿ç¨‹æ‰§è¡Œå®Œæ‰èƒ½æ‰§è¡Œï¼‰ï¼Œé€ æˆäº†èµ„æºåº”ç”¨ä¸å½»åº•ã€‚ æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯JDBCï¼ˆå®ƒæ˜¯åŒæ­¥é˜»å¡çš„ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šäººéƒ½è¯´æ•°æ®åº“æ˜¯ç“¶é¢ˆçš„åŸå› ã€‚è¿™é‡Œçš„è€—æ—¶å…¶å®æ˜¯è®©CPUä¸€ç›´åœ¨ç­‰å¾…I/Oè¿”å›ï¼Œè¯´ç™½äº†çº¿ç¨‹æ ¹æœ¬æ²¡æœ‰åˆ©ç”¨CPUå»åšè¿ç®—ï¼Œè€Œæ˜¯å¤„äºç©ºè½¬çŠ¶æ€ã€‚è€Œå¦å¤–è¿‡å¤šçš„çº¿ç¨‹ï¼Œä¹Ÿä¼šå¸¦æ¥æ›´å¤šçš„ContextSwitchå¼€é”€ã€‚ å¯¹äºä¸Šè¿°é—®é¢˜ï¼šç°é˜¶æ®µè¡Œä¸šé‡Œçš„æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€å°±æ˜¯å•çº¿ç¨‹åŠ ä¸Šå¼‚æ­¥å›è°ƒã€‚å…¶ä»£è¡¨æ´¾æ˜¯ [node.js]ä»¥åŠ Java é‡Œçš„æ–°ç§€ [Vert.x]ã€‚ è€Œåç¨‹çš„ç›®çš„å°±æ˜¯å½“å‡ºç°é•¿æ—¶é—´çš„I/Oæ“ä½œæ—¶ï¼Œé€šè¿‡è®©å‡ºç›®å‰çš„åç¨‹è°ƒåº¦ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡çš„æ–¹å¼ï¼Œæ¥æ¶ˆé™¤ContextSwitchä¸Šçš„å¼€é”€ã€‚ 3.3 åç¨‹çš„ç‰¹ç‚¹ åç¨‹çš„ç‰¹ç‚¹æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š 1ï¼‰çº¿ç¨‹çš„åˆ‡æ¢ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£è°ƒåº¦ï¼Œåç¨‹ç”±ç”¨æˆ·è‡ªå·±è¿›è¡Œè°ƒåº¦ï¼Œå› æ­¤å‡å°‘äº†ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæé«˜äº†æ•ˆç‡ï¼› 2ï¼‰çº¿ç¨‹çš„é»˜è®¤Stackå¤§å°æ˜¯1Mï¼Œè€Œåç¨‹æ›´è½»é‡ï¼Œæ¥è¿‘1Kã€‚å› æ­¤å¯ä»¥åœ¨ç›¸åŒçš„å†…å­˜ä¸­å¼€å¯æ›´å¤šçš„åç¨‹ï¼› 3ï¼‰ç”±äºåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šï¼Œå› æ­¤å¯ä»¥é¿å…ç«äº‰å…³ç³»è€Œä½¿ç”¨é”ï¼› 4ï¼‰é€‚ç”¨äºè¢«é˜»å¡çš„ï¼Œä¸”éœ€è¦å¤§é‡å¹¶å‘çš„åœºæ™¯ã€‚ä½†ä¸é€‚ç”¨äºå¤§é‡è®¡ç®—çš„å¤šçº¿ç¨‹ï¼Œé‡åˆ°æ­¤ç§æƒ…å†µï¼Œæ›´å¥½å®ç”¨çº¿ç¨‹å»è§£å†³ã€‚ 3.4 åç¨‹çš„åŸç† å½“å‡ºç°IOé˜»å¡çš„æ—¶å€™ï¼Œç”±åç¨‹çš„è°ƒåº¦å™¨è¿›è¡Œè°ƒåº¦ï¼Œé€šè¿‡å°†æ•°æ®æµç«‹åˆ»yieldæ‰ï¼ˆä¸»åŠ¨è®©å‡ºï¼‰ï¼Œå¹¶ä¸”è®°å½•å½“å‰æ ˆä¸Šçš„æ•°æ®ï¼Œé˜»å¡å®Œåç«‹åˆ»å†é€šè¿‡çº¿ç¨‹æ¢å¤æ ˆï¼Œå¹¶æŠŠé˜»å¡çš„ç»“æœæ”¾åˆ°è¿™ä¸ªçº¿ç¨‹ä¸Šå»è·‘ã€‚ è¿™æ ·çœ‹ä¸Šå»å¥½åƒè·Ÿå†™åŒæ­¥ä»£ç æ²¡æœ‰ä»»ä½•å·®åˆ«ï¼Œè¿™æ•´ä¸ªæµç¨‹å¯ä»¥ç§°ä¸ºcoroutineï¼Œè€Œè·‘åœ¨ç”±coroutineè´Ÿè´£è°ƒåº¦çš„çº¿ç¨‹ç§°ä¸ºFiberã€‚æ¯”å¦‚ï¼šGolangé‡Œçš„ goå…³é”®å­—å…¶å®å°±æ˜¯è´Ÿè´£å¼€å¯ä¸€ä¸ªFiberï¼Œè®©funcé€»è¾‘è·‘åœ¨ä¸Šé¢ã€‚ ç”±äºåç¨‹çš„æš‚åœå®Œå…¨ç”±ç¨‹åºæ§åˆ¶ï¼Œå‘ç”Ÿåœ¨ç”¨æˆ·æ€ä¸Šï¼›è€Œçº¿ç¨‹çš„é˜»å¡çŠ¶æ€æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ¥è¿›è¡Œåˆ‡æ¢ï¼Œå‘ç”Ÿåœ¨å†…æ ¸æ€ä¸Šã€‚ **å› æ­¤ï¼š**åç¨‹çš„å¼€é”€è¿œè¿œå°äºçº¿ç¨‹çš„å¼€é”€ï¼Œä¹Ÿå°±æ²¡æœ‰äº†ContextSwitchä¸Šçš„å¼€é”€ã€‚ 3.5 åç¨‹å’Œçº¿ç¨‹çš„æ¯”è¾ƒ 4ã€æ€»ç»“ä¸€ä¸‹ æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ã€‚ è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«å°±æ˜¯ï¼š 1ï¼‰è°ƒåº¦ï¼šçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºæ‹¥æœ‰èµ„æºçš„åŸºæœ¬å•ä½ï¼› 2ï¼‰å¹¶å‘æ€§ï¼šä¸ä»…è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¹Ÿå¯å¹¶å‘æ‰§è¡Œï¼› 3ï¼‰æ‹¥æœ‰èµ„æºï¼šè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºçš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œä½†å¯ä»¥è®¿é—®éš¶å±äºè¿›ç¨‹çš„èµ„æºï¼› 4ï¼‰ç³»ç»Ÿå¼€é”€ï¼šåœ¨åˆ›å»ºæˆ–æ’¤æ¶ˆè¿›ç¨‹æ—¶ï¼Œç”±äºç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…å’Œå›æ”¶èµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿçš„å¼€é”€æ˜æ˜¾å¤§äºåˆ›å»ºæˆ–æ’¤æ¶ˆçº¿ç¨‹æ—¶çš„å¼€é”€ã€‚ è¿›ç¨‹å’Œçº¿ç¨‹ä¹‹é—´çš„è”ç³»å°±æ˜¯ï¼š 1ï¼‰ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼› 2ï¼‰èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼ŒåŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼› 3ï¼‰å¤„ç†æœºåˆ†ç»™çº¿ç¨‹ï¼Œå³çœŸæ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œçš„æ˜¯çº¿ç¨‹ï¼› 4ï¼‰çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åä½œåŒæ­¥ã€‚ä¸åŒè¿›ç¨‹çš„çº¿ç¨‹é—´è¦åˆ©ç”¨æ¶ˆæ¯é€šä¿¡çš„åŠæ³•å®ç°åŒæ­¥ã€‚ *é‚£ä¹ˆï¼Œæ—¢ç„¶æœ‰äº†çº¿ç¨‹ï¼Œä¸ºå•¥è¿˜è¦æœ‰åç¨‹ï¼Ÿ* è€ƒè™‘è¿™ä¸€æ ·ä¸€ç§åœºæ™¯ï¼š å¼€å‘è€…åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­åªåšéå¸¸è½»é‡çš„æ“ä½œï¼Œæ¯”å¦‚è®¿é—®ä¸€ä¸ªæå°çš„æ–‡ä»¶ï¼Œä¸‹è½½ä¸€å¼ æå°çš„å›¾ç‰‡ï¼ŒåŠ è½½ä¸€æ®µæå°çš„æ–‡æœ¬ç­‰ã€‚ä½†æ˜¯ï¼Œè¿™æ ·â€è½»é‡çš„æ“ä½œâ€œçš„é‡å´éå¸¸å¤šã€‚ åœ¨æœ‰å¤§é‡è¿™æ ·çš„è½»é‡æ“ä½œçš„åœºæ™¯ä¸‹ï¼Œå³ä½¿å¯ä»¥é€šè¿‡ä½¿ç”¨çº¿ç¨‹æ± æ¥é¿å…åˆ›å»ºä¸é”€æ¯çš„å¼€é”€ï¼Œä½†æ˜¯çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ä¹Ÿä¼šéå¸¸å¤§ï¼Œç”šè‡³äºæ¥è¿‘æ“ä½œæœ¬èº«çš„å¼€é”€ã€‚ å¯¹äºè¿™äº›åœºæ™¯ï¼Œå°±éå¸¸éœ€è¦ä¸€ç§å¯ä»¥å‡å°‘è¿™äº›å¼€é”€çš„æ–¹å¼ã€‚äºæ˜¯ï¼Œåç¨‹å°±åº”æ™¯è€Œå‡ºï¼Œéå¸¸é€‚åˆè¿™æ ·çš„åœºæ™¯ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-qi-shen-ru-cao-zuo-xi-tong-yi-wen-du-dong-jin-cheng-xian-cheng-xie-cheng/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(å…­)ï¼šé€šä¿—æ˜“æ‡‚ï¼Œé«˜æ€§èƒ½æœåŠ¡å™¨åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„","content":"1ã€å¤šè¿›ç¨‹ å†å²ä¸Šæœ€æ—©å‡ºç°ä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€ç§å¹¶è¡Œå¤„ç†å¤šä¸ªè¯·æ±‚çš„æ–¹æ³•å°±æ˜¯åˆ©ç”¨[å¤šè¿›ç¨‹]ã€‚ æ¯”å¦‚åœ¨Linuxä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨forkã€execç­‰ç³»ç»Ÿè°ƒç”¨åˆ›å»ºå¤šä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çˆ¶è¿›ç¨‹ä¸­æ¥æ”¶ç”¨æˆ·çš„è¿æ¥è¯·æ±‚ï¼Œç„¶ååˆ›å»ºå­è¿›ç¨‹å»å¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚ å°±åƒè¿™æ ·ï¼š è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹å°±åœ¨äºï¼š 1ï¼‰ç¼–ç¨‹ç®€å•ï¼Œéå¸¸å®¹æ˜“ç†è§£ï¼› 2ï¼‰ç”±äºå„ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå› æ­¤ä¸€ä¸ªè¿›ç¨‹å´©æºƒåå¹¶ä¸ä¼šå½±å“å…¶å®ƒè¿›ç¨‹ï¼› 3ï¼‰å……åˆ†åˆ©ç”¨å¤šæ ¸èµ„æºã€‚ å¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†çš„ä¼˜ç‚¹å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯ç¼ºç‚¹åŒæ ·æ˜æ˜¾ï¼š 1ï¼‰å„ä¸ªè¿›ç¨‹åœ°å€ç©ºé—´ç›¸äº’éš”ç¦»ï¼Œè¿™ä¸€ä¼˜ç‚¹ä¹Ÿä¼šå˜æˆç¼ºç‚¹ï¼Œé‚£å°±æ˜¯è¿›ç¨‹é—´è¦æƒ³é€šä¿¡å°±ä¼šå˜å¾—æ¯”è¾ƒå›°éš¾ï¼Œä½ éœ€è¦å€ŸåŠ©è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼Œinterprocess communicationsï¼‰æœºåˆ¶ï¼Œæƒ³ä¸€æƒ³ä½ ç°åœ¨çŸ¥é“å“ªäº›è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œç„¶åè®©ä½ ç”¨ä»£ç å®ç°å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œè¿›ç¨‹é—´é€šä¿¡ç¼–ç¨‹ç›¸å¯¹å¤æ‚ï¼Œè€Œä¸”æ€§èƒ½ä¹Ÿæ˜¯ä¸€å¤§é—®é¢˜ï¼› 2ï¼‰æˆ‘ä»¬çŸ¥é“åˆ›å»ºè¿›ç¨‹å¼€é”€æ˜¯æ¯”çº¿ç¨‹è¦å¤§çš„ï¼Œé¢‘ç¹çš„åˆ›å»ºé”€æ¯è¿›ç¨‹æ— ç–‘ä¼šåŠ é‡ç³»ç»Ÿè´Ÿæ‹…ã€‚ 2ã€å¤šçº¿ç¨‹ ä¸æ˜¯åˆ›å»ºè¿›ç¨‹å¼€é”€å¤§å—ï¼Ÿä¸æ˜¯è¿›ç¨‹é—´é€šä¿¡å›°éš¾å—ï¼Ÿè¿™äº›å¯¹äºçº¿ç¨‹æ¥è¯´ç»Ÿç»Ÿä¸æ˜¯é—®é¢˜ã€‚ ç”±äºçº¿ç¨‹å…±äº«è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œå› æ­¤çº¿ç¨‹é—´é€šä¿¡å¤©ç„¶ä¸éœ€è¦å€ŸåŠ©ä»»ä½•é€šä¿¡æœºåˆ¶ï¼Œç›´æ¥è¯»å–å†…å­˜å°±å¥½äº†ã€‚ çº¿ç¨‹åˆ›å»ºé”€æ¯çš„å¼€é”€ä¹Ÿå˜å°äº†ï¼Œè¦çŸ¥é“çº¿ç¨‹å°±åƒå¯„å±…èŸ¹ä¸€æ ·ï¼Œæˆ¿å­ï¼ˆåœ°å€ç©ºé—´ï¼‰éƒ½æ˜¯è¿›ç¨‹çš„ï¼Œè‡ªå·±åªæ˜¯ä¸€ä¸ªç§Ÿå®¢ï¼Œå› æ­¤éå¸¸çš„è½»é‡çº§ï¼Œåˆ›å»ºé”€æ¯çš„å¼€é”€ä¹Ÿéå¸¸å°ã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå³ä½¿ä¸€ä¸ªçº¿ç¨‹å› æ‰§è¡ŒI/Oæ“ä½œâ€”â€”æ¯”å¦‚è¯»å–æ•°æ®åº“ç­‰â€”â€”è¢«é˜»å¡æš‚åœè¿è¡Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¶å®ƒçº¿ç¨‹ã€‚ å°±åƒè¿™æ ·ï¼š ä½†çº¿ç¨‹å°±æ˜¯å®Œç¾çš„ã€åŒ…æ²»ç™¾ç—…çš„å—ï¼Œæ˜¾ç„¶ï¼Œè®¡ç®—æœºä¸–ç•Œä»æ¥æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚ ç”±äºçº¿ç¨‹å…±äº«è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œè¿™åœ¨ä¸ºçº¿ç¨‹é—´é€šä¿¡å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†æ— å°½çš„éº»çƒ¦ã€‚ æ­£æ˜¯ç”±äºçº¿ç¨‹é—´å…±äº«åœ°å€ç©ºé—´ï¼Œå› æ­¤ä¸€ä¸ªçº¿ç¨‹å´©æºƒä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹å´©æºƒé€€å‡ºï¼ŒåŒæ—¶çº¿ç¨‹é—´é€šä¿¡ç®€ç›´å¤ªç®€å•äº†ï¼Œç®€å•åˆ°çº¿ç¨‹é—´é€šä¿¡åªéœ€è¦ç›´æ¥è¯»å–å†…å­˜å°±å¯ä»¥äº†ï¼Œä¹Ÿç®€å•åˆ°å‡ºç°é—®é¢˜ä¹Ÿæå…¶å®¹æ˜“ï¼Œæ­»é”ã€çº¿ç¨‹é—´çš„åŒæ­¥äº’æ–¥ã€ç­‰ç­‰ï¼Œè¿™äº›æå®¹æ˜“äº§ç”Ÿbugï¼Œæ— æ•°ç¨‹åºå‘˜å®è´µçš„æ—¶é—´å°±æœ‰ç›¸å½“ä¸€éƒ¨åˆ†ç”¨æ¥è§£å†³å¤šçº¿ç¨‹å¸¦æ¥çš„æ— å°½é—®é¢˜ã€‚ è™½ç„¶çº¿ç¨‹ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œä½†æ˜¯ç›¸æ¯”å¤šè¿›ç¨‹æ¥è¯´ï¼Œçº¿ç¨‹æ›´æœ‰ä¼˜åŠ¿ï¼Œä½†æƒ³å•çº¯çš„åˆ©ç”¨å¤šçº¿ç¨‹å°±èƒ½è§£å†³é«˜å¹¶å‘é—®é¢˜ä¹Ÿæ˜¯ä¸åˆ‡å®é™…çš„ã€‚ å› ä¸ºè™½ç„¶çº¿ç¨‹åˆ›å»ºå¼€é”€ç›¸æ¯”è¿›ç¨‹å°ï¼Œä½†ä¾ç„¶ä¹Ÿæ˜¯æœ‰å¼€é”€çš„ï¼Œå¯¹äºåŠ¨è¾„æ•°ä¸‡æ•°åä¸‡çš„é“¾æ¥çš„é«˜å¹¶å‘æœåŠ¡å™¨æ¥è¯´ï¼Œåˆ›å»ºæ•°ä¸‡ä¸ªçº¿ç¨‹ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œè¿™åŒ…æ‹¬å†…å­˜å ç”¨ã€çº¿ç¨‹é—´åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯è°ƒåº¦çš„å¼€é”€ã€‚ 3ã€äº‹ä»¶é©±åŠ¨ï¼šEvent Loop åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æåˆ°â€œå¹¶è¡Œâ€äºŒå­—å°±ä¼šæƒ³åˆ°è¿›ç¨‹ã€çº¿ç¨‹ã€‚ **ä½†æ˜¯ï¼š**å¹¶è¡Œç¼–ç¨‹åªèƒ½ä¾èµ–è¿™ä¸¤é¡¹æŠ€æœ¯å—ï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼ è¿˜æœ‰å¦ä¸€é¡¹å¹¶è¡ŒæŠ€æœ¯å¹¿æ³›åº”ç”¨åœ¨GUIç¼–ç¨‹ä»¥åŠæœåŠ¡å™¨ç¼–ç¨‹ä¸­ï¼Œè¿™å°±æ˜¯è¿‘å‡ å¹´éå¸¸æµè¡Œçš„äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼ševent-based concurrencyã€‚å®é™…ä¸Šäº‹ä»¶é©±åŠ¨ç¼–ç¨‹åŸç†ä¸Šéå¸¸ç®€å•ã€‚ è¿™ä¸€æŠ€æœ¯éœ€è¦ä¸¤ç§åŸæ–™ï¼š 1ï¼‰eventï¼› 2ï¼‰å¤„ç†eventçš„å‡½æ•°ï¼Œè¿™ä¸€å‡½æ•°é€šå¸¸è¢«ç§°ä¸ºevent handlerï¼› å‰©ä¸‹çš„å°±ç®€å•äº†ï¼šä½ åªéœ€è¦å®‰é™çš„ç­‰å¾…eventåˆ°æ¥å°±å¥½ï¼Œå½“eventåˆ°æ¥ä¹‹åï¼Œæ£€æŸ¥ä¸€ä¸‹eventçš„ç±»å‹ï¼Œå¹¶æ ¹æ®è¯¥ç±»å‹æ‰¾åˆ°å¯¹åº”çš„eventå¤„ç†å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯event handlerï¼Œç„¶åç›´æ¥è°ƒç”¨è¯¥event handlerå°±å¥½äº†ã€‚ **ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼š**æˆ‘ä»¬éœ€è¦ä¸æ–­çš„æ¥æ”¶eventç„¶åå¤„ç†eventï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾ªç¯ï¼ˆç”¨whileæˆ–è€…forå¾ªç¯éƒ½å¯ä»¥ï¼‰ï¼Œè¿™ä¸ªå¾ªç¯è¢«ç§°ä¸ºEvent loopã€‚ ä½¿ç”¨ä¼ªä»£ç è¡¨ç¤ºå°±æ˜¯è¿™æ ·ï¼š while(true) { event = getEvent(); handler(event); } Event loopä¸­è¦åšçš„äº‹æƒ…å…¶å®æ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€è¦ç­‰å¾…eventçš„å¸¦æ¥ï¼Œç„¶åè°ƒç”¨ç›¸åº”çš„eventå¤„ç†å‡½æ•°å³å¯ã€‚ **æ³¨æ„ï¼š**è¿™æ®µä»£ç åªéœ€è¦è¿è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹ä¸­ï¼Œåªéœ€è¦è¿™ä¸€ä¸ªevent loopå°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç”¨æˆ·è¯·æ±‚ã€‚ **æœ‰çš„å¯ä»¥ä¾ç„¶ä¸æ˜ç™½ï¼š**ä¸ºä»€ä¹ˆè¿™æ ·ä¸€ä¸ªevent loopå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚å‘¢ï¼Ÿ **åŸå› å¾ˆç®€å•ï¼š**å¯¹äºç½‘ç»œé€šä¿¡æœåŠ¡å™¨æ¥è¯´ï¼Œå¤„ç†ä¸€ä¸ªç”¨æˆ·è¯·æ±‚æ—¶å¤§éƒ¨åˆ†æ—¶é—´å…¶å®éƒ½ç”¨åœ¨äº†I/Oæ“ä½œä¸Šï¼Œåƒæ•°æ®åº“è¯»å†™ã€æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯»å†™ç­‰ã€‚å½“ä¸€ä¸ªè¯·æ±‚åˆ°æ¥ï¼Œç®€å•å¤„ç†ä¹‹åå¯èƒ½å°±éœ€è¦æŸ¥è¯¢æ•°æ®åº“ç­‰I/Oæ“ä½œï¼Œæˆ‘ä»¬çŸ¥é“I/Oæ˜¯éå¸¸æ…¢çš„ï¼Œå½“å‘èµ·I/Oåæˆ‘ä»¬å¤§å¯ä»¥ä¸ç”¨ç­‰å¾…è¯¥I/Oæ“ä½œå®Œæˆå°±å¯ä»¥ç»§ç»­å¤„ç†æ¥ä¸‹æ¥çš„ç”¨æˆ·è¯·æ±‚ã€‚ **ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†å§ï¼š**è™½ç„¶ä¸Šä¸€ä¸ªç”¨æˆ·è¯·æ±‚è¿˜æ²¡æœ‰å¤„ç†å®Œæˆ‘ä»¬å…¶å®å°±å¯ä»¥å¤„ç†ä¸‹ä¸€ä¸ªç”¨æˆ·è¯·æ±‚äº†ï¼Œè¿™ä¹Ÿæ˜¯å¹¶è¡Œï¼Œè¿™ç§å¹¶è¡Œå°±å¯ä»¥ç”¨äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¥å¤„ç†ã€‚ **è¿™å°±å¥½æ¯”é¤å…æœåŠ¡å‘˜ä¸€æ ·ï¼š**ä¸€ä¸ªæœåŠ¡å‘˜ä¸å¯èƒ½ä¸€ç›´ç­‰ä¸Šä¸€ä¸ªé¡¾å®¢ä¸‹å•ã€ä¸Šèœã€åƒé¥­ã€ä¹°å•ä¹‹åæ‰æ¥å¾…ä¸‹ä¸€ä¸ªé¡¾å®¢ï¼ŒæœåŠ¡å‘˜æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿå½“ä¸€ä¸ªé¡¾å®¢ä¸‹å®Œå•åç›´æ¥å¤„ç†ä¸‹ä¸€ä¸ªé¡¾å®¢ï¼Œå½“é¡¾å®¢åƒå®Œé¥­åä¼šè‡ªå·±å›æ¥ä¹°å•ç»“è´¦çš„ã€‚ **çœ‹åˆ°äº†å§ï¼š**åŒæ ·æ˜¯ä¸€ä¸ªæœåŠ¡å‘˜ä¹Ÿå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªé¡¾å®¢ï¼Œè¿™ä¸ªæœåŠ¡å‘˜å°±ç›¸å½“äºè¿™é‡Œçš„Event loopï¼Œå³ä½¿è¿™ä¸ªevent loopåªè¿è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹(è¿›ç¨‹)ä¸­ä¹Ÿå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç”¨æˆ·è¯·æ±‚ã€‚ ç›¸ä¿¡ä½ å·²ç»å¯¹äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤çŸ¥äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œè¿™ä¸ªäº‹ä»¶ä¹Ÿå°±æ˜¯eventè¯¥æ€ä¹ˆè·å–å‘¢ï¼Ÿ 4ã€äº‹ä»¶æ¥æºï¼šIOå¤šè·¯å¤ç”¨ åœ¨Linux/Unixä¸–ç•Œä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬çš„ç¨‹åºéƒ½æ˜¯é€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ¥è¿›è¡ŒI/Oæ“ä½œçš„ï¼Œå½“ç„¶å¯¹äºç½‘ç»œç¼–ç¨‹ä¸­çš„socketä¹Ÿä¸ä¾‹å¤–ã€‚ é‚£æˆ‘ä»¬è¯¥å¦‚ä½•åŒæ—¶å¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦å‘¢ï¼Ÿ **IOå¤šè·¯å¤ç”¨æŠ€æœ¯æ­£æ˜¯ç”¨æ¥è§£å†³è¿™ä¸€é—®é¢˜çš„ï¼š**é€šè¿‡IOå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œæˆ‘ä»¬ä¸€æ¬¡å¯ä»¥ç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ï¼Œå½“æŸä¸ªâ€œæ–‡ä»¶â€ï¼ˆå®é™…å¯èƒ½æ˜¯imç½‘ç»œé€šä¿¡ä¸­socketï¼‰å¯è¯»æˆ–è€…å¯å†™çš„æ—¶å€™æˆ‘ä»¬å°±èƒ½å¾—åˆ°é€šçŸ¥å•¦ã€‚ è¿™æ ·IOå¤šè·¯å¤ç”¨æŠ€æœ¯å°±æˆäº†event loopçš„åŸææ–™ä¾›åº”å•†ï¼Œæºæºä¸æ–­çš„ç»™æˆ‘ä»¬æä¾›å„ç§eventï¼Œè¿™æ ·å…³äºeventæ¥æºçš„é—®é¢˜å°±è§£å†³äº†ã€‚ **è‡³æ­¤ï¼š**å…³äºåˆ©ç”¨äº‹ä»¶é©±åŠ¨æ¥å®ç°å¹¶å‘ç¼–ç¨‹çš„æ‰€æœ‰é—®é¢˜éƒ½è§£å†³äº†å—ï¼Ÿeventçš„æ¥æºé—®é¢˜è§£å†³äº†ï¼Œå½“å¾—åˆ°eventåè°ƒç”¨ç›¸åº”çš„handlerï¼Œçœ‹ä¸Šå»å¤§åŠŸå‘Šæˆäº†ã€‚ 5ã€é—®é¢˜ï¼šé˜»å¡å¼IO **ç°åœ¨ï¼š**æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰å°±èƒ½åŸºäºäº‹ä»¶é©±åŠ¨è¿›è¡Œå¹¶è¡Œç¼–ç¨‹ï¼Œå†ä¹Ÿæ²¡æœ‰äº†å¤šçº¿ç¨‹ä¸­è®©äººæ¼ç«çš„å„ç§é”ã€åŒæ­¥äº’æ–¥ã€æ­»é”ç­‰é—®é¢˜äº†ã€‚ **ä½†æ˜¯ï¼š**è®¡ç®—æœºç§‘å­¦ä¸­ä»æ¥æ²¡æœ‰å‡ºç°è¿‡ä¸€ç§èƒ½è§£å†³æ‰€æœ‰é—®é¢˜çš„æŠ€æœ¯ï¼Œç°åœ¨æ²¡æœ‰ï¼Œåœ¨å¯é¢„æœŸçš„å°†æ¥ä¹Ÿä¸ä¼šæœ‰ã€‚ é‚£ä¸Šè¿°æ–¹æ³•æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ ä¸è¦å¿˜äº†ï¼Œæˆ‘ä»¬event loopæ˜¯è¿è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰ï¼Œè¿™è™½ç„¶è§£å†³äº†å¤šçº¿ç¨‹é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåœ¨å¤„ç†æŸä¸ªeventæ—¶éœ€è¦è¿›è¡ŒIOæ“ä½œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ æˆ‘ä»¬è®²è§£äº†æœ€å¸¸ç”¨çš„æ–‡ä»¶è¯»å–åœ¨åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Œç¨‹åºå‘˜æœ€å¸¸ç”¨çš„è¿™ç§IOæ–¹å¼è¢«ç§°ä¸ºé˜»å¡å¼IOã€‚ **ä¹Ÿå°±æ˜¯è¯´ï¼š**å½“æˆ‘ä»¬è¿›è¡ŒIOæ“ä½œï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶æ—¶ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰è¯»å–å®Œæˆï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ç¨‹åºï¼ˆçº¿ç¨‹ï¼‰ä¼šè¢«é˜»å¡è€Œæš‚åœæ‰§è¡Œï¼Œè¿™åœ¨å¤šçº¿ç¨‹ä¸­ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿè¿˜å¯ä»¥è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚ **ä½†æ˜¯ï¼š**åœ¨å•çº¿ç¨‹çš„event loopä¸­æ˜¯æœ‰é—®é¢˜çš„ï¼ŒåŸå› å°±åœ¨äºå½“æˆ‘ä»¬åœ¨event loopä¸­æ‰§è¡Œé˜»å¡å¼IOæ“ä½œæ—¶æ•´ä¸ªçº¿ç¨‹ï¼ˆevent loopï¼‰ä¼šè¢«æš‚åœè¿è¡Œï¼Œè¿™æ—¶æ“ä½œç³»ç»Ÿå°†æ²¡æœ‰å…¶å®ƒçº¿ç¨‹å¯ä»¥è°ƒåº¦ï¼Œå› ä¸ºç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªevent loopåœ¨å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œè¿™æ ·å½“event loopçº¿ç¨‹è¢«é˜»å¡æš‚åœè¿è¡Œæ—¶æ‰€æœ‰ç”¨æˆ·è¯·æ±‚éƒ½æ²¡æœ‰åŠæ³•è¢«å¤„ç†ã€‚ä½ èƒ½æƒ³è±¡å½“æœåŠ¡å™¨åœ¨å¤„ç†å…¶å®ƒç”¨æˆ·è¯·æ±‚è¯»å–æ•°æ®åº“å¯¼è‡´ä½ çš„è¯·æ±‚è¢«æš‚åœå—ï¼Ÿ **å› æ­¤ï¼š**åœ¨åŸºäºäº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ—¶æœ‰ä¸€æ¡æ³¨æ„äº‹é¡¹ï¼Œé‚£å°±æ˜¯ä¸å…è®¸å‘èµ·é˜»å¡å¼IOã€‚ æœ‰çš„å¯èƒ½ä¼šé—®ï¼Œå¦‚æœä¸èƒ½å‘èµ·é˜»å¡å¼IOçš„è¯ï¼Œé‚£ä¹ˆè¯¥æ€æ ·è¿›è¡ŒIOæ“ä½œå‘¢ï¼Ÿ **PSï¼š**æœ‰é˜»å¡å¼IOï¼Œå°±æœ‰éé˜»å¡å¼IOã€‚ 6ã€è§£å†³æ–¹æ³•ï¼šéé˜»å¡å¼IO ä¸ºå…‹æœé˜»å¡å¼IOæ‰€å¸¦æ¥çš„é—®é¢˜ï¼Œç°ä»£æ“ä½œç³»ç»Ÿå¼€å§‹æä¾›ä¸€ç§æ–°çš„å‘èµ·IOè¯·æ±‚çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å°±æ˜¯å¼‚æ­¥IOã€‚å¯¹åº”çš„ï¼Œé˜»å¡å¼IOå°±æ˜¯åŒæ­¥IOã€‚ å¼‚æ­¥IOæ—¶ï¼Œå‡è®¾è°ƒç”¨aio_readå‡½æ•°ï¼ˆå…·ä½“çš„å¼‚æ­¥IO APIè¯·å‚è€ƒå…·ä½“çš„æ“ä½œç³»ç»Ÿå¹³å°ï¼‰ï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥è¯»å–ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¯¥å‡½æ•°åå¯ä»¥ç«‹å³è¿”å›ï¼Œå¹¶ç»§ç»­å…¶å®ƒäº‹æƒ…ï¼Œè™½ç„¶æ­¤æ—¶è¯¥æ–‡ä»¶å¯èƒ½è¿˜æ²¡æœ‰è¢«è¯»å–ï¼Œè¿™æ ·å°±ä¸ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹äº†ã€‚æ­¤å¤–ï¼Œæ“ä½œç³»ç»Ÿè¿˜ä¼šæä¾›å…¶å®ƒæ–¹æ³•ä¾›è°ƒç”¨çº¿ç¨‹æ¥æ£€æµ‹IOæ“ä½œæ˜¯å¦å®Œæˆã€‚ å°±è¿™æ ·ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„å¸®åŠ©ä¸‹IOçš„é˜»å¡è°ƒç”¨é—®é¢˜ä¹Ÿè§£å†³äº†ã€‚ 7ã€åŸºäºäº‹ä»¶é©±åŠ¨å¹¶è¡Œç¼–ç¨‹çš„éš¾ç‚¹ è™½ç„¶æœ‰å¼‚æ­¥IOæ¥è§£å†³event loopå¯èƒ½è¢«é˜»å¡çš„é—®é¢˜ï¼Œä½†æ˜¯åŸºäºäº‹ä»¶ç¼–ç¨‹ä¾ç„¶æ˜¯å›°éš¾çš„ã€‚ **é¦–å…ˆï¼š**æˆ‘ä»¬æåˆ°ï¼Œevent loopæ˜¯è¿è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­çš„ï¼Œæ˜¾ç„¶ä¸€ä¸ªçº¿ç¨‹æ˜¯æ²¡æœ‰åŠæ³•å……åˆ†åˆ©ç”¨å¤šæ ¸èµ„æºçš„ï¼Œæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´é‚£å°±åˆ›å»ºå¤šä¸ªevent loopå®ä¾‹ä¸å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±æœ‰å¤šä¸ªevent loopçº¿ç¨‹äº†ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥å¤šçº¿ç¨‹é—®é¢˜åˆä¼šå‡ºç°ã€‚ å¦ä¸€ç‚¹åœ¨äºç¼–ç¨‹æ–¹é¢ï¼Œå¼‚æ­¥ç¼–ç¨‹éœ€è¦ç»“åˆå›è°ƒå‡½æ•°ï¼ˆè¿™ç§ç¼–ç¨‹æ–¹å¼éœ€è¦æŠŠå¤„ç†é€»è¾‘åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†è°ƒç”¨æ–¹è‡ªå·±å¤„ç†ï¼Œå¦ä¸€éƒ¨åˆ†åœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†ï¼‰ï¼Œè¿™ä¸€ç¼–ç¨‹æ–¹å¼çš„æ”¹å˜åŠ é‡äº†ç¨‹åºå‘˜åœ¨ç†è§£ä¸Šçš„è´Ÿæ‹…ï¼ŒåŸºäºäº‹ä»¶ç¼–ç¨‹çš„é¡¹ç›®åæœŸä¼šå¾ˆéš¾æ‰©å±•ä»¥åŠç»´æŠ¤ã€‚ 8ã€æ›´å¥½çš„æ–¹æ³• ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨å¼‚æ­¥è¿™ç§éš¾ä»¥ç†è§£çš„æ–¹å¼ç¼–ç¨‹å‘¢ï¼Ÿ **æ˜¯å› ä¸ºï¼š**é˜»å¡å¼ç¼–ç¨‹è™½ç„¶å®¹æ˜“ç†è§£ä½†ä¼šå¯¼è‡´çº¿ç¨‹è¢«é˜»å¡è€Œæš‚åœè¿è¡Œã€‚ **é‚£ä¹ˆä½ ä¸€å®šä¼šé—®äº†ï¼š**æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•æ—¢èƒ½ç»“åˆåŒæ­¥IOçš„ç®€å•ç†è§£åˆä¸ä¼šå› åŒæ­¥è°ƒç”¨å¯¼è‡´çº¿ç¨‹è¢«é˜»å¡å‘¢ï¼Ÿ **ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼š**è¿™å°±æ˜¯ç”¨æˆ·æ€çº¿ç¨‹ï¼ˆuser level threadï¼‰ï¼Œä¹Ÿå°±æ˜¯åç¨‹ã€‚ è™½ç„¶åŸºäºäº‹ä»¶ç¼–ç¨‹æœ‰è¿™æ ·é‚£æ ·çš„ç¼ºç‚¹ï¼Œä½†æ˜¯åœ¨å½“ä»Šçš„é«˜æ€§èƒ½é«˜å¹¶å‘æœåŠ¡å™¨ä¸ŠåŸºäºäº‹ä»¶ç¼–ç¨‹æ–¹å¼ä¾ç„¶éå¸¸æµè¡Œï¼Œä½†å·²ç»ä¸æ˜¯çº¯ç²¹çš„åŸºäºå•ä¸€çº¿ç¨‹çš„äº‹ä»¶é©±åŠ¨äº†ï¼Œè€Œæ˜¯ event loop + multi thread + user level threadã€‚ 9ã€æœ¬æ–‡å°ç»“ é«˜å¹¶å‘æŠ€æœ¯ä»æœ€å¼€å§‹çš„å¤šè¿›ç¨‹ä¸€è·¯æ¼”è¿›åˆ°å½“å‰çš„äº‹ä»¶é©±åŠ¨ï¼Œè®¡ç®—æœºæŠ€æœ¯å°±åƒç”Ÿç‰©ä¸€æ ·ä¹Ÿåœ¨ä¸æ–­æ¼”å˜è¿›åŒ–ï¼Œä½†ä¸ç®¡æ€æ ·ï¼Œäº†è§£å†å²æ‰èƒ½æ›´æ·±åˆ»çš„ç†è§£å½“ä¸‹ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-liu-tong-su-yi-dong-gao-xing-neng-fu-wu-qi-dao-di-shi-ru-he-shi-xian-de/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(äº”)ï¼šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œç†è§£é«˜å¹¶å‘ä¸­çš„åç¨‹","content":"åº”è¯¥å¦‚ä½•å½»åº•ç†è§£åç¨‹ã€‚ 1ã€æ™®é€šçš„å‡½æ•° æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éå¸¸ç®€å•ï¼š def func(): print(&quot;a&quot;) print(&quot;b&quot;) print(&quot;c&quot;) è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ™®é€šå‡½æ•°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ 1ï¼‰è°ƒç”¨funcï¼› 2ï¼‰funcå¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°returnï¼› 3ï¼‰funcæ‰§è¡Œå®Œæˆï¼Œè¿”å›å‡½æ•°Aã€‚ æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œå‡½æ•°funcæ‰§è¡Œç›´åˆ°è¿”å›ï¼Œå¹¶æ‰“å°å‡ºï¼š a b c æ³¨æ„è¿™æ®µä»£ç æ˜¯ç”¨pythonå†™çš„ï¼Œä½†æœ¬ç¯‡å…³äºåç¨‹çš„è®¨è®ºé€‚ç”¨äºä»»ä½•ä¸€é—¨è¯­è¨€ï¼Œå› ä¸ºåç¨‹å¹¶ä¸æ˜¯æŸç§è¯­è¨€ç‰¹æœ‰çš„ã€‚è€Œæˆ‘ä»¬åªä¸è¿‡æ°å¥½ä½¿ç”¨äº†pythonæ¥ç”¨ä½œç¤ºä¾‹ï¼Œå› å…¶è¶³å¤Ÿç®€å•ã€‚ é‚£ä¹ˆåç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ 2ã€ä»æ™®é€šå‡½æ•°åˆ°åç¨‹ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦ä»æ™®é€šå‡½æ•°è¿‡æ¸¡åˆ°åç¨‹äº†ã€‚å’Œæ™®é€šå‡½æ•°åªæœ‰ä¸€ä¸ªè¿”å›ç‚¹ä¸åŒï¼Œåç¨‹å¯ä»¥æœ‰å¤šä¸ªè¿”å›ç‚¹ã€‚ è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ void func() { print(&quot;a&quot;) æš‚åœå¹¶è¿”å› print(&quot;b&quot;) æš‚åœå¹¶è¿”å› print(&quot;c&quot;) } æ™®é€šå‡½æ•°ä¸‹ï¼Œåªæœ‰å½“æ‰§è¡Œå®Œprint(&quot;c&quot;)è¿™å¥è¯åå‡½æ•°æ‰ä¼šè¿”å›ï¼Œä½†æ˜¯åœ¨åç¨‹ä¸‹å½“æ‰§è¡Œå®Œprint(&quot;a&quot;)åfuncå°±ä¼šå› â€œæš‚åœå¹¶è¿”å›â€è¿™æ®µä»£ç è¿”å›åˆ°è°ƒç”¨å‡½æ•°ã€‚ æœ‰çš„å¯èƒ½ä¼šä¸€è„¸æ‡µï¼Œè¿™æœ‰ä»€ä¹ˆç¥å¥‡çš„å—ï¼Ÿ æˆ‘å†™ä¸€ä¸ªreturnä¹Ÿèƒ½è¿”å›ï¼Œå°±åƒè¿™æ ·ï¼š void func() { print(&quot;a&quot;) return print(&quot;b&quot;) æš‚åœå¹¶è¿”å› print(&quot;c&quot;) } ç›´æ¥å†™ä¸€ä¸ªreturnè¯­å¥ç¡®å®ä¹Ÿèƒ½è¿”å›ï¼Œä½†è¿™æ ·å†™çš„è¯returnåé¢çš„ä»£ç éƒ½ä¸ä¼šè¢«æ‰§è¡Œåˆ°äº†ã€‚ åç¨‹ä¹‹æ‰€ä»¥ç¥å¥‡å°±ç¥å¥‡åœ¨å½“æˆ‘ä»¬ä»åç¨‹è¿”å›åè¿˜èƒ½ç»§ç»­è°ƒç”¨è¯¥åç¨‹ï¼Œå¹¶ä¸”æ˜¯ä»è¯¥åç¨‹çš„ä¸Šä¸€ä¸ªè¿”å›ç‚¹åç»§ç»­æ‰§è¡Œã€‚ å°±å¥½æ¯”å­™æ‚Ÿç©ºè¯´ä¸€å£°â€œå®šâ€ï¼Œå‡½æ•°å°±è¢«æš‚åœäº†ï¼š void func() { print(&quot;a&quot;) å®š print(&quot;b&quot;) å®š print(&quot;c&quot;) } è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥è¿”å›åˆ°è°ƒç”¨å‡½æ•°ï¼Œå½“è°ƒç”¨å‡½æ•°ä»€ä¹ˆæ—¶å€™æƒ³èµ·è¯¥åç¨‹åå¯ä»¥å†æ¬¡è°ƒç”¨è¯¥åç¨‹ï¼Œè¯¥åç¨‹ä¼šä»ä¸Šä¸€ä¸ªè¿”å›ç‚¹ç»§ç»­æ‰§è¡Œã€‚åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ä¸€èˆ¬å«åšyieldï¼ˆå…¶å®ƒè¯­è¨€ä¸­å¯èƒ½ä¼šæœ‰ä¸åŒçš„å®ç°ï¼Œä½†æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼‰ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“æ™®é€šå‡½æ•°è¿”å›åï¼Œè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ä¸ä¼šå†ä¿å­˜è¯¥å‡½æ•°è¿è¡Œæ—¶çš„ä»»ä½•ä¿¡æ¯ï¼Œè€Œåç¨‹è¿”å›åï¼Œå‡½æ•°çš„è¿è¡Œæ—¶ä¿¡æ¯æ˜¯éœ€è¦ä¿å­˜ä¸‹æ¥çš„ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨å®é™…çš„ä»£ç çœ‹ä¸€çœ‹åç¨‹ã€‚ 3ã€â€œTalk is cheapï¼Œshow me the codeâ€ ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçœŸå®çš„ä¾‹å­æ¥è®²è§£ï¼Œè¯­è¨€é‡‡ç”¨python. åœ¨pythonè¯­è¨€ä¸­ï¼Œè¿™ä¸ªâ€œå®šâ€å­—åŒæ ·ä½¿ç”¨å…³é”®è¯yieldã€‚ è¿™æ ·æˆ‘ä»¬çš„funcå‡½æ•°å°±å˜æˆäº†ï¼š void func() { print(&quot;a&quot;) yield print(&quot;b&quot;) yield print(&quot;c&quot;) } **æ³¨æ„ï¼š**è¿™æ—¶æˆ‘ä»¬çš„funcå°±ä¸å†æ˜¯ç®€ç®€å•å•çš„å‡½æ•°äº†ï¼Œè€Œæ˜¯å‡çº§æˆä¸ºäº†åç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ å¾ˆç®€å•ï¼š def A(): co =func() # å¾—åˆ°è¯¥åç¨‹ next(co) # è°ƒç”¨åç¨‹ print(&quot;in function A&quot;) # do something next(co) # å†æ¬¡è°ƒç”¨è¯¥åç¨‹ æˆ‘ä»¬çœ‹åˆ°è™½ç„¶funcå‡½æ•°æ²¡æœ‰returnè¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´è™½ç„¶æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¯ä»¥å†™co = func()è¿™æ ·çš„ä»£ç ï¼Œæ„æ€æ˜¯è¯´coå°±æ˜¯æˆ‘ä»¬æ‹¿åˆ°çš„åç¨‹äº†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬è°ƒç”¨è¯¥åç¨‹ï¼Œä½¿ç”¨next(co)ï¼Œè¿è¡Œå‡½æ•°Açœ‹çœ‹æ‰§è¡Œåˆ°ç¬¬3è¡Œçš„ç»“æœæ˜¯ä»€ä¹ˆï¼š a æ˜¾ç„¶ï¼Œå’Œæˆ‘ä»¬çš„é¢„æœŸä¸€æ ·ï¼Œåç¨‹funcåœ¨print(&quot;a&quot;)åå› æ‰§è¡Œyieldè€Œæš‚åœå¹¶è¿”å›å‡½æ•°Aã€‚ æ¥ä¸‹æ¥æ˜¯ç¬¬4è¡Œï¼Œè¿™ä¸ªæ¯«æ— ç–‘é—®ï¼ŒAå‡½æ•°åœ¨åšä¸€äº›è‡ªå·±çš„äº‹æƒ…ï¼Œå› æ­¤ä¼šæ‰“å°ï¼š a in function A æ¥ä¸‹æ¥æ˜¯é‡ç‚¹çš„ä¸€è¡Œï¼Œå½“æ‰§è¡Œç¬¬5è¡Œå†æ¬¡è°ƒç”¨åç¨‹æ—¶è¯¥æ‰“å°ä»€ä¹ˆå‘¢ï¼Ÿ å¦‚æœfuncæ˜¯æ™®é€šå‡½æ•°ï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œfuncçš„ç¬¬ä¸€è¡Œä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰“å°aã€‚ ä½†funcä¸æ˜¯æ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯åç¨‹ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œåç¨‹ä¼šåœ¨ä¸Šä¸€ä¸ªè¿”å›ç‚¹ç»§ç»­è¿è¡Œï¼Œå› æ­¤è¿™é‡Œåº”è¯¥æ‰§è¡Œçš„æ˜¯funcå‡½æ•°ç¬¬ä¸€ä¸ªyieldä¹‹åçš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ print(&quot;b&quot;)ã€‚ a in function A b çœ‹åˆ°äº†å§ï¼Œåç¨‹æ˜¯ä¸€ä¸ªå¾ˆç¥å¥‡çš„å‡½æ•°ï¼Œå®ƒä¼šè‡ªå·±è®°ä½ä¹‹å‰çš„æ‰§è¡ŒçŠ¶æ€ï¼Œå½“å†æ¬¡è°ƒç”¨æ—¶ä¼šä»ä¸Šä¸€æ¬¡çš„è¿”å›ç‚¹ç»§ç»­æ‰§è¡Œã€‚ 4ã€å›¾å½¢åŒ–è§£é‡Š ä¸ºäº†è®©ä½ æ›´åŠ å½»åº•çš„ç†è§£åç¨‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å›¾å½¢åŒ–çš„æ–¹å¼å†çœ‹ä¸€éã€‚ é¦–å…ˆæ˜¯æ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼š **åœ¨è¯¥å›¾ä¸­ï¼š**æ–¹æ¡†å†…è¡¨ç¤ºè¯¥å‡½æ•°çš„æŒ‡ä»¤åºåˆ—ï¼Œå¦‚æœè¯¥å‡½æ•°ä¸è°ƒç”¨ä»»ä½•å…¶å®ƒå‡½æ•°ï¼Œé‚£ä¹ˆåº”è¯¥ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œï¼Œä½†å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨å…¶å®ƒå‡½æ•°ï¼Œå› æ­¤å…¶æ‰§è¡Œå¹¶ä¸æ˜¯ç®€å•çš„ä»ä¸Šåˆ°ä¸‹ï¼Œç®­å¤´çº¿è¡¨ç¤ºæ‰§è¡Œæµçš„æ–¹å‘ã€‚ **ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š**æˆ‘ä»¬é¦–å…ˆæ¥åˆ°funcAå‡½æ•°ï¼Œæ‰§è¡Œä¸€æ®µæ—¶é—´åå‘ç°è°ƒç”¨äº†å¦ä¸€ä¸ªå‡½æ•°funcBï¼Œè¿™æ—¶æ§åˆ¶è½¬ç§»åˆ°è¯¥å‡½æ•°ï¼Œæ‰§è¡Œå®Œæˆåå›åˆ°mainå‡½æ•°çš„è°ƒç”¨ç‚¹ç»§ç»­æ‰§è¡Œã€‚è¿™æ˜¯æ™®é€šçš„å‡½æ•°è°ƒç”¨ã€‚ æ¥ä¸‹æ¥æ˜¯åç¨‹ï¼š **åœ¨è¿™é‡Œï¼š**æˆ‘ä»¬ä¾ç„¶é¦–å…ˆåœ¨funcAå‡½æ•°ä¸­æ‰§è¡Œï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åè°ƒç”¨åç¨‹ï¼Œåç¨‹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ï¼Œæ­¤åå°±åƒæ™®é€šå‡½æ•°ä¸€æ ·è¿”å›funcAå‡½æ•°ï¼ŒfuncAå‡½æ•°æ‰§è¡Œä¸€äº›ä»£ç åå†æ¬¡è°ƒç”¨è¯¥åç¨‹ã€‚ **æ³¨æ„ï¼š**åç¨‹è¿™æ—¶å°±å’Œæ™®é€šå‡½æ•°ä¸ä¸€æ ·äº†ï¼Œåç¨‹å¹¶ä¸æ˜¯ä»ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹æ‰§è¡Œè€Œæ˜¯ä»ä¸Šä¸€æ¬¡çš„æŒ‚èµ·ç‚¹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œä¸€æ®µæ—¶é—´åé‡åˆ°ç¬¬äºŒä¸ªæŒ‚èµ·ç‚¹ï¼Œè¿™æ—¶åç¨‹å†æ¬¡åƒæ™®é€šå‡½æ•°ä¸€æ ·è¿”å›funcAå‡½æ•°ï¼ŒfuncAå‡½æ•°æ‰§è¡Œä¸€æ®µæ—¶é—´åæ•´ä¸ªç¨‹åºç»“æŸã€‚ 5ã€å‡½æ•°åªæ˜¯åç¨‹çš„ä¸€ç§ç‰¹ä¾‹ å’Œæ™®é€šå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œåç¨‹èƒ½çŸ¥é“è‡ªå·±ä¸Šä¸€æ¬¡æ‰§è¡Œåˆ°äº†å“ªé‡Œã€‚ ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†å§ï¼Œåç¨‹ä¼šåœ¨å‡½æ•°è¢«æš‚åœè¿è¡Œæ—¶ä¿å­˜å‡½æ•°çš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶å¯ä»¥ä»ä¿å­˜çš„çŠ¶æ€ä¸­æ¢å¤å¹¶ç»§ç»­è¿è¡Œã€‚ å¾ˆç†Ÿæ‚‰çš„å‘³é“æœ‰æ²¡æœ‰ï¼Œè¿™ä¸å°±æ˜¯æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„è°ƒåº¦å˜›ï¼Œçº¿ç¨‹ä¹Ÿå¯ä»¥è¢«æš‚åœï¼Œæ“ä½œç³»ç»Ÿä¿å­˜çº¿ç¨‹è¿è¡ŒçŠ¶æ€ç„¶åå»è°ƒåº¦å…¶å®ƒçº¿ç¨‹ï¼Œæ­¤åè¯¥çº¿ç¨‹å†æ¬¡è¢«åˆ†é…CPUæ—¶è¿˜å¯ä»¥ç»§ç»­è¿è¡Œï¼Œå°±åƒæ²¡æœ‰è¢«æš‚åœè¿‡ä¸€æ ·ã€‚ åªä¸è¿‡çº¿ç¨‹çš„è°ƒåº¦æ˜¯æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œè¿™äº›å¯¹ç¨‹åºå‘˜éƒ½ä¸å¯è§ï¼Œè€Œåç¨‹æ˜¯åœ¨ç”¨æˆ·æ€å®ç°çš„ï¼Œå¯¹ç¨‹åºå‘˜å¯è§ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰çš„äººè¯´å¯ä»¥æŠŠåç¨‹ç†è§£ä¸ºç”¨æˆ·æ€çº¿ç¨‹çš„åŸå› ã€‚ ä¹Ÿå°±æ˜¯è¯´ç°åœ¨ç¨‹åºå‘˜å¯ä»¥æ‰®æ¼”æ“ä½œç³»ç»Ÿçš„è§’è‰²äº†ï¼Œä½ å¯ä»¥è‡ªå·±æ§åˆ¶åç¨‹åœ¨ä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Œä»€ä¹ˆæ—¶å€™æš‚åœï¼Œä¹Ÿå°±æ˜¯è¯´åç¨‹çš„è°ƒåº¦æƒåœ¨ä½ è‡ªå·±æ‰‹ä¸Šã€‚ åœ¨åç¨‹è¿™ä»¶äº‹å„¿ä¸Šï¼Œè°ƒåº¦ä½ è¯´äº†ç®—ã€‚ å½“ä½ åœ¨åç¨‹ä¸­å†™ä¸‹ yield çš„æ—¶å€™å°±æ˜¯æƒ³è¦æš‚åœè¯¥åç¨‹ï¼Œå½“ä½¿ç”¨ next() æ—¶å°±æ˜¯è¦å†æ¬¡è¿è¡Œè¯¥åç¨‹ã€‚ ç°åœ¨ä½ åº”è¯¥ç†è§£ä¸ºä»€ä¹ˆè¯´å‡½æ•°åªæ˜¯åç¨‹çš„ä¸€ç§ç‰¹ä¾‹äº†å§ï¼Œå‡½æ•°å…¶å®åªæ˜¯æ²¡æœ‰æŒ‚èµ·ç‚¹çš„åç¨‹è€Œå·²ã€‚ 6ã€åç¨‹çš„å†å² æœ‰çš„å¯èƒ½è®¤ä¸ºåç¨‹æ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œç„¶è€Œå…¶å®åç¨‹è¿™ç§æ¦‚å¿µæ—©åœ¨1958å¹´å°±å·²ç»æå‡ºæ¥äº†ï¼Œè¦çŸ¥é“è¿™æ—¶çº¿ç¨‹çš„æ¦‚å¿µéƒ½è¿˜æ²¡æœ‰æå‡ºæ¥ã€‚ åˆ°äº†1972å¹´ï¼Œç»ˆäºæœ‰ç¼–ç¨‹è¯­è¨€å®ç°äº†è¿™ä¸ªæ¦‚å¿µï¼Œè¿™ä¸¤é—¨ç¼–ç¨‹è¯­è¨€å°±æ˜¯Simula 67 ä»¥åŠSchemeã€‚ ä½†åç¨‹è¿™ä¸ªæ¦‚å¿µå§‹ç»ˆæ²¡æœ‰æµè¡Œèµ·æ¥ï¼Œç”šè‡³åœ¨1993å¹´è¿˜æœ‰äººè€ƒå¤ä¸€æ ·ä¸“é—¨å†™è®ºæ–‡æŒ–å‡ºåç¨‹è¿™ç§å¤è€çš„æŠ€æœ¯ã€‚ å› ä¸ºè¿™ä¸€æ—¶æœŸè¿˜æ²¡æœ‰çº¿ç¨‹ï¼Œå¦‚æœä½ æƒ³åœ¨æ“ä½œç³»ç»Ÿå†™å‡ºå¹¶å‘ç¨‹åºé‚£ä¹ˆä½ å°†ä¸å¾—ä¸ä½¿ç”¨ç±»ä¼¼åç¨‹è¿™æ ·çš„æŠ€æœ¯ï¼Œåæ¥çº¿ç¨‹å¼€å§‹å‡ºç°ï¼Œæ“ä½œç³»ç»Ÿç»ˆäºå¼€å§‹åŸç”Ÿæ”¯æŒç¨‹åºçš„å¹¶å‘æ‰§è¡Œï¼Œå°±è¿™æ ·ï¼Œåç¨‹é€æ¸æ·¡å‡ºäº†ç¨‹åºå‘˜çš„è§†çº¿ã€‚ ç›´åˆ°è¿‘äº›å¹´ï¼Œéšç€äº’è”ç½‘çš„å‘å±•ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨äº’è”ç½‘æ—¶ä»£çš„åˆ°æ¥ï¼ŒæœåŠ¡ç«¯å¯¹é«˜å¹¶å‘çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œåç¨‹å†ä¸€æ¬¡é‡å›æŠ€æœ¯ä¸»æµï¼Œå„å¤§ç¼–ç¨‹è¯­è¨€éƒ½å·²ç»æ”¯æŒæˆ–è®¡åˆ’å¼€å§‹æ”¯æŒåç¨‹ã€‚ é‚£ä¹ˆåç¨‹åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ 7ã€åç¨‹åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ **è®©æˆ‘ä»¬ä»é—®é¢˜çš„æœ¬è´¨å‡ºå‘æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼š**åç¨‹çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…¶å®å°±æ˜¯å¯ä»¥è¢«æš‚åœä»¥åŠå¯ä»¥è¢«æ¢å¤è¿è¡Œçš„å‡½æ•°ã€‚é‚£ä¹ˆå¯ä»¥è¢«æš‚åœä»¥åŠå¯ä»¥è¢«æ¢å¤æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ çœ‹è¿‡ç¯®çƒæ¯”èµ›çš„åŒå­¦æƒ³å¿…éƒ½çŸ¥é“ï¼ˆæ²¡çœ‹è¿‡çš„ä¹Ÿèƒ½çŸ¥é“ï¼‰ï¼Œç¯®çƒæ¯”èµ›ä¹Ÿæ˜¯å¯ä»¥è¢«éšæ—¶æš‚åœçš„ï¼Œæš‚åœæ—¶å¤§å®¶éœ€è¦è®°ä½çƒåœ¨å“ªä¸€æ–¹ï¼Œå„è‡ªçš„ç«™ä½æ˜¯ä»€ä¹ˆï¼Œç­‰åˆ°æ¯”èµ›ç»§ç»­çš„æ—¶å€™å¤§å®¶å›åˆ°å„è‡ªçš„ä½ç½®ï¼Œè£åˆ¤å“¨å­ä¸€å“æ¯”èµ›ç»§ç»­ï¼Œå°±åƒæ¯”èµ›æ²¡æœ‰è¢«æš‚åœè¿‡ä¸€æ ·ã€‚ **çœ‹åˆ°é—®é¢˜çš„å…³é”®äº†å—ï¼š**æ¯”èµ›ä¹‹æ‰€ä»¥å¯ä»¥è¢«æš‚åœä¹Ÿå¯ä»¥ç»§ç»­æ˜¯å› ä¸ºæ¯”èµ›çŠ¶æ€è¢«è®°å½•ä¸‹æ¥äº†ï¼ˆç«™ä½ã€çƒåœ¨å“ªä¸€æ–¹ï¼‰ï¼Œè¿™é‡Œçš„çŠ¶æ€å°±æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­å¸¸è¯´çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ã€‚ å›åˆ°åç¨‹ã€‚ åç¨‹ä¹‹æ‰€ä»¥å¯ä»¥è¢«æš‚åœä¹Ÿå¯ä»¥ç»§ç»­ï¼Œé‚£ä¹ˆä¸€å®šè¦è®°å½•ä¸‹è¢«æš‚åœæ—¶çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡ï¼Œå½“ç»§ç»­è¿è¡Œçš„æ—¶å€™è¦æ¢å¤å…¶ä¸Šä¸‹æ–‡ï¼ˆçŠ¶æ€ï¼‰å¦å¤–ï¼šå‡½æ•°è¿è¡Œæ—¶æ‰€æœ‰çš„çŠ¶æ€ä¿¡æ¯éƒ½ä½äºå‡½æ•°è¿è¡Œæ—¶æ ˆä¸­ã€‚ å‡½æ•°è¿è¡Œæ—¶æ ˆå°±æ˜¯æˆ‘ä»¬éœ€è¦ä¿å­˜çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ä¸Šä¸‹æ–‡ã€‚ å¦‚å›¾æ‰€ç¤ºï¼š **ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š**è¯¥è¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ ˆåŒºä¸­æœ‰å››ä¸ªæ ˆå¸§ï¼Œmainå‡½æ•°è°ƒç”¨Aå‡½æ•°ï¼ŒAå‡½æ•°è°ƒç”¨Bå‡½æ•°ï¼ŒBå‡½æ•°è°ƒç”¨Cå‡½æ•°ï¼Œå½“Cå‡½æ•°åœ¨è¿è¡Œæ—¶æ•´ä¸ªè¿›ç¨‹çš„çŠ¶æ€å°±å¦‚å›¾æ‰€ç¤ºã€‚ **ç°åœ¨ï¼š**æˆ‘ä»¬å·²ç»çŸ¥é“äº†å‡½æ•°çš„è¿è¡Œæ—¶çŠ¶æ€å°±ä¿å­˜åœ¨æ ˆåŒºçš„æ ˆå¸§ä¸­ï¼Œæ¥ä¸‹æ¥é‡ç‚¹æ¥äº†å“¦ã€‚ æ—¢ç„¶å‡½æ•°çš„è¿è¡Œæ—¶çŠ¶æ€ä¿å­˜åœ¨æ ˆåŒºçš„æ ˆå¸§ä¸­ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³æš‚åœåç¨‹çš„è¿è¡Œå°±å¿…é¡»ä¿å­˜æ•´ä¸ªæ ˆå¸§çš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å°†æ•´ä¸ªæ ˆå¸§ä¸­çš„æ•°æ®ä¿å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ **æƒ³ä¸€æƒ³è¿™ä¸ªé—®é¢˜ï¼š**æ•´ä¸ªè¿›ç¨‹çš„å†…å­˜åŒºä¸­å“ªä¸€å—æ˜¯ä¸“é—¨ç”¨æ¥é•¿æ—¶é—´(è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ)å­˜å‚¨æ•°æ®çš„ï¼Ÿ **å¾ˆæ˜¾ç„¶ï¼š**è¿™å°±æ˜¯å †åŒºå•Šï¼ˆheapï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ˆå¸§ä¿å­˜åœ¨å †åŒºä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆåœ¨å †åŒºä¸­ä¿å­˜æ•°æ®å‘¢ï¼Ÿå¸Œæœ›ä½ è¿˜æ²¡æœ‰æ™•ï¼Œåœ¨å †åŒºä¸­å¼€è¾Ÿç©ºé—´å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„Cè¯­è¨€ä¸­çš„mallocæˆ–è€…C++ä¸­çš„newã€‚ **æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ï¼š**åœ¨å †åŒºä¸­ç”³è¯·ä¸€æ®µç©ºé—´ï¼Œè®©åæŠŠåç¨‹çš„æ•´ä¸ªæ ˆåŒºä¿å­˜ä¸‹ï¼Œå½“éœ€è¦æ¢å¤åç¨‹çš„è¿è¡Œæ—¶å†ä»å †åŒºä¸­copyå‡ºæ¥æ¢å¤å‡½æ•°è¿è¡Œæ—¶çŠ¶æ€ã€‚ å†ä»”ç»†æƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è¿™ä¹ˆéº»çƒ¦çš„æ¥å›copyæ•°æ®å‘¢ï¼Ÿ **å®é™…ä¸Šï¼š**æˆ‘ä»¬éœ€è¦åšçš„æ˜¯ç›´æ¥æŠŠåç¨‹çš„è¿è¡Œéœ€è¦çš„æ ˆå¸§ç©ºé—´ç›´æ¥å¼€è¾Ÿåœ¨å †åŒºä¸­ï¼Œè¿™æ ·éƒ½ä¸ç”¨æ¥å›copyæ•°æ®äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ **ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š**è¯¥ç¨‹åºä¸­å¼€å¯äº†ä¸¤ä¸ªåç¨‹ï¼Œè¿™ä¸¤ä¸ªåç¨‹çš„æ ˆåŒºéƒ½æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥éšæ—¶ä¸­æ–­æˆ–è€…æ¢å¤åç¨‹çš„æ‰§è¡Œäº†ã€‚ æœ‰çš„å¯èƒ½ä¼šé—®ï¼Œé‚£ä¹ˆè¿›ç¨‹åœ°å€ç©ºé—´æœ€ä¸Šå±‚çš„æ ˆåŒºç°åœ¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ **ç­”æ¡ˆæ˜¯ï¼š**è¿™ä¸€åŒºåŸŸä¾ç„¶æ˜¯ç”¨æ¥ä¿å­˜å‡½æ•°æ ˆå¸§çš„ï¼Œåªä¸è¿‡è¿™äº›å‡½æ•°å¹¶ä¸æ˜¯è¿è¡Œåœ¨åç¨‹è€Œæ˜¯æ™®é€šçº¿ç¨‹ä¸­çš„ã€‚ ç°åœ¨ä½ åº”è¯¥çœ‹åˆ°äº†å§ï¼Œåœ¨ä¸Šå›¾ä¸­å®é™…ä¸Šå…±æœ‰3ä¸ªæ‰§è¡Œæµï¼š 1ï¼‰ä¸€ä¸ªæ™®é€šçº¿ç¨‹ï¼› 2ï¼‰ä¸¤ä¸ªåç¨‹ã€‚ è™½ç„¶æœ‰3ä¸ªæ‰§è¡Œæµä½†æˆ‘ä»¬åˆ›å»ºäº†å‡ ä¸ªçº¿ç¨‹å‘¢ï¼Ÿ **ç­”æ¡ˆæ˜¯ï¼š**ä¸€ä¸ªçº¿ç¨‹ã€‚ **ç°åœ¨ä½ åº”è¯¥æ˜ç™½ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åç¨‹äº†å§ï¼š**ä½¿ç”¨åç¨‹ç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥å¼€å¯æ— æ•°å¹¶å‘æ‰§è¡Œæµï¼Œåªè¦å †åŒºç©ºé—´è¶³å¤Ÿï¼ŒåŒæ—¶è¿˜æ²¡æœ‰åˆ›å»ºçº¿ç¨‹çš„å¼€é”€ï¼Œæ‰€æœ‰åç¨‹çš„è°ƒåº¦ã€åˆ‡æ¢éƒ½å‘ç”Ÿåœ¨ç”¨æˆ·æ€ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåç¨‹ä¹Ÿè¢«ç§°ä½œç”¨æˆ·æ€çº¿ç¨‹çš„åŸå› æ‰€åœ¨ã€‚ å› æ­¤ï¼šå³ä½¿ä½ åˆ›å»ºäº†Nå¤šåç¨‹ï¼Œä½†åœ¨æ“ä½œç³»ç»Ÿçœ‹æ¥ä¾ç„¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´åç¨‹å¯¹æ“ä½œç³»ç»Ÿæ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚ è¿™ä¹Ÿè®¸æ˜¯ä¸ºä»€ä¹ˆåç¨‹è¿™ä¸ªæ¦‚å¿µæ¯”çº¿ç¨‹æå‡ºçš„è¦æ—©çš„åŸå› ï¼Œå¯èƒ½æ˜¯å†™æ™®é€šåº”ç”¨çš„ç¨‹åºå‘˜æ¯”å†™æ“ä½œç³»ç»Ÿçš„ç¨‹åºå‘˜æœ€å…ˆé‡åˆ°éœ€è¦å¤šä¸ªå¹¶è¡Œæµçš„éœ€æ±‚ï¼Œé‚£æ—¶å¯èƒ½éƒ½è¿˜æ²¡æœ‰æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µï¼Œæˆ–è€…æ“ä½œç³»ç»Ÿæ²¡æœ‰å¹¶è¡Œè¿™ç§éœ€æ±‚ï¼Œæ‰€ä»¥éæ“ä½œç³»ç»Ÿç¨‹åºå‘˜åªèƒ½è‡ªå·±åŠ¨æ‰‹å®ç°æ‰§è¡Œæµï¼Œä¹Ÿå°±æ˜¯åç¨‹ã€‚ 8ã€åç¨‹æŠ€æœ¯æ¦‚å¿µå°ç»“ åˆ°åº•ä»€ä¹ˆæ˜¯åç¨‹å‘¢ï¼Ÿ 8.1 åç¨‹æ˜¯æ¯”çº¿ç¨‹æ›´å°çš„æ‰§è¡Œå•å…ƒ åç¨‹æ˜¯æ¯”çº¿ç¨‹æ›´å°çš„ä¸€ç§æ‰§è¡Œå•å…ƒï¼Œä½ å¯ä»¥è®¤ä¸ºæ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚ **ä¹‹æ‰€ä»¥è¯´è½»ï¼š**å…¶ä¸­ä¸€æ–¹é¢çš„åŸå› æ˜¯åç¨‹æ‰€æŒæœ‰çš„æ ˆæ¯”çº¿ç¨‹è¦å°å¾ˆå¤šï¼Œjavaå½“ä¸­ä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…1Må·¦å³çš„æ ˆç©ºé—´ï¼Œè€Œåç¨‹å¯èƒ½åªæœ‰å‡ åæˆ–è€…å‡ ç™¾Kï¼Œæ ˆä¸»è¦ç”¨æ¥ä¿å­˜å‡½æ•°å‚æ•°ã€å±€éƒ¨å˜é‡å’Œè¿”å›åœ°å€ç­‰ä¿¡æ¯ã€‚ **æˆ‘ä»¬çŸ¥é“ï¼š**è€Œçº¿ç¨‹çš„è°ƒåº¦æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œçš„ï¼Œè€Œåç¨‹è°ƒåº¦åˆ™æ˜¯åœ¨ç”¨æˆ·ç©ºé—´è¿›è¡Œçš„ï¼Œæ˜¯å¼€å‘äººå‘˜é€šè¿‡è°ƒç”¨ç³»ç»Ÿåº•å±‚çš„æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³apiæ¥å®Œæˆçš„ã€‚æœ‰äº›è¯­è¨€ï¼Œæ¯”å¦‚nodejsã€goåœ¨è¯­è¨€å±‚é¢æ”¯æŒäº†åç¨‹ï¼Œè€Œæœ‰äº›è¯­è¨€ï¼Œæ¯”å¦‚Cï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ‰å¯ä»¥æ‹¥æœ‰åç¨‹çš„èƒ½åŠ›ï¼ˆæ¯”å¦‚å¾®ä¿¡å¼€æºçš„Libcoåº“å°±æ˜¯è¿™æ ·çš„ï¼‰ã€‚ ç”±äºçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„æœ€å°æ‰§è¡Œå•å…ƒï¼Œå› æ­¤ä¹Ÿå¯ä»¥å¾—å‡ºï¼Œåç¨‹æ˜¯åŸºäºçº¿ç¨‹å®ç°çš„ï¼Œåç¨‹çš„åˆ›å»ºã€åˆ‡æ¢ã€é”€æ¯éƒ½æ˜¯åœ¨æŸä¸ªçº¿ç¨‹ä¸­æ¥è¿›è¡Œçš„ã€‚ ä½¿ç”¨åç¨‹æ˜¯å› ä¸ºçº¿ç¨‹çš„åˆ‡æ¢æˆæœ¬æ¯”è¾ƒé«˜ï¼Œè€Œåç¨‹åœ¨è¿™æ–¹é¢å¾ˆæœ‰ä¼˜åŠ¿ã€‚ 8.2 åç¨‹çš„åˆ‡æ¢åˆ°åº•ä¸ºä»€ä¹ˆå¾ˆå»‰ä»·ï¼Ÿ å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹çº¿ç¨‹åˆ‡æ¢çš„è¿‡ç¨‹ï¼š 1ï¼‰çº¿ç¨‹åœ¨è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™ï¼Œéœ€è¦å°†CPUä¸­çš„å¯„å­˜å™¨çš„ä¿¡æ¯å­˜å‚¨èµ·æ¥ï¼Œç„¶åè¯»å…¥å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„æ•°æ®ï¼Œè¿™ä¸ªä¼šèŠ±è´¹ä¸€äº›æ—¶é—´ï¼› 2ï¼‰CPUçš„é«˜é€Ÿç¼“å­˜ä¸­çš„æ•°æ®ï¼Œä¹Ÿå¯èƒ½å¤±æ•ˆï¼Œéœ€è¦é‡æ–°åŠ è½½ï¼› 3ï¼‰çº¿ç¨‹çš„åˆ‡æ¢ä¼šæ¶‰åŠåˆ°ç”¨æˆ·æ¨¡å¼åˆ°å†…æ ¸æ¨¡å¼çš„åˆ‡æ¢ï¼Œæ®è¯´æ¯æ¬¡æ¨¡å¼åˆ‡æ¢éƒ½éœ€è¦æ‰§è¡Œä¸Šåƒæ¡æŒ‡ä»¤ï¼Œå¾ˆè€—æ—¶ã€‚ å®é™…ä¸Šåç¨‹çš„åˆ‡æ¢ä¹‹æ‰€ä»¥å¿«çš„åŸå› æˆ‘è®¤ä¸ºä¸»è¦æ˜¯ï¼š 1ï¼‰åœ¨åˆ‡æ¢çš„æ—¶å€™ï¼Œå¯„å­˜å™¨éœ€è¦ä¿å­˜å’ŒåŠ è½½çš„æ•°æ®é‡æ¯”è¾ƒå°ï¼› 2ï¼‰é«˜é€Ÿç¼“å­˜å¯ä»¥æœ‰æ•ˆåˆ©ç”¨ï¼› 3ï¼‰æ²¡æœ‰ç”¨æˆ·æ¨¡å¼åˆ°å†…æ ¸æ¨¡å¼çš„åˆ‡æ¢æ“ä½œï¼› 4ï¼‰æ›´æœ‰æ•ˆç‡çš„è°ƒåº¦ï¼Œå› ä¸ºåç¨‹æ˜¯éæŠ¢å å¼çš„ï¼Œå‰ä¸€ä¸ªåç¨‹æ‰§è¡Œå®Œæ¯•æˆ–è€…å µå¡ï¼Œæ‰ä¼šè®©å‡ºCPUï¼Œè€Œçº¿ç¨‹åˆ™ä¸€èˆ¬ä½¿ç”¨äº†æ—¶é—´ç‰‡çš„ç®—æ³•ï¼Œä¼šè¿›è¡Œå¾ˆå¤šæ²¡æœ‰å¿…è¦çš„åˆ‡æ¢ï¼ˆä¸ºäº†å°½é‡è®©ç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°æŸä¸ªçº¿ç¨‹å¡ï¼‰ã€‚ 9ã€å†™åœ¨æœ€å å†™åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»ç†è§£åç¨‹åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹äº†ï¼Œå…³äºåç¨‹æ›´ç³»ç»Ÿçš„çŸ¥è¯†å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-wu-shen-ru-cao-zuo-xi-tong-li-jie-gao-bing-fa-zhong-de-xie-cheng/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(å››)ï¼šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œç†è§£åŒæ­¥ä¸å¼‚æ­¥","content":"1ã€ç¼–ç¨‹ä¸­çš„åŒæ­¥è°ƒç”¨ æˆ‘ä»¬å…ˆè¯´åŒæ­¥è°ƒç”¨ï¼Œè¿™æ˜¯ç¨‹åºå‘˜æœ€ç†Ÿæ‚‰çš„åœºæ™¯ã€‚ ä¸€èˆ¬çš„å‡½æ•°è°ƒç”¨éƒ½æ˜¯åŒæ­¥çš„ï¼Œå°±åƒè¿™æ ·ï¼š funcA() { // ç­‰å¾…å‡½æ•°funcBæ‰§è¡Œå®Œæˆ funcB(); // ç»§ç»­æ¥ä¸‹æ¥çš„æµç¨‹ } funcAè°ƒç”¨funcBï¼Œé‚£ä¹ˆåœ¨funcBæ‰§è¡Œå®Œå‰ï¼ŒfuncAä¸­çš„åç»­ä»£ç éƒ½ä¸ä¼šè¢«æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´funcAå¿…é¡»ç­‰å¾…funcBæ‰§è¡Œå®Œæˆã€‚ å°±åƒä¸‹å›¾è¿™æ ·ï¼š â€‹ ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨funcBè¿è¡ŒæœŸé—´funcAä»€ä¹ˆéƒ½åšä¸äº†ï¼Œè¿™å°±æ˜¯å…¸å‹çš„åŒæ­¥ã€‚ æ³¨æ„ï¼šä¸€èˆ¬æ¥è¯´ï¼Œåƒè¿™ç§åŒæ­¥è°ƒç”¨ï¼ŒfuncAå’ŒfuncBæ˜¯è¿è¡Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­çš„ï¼Œè¿™æ˜¯æœ€ä¸ºå¸¸è§çš„æƒ…å†µã€‚ **ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š**å³ä½¿è¿è¡Œåœ¨ä¸¤ä¸ªä¸èƒ½çº¿ç¨‹ä¸­çš„å‡½æ•°ä¹Ÿå¯ä»¥è¿›è¡ŒåŒæ­¥è°ƒç”¨ï¼Œåƒæˆ‘ä»¬è¿›è¡ŒIOæ“ä½œæ—¶å®é™…ä¸Šåº•å±‚æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼å‘æ“ä½œç³»ç»Ÿå‘å‡ºè¯·æ±‚çš„ï¼Œæ¯”å¦‚ç£ç›˜æ–‡ä»¶è¯»å–ï¼š read(file, buf); è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ã€Šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œç†è§£I/Oä¸é›¶æ‹·è´æŠ€æœ¯ã€‹ä¸­æè¿°çš„é˜»å¡å¼I/Oï¼Œåœ¨readå‡½æ•°è¿”å›å‰ç¨‹åºæ˜¯æ— æ³•ç»§ç»­å‘å‰æ¨è¿›çš„ï¼š read(file, buf); // ç¨‹åºæš‚åœè¿è¡Œï¼Œ // ç­‰å¾…æ–‡ä»¶è¯»å–å®Œæˆåç»§ç»­è¿è¡Œ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š â€‹ åªæœ‰å½“readå‡½æ•°è¿”å›åç¨‹åºæ‰å¯ä»¥è¢«ç»§ç»­æ‰§è¡Œã€‚ **æ³¨æ„ï¼š**å’Œä¸Šé¢çš„åŒæ­¥è°ƒç”¨ä¸åŒçš„æ˜¯ï¼Œå‡½æ•°å’Œè¢«è°ƒå‡½æ•°è¿è¡Œåœ¨ä¸åŒçš„çº¿ç¨‹ä¸­ã€‚ **å› æ­¤ï¼š**æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼ŒåŒæ­¥è°ƒç”¨å’Œå‡½æ•°ä¸è¢«è°ƒå‡½æ•°æ˜¯å¦è¿è¡Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬è¿˜è¦å†æ¬¡å¼ºè°ƒï¼šåŒæ­¥æ–¹å¼ä¸‹å‡½æ•°å’Œè¢«è°ƒå‡½æ•°æ— æ³•åŒæ—¶è¿›è¡Œã€‚ åŒæ­¥ç¼–ç¨‹å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯æœ€è‡ªç„¶æœ€å®¹æ˜“ç†è§£çš„ã€‚ ä½†å®¹æ˜“ç†è§£çš„ä»£ä»·å°±æ˜¯åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼ŒåŒæ­¥å¹¶ä¸æ˜¯é«˜æ•ˆçš„ï¼ŒåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºä»»åŠ¡æ²¡æœ‰åŠæ³•åŒæ—¶è¿›è¡Œã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹å¼‚æ­¥è°ƒç”¨ã€‚ 2ã€ç¼–ç¨‹ä¸­çš„å¼‚æ­¥è°ƒç”¨ æœ‰åŒæ­¥è°ƒç”¨å°±æœ‰å¼‚æ­¥è°ƒç”¨ã€‚ å¦‚æœä½ çœŸçš„ç†è§£äº†æœ¬èŠ‚åˆ°ç›®å‰ä¸ºæ­¢çš„å†…å®¹çš„è¯ï¼Œé‚£ä¹ˆå¼‚æ­¥è°ƒç”¨å¯¹ä½ æ¥è¯´ä¸æ˜¯é—®é¢˜ã€‚ **ä¸€èˆ¬æ¥è¯´ï¼š**å¼‚æ­¥è°ƒç”¨æ€»æ˜¯å’ŒI/Oæ“ä½œç­‰è€—æ—¶è¾ƒé«˜çš„ä»»åŠ¡å¦‚å½±éšå½¢ï¼Œåƒç£ç›˜æ–‡ä»¶è¯»å†™ã€ç½‘ç»œæ•°æ®çš„æ”¶å‘ã€æ•°æ®åº“æ“ä½œç­‰ã€‚ æˆ‘ä»¬è¿˜æ˜¯ä»¥ç£ç›˜æ–‡ä»¶è¯»å–ä¸ºä¾‹ã€‚ åœ¨readå‡½æ•°çš„åŒæ­¥è°ƒç”¨æ–¹å¼ä¸‹ï¼Œæ–‡ä»¶è¯»å–å®Œä¹‹å‰è°ƒç”¨æ–¹æ˜¯æ— æ³•ç»§ç»­å‘å‰æ¨è¿›çš„ï¼Œä½†å¦‚æœreadå‡½æ•°å¯ä»¥å¼‚æ­¥è°ƒç”¨æƒ…å†µå°±ä¸ä¸€æ ·äº†ã€‚ å‡å¦‚readå‡½æ•°å¯ä»¥å¼‚æ­¥è°ƒç”¨çš„è¯ï¼Œå³ä½¿æ–‡ä»¶è¿˜æ²¡æœ‰è¯»å–å®Œæˆï¼Œreadå‡½æ•°ä¹Ÿå¯ä»¥ç«‹å³è¿”å›ã€‚ read(file, buff); // readå‡½æ•°ç«‹å³è¿”å› // ä¸ä¼šé˜»å¡å½“å‰ç¨‹åº å°±åƒä¸‹å›¾è¿™æ ·ï¼š â€‹ **å¯ä»¥çœ‹åˆ°ï¼š**åœ¨å¼‚æ­¥è¿™ç§è°ƒç”¨æ–¹å¼ä¸‹ï¼Œè°ƒç”¨æ–¹ä¸ä¼šè¢«é˜»å¡ï¼Œå‡½æ•°è°ƒç”¨å®Œæˆåå¯ä»¥ç«‹å³æ‰§è¡Œæ¥ä¸‹æ¥çš„ç¨‹åºã€‚ è¿™æ—¶å¼‚æ­¥çš„é‡ç‚¹å°±åœ¨äºï¼šè°ƒç”¨æ–¹æ¥ä¸‹æ¥çš„ç¨‹åºæ‰§è¡Œå¯ä»¥å’Œæ–‡ä»¶è¯»å–åŒæ—¶è¿›è¡Œï¼Œä»ä¸Šå›¾ä¸­æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºè¿™ä¸€ç‚¹ï¼Œè¿™å°±æ˜¯å¼‚æ­¥çš„é«˜æ•ˆä¹‹å¤„ã€‚ **ä½†æ˜¯ï¼š**è¯·æ³¨æ„ï¼Œå¼‚æ­¥è°ƒç”¨å¯¹äºç¨‹åºå‘˜æ¥è¯´åœ¨ç†è§£ä¸Šæ˜¯ä¸€ç§è´Ÿæ‹…ï¼Œä»£ç ç¼–å†™ä¸Šæ›´æ˜¯ä¸€ç§è´Ÿæ‹…ï¼Œæ€»çš„æ¥è¯´ï¼Œä¸Šå¸åœ¨ä¸ºä½ æ‰“å¼€ä¸€æ‰‡é—¨çš„æ—¶å€™ä¼šé€‚å½“çš„å…³ä¸Šä¸€æ‰‡çª—æˆ·ã€‚ æœ‰çš„å¯èƒ½ä¼šé—®ï¼Œåœ¨åŒæ­¥è°ƒç”¨ä¸‹ï¼Œè°ƒç”¨æ–¹ä¸å†ç»§ç»­æ‰§è¡Œè€Œæ˜¯æš‚åœç­‰å¾…ï¼Œè¢«è°ƒå‡½æ•°æ‰§è¡Œå®Œåå¾ˆè‡ªç„¶çš„å°±æ˜¯è°ƒç”¨æ–¹ç»§ç»­æ‰§è¡Œï¼Œé‚£ä¹ˆå¼‚æ­¥è°ƒç”¨ä¸‹è°ƒç”¨æ–¹æ€çŸ¥é“è¢«è°ƒå‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæˆå‘¢ï¼Ÿ è¿™å°±åˆ†ä¸ºäº†ä¸¤ç§æƒ…å†µï¼š 1ï¼‰è°ƒç”¨æ–¹æ ¹æœ¬å°±ä¸å…³å¿ƒæ‰§è¡Œç»“æœï¼› 2ï¼‰è°ƒç”¨æ–¹éœ€è¦çŸ¥é“æ‰§è¡Œç»“æœã€‚ ç¬¬ä¸€ç§æƒ…å†µæ¯”è¾ƒç®€å•ï¼Œæ— éœ€è®¨è®ºã€‚ ç¬¬äºŒç§æƒ…å†µä¸‹å°±æ¯”è¾ƒæœ‰è¶£äº†ï¼Œé€šå¸¸æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š 1ï¼‰ä¸€ç§æ˜¯é€šçŸ¥æœºåˆ¶ï¼šå½“ä»»åŠ¡æ‰§è¡Œå®Œæˆåå‘é€ä¿¡å·æ¥é€šçŸ¥è°ƒç”¨æ–¹ä»»åŠ¡å®Œæˆï¼ˆè¿™é‡Œçš„ä¿¡å·æœ‰å¾ˆå¤šå®ç°æ–¹å¼ï¼šLinuxä¸­çš„signalï¼Œæˆ–ä½¿ç”¨ä¿¡å·é‡ç­‰æœºåˆ¶éƒ½å¯å®ç°ï¼‰ï¼› 2ï¼‰ä¸€ç§æ˜¯å›è°ƒæœºåˆ¶ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„callbackï¼ˆå…³äºå›è°ƒæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­é‡ç‚¹è®²è§£ï¼Œæœ¬ç¯‡ä¼šæœ‰ç®€çŸ­çš„è®¨è®ºï¼‰ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­è®²è§£ä¸€ä¸‹åŒæ­¥è°ƒç”¨ä¸å¼‚æ­¥è°ƒç”¨ã€‚ 3ã€å…·ä½“çš„ç¼–ç¨‹ä¾‹å­ä¸­ç†è§£åŒæ­¥å’Œå¼‚æ­¥ 3.1 ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ æˆ‘ä»¬ä»¥å¸¸è§çš„WebæœåŠ¡æ¥ä¸¾ä¾‹è¯´æ˜è¿™ä¸€é—®é¢˜ã€‚ ä¸€èˆ¬æ¥è¯´Web Serveræ¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚åä¼šæœ‰ä¸€äº›å…¸å‹çš„å¤„ç†é€»è¾‘ï¼Œæœ€å¸¸è§çš„å°±æ˜¯æ•°æ®åº“æŸ¥è¯¢ï¼ˆå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™é‡Œçš„æ•°æ®åº“æŸ¥è¯¢æ¢æˆå…¶å®ƒI/Oæ“ä½œï¼Œæ¯”å¦‚ç£ç›˜è¯»å–ã€ç½‘ç»œé€šä¿¡ç­‰ï¼‰ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å‡å®šå¤„ç†ä¸€æ¬¡ç”¨æˆ·è¯·æ±‚éœ€è¦ç»è¿‡æ­¥éª¤Aã€Bã€Cï¼Œç„¶åè¯»å–æ•°æ®åº“ï¼Œæ•°æ®åº“è¯»å–å®Œæˆåéœ€è¦ç»è¿‡æ­¥éª¤Dã€Eã€Fã€‚ å°±åƒè¿™æ ·ï¼š # å¤„ç†ä¸€æ¬¡ç”¨æˆ·è¯·æ±‚éœ€è¦ç»è¿‡çš„æ­¥éª¤ï¼š A; B; C; æ•°æ®åº“è¯»å–; Dï¼› Eï¼› Fï¼› **å…¶ä¸­ï¼š**æ­¥éª¤Aã€Bã€Cå’ŒDã€Eã€Fä¸éœ€è¦ä»»ä½•I/Oï¼Œä¹Ÿå°±æ˜¯è¯´è¿™å…­ä¸ªæ­¥éª¤ä¸éœ€è¦è¯»å–æ–‡ä»¶ã€ç½‘ç»œé€šä¿¡ç­‰ï¼Œæ¶‰åŠåˆ°I/Oæ“ä½œçš„åªæœ‰æ•°æ®åº“æŸ¥è¯¢è¿™ä¸€æ­¥ã€‚ **ä¸€èˆ¬æ¥è¯´ï¼š**è¿™æ ·çš„Web Serveræœ‰ä¸¤ä¸ªå…¸å‹çš„çº¿ç¨‹ï¼šä¸»çº¿ç¨‹å’Œæ•°æ®åº“å¤„ç†çº¿ç¨‹ï¼ˆæ³¨æ„ï¼šè¿™è®¨è®ºçš„åªæ˜¯å…¸å‹çš„åœºæ™¯ï¼Œå…·ä½“ä¸šåŠ¡å®é™…ä¸Šå¯ä¼šæœ‰å·®åˆ«ï¼Œä½†è¿™å¹¶ä¸å½±å“æˆ‘ä»¬ç”¨ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜é—®é¢˜ï¼‰ã€‚ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŒæ­¥ã€‚ è¿™ç§æ–¹å¼æœ€ä¸ºè‡ªç„¶ä¹Ÿæœ€ä¸ºå®¹æ˜“ç†è§£ï¼š // ä¸»çº¿ç¨‹ main_thread() { A; B; C; å‘é€æ•°æ®åº“æŸ¥è¯¢è¯·æ±‚; D; E; F; } // æ•°æ®åº“çº¿ç¨‹ DataBase_thread() { while(1) { â€‹ å¤„ç†æ•°æ®åº“è¯»å–è¯·æ±‚; â€‹ è¿”å›ç»“æœ; } } è¿™å°±æ˜¯æœ€ä¸ºå…¸å‹çš„åŒæ­¥æ–¹æ³•ï¼šä¸»çº¿ç¨‹åœ¨å‘å‡ºæ•°æ®åº“æŸ¥è¯¢è¯·æ±‚åå°±ä¼šè¢«é˜»å¡è€Œæš‚åœè¿è¡Œï¼Œç›´åˆ°æ•°æ®åº“æŸ¥è¯¢å®Œæ¯•åé¢çš„Dã€Eã€Fæ‰å¯ä»¥ç»§ç»­è¿è¡Œã€‚ å°±åƒä¸‹å›¾è¿™æ ·ï¼š â€‹ **ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š**ä¸»çº¿ç¨‹ä¸­ä¼šæœ‰â€œç©ºéš™â€ï¼Œè¿™ä¸ªç©ºéš™å°±æ˜¯ä¸»çº¿ç¨‹çš„â€œä¼‘é—²æ—¶å…‰â€ï¼Œä¸»çº¿ç¨‹åœ¨è¿™æ®µä¼‘é—²æ—¶å…‰ä¸­éœ€è¦ç­‰å¾…æ•°æ®åº“æŸ¥è¯¢å®Œæˆæ‰èƒ½ç»§ç»­åç»­å¤„ç†æµç¨‹ã€‚ åœ¨è¿™é‡Œä¸»çº¿ç¨‹å°±å¥½æ¯”ç›‘å·¥çš„è€æ¿ï¼Œæ•°æ®åº“çº¿ç¨‹å°±å¥½æ¯”è‹¦é€¼æ¬ç –çš„ç¨‹åºå‘˜ï¼Œåœ¨æ¬å®Œç –å‰è€æ¿ä»€ä¹ˆéƒ½ä¸åšåªæ˜¯ç´§ç´§çš„ç›¯ç€ä½ ï¼Œç­‰ä½ æ¬å®Œç –åæ‰å»å¿™å…¶å®ƒäº‹æƒ…ã€‚ **æ˜¾ç„¶ï¼š**é«˜æ•ˆçš„ç¨‹åºå‘˜æ˜¯ä¸èƒ½å®¹å¿ä¸»çº¿ç¨‹å·æ‡’çš„ã€‚ æ˜¯æ—¶å€™ç¥­å‡ºå¤§æ€å™¨äº†ï¼Œè¿™å°±æ˜¯å¼‚æ­¥ï¼š åœ¨å¼‚æ­¥è¿™ç§å®ç°æ–¹æ¡ˆä¸‹ä¸»çº¿ç¨‹æ ¹æœ¬ä¸å»ç­‰å¾…æ•°æ®åº“æ˜¯å¦æŸ¥è¯¢å®Œæˆï¼Œè€Œæ˜¯å‘é€å®Œæ•°æ®åº“è¯»å†™è¯·æ±‚åç›´æ¥å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ **æœ‰çš„åŒå­¦å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼š**ä¸€ä¸ªè¯·æ±‚éœ€è¦ç»è¿‡Aã€Bã€Cã€æ•°æ®åº“æŸ¥è¯¢ã€Dã€Eã€Fè¿™ä¸ƒä¸ªæ­¥éª¤ï¼Œå¦‚æœä¸»çº¿ç¨‹åœ¨å®ŒæˆAã€Bã€Cã€æ•°æ®åº“æŸ¥è¯¢åç›´æ¥è¿›è¡Œå¤„ç†æ¥ä¸‹æ¥çš„è¯·æ±‚ï¼Œé‚£ä¹ˆä¸Šä¸€ä¸ªè¯·æ±‚ä¸­å‰©ä¸‹çš„Dã€Eã€Få‡ ä¸ªæ­¥éª¤æ€ä¹ˆåŠå‘¢ï¼Ÿ å¦‚æœå¤§å®¶è¿˜æ²¡æœ‰å¿˜è®°ä¸Šä¸€å°èŠ‚å†…å®¹çš„è¯åº”è¯¥çŸ¥é“ï¼Œè¿™æœ‰ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«è®¨è®ºã€‚ 3.2 å¼‚æ­¥æƒ…å†µ1ï¼šä¸»çº¿ç¨‹ä¸å…³å¿ƒæ•°æ®åº“æ“ä½œç»“æœ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹æ ¹æœ¬å°±ä¸å…³å¿ƒæ•°æ®åº“æ˜¯å¦æŸ¥è¯¢å®Œæ¯•ï¼Œæ•°æ®åº“æŸ¥è¯¢å®Œæ¯•åè‡ªè¡Œå¤„ç†æ¥ä¸‹æ¥çš„Dã€Eã€Fä¸‰ä¸ªæ­¥éª¤ã€‚ å°±åƒä¸‹å›¾è¿™æ ·ï¼š â€‹ æˆ‘ä»¬è¯´è¿‡ä¸€ä¸ªè¯·æ±‚éœ€è¦ç»è¿‡ä¸ƒä¸ªæ­¥éª¤ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­å®Œæˆçš„ï¼Œåå››ä¸ªæ˜¯åœ¨æ•°æ®åº“çº¿ç¨‹ä¸­å®Œæˆçš„ï¼Œé‚£ä¹ˆæ•°æ®åº“çº¿ç¨‹æ˜¯æ€ä¹ˆçŸ¥é“æŸ¥å®Œæ•°æ®åº“åè¦å¤„ç†Dã€Eã€Fè¿™å‡ ä¸ªæ­¥éª¤å‘¢ï¼Ÿ è¿™æ—¶ï¼Œæˆ‘ä»¬çš„å¦ä¸€ä¸ªä¸»è§’å›è°ƒå‡½æ•°å°±å¼€å§‹ç™»åœºå•¦ã€‚ æ²¡é”™ï¼Œå›è°ƒå‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸€é—®é¢˜çš„ã€‚ æˆ‘ä»¬å¯ä»¥å°†å¤„ç†Dã€Eã€Fè¿™å‡ ä¸ªæ­¥éª¤å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå‡å®šå°†è¯¥å‡½æ•°å‘½åä¸ºhandle_DEF_after_DB_queryã€‚ ä¼ªç å¦‚ä¸‹ï¼š void handle_DEF_after_DB_query () { D; E; F; } è¿™æ ·ä¸»çº¿ç¨‹åœ¨å‘é€æ•°æ®åº“æŸ¥è¯¢è¯·æ±‚çš„åŒæ—¶å°†è¯¥å‡½æ•°ä¸€å¹¶å½“åšå‚æ•°ä¼ é€’è¿‡å»ï¼š DB_query(request, handle_DEF_after_DB_query); æ•°æ®åº“çº¿ç¨‹å¤„ç†å®Œåç›´æ¥è°ƒç”¨handle_DEF_after_DB_queryå°±å¯ä»¥äº†ï¼Œè¿™å°±æ˜¯å›è°ƒå‡½æ•°çš„ä½œç”¨ã€‚ ä¹Ÿæœ‰çš„åŒå­¦å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°è¦ä¼ é€’ç»™æ•°æ®åº“çº¿ç¨‹è€Œä¸æ˜¯æ•°æ®åº“çº¿ç¨‹è‡ªå·±å®šä¹‰è‡ªå·±è°ƒç”¨å‘¢ï¼Ÿ å› ä¸ºä»è½¯ä»¶ç»„ç»‡ç»“æ„ä¸Šè®²ï¼Œè¿™ä¸æ˜¯æ•°æ®åº“çº¿ç¨‹è¯¥åšçš„å·¥ä½œã€‚ æ•°æ®åº“çº¿ç¨‹éœ€è¦åšçš„ä»…ä»…å°±æ˜¯æŸ¥è¯¢æ•°æ®åº“ã€ç„¶åè°ƒç”¨ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œè‡³äºè¿™ä¸ªå¤„ç†å‡½æ•°åšäº†äº›ä»€ä¹ˆæ•°æ®åº“çº¿ç¨‹æ ¹æœ¬å°±ä¸å…³å¿ƒï¼Œä¹Ÿä¸åº”è¯¥å…³å¿ƒã€‚ **ä½ å¯ä»¥ä¼ å…¥å„ç§å„æ ·çš„å›è°ƒå‡½æ•°ï¼š**ä¹Ÿå°±æ˜¯è¯´æ•°æ®åº“ç³»ç»Ÿå¯ä»¥é’ˆå¯¹å›è°ƒå‡½æ•°è¿™ä¸€æŠ½è±¡çš„å‡½æ•°å˜é‡æ¥ç¼–ç¨‹ï¼Œä»è€Œæ›´å¥½çš„åº”å¯¹å˜åŒ–ï¼Œå› ä¸ºå›è°ƒå‡½æ•°çš„å†…å®¹æ”¹å˜ä¸ä¼šå½±å“åˆ°æ•°æ®åº“çº¿ç¨‹çš„é€»è¾‘ï¼Œè€Œå¦‚æœæ•°æ®åº“çº¿ç¨‹è‡ªå·±å®šä¹‰å¤„ç†å‡½æ•°é‚£ä¹ˆè¿™ç§è®¾è®¡å°±æ²¡æœ‰çµæ´»æ€§å¯è¨€äº†ã€‚ **è€Œä»è½¯ä»¶å¼€å‘çš„è§’åº¦çœ‹ï¼š**å‡è®¾æ•°æ®åº“çº¿ç¨‹é€»è¾‘å°è£…ä¸ºäº†åº“æä¾›ç»™å…¶å®ƒå›¢é˜Ÿï¼Œå½“æ•°æ®åº“å›¢é˜Ÿåœ¨ç ”å‘æ—¶æ€ä¹ˆå¯èƒ½çŸ¥é“æ•°æ®åº“æŸ¥è¯¢åè¯¥åšä»€ä¹ˆå‘¢ï¼Ÿ æ˜¾**ç„¶ï¼š**åªæœ‰ä½¿ç”¨æ–¹æ‰çŸ¥é“æŸ¥è¯¢å®Œæ•°æ®åº“åè¯¥åšäº›ä»€ä¹ˆï¼Œå› æ­¤ä½¿ç”¨æ–¹åœ¨ä½¿ç”¨æ—¶ç®€å•çš„ä¼ å…¥è¿™ä¸ªå›è°ƒå‡½æ•°å°±å¯ä»¥äº†ã€‚ è¿™æ ·å¤æ‚æ•°æ®åº“çš„å›¢é˜Ÿå°±å’Œä½¿ç”¨æ–¹å›¢é˜Ÿå®ç°äº†æ‰€è°“çš„è§£è€¦ã€‚ ç°åœ¨ä½ åº”è¯¥æ˜ç™½å›è°ƒå‡½æ•°çš„ä½œç”¨äº†å§ã€‚ **å¦å¤–ï¼š**ä»”ç»†è§‚å¯Ÿä¸Šé¢ä¸¤å¼ å›¾ï¼Œä½ èƒ½çœ‹å‡ºä¸ºä»€ä¹ˆå¼‚æ­¥æ¯”åŒæ­¥é«˜æ•ˆå—ï¼Ÿ åŸå› å¾ˆç®€å•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨æœ¬ç¯‡æåˆ°è¿‡çš„ï¼Œå¼‚æ­¥å¤©ç„¶å°±æ— éœ€ç­‰å¾…ï¼Œæ— ä¾èµ–ã€‚ ä¸»çº¿ç¨‹å¤„ç†è¯·æ±‚å’Œæ•°æ®åº“å¤„ç†æŸ¥è¯¢è¯·æ±‚å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œå› æ­¤ä»ç³»ç»Ÿæ€§èƒ½ä¸Šçœ‹ï¼Œè¿™æ ·çš„è®¾è®¡èƒ½æ›´åŠ å……åˆ†çš„åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼Œæ›´åŠ å¿«é€Ÿçš„å¤„ç†è¯·æ±‚ï¼›ä»ç”¨æˆ·çš„è§’åº¦çœ‹ï¼Œç³»ç»Ÿçš„å“åº”ä¹Ÿä¼šæ›´åŠ è¿…é€Ÿã€‚ è¿™å°±æ˜¯å¼‚æ­¥çš„é«˜æ•ˆä¹‹å¤„ã€‚ **ä½†æˆ‘ä»¬åº”è¯¥ä¹Ÿå¯ä»¥çœ‹å‡ºï¼š**å¼‚æ­¥ç¼–ç¨‹å¹¶ä¸å¦‚åŒæ­¥æ¥çš„å®¹æ˜“ç†è§£ï¼Œç³»ç»Ÿå¯ç»´æŠ¤æ€§ä¸Šä¹Ÿä¸å¦‚åŒæ­¥æ¨¡å¼ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•æ—¢èƒ½ç»“åˆåŒæ­¥æ¨¡å¼çš„å®¹æ˜“ç†è§£åˆèƒ½ç»“åˆå¼‚æ­¥æ¨¡å¼çš„é«˜æ•ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ç¬¬äºŒç§æƒ…å†µï¼Œé‚£å°±æ˜¯ä¸»çº¿ç¨‹éœ€è¦å…³å¿ƒæ•°æ®åº“æŸ¥è¯¢ç»“æœã€‚ 3.3 å¼‚æ­¥æƒ…å†µ2ï¼šä¸»çº¿ç¨‹å…³å¿ƒæ•°æ®åº“æ“ä½œç»“æœ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®åº“çº¿ç¨‹éœ€è¦å°†æŸ¥è¯¢ç»“æœåˆ©ç”¨é€šçŸ¥æœºåˆ¶å‘é€ç»™ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åç»§ç»­å¤„ç†ä¸Šä¸€ä¸ªè¯·æ±‚çš„ååŠéƒ¨åˆ†ã€‚ å°±åƒä¸‹å›¾è¿™æ ·ï¼š â€‹ **ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š**ABCDEFå‡ ä¸ªæ­¥éª¤å…¨éƒ¨åœ¨ä¸»çº¿ä¸­å¤„ç†ï¼ŒåŒæ—¶ä¸»çº¿ç¨‹åŒæ ·ä¹Ÿæ²¡æœ‰äº†â€œä¼‘é—²æ—¶å…‰â€ï¼Œåªä¸è¿‡åœ¨è¿™ç§æƒ…å†µä¸‹æ•°æ®åº“çº¿ç¨‹æ˜¯æ¯”è¾ƒæ¸…é—²çš„ï¼Œä»è¿™é‡Œå¹¶æ²¡æœ‰ä¸Šä¸€ç§æ–¹æ³•é«˜æ•ˆï¼Œä½†æ˜¯ä¾ç„¶è¦æ¯”åŒæ­¥æ¨¡å¼ä¸‹è¦é«˜æ•ˆã€‚ **æœ€åéœ€è¦æ³¨æ„çš„æ˜¯ï¼š**å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µä¸‹å¼‚æ­¥éƒ½ä¸€å®šæ¯”åŒæ­¥é«˜æ•ˆï¼Œè¿˜éœ€è¦ç»“åˆå…·ä½“ä¸šåŠ¡ä»¥åŠIOçš„å¤æ‚åº¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚ 4ã€æœ¬æ–‡å°ç»“ åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»å„ç§åœºæ™¯åˆ†æäº†åŒæ­¥ä¸å¼‚æ­¥è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯ä¸ç®¡åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ï¼ŒåŒæ­¥å¾€å¾€æ„å‘³ç€åŒæ–¹è¦ç›¸äº’ç­‰å¾…ã€ç›¸äº’ä¾èµ–ï¼Œè€Œå¼‚æ­¥æ„å‘³ç€åŒæ–¹ç›¸äº’ç‹¬ç«‹ã€å„è¡Œå…¶æ˜¯ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-si-shen-ru-cao-zuo-xi-tong-li-jie-tong-bu-yu-yi-bu/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(ä¸‰)ï¼šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œå½»åº•ç†è§£I/Oå¤šè·¯å¤ç”¨","content":"1ã€ä»€ä¹ˆæ˜¯æ–‡ä»¶ï¼Ÿ åœ¨æ­£å¼å±•å¼€æœ¬æ–‡çš„å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé¢„ä¹ ä¸€ä¸‹æ–‡ä»¶ä»¥åŠæ–‡ä»¶æè¿°ç¬¦çš„æ¦‚å¿µã€‚ ç¨‹åºå‘˜ä½¿ç”¨I/Oæœ€ç»ˆéƒ½é€ƒä¸è¿‡æ–‡ä»¶è¿™ä¸ªæ¦‚å¿µã€‚ åœ¨Linuxä¸–ç•Œä¸­æ–‡ä»¶æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ¦‚å¿µï¼Œä½œä¸ºç¨‹åºå‘˜æˆ‘ä»¬åªéœ€è¦å°†å…¶ç†è§£ä¸ºä¸€ä¸ªN byteçš„åºåˆ—å°±å¯ä»¥äº†ï¼š b1, b2, b3, b4, ....... bN å®é™…ä¸Šæ‰€æœ‰çš„I/Oè®¾å¤‡éƒ½è¢«æŠ½è±¡ä¸ºäº†æ–‡ä»¶è¿™ä¸ªæ¦‚å¿µï¼Œä¸€åˆ‡çš†æ–‡ä»¶ï¼ˆEverything is Fileï¼‰ï¼Œç£ç›˜ã€ç½‘ç»œæ•°æ®ã€ç»ˆç«¯ï¼Œç”šè‡³è¿›ç¨‹é—´é€šä¿¡å·¥å…·ç®¡é“pipeç­‰éƒ½è¢«å½“åšæ–‡ä»¶å¯¹å¾…ã€‚ â€‹ æ‰€æœ‰çš„I/Oæ“ä½œä¹Ÿéƒ½å¯ä»¥é€šè¿‡æ–‡ä»¶è¯»å†™æ¥å®ç°ï¼Œè¿™ä¸€éå¸¸ä¼˜é›…çš„æŠ½è±¡å¯ä»¥è®©ç¨‹åºå‘˜ä½¿ç”¨ä¸€å¥—æ¥å£å°±èƒ½å¯¹æ‰€æœ‰å¤–è®¾I/Oæ“ä½œã€‚ å¸¸ç”¨çš„I/Oæ“ä½œæ¥å£ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç±»ï¼š 1ï¼‰æ‰“å¼€æ–‡ä»¶ï¼Œopenï¼› 2ï¼‰æ”¹å˜è¯»å†™ä½ç½®ï¼Œseekï¼› 3ï¼‰æ–‡ä»¶è¯»å†™ï¼Œreadã€writeï¼› 4ï¼‰å…³é—­æ–‡ä»¶ï¼Œcloseã€‚ ç¨‹åºå‘˜é€šè¿‡è¿™å‡ ä¸ªæ¥å£å‡ ä¹å¯ä»¥å®ç°æ‰€æœ‰I/Oæ“ä½œï¼Œè¿™å°±æ˜¯æ–‡ä»¶è¿™ä¸ªæ¦‚å¿µçš„å¼ºå¤§ä¹‹å¤„ã€‚ 2ã€ä»€ä¹ˆæ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Ÿ åœ¨ä¸Šä¸€ç¯‡ã€Šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œç†è§£I/Oä¸é›¶æ‹·è´æŠ€æœ¯ã€‹ä¸­æˆ‘ä»¬è®²åˆ°ï¼šè¦æƒ³è¿›è¡ŒI/Oè¯»æ“ä½œï¼Œåƒç£ç›˜æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªbuffç”¨æ¥è£…å…¥æ•°æ®ã€‚ ä¸€èˆ¬éƒ½æ˜¯è¿™æ ·å†™çš„ï¼š read(buff); ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬å¿½ç•¥äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šé‚£å°±æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬æŒ‡å®šäº†å¾€å“ªé‡Œå†™æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬è¯¥ä»å“ªé‡Œè¯»æ•°æ®å‘¢ï¼Ÿ ä»ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œé€šè¿‡æ–‡ä»¶è¿™ä¸ªæ¦‚å¿µæˆ‘ä»¬èƒ½å®ç°å‡ ä¹æ‰€æœ‰I/Oæ“ä½œï¼Œå› æ­¤è¿™é‡Œå°‘çš„ä¸€ä¸ªä¸»è§’å°±æ˜¯æ–‡ä»¶ã€‚ é‚£ä¹ˆæˆ‘ä»¬ä¸€èˆ¬éƒ½æ€æ ·ä½¿ç”¨æ–‡ä»¶å‘¢ï¼Ÿ **ä¸¾ä¸ªä¾‹å­ï¼š**å¦‚æœå‘¨æœ«ä½ å»æ¯”è¾ƒç«çš„é¤å…åƒé¥­åº”è¯¥ä¼šæœ‰ä½“ä¼šï¼Œä¸€èˆ¬å‘¨æœ«äººæ°”é«˜çš„é¤å…éƒ½ä¼šæ’é˜Ÿï¼Œç„¶åæœåŠ¡å‘˜ä¼šç»™ä½ ä¸€ä¸ªæ’é˜Ÿåºå·ï¼Œé€šè¿‡è¿™ä¸ªåºå·æœåŠ¡å‘˜å°±èƒ½æ‰¾åˆ°ä½ ï¼Œè¿™é‡Œçš„å¥½å¤„å°±æ˜¯æœåŠ¡å‘˜æ— éœ€è®°ä½ä½ æ˜¯è°ã€ä½ çš„åå­—æ˜¯ä»€ä¹ˆã€æ¥è‡ªå“ªé‡Œã€å–œå¥½æ˜¯ä»€ä¹ˆã€æ˜¯ä¸æ˜¯ä¿æŠ¤ç¯å¢ƒçˆ±æŠ¤å°åŠ¨ç‰©ç­‰ç­‰ï¼Œè¿™é‡Œçš„å…³é”®ç‚¹å°±æ˜¯ï¼šæœåŠ¡å‘˜å¯¹ä½ ä¸€æ— æ‰€çŸ¥ï¼Œä½†ä¾ç„¶å¯ä»¥é€šè¿‡ä¸€ä¸ªå·ç å°±èƒ½æ‰¾åˆ°ä½ ã€‚ **åŒæ ·çš„ï¼š**åœ¨Linuxä¸–ç•Œè¦æƒ³ä½¿ç”¨æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å€ŸåŠ©ä¸€ä¸ªå·ç ï¼Œæ ¹æ®â€œå¼„ä¸æ‡‚åŸåˆ™â€ï¼Œè¿™ä¸ªå·ç å°±è¢«ç§°ä¸ºäº†æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorsï¼‰ï¼Œåœ¨Linuxä¸–ç•Œä¸­é¼é¼å¤§åï¼Œå…¶é“ç†å’Œä¸Šé¢é‚£ä¸ªæ’é˜Ÿå·ç ä¸€æ ·ã€‚ **å› æ­¤ï¼š**æ–‡ä»¶æè¿°ä»…ä»…å°±æ˜¯ä¸€ä¸ªæ•°å­—è€Œå·²ï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸ªæ•°å­—æˆ‘ä»¬å¯ä»¥æ“ä½œä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼Œè¿™ä¸€ç‚¹è¦è®°ä½ã€‚ â€‹ æœ‰äº†æ–‡ä»¶æè¿°ç¬¦ï¼Œè¿›ç¨‹å¯ä»¥å¯¹æ–‡ä»¶ä¸€æ— æ‰€çŸ¥ï¼Œæ¯”å¦‚æ–‡ä»¶åœ¨ç£ç›˜çš„ä»€ä¹ˆä½ç½®ã€åŠ è½½åˆ°å†…å­˜ä¸­åˆæ˜¯æ€æ ·ç®¡ç†çš„ç­‰ç­‰ï¼Œè¿™äº›ä¿¡æ¯ç»Ÿç»Ÿäº¤ç”±æ“ä½œç³»ç»Ÿæ‰“ç†ï¼Œè¿›ç¨‹æ— éœ€å…³å¿ƒï¼Œæ“ä½œç³»ç»Ÿåªéœ€è¦ç»™è¿›ç¨‹ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å°±è¶³å¤Ÿäº†ã€‚ å› æ­¤æˆ‘ä»¬æ¥å®Œå–„ä¸Šè¿°ç¨‹åºï¼š int fd = open(file_name); // è·å–æ–‡ä»¶æè¿°ç¬¦ read(fd, buff); æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ã€‚ 3ã€æ–‡ä»¶æè¿°ç¬¦å¤ªå¤šäº†æ€ä¹ˆåŠï¼Ÿ ç»è¿‡äº†è¿™ä¹ˆå¤šçš„é“ºå«ï¼Œç»ˆäºè¦åˆ°é«˜æ€§èƒ½ã€é«˜å¹¶å‘è¿™ä¸€ä¸»é¢˜äº†ã€‚ ä»å‰å‡ èŠ‚æˆ‘ä»¬çŸ¥é“ï¼Œæ‰€æœ‰I/Oæ“ä½œéƒ½å¯ä»¥é€šè¿‡æ–‡ä»¶æ ·çš„æ¦‚å¿µæ¥è¿›è¡Œï¼Œè¿™å½“ç„¶åŒ…æ‹¬ç½‘ç»œé€šä¿¡ã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªIMæœåŠ¡å™¨ï¼Œå½“ä¸‰æ¬¡æ¡æ‰‹å»ºè®®é•¿è¿æ¥æˆåŠŸä»¥åï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨acceptæ¥è·å–ä¸€ä¸ªé“¾æ¥ï¼Œè°ƒç”¨è¯¥å‡½æ•°æˆ‘ä»¬åŒæ ·ä¼šå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦å°±å¯ä»¥å¤„ç†å®¢æˆ·ç«¯å‘é€çš„èŠå¤©æ¶ˆæ¯å¹¶ä¸”æŠŠæ¶ˆæ¯è½¬å‘ç»™æ¥æ”¶è€…ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡è¿™ä¸ªæè¿°ç¬¦æˆ‘ä»¬å°±å¯ä»¥å’Œå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡äº†ï¼š // é€šè¿‡acceptè·å–å®¢æˆ·ç«¯çš„æ–‡ä»¶æè¿°ç¬¦ int conn_fd = accept(...); Serverç«¯çš„å¤„ç†é€»è¾‘é€šå¸¸æ˜¯æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯æ•°æ®ï¼Œç„¶åæ‰§è¡Œè½¬å‘ï¼ˆç»™æ¥æ”¶è€…ï¼‰é€»è¾‘ï¼š if(read(conn_fd, msg_buff) &gt; 0) { do_transfer(msg_buff); } æ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Œç„¶è€Œä¸–ç•Œç»ˆå½’æ˜¯å¤æ‚çš„ï¼Œå½“ç„¶ä¹Ÿä¸æ˜¯è¿™ä¹ˆç®€å•çš„ã€‚ æ¥ä¸‹æ¥å°±æ˜¯æ¯”è¾ƒå¤æ‚çš„äº†ã€‚ æ—¢ç„¶æˆ‘ä»¬çš„ä¸»é¢˜æ˜¯é«˜å¹¶å‘ï¼Œé‚£ä¹ˆServerç«¯å°±ä¸å¯èƒ½åªå’Œä¸€ä¸ªå®¢æˆ·ç«¯é€šä¿¡ï¼Œè€Œæ˜¯å¯èƒ½ä¼šåŒæ—¶å’Œæˆåƒä¸Šä¸‡ä¸ªå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚è¿™æ—¶ä½ éœ€è¦å¤„ç†ä¸å†æ˜¯ä¸€ä¸ªæè¿°ç¬¦è¿™ä¹ˆç®€å•ï¼Œè€Œæ˜¯æœ‰å¯èƒ½è¦å¤„ç†æˆåƒä¸Šä¸‡ä¸ªæè¿°ç¬¦ã€‚ ä¸ºäº†ä¸è®©é—®é¢˜ä¸€ä¸Šæ¥å°±è¿‡äºå¤æ‚ï¼Œæˆ‘ä»¬å…ˆç®€å•åŒ–ï¼Œå‡è®¾åªåŒæ—¶å¤„ç†ä¸¤ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ æœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´ï¼Œè¿™è¿˜ä¸ç®€å•ï¼Œè¿™æ ·å†™ä¸å°±è¡Œäº†ï¼š if(read(socket_fd1, buff) &gt; 0) { // å¤„ç†ç¬¬ä¸€ä¸ª do_transfer(); } if(read(socket_fd2, buff) &gt; 0) { // å¤„ç†ç¬¬äºŒä¸ª do_transfer(); åœ¨ã€Š[æ·±å…¥æ“ä½œç³»ç»Ÿï¼Œç†è§£I/Oä¸é›¶æ‹·è´æŠ€æœ¯]ã€‹ä¸­æˆ‘ä»¬è®¨è®ºè¿‡ï¼Œè¿™æ˜¯éå¸¸å…¸å‹çš„é˜»å¡å¼I/Oï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰æ•°æ®å¯è¯»é‚£ä¹ˆè¿›ç¨‹ä¼šè¢«é˜»å¡è€Œæš‚åœè¿è¡Œã€‚è¿™æ—¶æˆ‘ä»¬å°±æ— æ³•å¤„ç†ç¬¬äºŒä¸ªè¯·æ±‚äº†ï¼Œå³ä½¿ç¬¬äºŒä¸ªè¯·æ±‚çš„æ•°æ®å·²ç»å°±ä½ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å¤„ç†æŸä¸€ä¸ªå®¢æˆ·ç«¯æ—¶ç”±äºè¿›ç¨‹è¢«é˜»å¡å¯¼è‡´å‰©ä¸‹çš„æ‰€æœ‰å…¶å®ƒå®¢æˆ·ç«¯å¿…é¡»ç­‰å¾…ï¼Œåœ¨åŒæ—¶å¤„ç†å‡ ä¸‡å®¢æˆ·ç«¯çš„serverä¸Šã€‚è¿™æ˜¾ç„¶æ˜¯ä¸èƒ½å®¹å¿çš„ã€‚ èªæ˜çš„ä½ ä¸€å®šä¼šæƒ³åˆ°ä½¿ç”¨å¤šçº¿ç¨‹ï¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·ä¸€ä¸ªå®¢æˆ·ç«¯è¢«é˜»å¡å°±ä¸ä¼šå½±å“åˆ°å¤„ç†å…¶å®ƒå®¢æˆ·ç«¯çš„çº¿ç¨‹äº†ã€‚æ³¨æ„ï¼šæ—¢ç„¶æ˜¯é«˜å¹¶å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦ä¸ºæˆåƒä¸Šä¸‡ä¸ªè¯·æ±‚å¼€å¯æˆåƒä¸Šä¸‡ä¸ªçº¿ç¨‹å—ï¼Œå¤§é‡åˆ›å»ºé”€æ¯çº¿ç¨‹ä¼šä¸¥é‡å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚ é‚£ä¹ˆè¿™ä¸ªé—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ **è¿™é‡Œçš„å…³é”®ç‚¹åœ¨äºï¼š**æˆ‘ä»¬äº‹å…ˆå¹¶ä¸çŸ¥é“ä¸€ä¸ªæ–‡ä»¶æè¿°å¯¹åº”çš„I/Oè®¾å¤‡æ˜¯å¦æ˜¯å¯è¯»çš„ã€æ˜¯å¦æ˜¯å¯å†™çš„ï¼Œåœ¨å¤–è®¾çš„ä¸å¯è¯»æˆ–ä¸å¯å†™çš„çŠ¶æ€ä¸‹è¿›è¡ŒI/Oåªä¼šå¯¼è‡´è¿›ç¨‹é˜»å¡è¢«æš‚åœè¿è¡Œã€‚ å› æ­¤è¦ä¼˜é›…çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ä»å…¶å®ƒè§’åº¦æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜äº†ã€‚ 4ã€â€œä¸è¦æ‰“ç”µè¯ç»™æˆ‘ï¼Œæœ‰éœ€è¦æˆ‘ä¼šæ‰“ç»™ä½ â€ å¤§å®¶ç”Ÿæ´»ä¸­è‚¯å®šä¼šæ¥åˆ°è¿‡æ¨é”€ç”µè¯ï¼Œè€Œä¸”ä¸æ­¢ä¸€ä¸ªï¼Œä¸€å¤©ä¸‹æ¥æ¥ä¸Šåä¸ªå…«ä¸ªæ¨é”€ç”µè¯ä½ çš„èº«ä½“ä¼šè¢«æç©ºçš„ã€‚ è¿™ä¸ªåœºæ™¯çš„å…³é”®ç‚¹åœ¨äºï¼šæ‰“ç”µè¯çš„äººå¹¶ä¸çŸ¥é“ä½ æ˜¯ä¸æ˜¯è¦ä¹°ä¸œè¥¿ï¼Œåªèƒ½æ¥ä¸€ééé—®ä½ ã€‚å› æ­¤ä¸€ç§æ›´å¥½çš„ç­–ç•¥æ˜¯ä¸è¦è®©ä»–ä»¬æ‰“ç”µè¯ç»™ä½ ï¼Œè®°ä¸‹ä»–ä»¬çš„ç”µè¯ï¼Œæœ‰éœ€è¦çš„è¯æ‰“ç»™ä»–ä»¬ï¼Œè¿™æ ·æ¨é”€å‘˜å°±ä¸ä¼šä¸€éä¸€éçš„æ¥çƒ¦ä½ äº†ï¼ˆè™½ç„¶ç°å®ç”Ÿæ´»ä¸­è¿™å¹¶ä¸å¯èƒ½ï¼‰ã€‚ **åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š**ä½ ï¼Œå°±å¥½æ¯”å†…æ ¸ï¼Œæ¨é”€è€…å°±å¥½æ¯”åº”ç”¨ç¨‹åºï¼Œç”µè¯å·ç å°±å¥½æ¯”æ–‡ä»¶æè¿°ç¬¦ï¼Œå’Œä½ ç”¨ç”µè¯æ²Ÿé€šå°±å¥½æ¯”I/Oã€‚ ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†å§ï¼Œå¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„æ›´å¥½æ–¹æ³•å…¶å®å°±å­˜åœ¨äºæ¨é”€ç”µè¯ä¸­ã€‚ å› æ­¤ç›¸æ¯”ä¸Šä¸€èŠ‚ä¸­ï¼šæˆ‘ä»¬é€šè¿‡I/Oæ¥å£ä¸»åŠ¨é—®å†…æ ¸è¿™äº›æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„å¤–è®¾æ˜¯ä¸æ˜¯å·²ç»å°±ç»ªäº†ï¼Œä¸€ç§æ›´å¥½çš„æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬æŠŠè¿™äº›æ„Ÿå…´è¶£çš„æ–‡ä»¶æè¿°ç¬¦ä¸€è‚¡è„‘æ‰”ç»™å†…æ ¸ï¼Œå¹¶éœ¸æ°”çš„å‘Šè¯‰å†…æ ¸ï¼šâ€œæˆ‘è¿™é‡Œæœ‰1ä¸‡ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä½ æ›¿æˆ‘ç›‘è§†ç€å®ƒä»¬ï¼Œæœ‰å¯ä»¥è¯»å†™çš„æ–‡ä»¶æè¿°ç¬¦æ—¶ä½ å°±å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¥½å¤„ç†â€ã€‚è€Œä¸æ˜¯å¼±å¼±çš„é—®å†…æ ¸ï¼šâ€œç¬¬ä¸€ä¸ªæ–‡ä»¶æè¿°å¯ä»¥è¯»å†™äº†å—ï¼Ÿç¬¬äºŒä¸ªæ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯»å†™å—ï¼Ÿç¬¬ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯»å†™äº†å—ï¼Ÿã€‚ã€‚ã€‚â€ **è¿™æ ·ï¼š**åº”ç”¨ç¨‹åºå°±ä»â€œç¹å¿™â€çš„ä¸»åŠ¨å˜ä¸ºäº†æ¸…é—²çš„è¢«åŠ¨ï¼Œåæ­£æ–‡ä»¶æè¿°å¯è¯»å¯å†™äº†å†…æ ¸ä¼šé€šçŸ¥æˆ‘ï¼Œèƒ½å·æ‡’æˆ‘æ‰ä¸è¦é‚£ä¹ˆå‹¤å¥‹ã€‚ è¿™æ˜¯ä¸€ç§æ›´åŠ é«˜æ•ˆçš„I/Oå¤„ç†æœºåˆ¶ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡å¤„ç†å¤šè·¯I/Oäº†ï¼Œä¸ºè¿™ç§æœºåˆ¶èµ·ä¸€ä¸ªåå­—å§ï¼Œå°±å«I/Oå¤šè·¯å¤ç”¨å§ï¼Œè¿™å°±æ˜¯ I/O multiplexingã€‚ 5ã€I/Oå¤šè·¯å¤ç”¨ï¼ˆI/O multiplexingï¼‰ multiplexingä¸€è¯å…¶å®å¤šç”¨äºé€šä¿¡é¢†åŸŸï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨é€šä¿¡çº¿è·¯ï¼Œå¸Œæœ›åœ¨ä¸€ä¸ªä¿¡é“ä¸­ä¼ è¾“å¤šè·¯ä¿¡å·ï¼Œè¦æƒ³åœ¨ä¸€ä¸ªä¿¡é“ä¸­ä¼ è¾“å¤šè·¯ä¿¡å·å°±éœ€è¦æŠŠè¿™å¤šè·¯ä¿¡å·ç»“åˆä¸ºä¸€è·¯ï¼Œå°†å¤šè·¯ä¿¡å·ç»„åˆæˆä¸€ä¸ªä¿¡å·çš„è®¾å¤‡è¢«ç§°ä¸ºMultiplexerï¼ˆå¤šè·¯å¤ç”¨å™¨ï¼‰ï¼Œæ˜¾ç„¶æ¥æ”¶æ–¹æ¥æ”¶åˆ°è¿™ä¸€è·¯ç»„åˆåçš„ä¿¡å·åè¦æ¢å¤åŸå…ˆçš„å¤šè·¯ä¿¡å·ï¼Œè¿™ä¸ªè®¾å¤‡è¢«ç§°ä¸ºDemultiplexerï¼ˆå¤šè·¯åˆ†ç”¨å™¨ï¼‰ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š â€‹ å›åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ã€‚ æ‰€è°“I/Oå¤šè·¯å¤ç”¨æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼š 1ï¼‰æˆ‘ä»¬æ‹¿åˆ°äº†ä¸€å †æ–‡ä»¶æè¿°ç¬¦ï¼ˆä¸ç®¡æ˜¯ç½‘ç»œç›¸å…³çš„ã€è¿˜æ˜¯ç£ç›˜æ–‡ä»¶ç›¸å…³ç­‰ç­‰ï¼Œä»»ä½•æ–‡ä»¶æè¿°ç¬¦éƒ½å¯ä»¥ï¼‰ï¼› 2ï¼‰é€šè¿‡è°ƒç”¨æŸä¸ªå‡½æ•°å‘Šè¯‰å†…æ ¸ï¼šâ€œè¿™ä¸ªå‡½æ•°ä½ å…ˆä¸è¦è¿”å›ï¼Œä½ æ›¿æˆ‘ç›‘è§†ç€è¿™äº›æè¿°ç¬¦ï¼Œå½“è¿™å †æ–‡ä»¶æè¿°ç¬¦ä¸­æœ‰å¯ä»¥è¿›è¡ŒI/Oè¯»å†™æ“ä½œçš„æ—¶å€™ä½ å†è¿”å›â€ï¼› 3ï¼‰å½“è°ƒç”¨çš„è¿™ä¸ªå‡½æ•°è¿”å›åæˆ‘ä»¬å°±èƒ½çŸ¥é“å“ªäº›æ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¿›è¡ŒI/Oæ“ä½œäº†ã€‚ ä¹Ÿå°±æ˜¯è¯´é€šè¿‡I/Oå¤šè·¯å¤ç”¨æˆ‘ä»¬å¯ä»¥åŒæ—¶å¤„ç†å¤šè·¯I/Oã€‚é‚£ä¹ˆæœ‰å“ªäº›å‡½æ•°å¯ä»¥ç”¨æ¥è¿›è¡ŒI/Oå¤šè·¯å¤ç”¨å‘¢ï¼Ÿ ä»¥Linuxä¸ºä¾‹ï¼Œæœ‰è¿™æ ·ä¸‰ç§æœºåˆ¶å¯ä»¥ç”¨æ¥è¿›è¡ŒI/Oå¤šè·¯å¤ç”¨ï¼š 1ï¼‰selectï¼› 2ï¼‰pollï¼› 3ï¼‰epollã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹I/Oå¤šè·¯å¤ç”¨ä¸‰å‰‘å®¢ã€‚ 6ã€I/Oå¤šè·¯å¤ç”¨ä¸‰å‰‘å®¢ **æœ¬è´¨ä¸Šï¼š**Linuxä¸Šçš„selectã€pollã€epolléƒ½æ˜¯é˜»å¡å¼I/Oï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åŒæ­¥I/Oã€‚ åŸå› åœ¨äºï¼šè°ƒç”¨è¿™äº›I/Oå¤šè·¯å¤ç”¨å‡½æ•°æ—¶å¦‚æœä»»ä½•ä¸€ä¸ªéœ€è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦éƒ½ä¸å¯è¯»æˆ–è€…å¯å†™é‚£ä¹ˆè¿›ç¨‹ä¼šè¢«é˜»å¡æš‚åœæ‰§è¡Œï¼Œç›´åˆ°æœ‰æ–‡ä»¶æè¿°ç¬¦å¯è¯»æˆ–è€…å¯å†™æ‰ç»§ç»­è¿è¡Œã€‚ 6.1 selectï¼šåˆå‡ºèŒ…åº åœ¨selectè¿™ç§I/Oå¤šè·¯å¤ç”¨æœºåˆ¶ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæƒ³ç›‘æ§çš„æ–‡ä»¶æè¿°é›†åˆé€šè¿‡å‡½æ•°å‚æ•°çš„å½¢å¼å‘Šè¯‰selectï¼Œç„¶åselectä¼šå°†è¿™äº›æ–‡ä»¶æè¿°ç¬¦é›†åˆæ‹·è´åˆ°å†…æ ¸ä¸­ã€‚ æˆ‘ä»¬çŸ¥é“æ•°æ®æ‹·è´æ˜¯æœ‰æ€§èƒ½æŸè€—çš„ï¼Œå› æ­¤ä¸ºäº†å‡å°‘è¿™ç§æ•°æ®æ‹·è´å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼ŒLinuxå†…æ ¸å¯¹é›†åˆçš„å¤§å°åšäº†é™åˆ¶ï¼Œå¹¶è§„å®šç”¨æˆ·ç›‘æ§çš„æ–‡ä»¶æè¿°é›†åˆä¸èƒ½è¶…è¿‡1024ä¸ªï¼ŒåŒæ—¶å½“selectè¿”å›åæˆ‘ä»¬ä»…ä»…èƒ½çŸ¥é“æœ‰äº›æ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯»å†™äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“æ˜¯å“ªä¸€ä¸ªã€‚å› æ­¤ç¨‹åºå‘˜å¿…é¡»å†éå†ä¸€è¾¹æ‰¾åˆ°å…·ä½“æ˜¯å“ªä¸ªæ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯»å†™äº†ã€‚ å› æ­¤ï¼Œæ€»ç»“ä¸‹æ¥selectæœ‰è¿™æ ·å‡ ä¸ªç‰¹ç‚¹ï¼š 1ï¼‰æˆ‘èƒ½ç…§çœ‹çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æœ‰é™ï¼Œä¸èƒ½è¶…è¿‡1024ä¸ªï¼› 2ï¼‰ç”¨æˆ·ç»™æˆ‘çš„æ–‡ä»¶æè¿°ç¬¦éœ€è¦æ‹·è´çš„å†…æ ¸ä¸­ï¼› 3ï¼‰æˆ‘åªèƒ½å‘Šè¯‰ä½ æœ‰æ–‡ä»¶æè¿°ç¬¦æ»¡è¶³è¦æ±‚äº†ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“æ˜¯å“ªä¸ªï¼Œä½ è‡ªå·±ä¸€ä¸ªä¸€ä¸ªå»æ‰¾å§ï¼ˆéå†ï¼‰ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œselectæœºåˆ¶çš„è¿™äº›ç‰¹æ€§åœ¨é«˜å¹¶å‘ç½‘ç»œæœåŠ¡å™¨åŠ¨è¾„å‡ ä¸‡å‡ åä¸‡å¹¶å‘é“¾æ¥çš„åœºæ™¯ä¸‹æ— ç–‘æ˜¯ä½æ•ˆçš„ã€‚ 6.2 pollï¼šå°æœ‰æ‰€æˆ pollå’Œselectæ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚ pollç›¸å¯¹äºselectçš„ä¼˜åŒ–ä»…ä»…åœ¨äºè§£å†³äº†æ–‡ä»¶æè¿°ç¬¦ä¸èƒ½è¶…è¿‡1024ä¸ªçš„é™åˆ¶ï¼Œselectå’Œpolléƒ½ä¼šéšç€ç›‘æ§çš„æ–‡ä»¶æè¿°æ•°é‡å¢åŠ è€Œæ€§èƒ½ä¸‹é™ï¼Œå› æ­¤ä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚ 6.3 epollï¼šç‹¬æ­¥å¤©ä¸‹ åœ¨selecté¢ä¸´çš„ä¸‰ä¸ªé—®é¢˜ä¸­ï¼Œæ–‡ä»¶æè¿°æ•°é‡é™åˆ¶å·²ç»åœ¨pollä¸­è§£å†³äº†ï¼Œå‰©ä¸‹çš„ä¸¤ä¸ªé—®é¢˜å‘¢ï¼Ÿ é’ˆå¯¹æ‹·è´é—®é¢˜ï¼šepollä½¿ç”¨çš„ç­–ç•¥æ˜¯å„ä¸ªå‡»ç ´ä¸å…±äº«å†…å­˜ã€‚ **å®é™…ä¸Šï¼š**æ–‡ä»¶æè¿°ç¬¦é›†åˆçš„å˜åŒ–é¢‘ç‡æ¯”è¾ƒä½ï¼Œselectå’Œpollé¢‘ç¹çš„æ‹·è´æ•´ä¸ªé›†åˆï¼Œå†…æ ¸éƒ½å¿«è¢«çƒ¦æ­»äº†ï¼Œepollé€šè¿‡å¼•å…¥epoll_ctlå¾ˆä½“è´´çš„åšåˆ°äº†åªæ“ä½œé‚£äº›æœ‰å˜åŒ–çš„æ–‡ä»¶æè¿°ç¬¦ã€‚åŒæ—¶epollå’Œå†…æ ¸è¿˜æˆä¸ºäº†å¥½æœ‹å‹ï¼Œå…±äº«äº†åŒä¸€å—å†…å­˜ï¼Œè¿™å—å†…å­˜ä¸­ä¿å­˜çš„å°±æ˜¯é‚£äº›å·²ç»å¯è¯»æˆ–è€…å¯å†™çš„çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œè¿™æ ·å°±å‡å°‘äº†å†…æ ¸å’Œç¨‹åºçš„æ‹·è´å¼€é”€ã€‚ é’ˆå¯¹éœ€è¦éå†æ–‡ä»¶æè¿°ç¬¦æ‰èƒ½çŸ¥é“å“ªä¸ªå¯è¯»å¯å†™è¿™ä¸€é—®é¢˜ï¼Œepollä½¿ç”¨çš„ç­–ç•¥æ˜¯â€œå½“å°å¼Ÿâ€ã€‚ åœ¨selectå’Œpollæœºåˆ¶ä¸‹ï¼šè¿›ç¨‹è¦äº²è‡ªä¸‹åœºå»å„ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šç­‰å¾…ï¼Œä»»ä½•ä¸€ä¸ªæ–‡ä»¶æè¿°å¯è¯»æˆ–è€…å¯å†™å°±å”¤é†’è¿›ç¨‹ï¼Œä½†æ˜¯è¿›ç¨‹è¢«å”¤é†’åä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼å¹¶ä¸çŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªæ–‡ä»¶æè¿°ç¬¦å¯è¯»æˆ–å¯å†™ï¼Œè¿˜è¦å†ä»å¤´åˆ°å°¾æ£€æŸ¥ä¸€éã€‚ ä½†epollå°±æ‡‚äº‹å¤šäº†ï¼Œä¸»åŠ¨æ‰¾åˆ°è¿›ç¨‹ã€‚ **åœ¨è¿™ç§æœºåˆ¶ä¸‹ï¼š**è¿›ç¨‹ä¸éœ€è¦äº²è‡ªä¸‹åœºäº†ï¼Œè¿›ç¨‹åªè¦ç­‰å¾…åœ¨epollä¸Šï¼Œepollä»£æ›¿è¿›ç¨‹å»å„ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šç­‰å¾…ï¼Œå½“å“ªä¸ªæ–‡ä»¶æè¿°ç¬¦å¯è¯»æˆ–è€…å¯å†™çš„æ—¶å€™å°±å‘Šè¯‰epollï¼Œepollç”¨å°æœ¬æœ¬è®¤çœŸè®°å½•ä¸‹æ¥ç„¶åå”¤é†’å¤§å“¥ï¼šâ€œè¿›ç¨‹å¤§å“¥ï¼Œå¿«é†’é†’ï¼Œä½ è¦å¤„ç†çš„æ–‡ä»¶æè¿°ç¬¦æˆ‘éƒ½è®°ä¸‹æ¥äº†â€ï¼Œè¿™æ ·è¿›ç¨‹è¢«å”¤é†’åå°±æ— éœ€è‡ªå·±ä»å¤´åˆ°å°¾æ£€æŸ¥ä¸€éï¼Œå› ä¸ºepollå°å¼Ÿéƒ½å·²ç»è®°ä¸‹æ¥äº†ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šåœ¨epollè¿™ç§æœºåˆ¶ä¸‹ï¼Œå®é™…ä¸Šåˆ©ç”¨çš„å°±æ˜¯â€œä¸è¦æ‰“ç”µè¯ç»™æˆ‘ï¼Œæœ‰éœ€è¦æˆ‘ä¼šæ‰“ç»™ä½ â€è¿™ç§ç­–ç•¥ï¼Œè¿›ç¨‹ä¸éœ€è¦ä¸€éä¸€ééº»çƒ¦çš„é—®å„ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ˜¯ç¿»èº«åšä¸»äººäº†â€”â€”â€œä½ ä»¬è¿™äº›æ–‡ä»¶æè¿°ç¬¦æœ‰å“ªä¸ªå¯è¯»æˆ–è€…å¯å†™äº†ä¸»åŠ¨æŠ¥ä¸Šæ¥â€ã€‚ è¿™ç§æœºåˆ¶å®é™…ä¸Šå°±æ˜¯å¤§åé¼é¼çš„äº‹ä»¶é©±åŠ¨â€”â€”Event-drivenï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸‹ä¸€ç¯‡çš„ä¸»é¢˜ã€‚ **å®é™…ä¸Šï¼š**åœ¨Linuxå¹³å°ï¼ŒepollåŸºæœ¬ä¸Šå°±æ˜¯é«˜å¹¶å‘çš„ä»£åè¯ã€‚ 7ã€æœ¬æ–‡å°ç»“ åŸºäºä¸€åˆ‡çš†æ–‡ä»¶çš„è®¾è®¡å“²å­¦ï¼ŒI/Oä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶çš„å½¢å¼å®ç°ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹è¦ä¸å¤šä¸ªæ–‡ä»¶äº¤äº’ï¼Œè¿™å°±ç¦»ä¸å¼€é«˜æ•ˆçš„I/Oå¤šè·¯å¤ç”¨æŠ€æœ¯ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-san-shen-ru-cao-zuo-xi-tong-che-di-li-jie-io-duo-lu-fu-yong/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(äºŒ)ï¼šæ·±å…¥æ“ä½œç³»ç»Ÿï¼Œç†è§£I/Oä¸é›¶æ‹·è´æŠ€æœ¯","content":"1ã€ä¸èƒ½æ‰§è¡ŒI/Oçš„è®¡ç®—æœºæ˜¯ä»€ä¹ˆï¼Ÿ ç›¸ä¿¡å¯¹äºç¨‹åºå‘˜æ¥è¯´I/Oæ“ä½œæ˜¯æœ€ä¸ºç†Ÿæ‚‰ä¸è¿‡çš„äº†ï¼Œæ¯”å¦‚ï¼š 1ï¼‰å½“æˆ‘ä»¬ä½¿ç”¨Cè¯­è¨€ä¸­çš„printfã€C++ä¸­çš„&quot;&lt;&lt;&quot;ï¼ŒPythonä¸­çš„printï¼ŒJavaä¸­çš„System.out.printlnç­‰æ—¶ï¼› 2ï¼‰å½“æˆ‘ä»¬ä½¿ç”¨å„ç§è¯­è¨€è¯»å†™æ–‡ä»¶æ—¶ï¼› 3ï¼‰å½“æˆ‘ä»¬é€šè¿‡TCP/IPè¿›è¡Œç½‘ç»œé€šä¿¡æ—¶ï¼› 4ï¼‰å½“æˆ‘ä»¬ä½¿ç”¨é¼ æ ‡é¾™é£å‡¤èˆæ—¶ï¼› 5ï¼‰å½“æˆ‘ä»¬æ‹¿èµ·é”®ç›˜åœ¨è¯„è®ºåŒºæŒ‡ç‚¹æ±Ÿå±±äº¦æˆ–æ˜¯åŸ‹å¤´è‹¦å¹²åŠªåŠ›åˆ¶é€ bugæ—¶ï¼› 6ï¼‰å½“æˆ‘ä»¬èƒ½çœ‹åˆ°å±å¹•ä¸Šçš„æ¼‚äº®çš„å›¾å½¢ç•Œé¢æ—¶ç­‰ç­‰ã€‚ ä»¥ä¸Šè¿™ä¸€åˆ‡ï¼Œéƒ½æ˜¯I/Oï¼ **æƒ³ä¸€æƒ³ï¼š**å¦‚æœæ²¡æœ‰I/Oè®¡ç®—æœºè¯¥æ˜¯ä¸€ç§å¤šä¹ˆæ¯ç‡¥çš„è®¾å¤‡ï¼Œä¸èƒ½çœ‹ç”µå½±ã€ä¸èƒ½ç©æ¸¸æˆï¼Œä¹Ÿä¸èƒ½ä¸Šç½‘ï¼Œè¿™æ ·çš„è®¡ç®—æœºæœ€å¤šå°±æ˜¯ä¸€ä¸ªå¤§å·çš„è®¡ç®—å™¨ã€‚ æ—¢ç„¶I/Oè¿™ä¹ˆé‡è¦ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ‰æ˜¯I/Oå‘¢ï¼Ÿ 2ã€ä»€ä¹ˆæ˜¯I/Oï¼Ÿ I/Oå°±æ˜¯ç®€å•çš„æ•°æ®Copyï¼Œä»…æ­¤è€Œå·²ï¼ è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼ æ—¢ç„¶æ˜¯copyæ•°æ®ï¼Œé‚£ä¹ˆåˆæ˜¯ä»å“ªé‡Œcopyåˆ°å“ªé‡Œå‘¢ï¼Ÿ å¦‚æœæ•°æ®æ˜¯ä»å¤–éƒ¨è®¾å¤‡copyåˆ°å†…å­˜ä¸­ï¼Œè¿™å°±æ˜¯Inputã€‚ å¦‚æœæ•°æ®æ˜¯ä»å†…å­˜copyåˆ°å¤–éƒ¨è®¾å¤‡ï¼Œè¿™å°±æ˜¯Outputã€‚ å†…å­˜ä¸å¤–éƒ¨è®¾å¤‡ä¹‹é—´ä¸å«Œéº»çƒ¦çš„æ¥å›copyæ•°æ®å°±æ˜¯Input and Outputï¼Œç®€ç§°I/Oï¼ˆInput/Outputï¼‰ï¼Œä»…æ­¤è€Œå·²ã€‚ 3ã€I/Oä¸CPU ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯I/Oï¼Œæ¥ä¸‹æ¥å°±æ˜¯é‡ç‚¹éƒ¨åˆ†äº†ã€‚ æˆ‘ä»¬çŸ¥é“ç°åœ¨çš„CPUå…¶ä¸»é¢‘éƒ½æ˜¯æ•°GHzèµ·æ­¥ï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ **ç®€å•è¯´å°±æ˜¯ï¼š**CPUæ‰§è¡Œæœºå™¨æŒ‡ä»¤çš„é€Ÿåº¦æ˜¯çº³ç§’çº§åˆ«çš„ï¼Œè€Œé€šå¸¸çš„I/Oæ¯”å¦‚ç£ç›˜æ“ä½œï¼Œä¸€æ¬¡ç£ç›˜seekå¤§æ¦‚åœ¨æ¯«ç§’çº§åˆ«ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬æŠŠCPUçš„é€Ÿåº¦æ¯”ä½œæˆ˜æ–—æœºçš„è¯ï¼Œé‚£ä¹ˆI/Oæ“ä½œçš„é€Ÿåº¦å°±æ˜¯è‚¯å¾·é¸¡ã€‚ ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬çš„ç¨‹åºè·‘èµ·æ¥æ—¶ï¼ˆCPUæ‰§è¡Œæœºå™¨æŒ‡ä»¤ï¼‰ï¼Œå…¶é€Ÿåº¦æ˜¯è¦è¿œè¿œå¿«äºI/Oé€Ÿåº¦çš„ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯äºŒè€…é€Ÿåº¦ç›¸å·®è¿™ä¹ˆå¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è®¾è®¡ã€è¯¥å¦‚ä½•æ›´åŠ åˆç†çš„é«˜æ•ˆåˆ©ç”¨ç³»ç»Ÿèµ„æºå‘¢ï¼Ÿ æ—¢ç„¶æœ‰é€Ÿåº¦å·®å¼‚ï¼Œè€Œä¸”è¿›ç¨‹åœ¨æ‰§è¡Œå®ŒI/Oæ“ä½œå‰ä¸èƒ½ç»§ç»­å‘å‰æ¨è¿›ï¼Œé‚£ä¹ˆæ˜¾ç„¶åªæœ‰ä¸€ä¸ªåŠæ³•ï¼Œé‚£å°±æ˜¯ç­‰å¾…ï¼ˆwaitï¼‰ã€‚ åŒæ ·æ˜¯ç­‰å¾…ï¼Œæœ‰èªæ˜çš„ç­‰å¾…ï¼Œä¹Ÿæœ‰å‚»å‚»çš„ç­‰å¾…ï¼Œç®€ç§°å‚»ç­‰ï¼Œé‚£ä¹ˆæ˜¯é€‰æ‹©èªæ˜çš„ç­‰å¾…å‘¢è¿˜æ˜¯é€‰æ‹©å‚»ç­‰å‘¢ï¼Ÿ å‡è®¾ä½ æ˜¯ä¸€ä¸ªæ€¥æ€§å­ï¼ˆCPUï¼‰ï¼Œéœ€è¦ç­‰å¾…ä¸€ä¸ªé‡è¦çš„æ–‡ä»¶ï¼Œä¸å·§çš„æ˜¯è¿™ä¸ªæ–‡ä»¶åªèƒ½å¿«é€’è¿‡æ¥ï¼ˆI/Oï¼‰ï¼Œé‚£ä¹ˆè¿™æ—¶ä½ æ˜¯é€‰æ‹©ä»€ä¹ˆäº‹æƒ…éƒ½ä¸å¹²äº†ï¼Œæ·±æƒ…çš„æ³¨è§†ç€é—¨å£å°±åƒç›¼æœ›ç€ä½ çš„å“ˆå°¼ä¸€æ ·ä¸“å¿ƒç­‰å¾…è¿™ä¸ªå¿«é€’å‘¢ï¼Ÿè¿˜æ˜¯æš‚æ—¶å…ˆä¸è¦ç®¡å¿«é€’äº†ï¼Œç©ä¸ªæ¸¸æˆçœ‹ä¸ªç”µå½±åˆ·ä¼šå„¿çŸ­è§†é¢‘ç­‰å¿«é€’æ¥äº†å†è¯´å‘¢ï¼Ÿ å¾ˆæ˜¾ç„¶ï¼Œæ›´å¥½çš„æ–¹æ³•å°±æ˜¯å…ˆå»å¹²å…¶å®ƒäº‹æƒ…ï¼Œå¿«é€’æ¥äº†å†è¯´ã€‚ **å› æ­¤ï¼š**è¿™é‡Œçš„å…³é”®ç‚¹å°±æ˜¯å¿«é€’æ²¡åˆ°å‰æ‰‹å¤´ä¸Šçš„äº‹æƒ…å¯ä»¥å…ˆæš‚åœï¼Œåˆ‡æ¢åˆ°å…¶å®ƒä»»åŠ¡ï¼Œç­‰å¿«é€’è¿‡æ¥äº†å†åˆ‡æ¢å›æ¥ã€‚ ç†è§£äº†è¿™ä¸€ç‚¹ä½ å°±èƒ½æ˜ç™½æ‰§è¡ŒI/Oæ“ä½œæ—¶åº•å±‚éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚ æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä»¥è¯»å–ç£ç›˜æ–‡ä»¶ä¸ºä¾‹æ¥è®²è§£è¿™ä¸€è¿‡ç¨‹ã€‚ 4ã€æ‰§è¡ŒI/Oæ—¶åº•å±‚éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ åœ¨æ”¯æŒçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå®é™…ä¸Šè¢«è°ƒåº¦çš„æ˜¯çº¿ç¨‹è€Œä¸æ˜¯è¿›ç¨‹ï¼Œä¸ºäº†æ›´åŠ æ¸…æ™°çš„ç†è§£I/Oè¿‡ç¨‹ï¼Œæˆ‘ä»¬æš‚æ—¶å‡è®¾æ“ä½œç³»ç»Ÿåªæœ‰è¿›ç¨‹è¿™æ ·çš„æ¦‚å¿µï¼Œå…ˆä¸å»è€ƒè™‘çº¿ç¨‹ï¼Œè¿™å¹¶ä¸ä¼šå½±å“æˆ‘ä»¬çš„è®¨è®ºã€‚ ç°åœ¨å†…å­˜ä¸­æœ‰ä¸¤ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹Aå’Œè¿›ç¨‹Bï¼Œå½“å‰è¿›ç¨‹Aæ­£åœ¨è¿è¡Œã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿›ç¨‹Aä¸­æœ‰ä¸€æ®µè¯»å–æ–‡ä»¶çš„ä»£ç ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆè¯­è¨€ä¸­é€šå¸¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æ¥è£…æ•°æ®çš„buffï¼Œç„¶åè°ƒç”¨readä¹‹ç±»çš„å‡½æ•°ã€‚ å°±åƒè¿™æ ·ï¼š read(buff); è¿™å°±æ˜¯ä¸€ç§å…¸å‹çš„I/Oæ“ä½œï¼Œå½“CPUæ‰§è¡Œåˆ°è¿™æ®µä»£ç çš„æ—¶å€™ä¼šå‘ç£ç›˜å‘é€è¯»å–è¯·æ±‚ã€‚ **æ³¨æ„ï¼š**ä¸CPUæ‰§è¡ŒæŒ‡ä»¤çš„é€Ÿåº¦ç›¸æ¯”ï¼ŒI/Oæ“ä½œæ“ä½œæ˜¯éå¸¸æ…¢çš„ï¼Œå› æ­¤æ“ä½œç³»ç»Ÿæ˜¯ä¸å¯èƒ½æŠŠå®è´µçš„CPUè®¡ç®—èµ„æºæµªè´¹åœ¨æ— è°“çš„ç­‰å¾…ä¸Šçš„ï¼Œè¿™æ—¶é‡ç‚¹æ¥äº†ï¼Œæ³¨æ„æ¥ä¸‹æ¥æ˜¯é‡ç‚¹å“¦ã€‚ ç”±äºå¤–éƒ¨è®¾å¤‡æ‰§è¡ŒI/Oæ“ä½œæ˜¯ç›¸å½“æ…¢çš„ï¼Œå› æ­¤åœ¨I/Oæ“ä½œå®Œæˆä¹‹å‰è¿›ç¨‹æ˜¯æ— æ³•ç»§ç»­å‘å‰æ¨è¿›çš„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é˜»å¡ï¼Œå³é€šå¸¸æ‰€è¯´çš„blockã€‚ æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°è¿›ç¨‹å‘I/Oè®¾å¤‡å‘èµ·è¯·æ±‚åå°±æš‚åœè¿›ç¨‹çš„è¿è¡Œï¼Œæ€ä¹ˆæš‚åœè¿è¡Œå‘¢ï¼Ÿ**å¾ˆç®€å•ï¼š**åªéœ€è¦è®°å½•ä¸‹å½“å‰è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€å¹¶æŠŠCPUçš„PCå¯„å­˜å™¨æŒ‡å‘å…¶å®ƒè¿›ç¨‹çš„æŒ‡ä»¤å°±å¯ä»¥äº†ã€‚ è¿›ç¨‹æœ‰æš‚åœå°±ä¼šæœ‰ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤æ“ä½œç³»ç»Ÿå¿…é¡»ä¿å­˜è¢«æš‚åœçš„è¿›ç¨‹ä»¥å¤‡åç»­ç»§ç»­æ‰§è¡Œï¼Œæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨é˜Ÿåˆ—æ¥ä¿å­˜è¢«æš‚åœæ‰§è¡Œçš„è¿›ç¨‹ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿›ç¨‹Aè¢«æš‚åœæ‰§è¡Œå¹¶è¢«æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­ï¼ˆ**æ³¨æ„ï¼š**ä¸åŒçš„æ“ä½œç³»ç»Ÿä¼šæœ‰ä¸åŒçš„å®ç°ï¼Œå¯èƒ½æ¯ä¸ªI/Oè®¾å¤‡éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„é˜»å¡é˜Ÿåˆ—ï¼Œä½†è¿™ç§å®ç°ç»†èŠ‚ä¸Šçš„å·®å¼‚ä¸å½±å“æˆ‘ä»¬çš„è®¨è®ºï¼‰ã€‚ è¿™æ—¶æ“ä½œç³»ç»Ÿå·²ç»å‘ç£ç›˜å‘é€äº†I/Oè¯·æ±‚ï¼Œå› æ­¤ç£ç›˜driverå¼€å§‹å°†ç£ç›˜ä¸­çš„æ•°æ®copyåˆ°è¿›ç¨‹Açš„buffä¸­ã€‚è™½ç„¶è¿™æ—¶è¿›ç¨‹Aå·²ç»è¢«æš‚åœæ‰§è¡Œäº†ï¼Œä½†è¿™å¹¶ä¸å¦¨ç¢ç£ç›˜å‘å†…å­˜ä¸­copyæ•°æ®ã€‚ **æ³¨æ„ï¼š**ç°ä»£ç£ç›˜å‘å†…å­˜copyæ•°æ®æ—¶æ— éœ€å€ŸåŠ©CPUçš„å¸®åŠ©ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„DMAï¼ˆDirect Memory Accessï¼‰ã€‚ è¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è®©ç£ç›˜å…ˆcopyç€æ•°æ®ï¼Œæˆ‘ä»¬æ¥ç€èŠã€‚ **å®é™…ä¸Šï¼š**æ“ä½œç³»ç»Ÿä¸­é™¤äº†æœ‰é˜»å¡é˜Ÿåˆ—ä¹‹å¤–ä¹Ÿæœ‰å°±ç»ªé˜Ÿåˆ—ï¼Œæ‰€è°“å°±ç»ªé˜Ÿåˆ—æ˜¯æŒ‡é˜Ÿåˆ—é‡Œçš„è¿›ç¨‹å‡†å¤‡å°±ç»ªå¯ä»¥è¢«CPUæ‰§è¡Œäº†ã€‚ ä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰§è¡Œéè¦æœ‰ä¸ªå°±ç»ªé˜Ÿåˆ—å‘¢ï¼Ÿ**ç­”æ¡ˆå¾ˆç®€å•ï¼š**é‚£å°±æ˜¯åƒ§å¤šç²¥å°‘ï¼Œåœ¨å³ä½¿åªæœ‰1ä¸ªæ ¸çš„æœºå™¨ä¸Šä¹Ÿå¯ä»¥åˆ›å»ºå‡ºæˆåƒä¸Šä¸‡ä¸ªè¿›ç¨‹ï¼ŒCPUä¸å¯èƒ½åŒæ—¶æ‰§è¡Œè¿™ä¹ˆå¤šçš„è¿›ç¨‹ï¼Œå› æ­¤å¿…ç„¶å­˜åœ¨è¿™æ ·çš„è¿›ç¨‹ï¼Œå³ä½¿å…¶ä¸€åˆ‡å‡†å¤‡å°±ç»ªä¹Ÿä¸èƒ½è¢«åˆ†é…åˆ°è®¡ç®—èµ„æºï¼Œè¿™æ ·çš„è¿›ç¨‹å°±è¢«æ”¾åˆ°äº†å°±ç»ªé˜Ÿåˆ—ã€‚ ç°åœ¨è¿›ç¨‹Bå°±ä½äºå°±ç»ªé˜Ÿåˆ—ï¼Œä¸‡äº‹ä¿±å¤‡åªæ¬ CPUã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½“è¿›ç¨‹Aè¢«æš‚åœæ‰§è¡ŒåCPUæ˜¯ä¸å¯ä»¥é—²ä¸‹æ¥çš„ï¼Œå› ä¸ºå°±ç»ªé˜Ÿåˆ—ä¸­è¿˜æœ‰å—·å—·å¾…å“ºçš„è¿›ç¨‹Bï¼Œè¿™æ—¶æ“ä½œç³»ç»Ÿå¼€å§‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­æ‰¾ä¸‹ä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„è¿›ç¨‹Bã€‚ æ­¤æ—¶æ“ä½œç³»ç»Ÿå°†è¿›ç¨‹Bä»å°±ç»ªé˜Ÿåˆ—ä¸­å–å‡ºï¼Œæ‰¾å‡ºè¿›ç¨‹Bè¢«æš‚åœæ—¶æ‰§è¡Œåˆ°çš„æœºå™¨æŒ‡ä»¤çš„ä½ç½®ï¼Œç„¶åå°†CPUçš„PCå¯„å­˜å™¨æŒ‡å‘è¯¥ä½ç½®ï¼Œè¿™æ ·è¿›ç¨‹Bå°±å¼€å§‹è¿è¡Œå•¦ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š **æ³¨æ„ï¼š**æ¥ä¸‹æ¥çš„è¿™æ®µæ˜¯é‡ç‚¹ä¸­çš„é‡ç‚¹ï¼ **æ³¨æ„è§‚å¯Ÿä¸Šå›¾ï¼š**æ­¤æ—¶è¿›ç¨‹Båœ¨è¢«CPUæ‰§è¡Œï¼Œç£ç›˜åœ¨å‘è¿›ç¨‹Açš„å†…å­˜ç©ºé—´ä¸­copyæ•°æ®ï¼Œçœ‹å‡ºæ¥äº†å—â€”â€”å¤§å®¶éƒ½åœ¨å¿™ï¼Œè°éƒ½æ²¡æœ‰é—²ç€ï¼Œæ•°æ®copyå’ŒæŒ‡ä»¤æ‰§è¡Œåœ¨åŒæ—¶è¿›è¡Œï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸‹ï¼ŒCPUã€ç£ç›˜éƒ½å¾—åˆ°äº†å……åˆ†çš„åˆ©ç”¨ï¼Œè¿™å°±æ˜¯ç¨‹åºå‘˜çš„æ™ºæ…§æ‰€åœ¨ã€‚ ç°åœ¨ä½ åº”è¯¥ç†è§£ä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿè¿™ä¹ˆé‡è¦äº†å§ã€‚ æ­¤åç£ç›˜ç»ˆäºå°†å…¨éƒ¨æ•°æ®éƒ½copyåˆ°äº†è¿›ç¨‹Açš„å†…å­˜ä¸­ï¼Œè¿™æ—¶ç£ç›˜é€šçŸ¥æ“ä½œç³»ç»Ÿä»»åŠ¡å®Œæˆå•¦ï¼Œä½ å¯èƒ½ä¼šé—®æ€ä¹ˆé€šçŸ¥å‘¢ï¼Ÿè¿™å°±æ˜¯ä¸­æ–­ã€‚ æ“ä½œç³»ç»Ÿæ¥æ”¶åˆ°ç£ç›˜ä¸­æ–­åå‘ç°æ•°æ®copyå®Œæ¯•ï¼Œè¿›ç¨‹Aé‡æ–°è·å¾—ç»§ç»­è¿è¡Œçš„èµ„æ ¼ï¼Œè¿™æ—¶æ“ä½œç³»ç»Ÿå°å¿ƒç¿¼ç¿¼çš„æŠŠè¿›ç¨‹Aä»é˜»å¡é˜Ÿåˆ—æ”¾åˆ°äº†å°±ç»ªé˜Ÿåˆ—å½“ä¸­ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š **æ³¨æ„ï¼š**ä»å‰é¢å…³äºå°±ç»ªçŠ¶æ€çš„è®¨è®ºä¸­æˆ‘ä»¬çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿæ˜¯ä¸ä¼šç›´æ¥è¿è¡Œè¿›ç¨‹Açš„ï¼Œè¿›ç¨‹Aå¿…é¡»è¢«æ”¾åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œè¿™æ ·å¯¹å¤§å®¶éƒ½å…¬å¹³ã€‚ æ­¤åè¿›ç¨‹Bç»§ç»­æ‰§è¡Œï¼Œè¿›ç¨‹Aç»§ç»­ç­‰å¾…ï¼Œè¿›ç¨‹Bæ‰§è¡Œäº†ä¸€ä¼šå„¿åæ“ä½œç³»ç»Ÿè®¤ä¸ºè¿›ç¨‹Bæ‰§è¡Œçš„æ—¶é—´å¤Ÿé•¿äº†ï¼Œå› æ­¤æŠŠè¿›ç¨‹Bæ”¾åˆ°å°±ç»ªé˜Ÿåˆ—ï¼ŒæŠŠè¿›ç¨‹Aå–å‡ºå¹¶ç»§ç»­æ‰§è¡Œã€‚ **æ³¨æ„ï¼š**æ“ä½œç³»ç»ŸæŠŠè¿›ç¨‹Bæ”¾åˆ°çš„æ˜¯å°±ç»ªé˜Ÿåˆ—ï¼Œå› æ­¤è¿›ç¨‹Bè¢«æš‚åœè¿è¡Œä»…ä»…æ˜¯å› ä¸ºæ—¶é—´ç‰‡åˆ°äº†è€Œä¸æ˜¯å› ä¸ºå‘èµ·I/Oè¯·æ±‚è¢«é˜»å¡ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿›ç¨‹Aç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶buffä¸­å·²ç»è£…æ»¡äº†æƒ³è¦çš„æ•°æ®ï¼Œè¿›ç¨‹Aå°±è¿™æ ·æ„‰å¿«çš„è¿è¡Œä¸‹å»äº†ï¼Œå°±å¥½åƒä»æ¥æ²¡æœ‰è¢«æš‚åœè¿‡ä¸€æ ·ï¼Œè¿›ç¨‹å¯¹äºè‡ªå·±è¢«æš‚åœä¸€äº‹ä¸€æ— æ‰€çŸ¥ï¼Œè¿™å°±æ˜¯æ“ä½œç³»ç»Ÿçš„é­”æ³•ã€‚ ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†I/Oæ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹äº†å§ã€‚ è¿™ç§è¿›ç¨‹æ‰§è¡ŒI/Oæ“ä½œè¢«é˜»å¡æš‚åœæ‰§è¡Œçš„æ–¹å¼è¢«ç§°ä¸ºé˜»å¡å¼I/Oï¼Œblocking I/Oï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸è§æœ€å®¹æ˜“ç†è§£çš„I/Oæ–¹å¼ï¼Œæœ‰é˜»å¡å¼I/Oå°±æœ‰éé˜»å¡å¼I/Oï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘è¿™ç§æ–¹å¼ã€‚ åœ¨æœ¬èŠ‚å¼€å¤´æˆ‘ä»¬è¯´è¿‡æš‚æ—¶åªè€ƒè™‘è¿›ç¨‹è€Œä¸è€ƒè™‘çº¿ç¨‹ï¼Œç°åœ¨æˆ‘ä»¬æ”¾å®½è¿™ä¸ªæ¡ä»¶ï¼Œå®é™…ä¸Šä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦æŠŠå‰å›¾ä¸­è°ƒåº¦çš„è¿›ç¨‹æ”¹ä¸ºçº¿ç¨‹å°±å¯ä»¥äº†ï¼Œè¿™é‡Œçš„è®¨è®ºå¯¹äºçº¿ç¨‹ä¸€æ ·æˆç«‹ã€‚ 5ã€é›¶æ‹·è´ï¼ˆZero-copyï¼‰ **æœ€åéœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ï¼š**ä¸Šé¢çš„è®²è§£ä¸­æˆ‘ä»¬ç›´æ¥æŠŠç£ç›˜æ•°æ®copyåˆ°äº†è¿›ç¨‹ç©ºé—´ä¸­ï¼Œä½†å®é™…ä¸Šä¸€èˆ¬æƒ…å†µä¸‹I/Oæ•°æ®æ˜¯è¦é¦–å…ˆcopyåˆ°æ“ä½œç³»ç»Ÿå†…éƒ¨ï¼Œç„¶åæ“ä½œç³»ç»Ÿå†copyåˆ°è¿›ç¨‹ç©ºé—´ä¸­ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œå…¶å®è¿˜æœ‰ä¸€å±‚ç»è¿‡æ“ä½œç³»ç»Ÿçš„copyï¼Œå¯¹äºæ€§èƒ½è¦æ±‚å¾ˆé«˜çš„åœºæ™¯å…¶å®ä¹Ÿæ˜¯å¯ä»¥ç»•è¿‡æ“ä½œç³»ç»Ÿç›´æ¥è¿›è¡Œæ•°æ®copyçš„ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡æè¿°çš„åœºæ™¯ï¼Œè¿™ç§ç»•è¿‡æ“ä½œç³»ç»Ÿç›´æ¥è¿›è¡Œæ•°æ®copyçš„æŠ€æœ¯è¢«ç§°ä¸ºZero-copyï¼Œä¹Ÿå°±é›¶æ‹·è´ï¼Œé«˜å¹¶å‘ã€é«˜æ€§èƒ½åœºæ™¯ä¸‹å¸¸ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼ŒåŸç†ä¸Šå¾ˆç®€å•å§ã€‚ 6ã€æœ¬æ–‡å°ç»“ æœ¬æ–‡è®²è§£çš„æ˜¯ç¨‹åºå‘˜å¸¸ç”¨çš„I/Oï¼ˆåŒ…æ‹¬æ‰€è°“çš„ç½‘ç»œI/Oï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ä½œä¸ºç¨‹åºå‘˜æˆ‘ä»¬æ— éœ€å…³å¿ƒï¼Œä½†æ˜¯ç†è§£I/OèƒŒåçš„åº•å±‚åŸç†å¯¹äºè®¾è®¡æ¯”å¦‚IMè¿™ç§é«˜æ€§èƒ½ã€é«˜å¹¶å‘ç³»ç»Ÿæ˜¯æä¸ºæœ‰ç›Šçš„ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-er-shen-ru-cao-zuo-xi-tong-li-jie-io-yu-ling-kao-bei-ji-zhu/"},{"title":"ç†è§£é«˜æ€§èƒ½ã€é«˜å¹¶å‘(ä¸€)ï¼šæ·±å…¥è®¡ç®—æœºåº•å±‚ï¼Œç†è§£çº¿ç¨‹ä¸çº¿ç¨‹æ± ","content":"1ã€ä¸€åˆ‡è¦ä»CPUè¯´èµ· ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œè®²å¤šçº¿ç¨‹ä¸ºä»€ä¹ˆè¦ä»CPUè¯´èµ·å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œåœ¨è¿™é‡Œæ²¡æœ‰é‚£äº›æ—¶é«¦çš„æ¦‚å¿µï¼Œä½ å¯ä»¥æ›´åŠ æ¸…æ™°çš„çœ‹æ¸…é—®é¢˜çš„æœ¬è´¨ã€‚ å®é™…æƒ…å†µæ˜¯ï¼šCPUå¹¶ä¸çŸ¥é“çº¿ç¨‹ã€è¿›ç¨‹ä¹‹ç±»çš„æ¦‚å¿µã€‚ CPUåªçŸ¥é“ä¸¤ä»¶äº‹ï¼š 1ï¼‰ä»å†…å­˜ä¸­å–å‡ºæŒ‡ä»¤ï¼› 2ï¼‰æ‰§è¡ŒæŒ‡ä»¤ï¼Œç„¶åå›åˆ° 1ï¼‰ã€‚ ä½ çœ‹ï¼Œåœ¨è¿™é‡ŒCPUç¡®å®æ˜¯ä¸çŸ¥é“ä»€ä¹ˆè¿›ç¨‹ã€çº¿ç¨‹ä¹‹ç±»çš„æ¦‚å¿µã€‚ æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯CPUä»å“ªé‡Œå–å‡ºæŒ‡ä»¤å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ¥è‡ªä¸€ä¸ªè¢«ç§°ä¸ºProgram Counterï¼ˆç®€ç§°PCï¼‰çš„å¯„å­˜å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ç¨‹åºè®¡æ•°å™¨ï¼Œåœ¨è¿™é‡Œå¤§å®¶ä¸è¦æŠŠå¯„å­˜å™¨æƒ³çš„å¤ªç¥ç§˜ï¼Œä½ å¯ä»¥ç®€å•çš„æŠŠå¯„å­˜å™¨ç†è§£ä¸ºå†…å­˜ï¼Œåªä¸è¿‡å­˜å–é€Ÿåº¦æ›´å¿«è€Œå·²ã€‚ PCå¯„å­˜å™¨ä¸­å­˜æ”¾çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œå­˜æ”¾çš„æ˜¯æŒ‡ä»¤åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œä»€ä¹ˆæŒ‡ä»¤å‘¢ï¼Ÿæ˜¯CPUå°†è¦æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚ â€‹ é‚£ä¹ˆæ˜¯è°æ¥è®¾ç½®PCå¯„å­˜å™¨ä¸­çš„æŒ‡ä»¤åœ°å€å‘¢ï¼Ÿ åŸæ¥PCå¯„å­˜å™¨ä¸­çš„åœ°å€é»˜è®¤æ˜¯è‡ªåŠ¨åŠ 1çš„ï¼Œè¿™å½“ç„¶æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸‹CPUéƒ½æ˜¯ä¸€æ¡æ¥ä¸€æ¡é¡ºåºæ‰§è¡Œï¼Œå½“é‡åˆ°ifã€elseæ—¶ï¼Œè¿™ç§é¡ºåºæ‰§è¡Œå°±è¢«æ‰“ç ´äº†ï¼ŒCPUåœ¨æ‰§è¡Œè¿™ç±»æŒ‡ä»¤æ—¶ä¼šæ ¹æ®è®¡ç®—ç»“æœæ¥åŠ¨æ€æ”¹å˜PCå¯„å­˜å™¨ä¸­çš„å€¼ï¼Œè¿™æ ·CPUå°±å¯ä»¥æ­£ç¡®çš„è·³è½¬åˆ°éœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤äº†ã€‚ èªæ˜çš„ä½ ä¸€å®šä¼šé—®ï¼Œé‚£ä¹ˆPCä¸­çš„åˆå§‹å€¼æ˜¯æ€ä¹ˆè¢«è®¾ç½®çš„å‘¢ï¼Ÿ åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬éœ€è¦çŸ¥é“CPUæ‰§è¡Œçš„æŒ‡ä»¤æ¥è‡ªå“ªé‡Œï¼Ÿæ˜¯æ¥è‡ªå†…å­˜ï¼ŒåºŸè¯ï¼Œå†…å­˜ä¸­çš„æŒ‡ä»¤æ˜¯ä»ç£ç›˜ä¸­ä¿å­˜çš„å¯æ‰§è¡Œç¨‹åºåŠ è½½è¿‡æ¥çš„ï¼Œç£ç›˜ä¸­å¯æ‰§è¡Œç¨‹åºæ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„ï¼Œç¼–è¯‘å™¨åˆæ˜¯ä»å“ªé‡Œç”Ÿæˆçš„æœºå™¨æŒ‡ä»¤å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„å‡½æ•°ã€‚ â€‹ æ³¨æ„æ˜¯å‡½æ•°ï¼Œå‡½æ•°è¢«ç¼–è¯‘åæ‰ä¼šå½¢æˆCPUæ‰§è¡Œçš„æŒ‡ä»¤ï¼Œé‚£ä¹ˆå¾ˆè‡ªç„¶çš„ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è®©CPUæ‰§è¡Œä¸€ä¸ªå‡½æ•°å‘¢ï¼Ÿæ˜¾ç„¶æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°å‡½æ•°è¢«ç¼–è¯‘åå½¢æˆçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å°±å¯ä»¥äº†ï¼Œç¬¬ä¸€æ¡æŒ‡ä»¤å°±æ˜¯å‡½æ•°å…¥å£ã€‚ ç°åœ¨ä½ åº”è¯¥çŸ¥é“äº†å§ï¼Œæˆ‘ä»¬æƒ³è¦CPUæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆåªéœ€è¦æŠŠè¯¥å‡½æ•°å¯¹åº”çš„ç¬¬ä¸€æ¡æœºå™¨æŒ‡ä»¤çš„åœ°å€å†™å…¥PCå¯„å­˜å™¨å°±å¯ä»¥äº†ï¼Œè¿™æ ·æˆ‘ä»¬å†™çš„å‡½æ•°å°±å¼€å§‹è¢«CPUæ‰§è¡Œèµ·æ¥å•¦ã€‚ ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œè¿™å’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ 2ã€ä»CPUåˆ°æ“ä½œç³»ç»Ÿ ä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬æ˜ç™½äº†CPUçš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬æƒ³è®©CPUæ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆåªéœ€è¦æŠŠå‡½æ•°å¯¹åº”çš„ç¬¬ä¸€æ¡æœºå™¨æ‰§è¡Œè£…å…¥PCå¯„å­˜å™¨å°±å¯ä»¥äº†ï¼Œè¿™æ ·å³ä½¿æ²¡æœ‰æ“ä½œç³»ç»Ÿæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©CPUæ‰§è¡Œç¨‹åºï¼Œè™½ç„¶å¯è¡Œä½†è¿™æ˜¯ä¸€ä¸ªéå¸¸ç¹ççš„è¿‡ç¨‹ã€‚ æˆ‘ä»¬éœ€è¦ï¼š 1ï¼‰åœ¨å†…å­˜ä¸­æ‰¾åˆ°ä¸€å—å¤§å°åˆé€‚çš„åŒºåŸŸè£…å…¥ç¨‹åºï¼› 2ï¼‰æ‰¾åˆ°å‡½æ•°å…¥å£ï¼Œè®¾ç½®å¥½PCå¯„å­˜å™¨è®©CPUå¼€å§‹æ‰§è¡Œç¨‹åºã€‚ è¿™ä¸¤ä¸ªæ­¥éª¤ç»ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œå¦‚æœæ¯æ¬¡åœ¨æ‰§è¡Œç¨‹åºæ—¶ç¨‹åºå‘˜è‡ªå·±æ‰‹åŠ¨å®ç°ä¸Šè¿°ä¸¤ä¸ªè¿‡ç¨‹ä¼šç–¯æ‰çš„ï¼Œå› æ­¤èªæ˜çš„ç¨‹åºå‘˜å°±ä¼šæƒ³å¹²è„†ç›´æ¥å†™ä¸ªç¨‹åºæ¥è‡ªåŠ¨å®Œæˆä¸Šé¢ä¸¤ä¸ªæ­¥éª¤å§ã€‚ æœºå™¨æŒ‡ä»¤éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­æ‰§è¡Œï¼Œå› æ­¤éœ€è¦è®°å½•ä¸‹å†…å­˜çš„èµ·å§‹åœ°å€å’Œé•¿åº¦ï¼›åŒæ—¶è¦æ‰¾åˆ°å‡½æ•°çš„å…¥å£åœ°å€å¹¶å†™åˆ°PCå¯„å­˜å™¨ä¸­ï¼Œæƒ³ä¸€æƒ³è¿™æ˜¯ä¸æ˜¯éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ¥è®°å½•ä¸‹è¿™äº›ä¿¡æ¯ã€‚ æ•°æ®ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š struct *** { void* start_addr; intlen; void* start_point; ... }; æ¥ä¸‹æ¥å°±æ˜¯èµ·åå­—æ—¶åˆ»ã€‚ è¿™ä¸ªæ•°æ®ç»“æ„æ€»è¦æœ‰ä¸ªåå­—å§ï¼Œè¿™ä¸ªç»“æ„ä½“ç”¨æ¥è®°å½•ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿè®°å½•çš„æ˜¯ç¨‹åºåœ¨è¢«åŠ è½½åˆ°å†…å­˜ä¸­çš„è¿è¡ŒçŠ¶æ€ï¼Œç¨‹åºä»ç£ç›˜åŠ è½½åˆ°å†…å­˜è·‘èµ·æ¥å«ä»€ä¹ˆå¥½å‘¢ï¼Ÿå¹²è„†å°±å«è¿›ç¨‹ï¼ˆProcessï¼‰å¥½äº†ï¼Œæˆ‘ä»¬çš„æŒ‡å¯¼åŸåˆ™å°±æ˜¯ä¸€å®šè¦å¬ä¸Šå»æ¯”è¾ƒç¥ç§˜ï¼Œæ€»ä¹‹å¤§å®¶éƒ½ä¸å®¹æ˜“å¼„æ‡‚å°±å¯¹äº†ï¼Œæˆ‘å°†å…¶ç§°ä¸ºâ€œå¼„ä¸æ‡‚åŸåˆ™â€ã€‚ å°±è¿™æ ·è¿›ç¨‹è¯ç”Ÿäº†ã€‚ CPUæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‡½æ•°ä¹Ÿèµ·ä¸ªåå­—ï¼Œç¬¬ä¸€ä¸ªè¦è¢«æ‰§è¡Œçš„å‡½æ•°å¬èµ·æ¥æ¯”è¾ƒé‡è¦ï¼Œå¹²è„†å°±å«mainå‡½æ•°å§ã€‚ å®Œæˆä¸Šè¿°ä¸¤ä¸ªæ­¥éª¤çš„ç¨‹åºä¹Ÿè¦èµ·ä¸ªåå­—ï¼Œæ ¹æ®â€œå¼„ä¸æ‡‚åŸåˆ™â€è¿™ä¸ªâ€œç®€å•â€çš„ç¨‹åºå°±å«æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼‰å¥½å•¦ã€‚ å°±è¿™æ ·æ“ä½œç³»ç»Ÿè¯ç”Ÿäº†ï¼Œç¨‹åºå‘˜è¦æƒ³è¿è¡Œç¨‹åºå†ä¹Ÿä¸ç”¨è‡ªå·±æ‰‹åŠ¨åŠ è½½ä¸€éäº†ã€‚ ç°åœ¨è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿéƒ½æœ‰äº†ï¼Œä¸€åˆ‡çœ‹ä¸Šå»éƒ½å¾ˆå®Œç¾ã€‚ 3ã€ä»å•æ ¸åˆ°å¤šæ ¸ï¼Œå¦‚ä½•å……åˆ†åˆ©ç”¨å¤šæ ¸ äººç±»çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯ç”Ÿå‘½ä¸æ¯æŠ˜è…¾ä¸æ­¢ï¼Œä»å•æ ¸æŠ˜è…¾åˆ°äº†å¤šæ ¸ã€‚ â€‹ è¿™æ—¶ï¼Œå‡è®¾æˆ‘ä»¬æƒ³å†™ä¸€ä¸ªç¨‹åºå¹¶ä¸”è¦åˆ†åˆ©ç”¨å¤šæ ¸è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ æœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´ä¸æ˜¯æœ‰è¿›ç¨‹å—ï¼Œå¤šå¼€å‡ ä¸ªè¿›ç¨‹ä¸å°±å¯ä»¥äº†ï¼Ÿ å¬ä¸Šå»ä¼¼ä¹å¾ˆæœ‰é“ç†ï¼Œä½†æ˜¯ä¸»è¦å­˜åœ¨è¿™æ ·å‡ ä¸ªé—®é¢˜ï¼š 1ï¼‰è¿›ç¨‹æ˜¯éœ€è¦å ç”¨å†…å­˜ç©ºé—´çš„(ä»ä¸Šä¸€èŠ‚èƒ½çœ‹åˆ°è¿™ä¸€ç‚¹)ï¼Œå¦‚æœå¤šä¸ªè¿›ç¨‹åŸºäºåŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œé‚£ä¹ˆè¿™äº›è¿›ç¨‹å…¶å†…å­˜åŒºåŸŸä¸­çš„å†…å®¹å‡ ä¹å®Œå…¨ç›¸åŒï¼Œè¿™æ˜¾ç„¶ä¼šé€ æˆå†…å­˜çš„æµªè´¹ï¼› 2ï¼‰è®¡ç®—æœºå¤„ç†çš„ä»»åŠ¡å¯èƒ½æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†è¿›ç¨‹é—´é€šä¿¡ï¼Œç”±äºå„ä¸ªè¿›ç¨‹å¤„äºä¸åŒçš„å†…å­˜åœ°å€ç©ºé—´ï¼Œè¿›ç¨‹é—´é€šä¿¡å¤©ç„¶éœ€è¦å€ŸåŠ©æ“ä½œç³»ç»Ÿï¼Œè¿™å°±åœ¨å¢å¤§ç¼–ç¨‹éš¾åº¦çš„åŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå¼€é”€ã€‚ è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ 4ã€ä»è¿›ç¨‹åˆ°çº¿ç¨‹ è®©æˆ‘å†æ¥ä»”ç»†çš„æƒ³ä¸€æƒ³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€è°“è¿›ç¨‹æ— éå°±æ˜¯å†…å­˜ä¸­çš„ä¸€æ®µåŒºåŸŸï¼Œè¿™æ®µåŒºåŸŸä¸­ä¿å­˜äº†CPUæ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ä»¥åŠå‡½æ•°è¿è¡Œæ—¶çš„å †æ ˆä¿¡æ¯ï¼Œè¦æƒ³è®©è¿›ç¨‹è¿è¡Œï¼Œå°±æŠŠmainå‡½æ•°çš„ç¬¬ä¸€æ¡æœºå™¨æŒ‡ä»¤åœ°å€å†™å…¥PCå¯„å­˜å™¨ï¼Œè¿™æ ·è¿›ç¨‹å°±è¿è¡Œèµ·æ¥äº†ã€‚ â€‹ è¿›ç¨‹çš„ç¼ºç‚¹åœ¨äºåªæœ‰ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯mainå‡½æ•°ï¼Œå› æ­¤è¿›ç¨‹ä¸­çš„æœºå™¨æŒ‡ä»¤åªèƒ½è¢«ä¸€ä¸ªCPUæ‰§è¡Œï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•è®©å¤šä¸ªCPUæ¥æ‰§è¡ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„æœºå™¨æŒ‡ä»¤å‘¢ï¼Ÿ èªæ˜çš„ä½ åº”è¯¥èƒ½æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘ä»¬å¯ä»¥æŠŠmainå‡½æ•°çš„ç¬¬ä¸€æ¡æŒ‡ä»¤åœ°å€å†™å…¥PCå¯„å­˜å™¨ï¼Œé‚£ä¹ˆå…¶å®ƒå‡½æ•°å’Œmainå‡½æ•°åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œmainå‡½æ•°çš„ç‰¹æ®Šä¹‹å¤„æ— éå°±åœ¨äºæ˜¯CPUæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œé™¤æ­¤ä¹‹å¤–å†æ— ç‰¹åˆ«ä¹‹å¤„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠPCå¯„å­˜å™¨æŒ‡å‘mainå‡½æ•°ï¼Œå°±å¯ä»¥æŠŠPCå¯„å­˜å™¨æŒ‡å‘ä»»ä½•ä¸€ä¸ªå‡½æ•°ã€‚ å½“æˆ‘ä»¬æŠŠPCå¯„å­˜å™¨æŒ‡å‘émainå‡½æ•°æ—¶ï¼Œçº¿ç¨‹å°±è¯ç”Ÿäº†ã€‚ â€‹ è‡³æ­¤æˆ‘ä»¬è§£æ”¾äº†æ€æƒ³ï¼Œä¸€ä¸ªè¿›ç¨‹å†…å¯ä»¥æœ‰å¤šä¸ªå…¥å£å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´å±äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„æœºå™¨æŒ‡ä»¤å¯ä»¥è¢«å¤šä¸ªCPUåŒæ—¶æ‰§è¡Œã€‚ **æ³¨æ„ï¼š**è¿™æ˜¯ä¸€ä¸ªå’Œè¿›ç¨‹ä¸åŒçš„æ¦‚å¿µï¼Œåˆ›å»ºè¿›ç¨‹æ—¶æˆ‘ä»¬éœ€è¦åœ¨å†…å­˜ä¸­æ‰¾åˆ°ä¸€å—åˆé€‚çš„åŒºåŸŸä»¥è£…å…¥è¿›ç¨‹ï¼Œç„¶åæŠŠCPUçš„PCå¯„å­˜å™¨æŒ‡å‘mainå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµã€‚ â€‹ ä½†æ˜¯ç°åœ¨ä¸ä¸€æ ·äº†ï¼Œå¤šä¸ªCPUå¯ä»¥åœ¨åŒä¸€ä¸ªå±‹æªä¸‹(è¿›ç¨‹å ç”¨çš„å†…å­˜åŒºåŸŸ)åŒæ—¶æ‰§è¡Œå±äºè¯¥è¿›ç¨‹çš„å¤šä¸ªå…¥å£å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ç°åœ¨ä¸€ä¸ªè¿›ç¨‹å†…å¯ä»¥æœ‰å¤šä¸ªæ‰§è¡Œæµäº†ã€‚ â€‹ æ€»æ˜¯å«æ‰§è¡Œæµå¥½åƒæœ‰ç‚¹å¤ªå®¹æ˜“ç†è§£äº†ï¼Œå†æ¬¡ç¥­å‡ºâ€å¼„ä¸æ‡‚åŸåˆ™â€œï¼Œèµ·ä¸ªä¸å®¹æ˜“æ‡‚çš„åå­—ï¼Œå°±å«çº¿ç¨‹å§ã€‚ è¿™å°±æ˜¯çº¿ç¨‹çš„ç”±æ¥ã€‚ æ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤äº†ä¸€å †ä¿¡æ¯ï¼Œç”¨æ¥è®°å½•è¿›ç¨‹æ‰€å¤„çš„å†…å­˜ç©ºé—´ç­‰ï¼Œè¿™å †ä¿¡æ¯è®°ä¸ºæ•°æ®é›†Aã€‚ åŒæ ·çš„ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿéœ€è¦ä¸ºçº¿ç¨‹ç»´æŠ¤ä¸€å †ä¿¡æ¯ï¼Œç”¨æ¥è®°å½•çº¿ç¨‹çš„å…¥å£å‡½æ•°æˆ–è€…æ ˆä¿¡æ¯ç­‰ï¼Œè¿™å †æ•°æ®è®°ä¸ºæ•°æ®é›†Bã€‚ æ˜¾ç„¶æ•°æ®é›†Bè¦æ¯”æ•°æ®Açš„é‡è¦å°‘ï¼ŒåŒæ—¶ä¸åƒè¿›ç¨‹ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶æ— éœ€å»å†…å­˜ä¸­æ‰¾ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œå› ä¸ºçº¿ç¨‹æ˜¯è¿è¡Œåœ¨æ‰€å¤„è¿›ç¨‹çš„åœ°å€ç©ºé—´çš„ï¼Œè¿™å—åœ°å€ç©ºé—´åœ¨ç¨‹åºå¯åŠ¨æ—¶å·²ç»åˆ›å»ºå®Œæ¯•ï¼ŒåŒæ—¶çº¿ç¨‹æ˜¯ç¨‹åºåœ¨è¿è¡ŒæœŸé—´åˆ›å»ºçš„ï¼ˆè¿›ç¨‹å¯åŠ¨åï¼‰ï¼Œå› æ­¤å½“çº¿ç¨‹å¼€å§‹è¿è¡Œçš„æ—¶å€™è¿™å—åœ°å€ç©ºé—´å°±å·²ç»å­˜åœ¨äº†ï¼Œçº¿ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå„ç§æ•™æä¸Šæçš„åˆ›å»ºçº¿ç¨‹è¦æ¯”åˆ›å»ºè¿›ç¨‹å¿«çš„åŸå› ï¼ˆå½“ç„¶è¿˜æœ‰å…¶å®ƒåŸå› ï¼‰ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº†çº¿ç¨‹è¿™ä¸ªæ¦‚å¿µåï¼Œæˆ‘ä»¬åªéœ€è¦è¿›ç¨‹å¼€å¯ååˆ›å»ºå¤šä¸ªçº¿ç¨‹å°±å¯ä»¥è®©æ‰€æœ‰CPUéƒ½å¿™èµ·æ¥ï¼Œè¿™å°±æ˜¯æ‰€è°“é«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„æ ¹æœ¬æ‰€åœ¨ã€‚ â€‹ å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ›å»ºå‡ºæ•°é‡åˆé€‚çš„çº¿ç¨‹å°±å¯ä»¥äº†ã€‚ å¦å¤–å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šç”±äºå„ä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜åœ°å€ç©ºé—´ï¼Œå› æ­¤çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ— éœ€å€ŸåŠ©æ“ä½œç³»ç»Ÿï¼Œè¿™ç»™ç¨‹åºå‘˜å¸¦æ¥æå¤§æ–¹ä¾¿çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†æ— å°½çš„éº»çƒ¦ï¼Œå¤šçº¿ç¨‹é‡åˆ°çš„å¤šæ•°é—®é¢˜éƒ½å‡ºè‡ªäºçº¿ç¨‹é—´é€šä¿¡ç®€ç›´å¤ªæ–¹ä¾¿äº†ä»¥è‡³äºéå¸¸å®¹æ˜“å‡ºé”™ã€‚å‡ºé”™çš„æ ¹æºåœ¨äºCPUæ‰§è¡ŒæŒ‡ä»¤æ—¶æ ¹æœ¬æ²¡æœ‰çº¿ç¨‹çš„æ¦‚å¿µï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹é¢ä¸´çš„äº’æ–¥ä¸åŒæ­¥é—®é¢˜éœ€è¦ç¨‹åºå‘˜è‡ªå·±è§£å†³ï¼Œå…³äºäº’æ–¥ä¸åŒæ­¥é—®é¢˜é™äºç¯‡å¹…å°±ä¸è¯¦ç»†å±•å¼€äº†ï¼Œå¤§éƒ¨åˆ†çš„æ“ä½œç³»ç»Ÿèµ„æ–™éƒ½æœ‰è¯¦ç»†è®²è§£ã€‚ æœ€åéœ€è¦æé†’çš„æ˜¯ï¼šè™½ç„¶å‰é¢å…³äºçº¿ç¨‹è®²è§£ä½¿ç”¨çš„å›¾ä¸­ç”¨äº†å¤šä¸ªCPUï¼Œä½†ä¸æ˜¯è¯´ä¸€å®šè¦æœ‰å¤šæ ¸æ‰èƒ½ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œåœ¨å•æ ¸çš„æƒ…å†µä¸‹ä¸€æ ·å¯ä»¥åˆ›å»ºå‡ºå¤šä¸ªçº¿ç¨‹ï¼ŒåŸå› åœ¨äºçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„å®ç°ï¼Œå’Œæœ‰å¤šå°‘ä¸ªæ ¸å¿ƒæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼ŒCPUåœ¨æ‰§è¡Œæœºå™¨æŒ‡ä»¤æ—¶ä¹Ÿæ„è¯†ä¸åˆ°æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤å±äºå“ªä¸ªçº¿ç¨‹ã€‚å³ä½¿åœ¨åªæœ‰ä¸€ä¸ªCPUçš„æƒ…å†µä¸‹ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿå¯ä»¥é€šè¿‡çº¿ç¨‹è°ƒåº¦è®©å„ä¸ªçº¿ç¨‹â€œåŒæ—¶â€å‘å‰æ¨è¿›ï¼Œæ–¹æ³•å°±æ˜¯å°†CPUçš„æ—¶é—´ç‰‡åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´æ¥å›åˆ†é…ï¼Œè¿™æ ·å¤šä¸ªçº¿ç¨‹çœ‹èµ·æ¥å°±æ˜¯â€œåŒæ—¶â€è¿è¡Œäº†ï¼Œä½†å®é™…ä¸Šä»»æ„æ—¶åˆ»è¿˜æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œã€‚ 5ã€çº¿ç¨‹ä¸å†…å­˜ åœ¨å‰é¢çš„è®¨è®ºä¸­æˆ‘ä»¬çŸ¥é“äº†çº¿ç¨‹å’ŒCPUçš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æŠŠCPUçš„PCå¯„å­˜å™¨æŒ‡å‘çº¿ç¨‹çš„å…¥å£å‡½æ•°ï¼Œè¿™æ ·çº¿ç¨‹å°±å¯ä»¥è¿è¡Œèµ·æ¥äº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åˆ›å»ºçº¿ç¨‹æ—¶å¿…é¡»æŒ‡å®šä¸€ä¸ªå…¥å£å‡½æ•°çš„åŸå› ã€‚ æ— è®ºä½¿ç”¨ä»»ä½•ç¼–ç¨‹è¯­è¨€ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¤§ä½“ç›¸åŒï¼š // è®¾ç½®çº¿ç¨‹å…¥å£å‡½æ•°DoSomething thread = CreateThread(DoSomething); // è®©çº¿ç¨‹è¿è¡Œèµ·æ¥ thread.Run(); é‚£ä¹ˆçº¿ç¨‹å’Œå†…å­˜åˆæœ‰ä»€ä¹ˆå…³è”å‘¢ï¼Ÿ æˆ‘ä»¬çŸ¥é“å‡½æ•°åœ¨è¢«æ‰§è¡Œçš„æ—¶äº§ç”Ÿçš„æ•°æ®åŒ…æ‹¬ï¼šå‡½æ•°å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯æ˜¯ä¿å­˜åœ¨æ ˆä¸­çš„ï¼Œçº¿ç¨‹è¿™ä¸ªæ¦‚å¿µè¿˜æ²¡æœ‰å‡ºç°æ—¶è¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµï¼Œå› æ­¤åªæœ‰ä¸€ä¸ªæ ˆï¼Œè¿™ä¸ªæ ˆçš„æ ˆåº•å°±æ˜¯è¿›ç¨‹çš„å…¥å£å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯mainå‡½æ•°ã€‚ å‡è®¾mainå‡½æ•°è°ƒç”¨äº†funAï¼ŒfuncAåˆè°ƒç”¨äº†funcBï¼Œå¦‚å›¾æ‰€ç¤ºï¼š â€‹ é‚£ä¹ˆæœ‰äº†çº¿ç¨‹ä»¥åäº†å‘¢ï¼Ÿ æœ‰äº†çº¿ç¨‹ä»¥åä¸€ä¸ªè¿›ç¨‹ä¸­å°±å­˜åœ¨å¤šä¸ªæ‰§è¡Œå…¥å£ï¼Œå³åŒæ—¶å­˜åœ¨å¤šä¸ªæ‰§è¡Œæµï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªæ‰§è¡Œæµçš„è¿›ç¨‹éœ€è¦ä¸€ä¸ªæ ˆæ¥ä¿å­˜è¿è¡Œæ—¶ä¿¡æ¯ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶æœ‰å¤šä¸ªæ‰§è¡Œæµæ—¶å°±éœ€è¦æœ‰å¤šä¸ªæ ˆæ¥ä¿å­˜å„ä¸ªæ‰§è¡Œæµçš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´æ“ä½œç³»ç»Ÿè¦ä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­åˆ†é…ä¸€ä¸ªæ ˆï¼Œå³æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬å±äºè‡ªå·±çš„æ ˆï¼Œèƒ½æ„è¯†åˆ°è¿™ä¸€ç‚¹æ˜¯æå…¶å…³é”®çš„ã€‚ â€‹ åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºçº¿ç¨‹æ˜¯è¦æ¶ˆè€—è¿›ç¨‹å†…å­˜ç©ºé—´çš„ï¼Œè¿™ä¸€ç‚¹ä¹Ÿå€¼å¾—æ³¨æ„ã€‚ 6ã€çº¿ç¨‹çš„ä½¿ç”¨ ç°åœ¨æœ‰äº†çº¿ç¨‹çš„æ¦‚å¿µï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ä½œä¸ºç¨‹åºå‘˜æˆ‘ä»¬è¯¥å¦‚ä½•ä½¿ç”¨çº¿ç¨‹å‘¢ï¼Ÿ ä»ç”Ÿå‘½å‘¨æœŸçš„è§’åº¦è®²ï¼Œçº¿ç¨‹è¦å¤„ç†çš„ä»»åŠ¡æœ‰ä¸¤ç±»ï¼šé•¿ä»»åŠ¡å’ŒçŸ­ä»»åŠ¡ã€‚ *1ï¼‰é•¿ä»»åŠ¡ï¼ˆlong-lived tasksï¼‰ï¼š* é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä»»åŠ¡å­˜æ´»çš„æ—¶é—´å¾ˆé•¿ï¼Œæ¯”å¦‚ä»¥æˆ‘ä»¬å¸¸ç”¨çš„wordä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨wordä¸­ç¼–è¾‘çš„æ–‡å­—éœ€è¦ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œå¾€ç£ç›˜ä¸Šå†™æ•°æ®å°±æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆè¿™æ—¶ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•å°±æ˜¯ä¸“é—¨åˆ›å»ºä¸€ä¸ªå†™ç£ç›˜çš„çº¿ç¨‹ï¼Œè¯¥å†™çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œwordè¿›ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œåªè¦æ‰“å¼€wordå°±è¦åˆ›å»ºå‡ºè¯¥å†™çº¿ç¨‹ï¼Œå½“ç”¨æˆ·å…³é—­wordæ—¶è¯¥çº¿ç¨‹æ‰ä¼šè¢«é”€æ¯ï¼Œè¿™å°±æ˜¯é•¿ä»»åŠ¡ã€‚ â€‹ è¿™ç§åœºæ™¯éå¸¸é€‚åˆåˆ›å»ºä¸“ç”¨çš„çº¿ç¨‹æ¥å¤„ç†æŸäº›ç‰¹å®šä»»åŠ¡ï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒç®€å•ã€‚ æœ‰é•¿ä»»åŠ¡ï¼Œç›¸åº”çš„å°±æœ‰çŸ­ä»»åŠ¡ã€‚ *2ï¼‰çŸ­ä»»åŠ¡ï¼ˆshort-lived tasksï¼‰ï¼š* è¿™ä¸ªæ¦‚å¿µä¹Ÿå¾ˆç®€å•ï¼Œé‚£å°±æ˜¯ä»»åŠ¡çš„å¤„ç†æ—¶é—´å¾ˆçŸ­ï¼Œæ¯”å¦‚ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ã€ä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢ç­‰ï¼Œè¿™ç§ä»»åŠ¡å¯ä»¥åœ¨çŸ­æ—¶é—´å†…å¿«é€Ÿå¤„ç†å®Œæˆã€‚å› æ­¤çŸ­ä»»åŠ¡å¤šè§äºå„ç§Serverï¼Œåƒweb serverã€database serverã€file serverã€mail serverç­‰ï¼Œè¿™ä¹Ÿæ˜¯äº’è”ç½‘è¡Œä¸šçš„åŒå­¦æœ€å¸¸è§çš„åœºæ™¯ï¼Œè¿™ç§åœºæ™¯æ˜¯æˆ‘ä»¬è¦é‡ç‚¹è®¨è®ºçš„ã€‚ **è¿™ç§åœºæ™¯æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š**ä¸€ä¸ªæ˜¯ä»»åŠ¡å¤„ç†æ‰€éœ€æ—¶é—´çŸ­ï¼›å¦ä¸€ä¸ªæ˜¯ä»»åŠ¡æ•°é‡å·¨å¤§ã€‚ å¦‚æœè®©ä½ æ¥å¤„ç†è¿™ç§ç±»å‹çš„ä»»åŠ¡è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™å¾ˆç®€å•å•Šï¼Œå½“serveræ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚åå°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œå¤„ç†å®Œæˆåé”€æ¯è¯¥çº¿ç¨‹å³å¯ï¼ŒSo easyã€‚ è¿™ç§æ–¹æ³•é€šå¸¸è¢«ç§°ä¸ºthread-per-requestï¼Œä¹Ÿå°±æ˜¯è¯´æ¥ä¸€ä¸ªè¯·æ±‚å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼š â€‹ å¦‚æœæ˜¯é•¿ä»»åŠ¡ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•å¯ä»¥å·¥ä½œçš„å¾ˆå¥½ï¼Œä½†æ˜¯å¯¹äºå¤§é‡çš„çŸ­ä»»åŠ¡è¿™ç§æ–¹æ³•è™½ç„¶å®ç°ç®€å•ä½†æ˜¯æœ‰ç¼ºç‚¹ã€‚ å…·ä½“æ˜¯ä»¥ä¸‹è¿™æ ·çš„ç¼ºç‚¹ï¼š 1ï¼‰ä»å‰å‡ èŠ‚æˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿä¸­çš„æ¦‚å¿µ(è¿™é‡Œä¸è®¨è®ºç”¨æˆ·æ€çº¿ç¨‹å®ç°ã€åç¨‹ä¹‹ç±»)ï¼Œå› æ­¤åˆ›å»ºçº¿ç¨‹å¤©ç„¶éœ€è¦å€ŸåŠ©æ“ä½œç³»ç»Ÿæ¥å®Œæˆï¼Œæ“ä½œç³»ç»Ÿåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ˜¯éœ€è¦æ¶ˆè€—æ—¶é—´çš„ï¼› 2ï¼‰æ¯ä¸ªçº¿ç¨‹éœ€è¦æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆï¼Œå› æ­¤å½“åˆ›å»ºå¤§é‡çº¿ç¨‹æ—¶ä¼šæ¶ˆè€—è¿‡å¤šçš„å†…å­˜ç­‰ç³»ç»Ÿèµ„æºã€‚ è¿™å°±å¥½æ¯”ä½ æ˜¯ä¸€ä¸ªå·¥å‚è€æ¿ï¼ˆæƒ³æƒ³éƒ½å¾ˆå¼€å¿ƒæœ‰æ²¡æœ‰ï¼‰ï¼Œæ‰‹é‡Œæœ‰å¾ˆå¤šè®¢å•ï¼Œæ¯æ¥ä¸€æ‰¹è®¢å•å°±è¦æ‹›ä¸€æ‰¹å·¥äººï¼Œç”Ÿäº§çš„äº§å“éå¸¸ç®€å•ï¼Œå·¥äººä»¬å¾ˆå¿«å°±èƒ½å¤„ç†å®Œï¼Œå¤„ç†å®Œè¿™æ‰¹è®¢å•åå°±æŠŠè¿™äº›åƒè¾›ä¸‡è‹¦æ‹›è¿‡æ¥çš„å·¥äººè¾é€€æ‰ï¼Œå½“æœ‰æ–°çš„è®¢å•æ—¶ä½ å†åƒè¾›ä¸‡è‹¦çš„æ‹›ä¸€éå·¥äººï¼Œå¹²æ´»å„¿5åˆ†é’Ÿæ‹›äºº10å°æ—¶ï¼Œå¦‚æœä½ ä¸æ˜¯åŠ±å¿—è¦è®©ä¼ä¸šå€’é—­çš„è¯å¤§æ¦‚æ˜¯ä¸ä¼šè¿™ä¹ˆåšåˆ°çš„ã€‚ å› æ­¤ä¸€ä¸ªæ›´å¥½çš„ç­–ç•¥å°±æ˜¯æ‹›ä¸€æ‰¹äººåå°±åœ°å…»ç€ï¼Œæœ‰è®¢å•æ—¶å¤„ç†è®¢å•ï¼Œæ²¡æœ‰è®¢å•æ—¶å¤§å®¶å¯ä»¥é—²å‘†ç€ã€‚ è¿™å°±æ˜¯çº¿ç¨‹æ± çš„ç”±æ¥ã€‚ 7ã€ä»å¤šçº¿ç¨‹åˆ°çº¿ç¨‹æ±  çº¿ç¨‹æ± çš„æ¦‚å¿µæ˜¯éå¸¸ç®€å•çš„ï¼Œæ— éå°±æ˜¯åˆ›å»ºä¸€æ‰¹çº¿ç¨‹ï¼Œä¹‹åå°±ä¸å†é‡Šæ”¾äº†ï¼Œæœ‰ä»»åŠ¡å°±æäº¤ç»™è¿™äº›çº¿ç¨‹å¤„ç†ï¼Œå› æ­¤æ— éœ€é¢‘ç¹çš„åˆ›å»ºã€é”€æ¯çº¿ç¨‹ï¼ŒåŒæ—¶ç”±äºçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¸ªæ•°é€šå¸¸æ˜¯å›ºå®šçš„ï¼Œä¹Ÿä¸ä¼šæ¶ˆè€—è¿‡å¤šçš„å†…å­˜ï¼Œå› æ­¤è¿™é‡Œçš„æ€æƒ³å°±æ˜¯å¤ç”¨ã€å¯æ§ã€‚ 8ã€çº¿ç¨‹æ± æ˜¯å¦‚ä½•å·¥ä½œçš„ å¯èƒ½æœ‰çš„åŒå­¦ä¼šé—®ï¼Œè¯¥æ€ä¹ˆç»™çº¿ç¨‹æ± æäº¤ä»»åŠ¡å‘¢ï¼Ÿè¿™äº›ä»»åŠ¡åˆæ˜¯æ€ä¹ˆç»™åˆ°çº¿ç¨‹æ± ä¸­çº¿ç¨‹å‘¢ï¼Ÿ å¾ˆæ˜¾ç„¶ï¼Œæ•°æ®ç»“æ„ä¸­çš„é˜Ÿåˆ—å¤©ç„¶é€‚åˆè¿™ç§åœºæ™¯ï¼Œæäº¤ä»»åŠ¡çš„å°±æ˜¯ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹ä»»åŠ¡çš„çº¿ç¨‹å°±æ˜¯æ¶ˆè´¹è€…ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯ç»å…¸çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ã€‚ â€‹ ç°åœ¨ä½ åº”è¯¥çŸ¥é“ä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿè¯¾ç¨‹è¦è®²ã€é¢è¯•è¦é—®è¿™ä¸ªé—®é¢˜äº†å§ï¼Œå› ä¸ºå¦‚æœä½ å¯¹ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ä¸ç†è§£çš„è¯ï¼Œæœ¬è´¨ä¸Šä½ æ˜¯æ— æ³•æ­£ç¡®çš„å†™å‡ºçº¿ç¨‹æ± çš„ã€‚ é™äºç¯‡å¹…åœ¨è¿™é‡Œä¸æ‰“ç®—è¯¦ç»†çš„è®²è§£ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå‚è€ƒæ“ä½œç³»ç»Ÿç›¸å…³èµ„æ–™å°±èƒ½è·å–ç­”æ¡ˆã€‚è¿™é‡Œæˆ‘æ‰“ç®—è®²ä¸€è®²ä¸€èˆ¬æäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚ ä¸€èˆ¬æ¥è¯´æäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡åŒ…å«ä¸¤éƒ¨åˆ†ï¼š éœ€è¦è¢«å¤„ç†çš„æ•°æ®ï¼› å¤„ç†æ•°æ®çš„å‡½æ•°ã€‚ ä¼ªç æè¿°ä¸€ä¸‹ï¼š struct task { void* data; // ä»»åŠ¡æ‰€æºå¸¦çš„æ•°æ® handler handle; // å¤„ç†æ•°æ®çš„æ–¹æ³• } ï¼ˆæ³¨æ„ï¼šä½ ä¹Ÿå¯ä»¥æŠŠä»£ç ä¸­çš„structç†è§£æˆclassï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡) çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¼šé˜»å¡åœ¨é˜Ÿåˆ—ä¸Šï¼Œå½“ç”Ÿäº§è€…å‘é˜Ÿåˆ—ä¸­å†™å…¥æ•°æ®åï¼Œçº¿ç¨‹æ± ä¸­çš„æŸä¸ªçº¿ç¨‹ä¼šè¢«å”¤é†’ï¼Œè¯¥çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸Šè¿°ç»“æ„ä½“(æˆ–è€…å¯¹è±¡)ï¼Œä»¥ç»“æ„ä½“(æˆ–è€…å¯¹è±¡)ä¸­çš„æ•°æ®ä¸ºå‚æ•°å¹¶è°ƒç”¨å¤„ç†å‡½æ•°ã€‚ ä¼ªç å¦‚ä¸‹ï¼š while(true) { struct task = GetFromQueue(); // ä»é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ® task-&gt;handle(task-&gt;data); // å¤„ç†æ•°æ® } ä»¥ä¸Šå°±æ˜¯çº¿ç¨‹æ± æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ ç†è§£è¿™äº›ä½ å°±èƒ½æ˜ç™½çº¿ç¨‹æ± æ˜¯å¦‚ä½•å·¥ä½œçš„äº†ã€‚ 9ã€çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡ ç°åœ¨çº¿ç¨‹æ± æœ‰äº†ï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ åœ¨æ¥ç€å¾€ä¸‹çœ‹å‰å…ˆè‡ªå·±æƒ³ä¸€æƒ³è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœä½ èƒ½çœ‹åˆ°è¿™é‡Œè¯´æ˜è¿˜æ²¡æœ‰ç¡ç€ã€‚ è¦çŸ¥é“çº¿ç¨‹æ± çš„çº¿ç¨‹è¿‡å°‘å°±ä¸èƒ½å……åˆ†åˆ©ç”¨CPUï¼Œçº¿ç¨‹åˆ›å»ºçš„è¿‡å¤šåè€Œä¼šé€ æˆç³»ç»Ÿæ€§èƒ½ä¸‹é™ï¼Œå†…å­˜å ç”¨è¿‡å¤šï¼Œçº¿ç¨‹åˆ‡æ¢é€ æˆçš„æ¶ˆè€—ç­‰ç­‰ã€‚å› æ­¤çº¿ç¨‹çš„æ•°é‡æ—¢ä¸èƒ½å¤ªå¤šä¹Ÿä¸èƒ½å¤ªå°‘ï¼Œé‚£åˆ°åº•è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦çŸ¥é“çº¿ç¨‹æ± å¤„ç†çš„ä»»åŠ¡æœ‰å“ªå‡ ç±»ï¼Œæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´ä½ ä¸æ˜¯è¯´æœ‰ä¸¤ç±»å—ï¼Ÿé•¿ä»»åŠ¡å’ŒçŸ­ä»»åŠ¡ï¼Œè¿™ä¸ªæ˜¯ä»ç”Ÿå‘½å‘¨æœŸçš„è§’åº¦æ¥çœ‹çš„ï¼Œé‚£ä¹ˆä»å¤„ç†ä»»åŠ¡æ‰€éœ€è¦çš„èµ„æºè§’åº¦çœ‹ä¹Ÿæœ‰ä¸¤ç§ç±»å‹ï¼Œè¿™å°±æ˜¯æ²¡äº‹å„¿æ‰¾æŠ½å‹ã€‚ã€‚ã€‚å•Šä¸ï¼Œæ˜¯CPUå¯†é›†å‹å’ŒI/Oå¯†é›†å‹ã€‚ *1ï¼‰CPUå¯†é›†å‹ï¼š* æ‰€è°“CPUå¯†é›†å‹å°±æ˜¯è¯´å¤„ç†ä»»åŠ¡ä¸éœ€è¦ä¾èµ–å¤–éƒ¨I/Oï¼Œæ¯”å¦‚ç§‘å­¦è®¡ç®—ã€çŸ©é˜µè¿ç®—ç­‰ç­‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹åªè¦çº¿ç¨‹çš„æ•°é‡å’Œæ ¸æ•°åŸºæœ¬ç›¸åŒå°±å¯ä»¥å……åˆ†åˆ©ç”¨CPUèµ„æºã€‚ â€‹ *2ï¼‰I/Oå¯†é›†å‹ï¼š* è¿™ä¸€ç±»ä»»åŠ¡å¯èƒ½è®¡ç®—éƒ¨åˆ†æ‰€å ç”¨æ—¶é—´ä¸å¤šï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½ç”¨åœ¨äº†æ¯”å¦‚ç£ç›˜I/Oã€ç½‘ç»œI/Oç­‰ã€‚ â€‹ è¿™ç§æƒ…å†µä¸‹å°±ç¨å¾®å¤æ‚ä¸€äº›äº†ï¼Œä½ éœ€è¦åˆ©ç”¨æ€§èƒ½æµ‹è¯•å·¥å…·è¯„ä¼°å‡ºç”¨åœ¨I/Oç­‰å¾…ä¸Šçš„æ—¶é—´ï¼Œè¿™é‡Œè®°ä¸ºWT(wait time)ï¼Œä»¥åŠCPUè®¡ç®—æ‰€éœ€è¦çš„æ—¶é—´ï¼Œè¿™é‡Œè®°ä¸ºCTï¼ˆcomputing timeï¼‰ï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ªNæ ¸çš„ç³»ç»Ÿï¼Œåˆé€‚çš„çº¿ç¨‹æ•°å¤§æ¦‚æ˜¯ N * (1 + WT/CT) ï¼Œå‡è®¾I/Oç­‰å¾…æ—¶é—´å’Œè®¡ç®—æ—¶é—´ç›¸åŒï¼Œé‚£ä¹ˆä½ å¤§æ¦‚éœ€è¦2Nä¸ªçº¿ç¨‹æ‰èƒ½å……åˆ†åˆ©ç”¨CPUèµ„æºï¼Œæ³¨æ„è¿™åªæ˜¯ä¸€ä¸ªç†è®ºå€¼ï¼Œå…·ä½“è®¾ç½®å¤šå°‘éœ€è¦æ ¹æ®çœŸå®çš„ä¸šåŠ¡åœºæ™¯è¿›è¡Œæµ‹è¯•ã€‚ å½“ç„¶å……åˆ†åˆ©ç”¨CPUä¸æ˜¯å”¯ä¸€éœ€è¦è€ƒè™‘çš„ç‚¹ï¼Œéšç€çº¿ç¨‹æ•°é‡çš„å¢å¤šï¼Œå†…å­˜å ç”¨ã€ç³»ç»Ÿè°ƒåº¦ã€æ‰“å¼€çš„æ–‡ä»¶æ•°é‡ã€æ‰“å¼€çš„sockeræ•°é‡ä»¥åŠæ‰“å¼€çš„æ•°æ®åº“é“¾æ¥ç­‰ç­‰æ˜¯éƒ½éœ€è¦è€ƒè™‘çš„ã€‚ å› æ­¤è¿™é‡Œæ²¡æœ‰ä¸‡èƒ½å…¬å¼ï¼Œè¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚ 10ã€çº¿ç¨‹æ± ä¸æ˜¯ä¸‡èƒ½çš„ çº¿ç¨‹æ± ä»…ä»…æ˜¯å¤šçº¿ç¨‹çš„ä¸€ç§ä½¿ç”¨å½¢å¼ï¼Œå› æ­¤å¤šçº¿ç¨‹é¢ä¸´çš„é—®é¢˜çº¿ç¨‹æ± åŒæ ·ä¸èƒ½é¿å…ï¼Œåƒæ­»é”é—®é¢˜ã€race conditioné—®é¢˜ç­‰ç­‰ï¼Œå…³äºè¿™ä¸€éƒ¨åˆ†åŒæ ·å¯ä»¥å‚è€ƒæ“ä½œç³»ç»Ÿç›¸å…³èµ„æ–™å°±èƒ½å¾—åˆ°ç­”æ¡ˆã€‚ 11ã€çº¿ç¨‹æ± ä½¿ç”¨çš„æœ€ä½³å®è·µ çº¿ç¨‹æ± æ˜¯ç¨‹åºå‘˜æ‰‹ä¸­å¼ºå¤§çš„æ­¦å™¨ï¼Œäº’è”ç½‘å…¬å¸çš„å„ä¸ªserverä¸Šå‡ ä¹éƒ½èƒ½è§åˆ°çº¿ç¨‹æ± çš„èº«å½±ã€‚ ä½†ä½¿ç”¨çº¿ç¨‹æ± å‰ä½ éœ€è¦è€ƒè™‘ï¼š 1ï¼‰å……åˆ†ç†è§£ä½ çš„ä»»åŠ¡ï¼Œæ˜¯é•¿ä»»åŠ¡è¿˜æ˜¯çŸ­ä»»åŠ¡ã€æ˜¯CPUå¯†é›†å‹è¿˜æ˜¯I/Oå¯†é›†å‹ï¼Œå¦‚æœä¸¤ç§éƒ½æœ‰ï¼Œé‚£ä¹ˆä¸€ç§å¯èƒ½æ›´å¥½çš„åŠæ³•æ˜¯æŠŠè¿™ä¸¤ç±»ä»»åŠ¡æ”¾åˆ°ä¸åŒçš„çº¿ç¨‹æ± ä¸­ï¼Œè¿™æ ·ä¹Ÿè®¸å¯ä»¥æ›´å¥½çš„ç¡®å®šçº¿ç¨‹æ•°é‡ï¼› 2ï¼‰å¦‚æœçº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡æœ‰I/Oæ“ä½œï¼Œé‚£ä¹ˆåŠ¡å¿…å¯¹æ­¤ä»»åŠ¡è®¾ç½®è¶…æ—¶ï¼Œå¦åˆ™å¤„ç†è¯¥ä»»åŠ¡çš„çº¿ç¨‹å¯èƒ½ä¼šä¸€ç›´é˜»å¡ä¸‹å»ï¼› 3ï¼‰çº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡æœ€å¥½ä¸è¦åŒæ­¥ç­‰å¾…å…¶å®ƒä»»åŠ¡çš„ç»“æœã€‚ 12ã€æœ¬æ–‡å°ç»“ æœ¬æ–‡æˆ‘ä»¬ä»CPUå¼€å§‹ä¸€è·¯æ¥åˆ°å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼Œä»åº•å±‚åˆ°ä¸Šå±‚ã€ä»ç¡¬ä»¶åˆ°è½¯ä»¶ã€‚ æ³¨æ„ï¼šè¿™é‡Œé€šç¯‡æ²¡æœ‰å‡ºç°ä»»ä½•ç‰¹å®šçš„ç¼–ç¨‹è¯­è¨€ï¼Œçº¿ç¨‹ä¸æ˜¯è¯­è¨€å±‚é¢çš„æ¦‚å¿µï¼ˆä¾ç„¶ä¸è€ƒè™‘ç”¨æˆ·æ€çº¿ç¨‹ï¼‰ï¼Œä½†æ˜¯å½“ä½ çœŸæ­£ç†è§£äº†çº¿ç¨‹åï¼Œç›¸ä¿¡ä½ å¯ä»¥åœ¨ä»»ä½•ä¸€é—¨è¯­è¨€ä¸‹ç”¨å¥½å¤šçº¿ç¨‹ï¼Œä½ éœ€è¦ç†è§£çš„æ˜¯é“ï¼Œæ­¤åæ‰æ˜¯æœ¯ã€‚ ","link":"https://kangjn.github.io/post/cong-gen-shang-li-jie-gao-xing-neng-gao-bing-fa-yi-shen-ru-ji-suan-ji-di-ceng-li-jie-xian-cheng-yu-xian-cheng-chi/"},{"title":"Nodeâ€“å¼‚æ­¥I/Oè§£æ","content":"â€œå¼‚æ­¥â€è¿™ä¸ªåè¯å…¶å®åœ¨Nodeä¹‹å‰å°±å·²ç»è¯ç”Ÿäº†ã€‚ä½†æ˜¯åœ¨ç»å¤§å¤šæ•°é«˜çº§ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¼‚æ­¥å¹¶ä¸å¤šè§ã€‚åœ¨ä¼—å¤šé«˜çº§è¯­è¨€æˆ–è¿è¡Œå¹³å°ä¸­ï¼Œå°†å¼‚æ­¥ä½œä¸ºä¸»è¦ç¼–ç¨‹æ–¹å¼å’Œè®¾è®¡ç†å¿µçš„ï¼ŒNodeæ˜¯é¦–ä¸ªã€‚ å¼‚æ­¥I/Oã€äº‹ä»¶é©±åŠ¨å’Œå•çº¿ç¨‹æ„æˆäº†Nodeçš„åŸºè°ƒï¼Œè€ŒNginxä¸Nodeçš„äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥I/Oè®¾è®¡ç†å¿µæ¯”è¾ƒç›¸è¿‘ã€‚Nginxé‡‡ç”¨çº¯Cç¼–å†™ï¼Œæ€§èƒ½è¡¨ç°éå¸¸ä¼˜å¼‚ï¼Œå…·å¤‡é¢å‘å®¢æˆ·ç«¯ç®¡ç†è¿æ¥çš„å¼ºå¤§èƒ½åŠ›ï¼Œä½†æ˜¯å®ƒçš„èƒŒåä¾ç„¶å—é™äºå„ç§åŒæ­¥æ–¹å¼çš„ç¼–ç¨‹è¯­è¨€ã€‚ä½†Nodeæ˜¯å…¨æ–¹ä½çš„ï¼Œæ—¢å¯ä»¥ä½œä¸ºæœåŠ¡å™¨ç«¯å»å¤„ç†å®¢æˆ·ç«¯å¸¦æ¥çš„å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œä¹Ÿèƒ½ä½œä¸ºå®¢æˆ·ç«¯å‘ç½‘ç»œä¸­çš„å„ä¸ªåº”ç”¨è¿›è¡Œå¹¶å‘è¯·æ±‚ã€‚ ä¸ºä»€ä¹ˆè¦å¼‚æ­¥I/O ä¸ºä»€ä¹ˆå¼‚æ­¥I/Oåœ¨Nodeä¸­å¦‚æ­¤é‡è¦ï¼Œè¿™æ˜¯å› ä¸ºNodeé¢å‘ç½‘ç»œè®¾è®¡ï¼Œåœ¨è·¨ç½‘ç»œçš„ç»“æ„ä¸‹ï¼Œå¹¶å‘å·²ç»æ˜¯ç°ä»£ç¼–ç¨‹ä¸­çš„æ ‡å‡†é…å¤‡äº†ã€‚ ç”¨æˆ·ä½“éªŒ ã€Šé«˜æ€§èƒ½JavaScriptã€‹ä¸­æåˆ°è¿‡ï¼Œå¦‚æœè„šæœ¬çš„æ‰§è¡Œæ—¶é—´è¶…è¿‡100æ¯«ç§’ï¼Œç”¨æˆ·å°±ä¼šæ„Ÿåˆ°é¡µé¢å¡é¡¿ï¼Œä»¥ä¸ºé¡µé¢åœæ­¢å“åº”ã€‚è€Œåœ¨B/Sæ¨¡å‹ä¸­ï¼Œç½‘ç»œé€Ÿåº¦çš„é™åˆ¶ç»™ç½‘é¡µçš„å®æ—¶ä½“éªŒé€ æˆå¾ˆå¤§çš„éº»çƒ¦ã€‚ å¦‚æœç½‘é¡µä¸´æ—¶éœ€è¦è·å–ä¸€ä¸ªèµ„æºï¼Œé€šè¿‡åŒæ­¥çš„æ–¹å¼è·å–ï¼Œé‚£ä¹ˆJavaScriptåˆ™éœ€è¦ç­‰å¾…èµ„æºå®Œå…¨ä»æœåŠ¡å™¨ç«¯è·å–åæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè¿™æœŸé—´UIåœé¡¿ï¼Œä¸å“åº”ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºã€‚è¿™æ ·ç”¨æˆ·ä½“éªŒå°†ä¼šæå·®ã€‚è€Œé‡‡ç”¨å¼‚æ­¥è¯·æ±‚ï¼Œåœ¨ä¸‹è½½èµ„æºæœŸé—´ï¼ŒJavaScriptå’ŒUIçš„æ‰§è¡Œéƒ½ä¸ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¯ä»¥ç»§ç»­å“åº”ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºã€‚ åŒç†ï¼Œå‰ç«¯é€šè¿‡å¼‚æ­¥å¯ä»¥æ¶ˆé™¤æ‰UIé˜»å¡ç°è±¡ï¼Œä½†æ˜¯å‰ç«¯è·å–èµ„æºçš„é€Ÿåº¦ä¹Ÿå–å†³äºåç«¯çš„å“åº”é€Ÿåº¦ã€‚å‡å¦‚ä¸€ä¸ªèµ„æºæ¥è‡ªäºä¸¤ä¸ªä¸åŒä½ç½®çš„æ•°æ®çš„è¿”å›ï¼Œç¬¬ä¸€ä¸ªèµ„æºæ¶ˆè€—Mæ¯«ç§’ï¼Œç¬¬äºŒä¸ªèµ„æºæ¶ˆè€—Næ¯«ç§’ã€‚å¦‚æœé‡‡ç”¨åŒæ­¥çš„æ–¹å¼ï¼Œè·å–ä¸¤ä¸ªèµ„æºæ¶ˆè€—çš„çš„æ—¶é—´ä¸ºM+Næ¯«ç§’ã€‚è€Œé‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œç¬¬ä¸€ä¸ªèµ„æºçš„è·å–å¹¶ä¸ä¼šé˜»å¡ç¬¬äºŒä¸ªèµ„æºçš„è·å–ï¼Œæ¶ˆè€—çš„æ—¶é—´ä¸ºmax(M,N)ã€‚ éšç€ç½‘ç«™æˆ–åº”ç”¨ä¸æ–­è†¨èƒ€ï¼ŒMä¸Nçš„å€¼ä¼šçº¿æ€§å¢é•¿ï¼Œé‚£ä¹ˆå¼‚æ­¥çš„æ€§èƒ½å°†æ¯”åŒæ­¥æ›´åŠ ä¼˜è¶Šã€‚ èµ„æºåˆ†é… å‡è®¾ä¸šåŠ¡åœºæ™¯ä¸­æœ‰ä¸€ç»„äº’ä¸ç›¸å…³çš„ä»»åŠ¡éœ€è¦å®Œæˆï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§ä¸»æµçš„æ–¹æ³•ï¼š å•çº¿ç¨‹ä¸²è¡Œä¸€æ¬¡æ‰§è¡Œ å¤šçº¿ç¨‹å¹¶è¡Œå®Œæˆ å¦‚æœåˆ›å»ºå¤šçº¿ç¨‹çš„å¼€é”€å°äºå¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹æ˜¯é¦–é€‰çš„ï¼Œä½†æ˜¯å¤šçº¿ç¨‹åœ¨åˆ›å»ºçº¿ç¨‹å’Œæ‰§è¡ŒæœŸçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€è¾ƒå¤§ï¼Œè€Œä¸”å¤šçº¿ç¨‹ç¼–ç¨‹ç»å¸¸é¢ä¸´é”ã€çŠ¶æ€åŒæ­¥ç­‰é—®é¢˜ã€‚ å•çº¿ç¨‹é¡ºåºæ‰§è¡Œä»»åŠ¡çš„ç¼ºç‚¹åœ¨äºæ€§èƒ½ï¼Œä»»æ„ä¸€ä¸ªç•¥æ…¢çš„ä»»åŠ¡éƒ½ä¼šå¯¼è‡´åç»­æ‰§è¡Œä»£ç è¢«é˜»å¡ã€‚åœ¨è®¡ç®—æœºèµ„æºä¸­ï¼Œé€šå¸¸I/Oä¸CPUè®¡ç®—ä¹‹é—´æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œä½†æ˜¯åŒæ­¥çš„ç¼–ç¨‹æ¨¡å‹å¯¼è‡´I/Oçš„è¿›è¡Œä¼šè®©åç»­ä»»åŠ¡ç­‰å¾…ï¼Œé€ æˆèµ„æºä¸èƒ½è¢«æ›´å¥½çš„åˆ©ç”¨ã€‚ Nodeåˆ©ç”¨å•çº¿ç¨‹ï¼Œè¿œç¦»å¤šçº¿ç¨‹æ­»é”ã€çŠ¶æ€åŒæ­¥ç­‰é—®é¢˜ï¼›åˆ©ç”¨å¼‚æ­¥I/Oï¼Œè®©å•çº¿ç¨‹è¿œç¦»é˜»å¡ï¼Œæ›´å¥½çš„åˆ©ç”¨CPUã€‚ å¼‚æ­¥I/Oå®ç° å¼‚æ­¥I/Oåœ¨Nodeä¸­åº”ç”¨æœ€ä¸ºå¹¿æ³›ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯Nodeçš„åŸåˆ›ã€‚ å¼‚æ­¥I/Oä¸éé˜»å¡I/O å¯¹äºè®¡ç®—æœºå†…æ ¸I/Oè€Œè¨€ï¼Œå¼‚æ­¥/åŒæ­¥å’Œé˜»å¡/éé˜»å¡æ˜¯ä¸¤ç äº‹ã€‚ æ“ä½œç³»ç»Ÿå¯¹äºI/Oåªæœ‰ä¸¤ç§æ–¹å¼ï¼šé˜»å¡å’Œéé˜»å¡ã€‚åœ¨è°ƒç”¨é˜»å¡I/Oæ—¶ï¼Œåº”ç”¨ç¨‹åºéœ€è¦ç­‰å¾…I/Oå®Œæˆæ‰è¿”å›ç»“æœã€‚ é˜»å¡I/Oçš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯è°ƒç”¨ä¹‹åä¸€å®šè¦ç­‰åˆ°ç³»ç»Ÿå†…æ ¸å±‚é¢å®Œæˆæ‰€æœ‰æ“ä½œä¹‹åï¼Œè°ƒç”¨æ‰ç»“æŸã€‚é˜»å¡I/Oé€ æˆCPUç­‰å¾…I/Oï¼Œæµªè´¹ç­‰å¾…æ—¶é—´ï¼ŒCPUçš„å¤„ç†èƒ½åŠ›ä¸èƒ½å¾—åˆ°å……åˆ†åˆ©ç”¨ã€‚ ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå†…æ ¸æä¾›äº†éé˜»å¡I/Oã€‚éé˜»å¡I/Oè·Ÿé˜»å¡I/Oçš„å·®åˆ«ä¸ºè°ƒç”¨ä¹‹åä¼šç«‹å³è¿”å›ï¼Œéé˜»å¡I/Oè¿”å›ä¹‹åï¼ŒCPUçš„æ—¶é—´ç‰‡å¯ä»¥ç”¨æ¥å¤„ç†å…¶ä»–äº‹ç‰©ï¼Œæ­¤æ—¶æå‡æ€§èƒ½æ˜¯æ˜æ˜¾çš„ï¼Œä½†æ˜¯ç”±äºå®Œæˆçš„I/Oå¹¶æ²¡æœ‰å®Œæˆï¼Œç«‹å³è¿”å›çš„å¹¶ä¸æ˜¯ä¸šåŠ¡å±‚æœŸæœ›çš„æ•°æ®ï¼Œè€Œä»…ä»…æ˜¯å½“å‰çš„è°ƒç”¨çŠ¶æ€ã€‚ ä¸ºäº†è·å–å®Œæ•´çš„æ•°æ®ï¼Œåº”ç”¨ç¨‹åºéœ€è¦é‡å¤è°ƒç”¨I/Oæ“ä½œæ¥ç¡®è®¤æ˜¯å¦å®Œæˆã€‚è¿™ç§é‡å¤è°ƒç”¨åˆ¤æ–­æ“ä½œæ˜¯å¦å®Œæˆçš„æŠ€æœ¯å«åšè½®è¯¢ã€‚ ç°å­˜çš„è½®è¯¢æŠ€æœ¯ä¸»è¦æœ‰readã€selectã€pollã€epollå’Œkqueueã€‚è¿™é‡Œåªè®²ä¸€ä¸‹epollçš„è½®è¯¢åŸç†ã€‚ epollæ˜¯Linuxä¸‹æ•ˆç‡æœ€é«˜çš„I/Oäº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œåœ¨è¿›å…¥è½®è¯¢çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æ£€æŸ¥åˆ°I/Oäº‹ä»¶ï¼Œå°†ä¼šè¿›è¡Œä¼‘çœ ï¼Œç›´åˆ°äº‹ä»¶å‘ç”Ÿå°†å®ƒå”¤é†’ã€‚å®ƒæ˜¯çœŸå®åˆ©ç”¨äº†äº‹ä»¶çš„é€šçŸ¥ã€æ‰§è¡Œå›è°ƒçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯éå†æŸ¥è¯¢ï¼Œæ‰€ä»¥ä¸ä¼šæµªè´¹CPUï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒé«˜ã€‚ è½®è¯¢æŠ€æœ¯æ»¡è¶³äº†éé˜»å¡I/Oç¡®ä¿è·å–å®Œæ•´æ•°æ®çš„éœ€æ±‚ï¼Œä½†æ˜¯å¯¹äºç¨‹åºè€Œè¨€ï¼Œå®ƒä»ç„¶ç®—æ˜¯ä¸€ç§åŒæ­¥ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºä»ç„¶éœ€è¦ç­‰å¾…I/Oå®Œå…¨è¿”å›ï¼Œä¾æ—§èŠ±è´¹äº†å¾ˆå¤šæ—¶é—´ç­‰å¾…ã€‚ç­‰å¾…æœŸé—´ï¼ŒCPUè¦ä¹ˆç”¨äºéå†æ–‡ä»¶æè¿°ç¬¦ï¼Œè¦ä¹ˆç”¨äºä¼‘çœ ç­‰å¾…æ—¶é—´å‘ç”Ÿã€‚ ç°å®çš„å¼‚æ­¥I/O é€šè¿‡è®©éƒ¨åˆ†çº¿ç¨‹è¿›è¡Œé˜»å¡I/Oæˆ–è€…éé˜»å¡I/OåŠ è½®è¯¢æŠ€æœ¯æ¥å®Œæˆæ•°æ®è·å–ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè®¡ç®—å¤„ç†ï¼Œé€šè¿‡çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡å°†I/Oå¾—åˆ°çš„æ•°æ®è¿›è¡Œä¼ é€’ï¼Œè¿™å°±è½»æ¾å®ç°äº†å¼‚æ­¥I/Oï¼ˆè™½ç„¶è¿™æ˜¯æ¨¡æ‹Ÿçš„ï¼‰ ä½†æ˜¯æœ€åˆï¼ŒNodeåœ¨*nix å¹³å°ä¸‹é‡‡ç”¨äº†libeioé…åˆlibevå®ç°I/Oéƒ¨åˆ†ï¼Œå®ç°äº†å¼‚æ­¥I/Oã€‚åœ¨Node v0.9.3ä¸­ï¼Œè‡ªè¡Œå®ç°äº†çº¿ç¨‹æ± æ¥å®Œæˆå¼‚æ­¥I/Oã€‚ è€ŒWindowsä¸‹çš„IOCPåœ¨æŸç§ç¨‹åº¦ä¸Šæä¾›äº†ç†æƒ³çš„å¼‚æ­¥I/Oï¼šè°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼Œç­‰å¾…I/Oå®Œæˆä¹‹åçš„é€šçŸ¥ï¼Œæ‰§è¡Œå›è°ƒï¼Œç”¨æˆ·æ— éœ€è€ƒè™‘è½®è¯¢ã€‚ä½†æ˜¯å®ƒçš„å†…éƒ¨å…¶å®ä¾ç„¶æ˜¯çº¿ç¨‹æ± åŸç†ï¼Œä¸åŒä¹‹å¤„åœ¨äºè¿™äº›çº¿ç¨‹æ± æœ‰ç³»ç»Ÿå†…æ ¸æ¥æ‰‹ç®¡ç†ã€‚ ç”±äºWindowså¹³å°å’Œ*nixå¹³å°çš„å·®å¼‚ï¼ŒNodeæä¾›äº†libuvä½œä¸ºæŠ½è±¡å°è£…å±‚ï¼Œä½¿å¾—æ‰€æœ‰å¹³å°å…¼å®¹æ€§çš„åˆ¤æ–­éƒ½ç”±è¿™ä¸€å±‚æ¥å®Œæˆï¼Œå¹¶ä¿è¯ä¸Šå±‚çš„Nodeä¸ä¸‹å±‚çš„è‡ªå®šä¹‰çº¿ç¨‹æ± åŠIOCPä¹‹é—´ä¸ªå­—ç‹¬ç«‹ã€‚ æˆ‘ä»¬æ—¶å¸¸æåˆ°Nodeæ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™é‡Œçš„å•çº¿ç¨‹ä»…ä»…åªæ˜¯JavaScriptæ‰§è¡Œåœ¨å•çº¿ç¨‹ä¸­ã€‚åœ¨Nodeä¸­ï¼Œæ— è®ºæ˜¯*nixè¿˜æ˜¯Windowså¹³å°ï¼Œå†…éƒ¨å®ŒæˆI/Oä»»åŠ¡çš„å¦æœ‰çº¿ç¨‹æ± ã€‚ Nodeçš„å¼‚æ­¥I/O å®Œæˆæ•´ä¸ªå¼‚æ­¥I/Oç¯èŠ‚çš„æœ‰äº‹ä»¶å¾ªç¯ã€è§‚å¯Ÿè€…å’Œè¯·æ±‚å¯¹è±¡ç­‰ã€‚ äº‹ä»¶å¾ªç¯ äº‹ä»¶å¾ªç¯æ˜¯Nodeè‡ªèº«çš„æ‰§è¡Œæ¨¡å‹ï¼Œæ­£å¼å®ƒä½¿å¾—å›è°ƒå‡½æ•°ååˆ†æ™®éã€‚ åœ¨è¿›ç¨‹å¯åŠ¨æ—¶ï¼ŒNodeä¾¿ä¼šåˆ›å»ºä¸€ä¸ªç±»ä¼¼äºwhile(true)çš„å¾ªç¯ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“çš„è¿‡ç¨‹æˆ‘ä»¬ç§°ä¸ºTickã€‚æ¯ä¸ªTickçš„è¿‡ç¨‹å°±æ˜¯æŸ¥çœ‹æ˜¯å¦æœ‰äº‹ä»¶å¾…å¤„ç†ï¼Œå¦‚æœæœ‰å°±å–å‡ºäº‹ä»¶åŠå…¶ç›¸å…³çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœå­˜åœ¨å…³è”çš„å›è°ƒå‡½æ•°ï¼Œå°±æ‰§è¡Œä»–ä»¬ã€‚ç„¶åè¿›å…¥ä¸‹ä¸ªå¾ªç¯ï¼Œå¦‚æœä¸å†æœ‰äº‹ä»¶å¤„ç†ï¼Œå°±é€€å‡ºè¿›ç¨‹ã€‚ è§‚å¯Ÿè€… æ¯ä¸ªäº‹ä»¶å¾ªç¯ä¸­æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªè§‚å¯Ÿè€…ï¼Œè€Œåˆ¤æ–­æ˜¯å¦æœ‰äº‹ä»¶è¦å¤„ç†çš„è¿‡ç¨‹å°±æ˜¯å‘è¿™äº›è§‚å¯Ÿè€…è¯¢é—®æ˜¯å¦æœ‰è¦å¤„ç†çš„äº‹ä»¶ã€‚ åœ¨Nodeä¸­ï¼Œäº‹ä»¶ä¸»è¦æ¥æºäºç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶I/Oç­‰ï¼Œè¿™äº›æ—¶é—´å¯¹åº”çš„è§‚å¯Ÿè€…æœ‰æ–‡ä»¶I/Oè§‚å¯Ÿè€…ã€ç½‘ç»œI/Oè§‚å¯Ÿè€…ç­‰ã€‚è§‚å¯Ÿè€…å°†äº‹ä»¶è¿›è¡Œäº†åˆ†ç±»ã€‚ äº‹ä»¶å¾ªç¯æ˜¯ä¸€ä¸ªå…¸å‹çš„ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å‹ã€‚å¼‚æ­¥I/Oã€ç½‘ç»œè¯·æ±‚ç­‰åˆ™æ˜¯äº‹ä»¶çš„ç”Ÿäº§è€…ï¼Œä¸æ–­ä¸ºNodeæä¾›ä¸åŒç±»å‹çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶è¢«ä¼ é€’åˆ°å¯¹åº”çš„è§‚å¯Ÿè€…é‚£é‡Œï¼Œäº‹ä»¶å¾ªç¯åˆ™ä»è§‚å¯Ÿè€…é‚£é‡Œå–å‡ºäº‹ä»¶å¹¶å¤„ç†ã€‚ è¯·æ±‚å¯¹è±¡ å¯¹äºNodeçš„å¼‚æ­¥I/Oè°ƒç”¨è€Œè¨€ï¼Œå›è°ƒå‡½æ•°ä¸ç”±å¼€å‘è€…æ¥è°ƒç”¨ã€‚ä»JavaScriptå‘èµ·è°ƒç”¨åˆ°å†…æ ¸æ‰§è¡Œå®ŒI/Oæ“ä½œçš„è¿‡æ¸¡è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨ä¸€ç§äº§ç‰©ï¼Œå«åšè¯·æ±‚å¯¹è±¡ ä¸‹é¢ç”¨fs.open()æ–¹æ³•ä½œä¸ºä¸€ä¸ªå°å°çš„ä¾‹å­ã€‚ fs.open = function(path,flags,mode,callback){ //... binding.open(pathModule._makeLong(path), stringToFlags(flags), mode, callback); } fs.open()çš„ä½œç”¨æ˜¯æ ¹æ®æŒ‡å®šè·¯å¾„å’Œå‚æ•°å»æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè¿™æ˜¯åç»­æ‰€æœ‰I/Oæ“ä½œçš„åˆè¯•æ“ä½œã€‚JavaScriptå±‚é¢çš„ä»£ç é€šè¿‡è°ƒç”¨C++æ ¸å¿ƒæ¨¡å—è¿›è¡Œä¸‹å±‚çš„æ“ä½œã€‚ ä»äº‹JavaScriptè°ƒç”¨Nodeçš„æ ¸å¿ƒæ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—è°ƒç”¨C++æ¨¡å—ï¼Œå†…å»ºæ¨¡å—é€šè¿‡libuvè¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œè¿™é‡Œæ˜¯Nodeé‡Œç»å…¸çš„è°ƒç”¨æ–¹å¼ã€‚è¿™é‡Œlibuvä½œä¸ºå°è£…å±‚ï¼Œæœ‰ä¸¤ä¸ªå¹³å°çš„å®ç°ï¼Œå®è´¨ä¸Šæ˜¯è°ƒç”¨äº†uv_fs_open()æ–¹æ³•ã€‚åœ¨uv_fs_open()çš„è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå°†ä»JavaScriptå±‚ä¼ å…¥çš„å‚æ•°å’Œå½“å‰æ–¹æ³•éƒ½å°è£…åœ¨ä¸€ä¸ªè¯·æ±‚å¯¹è±¡ä¸­ï¼Œå›è°ƒå‡½æ•°åˆ™è¢«è®¾ç½®åœ¨è¿™ä¸ªå¯¹è±¡çš„å±æ€§ä¸Šã€‚å¯¹è±¡åŒ…è£…å®Œæ¯•åï¼Œå°†å¯¹è±¡æ¨å…¥çº¿ç¨‹æ± ç­‰å¾…æ‰§è¡Œã€‚ è‡³æ­¤ï¼ŒJavaScriptè°ƒç”¨ç«‹å³è¿”å›ï¼Œç”±JavaScriptå±‚é¢å‘èµ·çš„å¼‚æ­¥è°ƒç”¨çš„ç¬¬ä¸€é˜¶æ®µå°±æ­¤ç»“æŸã€‚JavaScriptçº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå½“å‰ä»»åŠ¡çš„åç»­æ“ä½œã€‚ è¯·æ±‚å¯¹è±¡æ˜¯å¼‚æ­¥I/Oè¿‡ç¨‹ä¸­çš„é‡è¦ä¸­é—´äº§ç‰©ï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼ŒåŒ…æ‹¬é€å…¥çº¿ç¨‹æ± ç­‰å¾…æ‰§è¡Œä»¥åŠI/Oæ“ä½œå®Œæ¯•åçš„å›è°ƒå¤„ç†ã€‚ æ‰§è¡Œå›è°ƒ ç»„è£…å¥½è¯·æ±‚å¯¹è±¡ã€é€å…¥I/Oçº¿ç¨‹æ± ç­‰å¾…æ‰§è¡Œï¼Œåªæ˜¯å®Œæˆä¸€éƒ¨I/Oçš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œå›è°ƒé€šçŸ¥æ˜¯ç¬¬äºŒéƒ¨åˆ†ã€‚ çº¿ç¨‹æ± ä¸­çš„I/Oæ“ä½œè°ƒç”¨å®Œæ¯•ä¹‹åï¼Œä¼šå°†è·å–çš„ç»“æœå­˜å‚¨åœ¨req-&gt;resultå±æ€§ä¸Šï¼Œç„¶åè°ƒç”¨PostQueueCompletionStatus()é€šçŸ¥IOCPï¼Œå‘ŠçŸ¥å½“å‰å¯¹è±¡æ“ä½œå·²ç»å®Œæˆã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªå¼‚æ­¥I/Oçš„æµç¨‹å®Œå…¨ç»“æŸã€‚ äº‹ä»¶å¾ªç¯ã€è§‚å¯Ÿè€…ã€è¯·æ±‚å¯¹è±¡ã€I/Oçº¿ç¨‹æ± è¿™å››è€…å…±åŒæ„æˆäº†Nodeå¼‚æ­¥I/Oæ¨¡å‹çš„åŸºæœ¬è¦ç´ ã€‚ å°ç»“ æ•´ç†ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æå–å¼‚æ­¥I/Oçš„å‡ ä¸ªå…³é”®è¯ï¼šå•çº¿ç¨‹ã€äº‹ä»¶å¾ªç¯ã€è§‚å¯Ÿè€…å’ŒI/Oçº¿ç¨‹æ± ã€‚å•çº¿ç¨‹å’Œçº¿ç¨‹æ± çœ‹èµ·æ¥æœ‰äº›æ‚–è®ºçš„æ ·å­ã€‚å› ä¸ºJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“ç†è§£ä¸ºå®ƒä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUã€‚å®é™…ä¸Šï¼Œåœ¨Nodeä¸­ï¼Œé™¤äº†JavaScriptæ˜¯å•çº¿ç¨‹å¤–ï¼ŒNodeè‡ªèº«å…¶å®æ˜¯å¤šçº¿ç¨‹çš„ï¼Œåªæ˜¯I/Oçº¿ç¨‹ä½¿ç”¨çš„CPUè¾ƒå°‘ã€‚è¿˜æœ‰å°±æ˜¯é™¤äº†ç”¨æˆ·ä»£ç æ— æ³•å¹¶è¡Œæ‰§è¡Œå¤–ï¼Œæ‰€æœ‰çš„I/Oï¼ˆç£ç›˜I/Oå’Œç½‘ç»œI/Oç­‰ï¼‰éƒ½æ˜¯å¯ä»¥å¹¶è¡Œèµ·æ¥çš„ã€‚ ","link":"https://kangjn.github.io/post/node-yi-bu-io-jie-xi/"},{"title":"è®¡ç®—æœºç½‘ç»œ â€” TCPçš„ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹","content":"TCP å¤´éƒ¨æ ‡è¯†ç¬¦æ„ä¹‰è§£è¯» SYNï¼šå»ºç«‹è¿æ¥ SYN=1ï¼ŒACK=0 è¡¨ç¤ºä¸€ä¸ªè¿æ¥è¯·æ±‚ SYN=1ï¼ŒACK=1 è¡¨ç¤ºåŒæ„å»ºç«‹ä¸€ä¸ªè¿æ¥ FINï¼šå…³é—­è¿æ¥ FIN=1 è¡¨ç¤ºå‘ç«¯å®Œæˆå‘é€ä»»åŠ¡ æ³¨æ„ï¼šè¡¨æ˜å‘é€æ–¹å·²ç»æ²¡æœ‰æ•°æ®å‘é€ ä½†ä¸ä»£è¡¨ä¹‹å‰çš„æ•°æ®å‘é€å®Œæ¯• ACKï¼šç½®1æ—¶è¡¨ç¤ºç¡®è®¤ seqï¼šå‘é€åºåˆ—å· ack (number)ï¼šç¡®è®¤ç  æ›´å¤šå…³äºTCP å’Œ UDP çš„è¯¦ç»†å†…å®¹è§ è®¡ç®—æœºç½‘ç»œç³»åˆ— -- TCPå’ŒUDP TCP ä¸‰æ¬¡æ¡æ‰‹ è¿‡ç¨‹é€šä¿—ç†è§£ Aâ€”&gt;B Bæ”¶åˆ°ï¼ŒBâ€”&gt;A Aæ”¶åˆ° è¿‡ç¨‹çš„è¯¦ç»†è§£è¯» ï¼ˆ1ï¼‰ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ã€SYN = 1ï¼Œéšæœºåºåˆ—å·seq = xã€‘çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨,æœåŠ¡å™¨ç”±ã€SYN = 1ã€‘çŸ¥é“å®¢æˆ·ç«¯è¦å»ºç«‹è¿æ¥ï¼›æ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥å·²å‘é€çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ ï¼ˆ2ï¼‰ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ ‡ã€SYN = 1ï¼ŒACK = 1ã€‘å’Œã€éšæœºåºåˆ—å·seq = y, ç¡®è®¤ç ack number = x+1ã€‘çš„æ•°æ®åŒ…ï¼›æ­¤æ—¶æœåŠ¡å™¨è¿›å…¥å·²æ”¶åˆ°çŠ¶æ€ ï¼ˆ3ï¼‰ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°ååˆ¤æ–­ã€ACK=1ã€‘å’Œã€æ”¶çš„ack number =å‘çš„seq+1ã€‘ï¼› è‹¥æ­£ç¡®ï¼Œå®¢æˆ·ç«¯å‘é€æ ‡è¯†ä½ã€ACK = 1ã€seq = x + 1ã€‘å’Œã€ç¡®è®¤ç ack number = y + 1ã€‘ï¼ˆæœåŠ¡å™¨å‘é€çš„seq+1ï¼‰åˆ°æœåŠ¡å™¨ï¼› æœåŠ¡å™¨æ”¶åˆ°ååˆ¤æ–­ã€ACK=1ã€‘å’Œã€æ”¶çš„ack number =å‘çš„seq+1ã€‘æ˜¯å¦æ­£ç¡®ï¼› è‹¥æ­£ç¡®åˆ™å®Œæˆå»ºç«‹è¿æ¥ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥å·²è¿æ¥çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¼€å§‹ä¼ é€æ•°æ® TCP ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„ å»ºç«‹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ï¼Œç¡®è®¤å„è‡ªçš„æ”¶å‘èƒ½åŠ›æ˜¯å¦æ­£å¸¸ å¯¹å‡†å¥½ TCP åŒ…çš„åºå·é—®é¢˜ï¼Œä¸ºä¿è¯å¯é ä¼ é€ å¦‚æœæ˜¯ https åè®®ï¼Œè¿˜ä¼šè¿›è¡Œè§£å¯†åŠ å¯† HTTPSè§£å¯†è§£å¯†è¿‡ç¨‹è§ è®¡ç®—æœºç½‘ç»œç³»åˆ— -- HTTPSåŠ å¯†è§£å¯†è¿‡ç¨‹ ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹è€Œä¸æ˜¯ä¸¤æ¬¡ï¼Ÿ è¿™å¥è¯å¯ä»¥è½¬åŒ–ä¸ºç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ ç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æ„ä¹‰åœ¨äºï¼š`è®©æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯ä¹Ÿæ”¶åˆ°äº†è‡ªå·±çš„åŒæ­¥ä¿¡å·` é€šä¿—ç†è§£ ä¸¤æ¬¡æ¡æ‰‹åªèƒ½ä¿è¯`å•å‘`ï¼šåªçŸ¥é“Aèƒ½å‘Bå‘é€æ•°æ® ä¸‰æ¬¡æ¡æ‰‹èƒ½ä¿è¯`åŒå‘`ï¼šä¿è¯Aä¹Ÿèƒ½æ”¶åˆ°Bå‘é€çš„æ•°æ® ç¬¬ä¸‰æ¬¡æ¡æ‰‹å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ serverç«¯å‘é€äº†SYN+ACKæŠ¥æ–‡åå°±ä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…clientè¿”å›çš„ACKæŠ¥æ–‡ã€‚å¦‚æœç¬¬ä¸‰æ¬¡æ¡æ‰‹å¤±è´¥çš„è¯clientç»™serverè¿”å›äº†ACKæŠ¥æ–‡ï¼Œserverå¹¶ä¸èƒ½æ”¶åˆ°è¿™ä¸ªACKæŠ¥æ–‡ã€‚é‚£ä¹ˆserverç«¯å°±ä¼šå¯åŠ¨è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œè¶…è¿‡è§„å®šæ—¶é—´åé‡æ–°å‘é€SYN+ACKï¼Œé‡ä¼ æ¬¡æ•°é»˜è®¤æ˜¯5æ¬¡ã€‚å¦‚æœé‡ä¼ æŒ‡å®šæ¬¡æ•°åˆ°äº†åï¼Œä»ç„¶æœªæ”¶åˆ°ACKåº”ç­”ï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´åï¼Œserverè‡ªåŠ¨å…³é—­è¿™ä¸ªè¿æ¥ã€‚ä½†æ˜¯clientè®¤ä¸ºè¿™ä¸ªè¿æ¥å·²ç»å»ºç«‹ï¼Œå¦‚æœclientç«¯å‘serverå†™æ•°æ®ï¼Œserverç«¯å°†å‘é€RTSæŠ¥æ–‡æ®µï¼Œä»¥é˜²æ­¢synæ´ªæ³›æ”»å‡»ã€‚ synæ´ªæ³›æ”»å‡» é€šä¿—çš„ç†è§£æ˜¯ï¼šå½“ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ²¡æœ‰å‘é€ç¡®è®¤ä¿¡æ¯æ—¶ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œä¸»æœºå°±ä¼šæ–­å¼€ä¹‹å‰çš„åŠå¼€è¿æ¥å¹¶å›æ”¶èµ„æºï¼Œè¿™ä¸ºdosï¼ˆdeny of serviceï¼‰æ”»å‡»åŸ‹ä¸‹éšæ‚£ï¼Œå½“ä¸»åŠ¨æ–¹ä¸»åŠ¨å‘é€å¤§é‡çš„synæ•°æ®åŒ…ï¼Œä½†å¹¶ä¸åšå‡ºç¬¬ä¸‰æ¬¡æ¡æ‰‹å“åº”ï¼Œserverå°±ä¼šä¸ºè¿™äº›synåŒ…åˆ†é…èµ„æºï¼ˆä½†å¹¶æœªä½¿ç”¨ï¼‰ï¼Œå°±ä¼šä½¿serverå ç”¨å¤§é‡å†…å­˜ï¼Œä½¿serverè¿æ¥ç¯å¢ƒè€—å°½ï¼Œè¿™å°±æ˜¯synæ´ªæ³›æ”»å‡» ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹è€Œä¸æ˜¯å››æ¬¡ï¼Ÿ å››æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š ç¬¬ä¸€æ¬¡ï¼šå®¢æˆ·ç«¯å‘é€ã€SYN = 1ï¼Œéšæœºåºåˆ—å·seq = uã€‘åˆ°æœåŠ¡å™¨ï¼Œç”¨æ¥è¯·æ±‚å¼€å¯å®¢æˆ·Aåˆ°æœåŠ¡å™¨Bçš„æ•°æ®ä¼ é€ï¼› ç¬¬äºŒæ¬¡ï¼šæœåŠ¡å™¨Bæ”¶åˆ°è¿™ä¸ªSYNï¼Œå®ƒå‘å›ã€ACK = 1ã€ç¡®è®¤åºå·ack=u+1ã€‘è¡¨ç¤ºåŒæ„ï¼› ç¬¬ä¸‰æ¬¡ï¼šæœåŠ¡å™¨å¼€å¯ä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‘å›æ ‡è¯†ä½ã€SYN = 1ï¼ŒACK = 1,ï¼Œç¡®è®¤ç ack =u+1ã€‘ç»™å®¢æˆ·ç«¯ï¼› ç¬¬å››æ¬¡ï¼šå®¢æˆ·ç«¯å‘é€ã€ACK = 1ï¼Œç¡®è®¤ç ack number=w+1ã€‘åˆ°æœåŠ¡å™¨ã€‚ å¾ˆæ˜æ˜¾ï¼Œç¬¬äºŒæ¬¡å’Œç¬¬ä¸‰æ¬¡æ²¡æœ‰åˆ†å¼€çš„å¿…è¦ï¼Œå¯ä»¥åˆå¹¶ï¼Œè€Œä¸”è¿˜èƒ½æé«˜å»ºç«‹è¿æ¥æ—¶çš„æ•ˆç‡ TCP å››æ¬¡æŒ¥æ‰‹ è¿‡ç¨‹é€šä¿—ç†è§£ Aï¼šB å•Šï¼Œæˆ‘ä¸æƒ³ç©äº† Bï¼šå¥½ï¼ŒçŸ¥é“äº†ï¼Œç­‰ä¸€ä¸‹å“ˆï¼Œæˆ‘è¿™è¾¹è¿˜æ²¡å¥½ ã€æ³¨æ„ã€‘è¿™æ—¶ï¼Œåªæ˜¯Aä¸æƒ³ç©äº†ï¼Œå³ä¸å†å‘é€æ•°æ®ã€‚ä½†æ˜¯Bå¯èƒ½è¿˜æœ‰æœªå‘é€å®Œçš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ç­‰å¾…Bä¹Ÿä¸»åŠ¨å…³é—­ Bï¼šå¥½çš„ï¼Œæˆ‘å¼„å®Œäº†ï¼Œæˆ‘ä¹Ÿä¸ç©äº†ï¼Œæ‹œæ‹œ Aï¼šå¥½çš„ï¼Œæ‹œæ‹œ [ è¿‡ç¨‹çš„è¯¦ç»†è§£è¯» ï¼ˆ1ï¼‰ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ã€FIN = 1ï¼Œéšæœºåºåˆ—å·seq = uã€‘åˆ°æœåŠ¡å™¨ï¼Œç”¨æ¥ä¸»åŠ¨å…³é—­å®¢æˆ·Aåˆ°æœåŠ¡å™¨Bçš„æ•°æ®ä¼ é€ï¼›å®¢æˆ·æœºAè¿›å…¥FIN-WAIT-1çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨Bå‘é€FIN ï¼ˆ2ï¼‰ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨Bæ”¶åˆ°è¿™ä¸ªFINï¼Œå®ƒå‘å›ã€ACK = 1ã€ç¡®è®¤åºå·ack number=u+1ã€‘è¡¨ç¤ºåŒæ„ï¼›å®¢æˆ·ç«¯è¿›å…¥FIN-WAIT-2çŠ¶æ€ï¼Œç¨åå…³é—­è¿æ¥ï¼ŒæœåŠ¡å™¨Bè¿›å…¥CLOSE_WAITï¼Œç­‰å¾…å…³é—­è¿æ¥; ï¼ˆ3ï¼‰ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨å…³é—­ä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‘å›æ ‡è¯†ä½ã€FIN = 1ï¼ŒACK = 1,ï¼Œç¡®è®¤ç ack number=u+1ã€‘ç»™å®¢æˆ·ç«¯ï¼›æœåŠ¡å™¨è¿›å…¥LAST_ACKï¼Œç­‰å¾…æœ€åä¸€æ¬¡ACKç¡®è®¤ ï¼ˆ4ï¼‰ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ã€ACK = 1ï¼Œç¡®è®¤ç ack number=w+1ã€‘åˆ°æœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯è¿›å…¥TIME-WAITç­‰å¾…2MALåè¿›å…¥CLOSEå¯ç”¨çŠ¶æ€ï¼ŒæœåŠ¡å™¨Bè¿›å…¥CLOSEå¯ç”¨çŠ¶æ€ TCP å››æ¬¡æŒ¥æ‰‹çš„ç›®çš„ ä¿è¯å®¢æˆ·ç«¯ã€æœåŠ¡å™¨çœŸæ­£æ–­å¼€è¿æ¥ ä¸ºä»€ä¹ˆæŒ¥æ‰‹è¦å››æ¬¡ï¼Ÿè€Œæ¡æ‰‹åªè¦ä¸‰æ¬¡ï¼Ÿ Bè¡¨ç¤ºæ”¶åˆ°Açš„æŠ¥æ–‡ä¹‹åï¼Œå¯èƒ½æœ‰æœªå‘é€å®Œçš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æŠŠæ•°æ®å…¨éƒ¨å‘é€å®Œæ¯•åå†æ¥å‘Šè¯‰Aè¯´å¯ä»¥æ–­å¼€äº†ï¼Œæ‰€ä»¥å¤šäº†ä¸€æ¬¡ 2MSLæ˜¯ä»€ä¹ˆï¼Ÿç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ MSLæ˜¯æ—¶é—´å•ä½ â€”â€” ä»»ä½•æŠ¥æ–‡åœ¨ç½‘ç»œä¸Šå­˜åœ¨çš„æœ€é•¿æ—¶é—´ 2MSLç›®çš„ï¼šä¿è¯ç¬¬å››æ¬¡æŒ¥æ‰‹æ­£å¸¸è¿›è¡Œ è‹¥ç¬¬4æ¬¡æŒ¥æ‰‹çš„æŠ¥æ–‡æ®µä¸¢å¤±äº† æœåŠ¡å™¨å°±ä¼šè¶…æ—¶é‡ä¼ ç¬¬3æ¬¡æŒ¥æ‰‹çš„æŠ¥æ–‡æ®µ å®¢æˆ·ç«¯å°±ä¼šé‡æ–°ç»™æœåŠ¡å™¨å‘é€ç¬¬4æ¬¡æŒ¥æ‰‹çš„æŠ¥æ–‡ æœ€åï¼Œå®¢æˆ·ç«¯ã€æœåŠ¡å™¨æ‰çœŸæ­£æ–­å¼€è¿æ¥ ä¸ºä»€ä¹ˆå®¢æˆ·ç«¯å…³é—­åä¸èƒ½å†å‘ä¸€ä¸‹å°±è¡Œï¼Ÿ ä¸èƒ½ä¿è¯æ–°ã€è€è¿æ¥ç«¯å£å·ä¸€è‡´ ","link":"https://kangjn.github.io/post/ji-suan-ji-wang-luo-tcp-de-san-ci-wo-shou-si-ci-hui-shou/"},{"title":"ç®—æ³•å°è®°","content":"æ•°ç»„å»é‡ ç¬¬ä¸€ç§ new Set let ary = [1,2,3,4,2,1,3,4,5,6,4,3,5,6,3] let arr = Array.from(new Set(ary)) ç¬¬äºŒç§ ç¬¬äºŒç§ æ‹¿å‡ºå½“å‰é¡¹å’Œåé¢å†…å®¹æ¯”è¾ƒ for(let i = 0;i &lt; ary.length - 1; i++){ let item = ary[i] let arg = ary.slice(i + 1); if(arg.indexOf(item) &gt; -1){ ary.splice(i,1); // è¿™ä¸ªæ€§èƒ½ä¸å¦‚ æ–°å»ºä¸€ä¸ªæ•°ç»„å¥½ i--; // ä¼šå› ä¸ºspliceé€ æˆæ•°ç»„å¡Œé™· } } ç¬¬ä¸‰ç§ åˆ¤æ–­æ˜¯å¦åŒ…å«ï¼ŒåŒ…å«çš„è¯ é‚£æœ€åä¸€é¡¹æŠŠå½“å‰é¡¹è¦†ç›– for(let i = 0;i &lt; ary.length - 1; i++){ let item = ary[i] let arg = ary.slice(i + 1); if(arg.indexOf(item) &gt; -1){ ary[i] = ary[ary.length - 1]; ary.length--; i-- } } ç¬¬å››ç§ å¾ªç¯éå†æ˜¯å¦åŒ…å«ï¼Œä¸åŒ…å«push let arr = [] for(let i = 0;i &lt; ary.length; i++){ if(arr.indexOf(item) === -1){ arr.push(ary[i]) } } ç­‰ç­‰è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å¯¹è±¡é”®å€¼å¯¹ï¼Œæ¯”å¦‚åŒ…å«ç½®ä¸ºnull åœ¨è¿‡æ»¤ æ•°ç»„æ‰å¹³åŒ– ç¬¬ä¸€ç§ flat let arr = [ [1,2,3], [3,4,5,6], [6,7,8,9,0,[1],[2,3]],10 ] flat()å†™ å‡  å°±æ‰å¹³åŒ– å‡ çº§ Infinity æ— é™ arr.flat(Infinity) ç¬¬äºŒç§ reduce function ab(arr){ return arr.reduce((pre,cur) =&gt; { return pre.concat(Array.isArray(cur) ? ab(cur) : cur) },[]) } ç¬¬ä¸‰ç§ toString arr.toString().split(',').map(itm =&gt; parserFloat(itm)) ç¬¬å››ç§ while + reduce + concat while(arr.some(itm =&gt; Array.isArray(itm))){ arr = [].concat(...arr) } ç¬¬äº”ç§ æ­£åˆ™ JSON.stringify(arr).replace(/(\\[|\\])/g,'').split(',').map(itm =&gt;parseFloat(itm)) æ–æ³¢é‚£å¥‘æ•°åˆ— let arr = [1,1,2,3,5,8,13,21] å½“å‰é¡¹ = å½“å‰é¡¹çš„ å‰é¢ä¸¤ä½ç›¸åŠ  å¯ä»¥ å®ç° ä¼ å…¥ number å°±èƒ½è®¡ç®—å‡ºå¯¹åº”æ–æ³¢é‚£å¥‘ä¸‹æ ‡çš„å€¼ ç¬¬ä¸€ç§ï¼š whileå¾ªç¯ function fibonacci(n){ if(n&lt;=1) return 1; let arr = [1,1]; let i = n + 1 -2; // why?å› ä¸ºä¼ å…¥çš„næ˜¯æ•°ç»„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦+1 å‡2çš„è¯å°±æ˜¯å› ä¸ºä¸€å¼€å§‹å°±æœ‰ä¸¤ä¸ªæ‰€ä»¥åªéœ€è¦åˆ›å»ºå‰©ä¸‹çš„ä½æ•° while(i &gt; 0){ let a = arr[arr.length - 2]; let b = arr[arr.length - 1]; arr.push(a+b); i-- } return arr[arr.length - 1]; } ç¬¬äºŒç§ é€’å½’ countï¼šä¼ è¿›æ¥çš„number curï¼šæ”¾çš„æœ€ç»ˆå€¼ nextï¼šæ¯æ¬¡é€’å½’çš„æ—¶å€™ä½œä¸ºä¸‹ä¸€æ¬¡ cur çš„å€¼ï¼Œéœ€è¦æ¯æ¬¡ cur + next ](https://www.pipipi.net/wp-content/uploads/front-end-baike/01fcb9a1a61742a29a3c276a25a83e5d~tplv-k3u1fbpfcp-watermark.png) || || æ­é…é£Ÿç”¨ || fibonacci(count){ function fn(count,cur = 1,next = 1){ if(count == 0){ return cur }else { return fn(count - 1,next,cur+next) } } return fn(count) } å†’æ³¡æ’åº ç›¸é‚»ä¸¤å…ƒç´ ä¹‹é—´ä¸¤ä¸¤æ¯”è¾ƒï¼Œæ¯”è¾ƒå‡ºå¤§å€¼è¿›è¡Œèµ‹å€¼äº’æ¢ï¼Œå†ä¾æ¬¡ä¸ç›¸é‚»çš„å…ƒç´ æ¯”è¾ƒ å¿…é¡»è¦æ˜ç™½æ€»å…±æ¯”è¾ƒå‡ å›ï¼Œä¸€å›æ¯”è¾ƒå‡ æ¬¡ï¼ï¼ï¼ let arr = [1,2,3,5,8,0,10] // å¤–å±‚æ§åˆ¶æ¯”è¾ƒå‡ å› for(let i = 0; i &lt; arr.length - 1; i++){ // å†…å±‚æ§åˆ¶ä¸€å›æ¯”è¾ƒå‡ æ¬¡ï¼Œå¹¶ä¸”æ¯”è¾ƒå¤§å° for(let j = 0; j &lt; arr.length -1 -i; j++){ if(arr[j] &gt; arr[j + 1]){ let temp = arr[j]; arr[j] = arr[j+1]; arr[j+1] = temp; } } } å¿«é€Ÿæ’åº åˆ†ä¸‰æ­¥ å–å‡ºæ•°ç»„çš„ä¸­é—´å€¼ éå†æ•°ç»„ï¼Œå¤§äºçš„æ”¾åœ¨å³æ•°ç»„ï¼Œå°äºçš„æ”¾åœ¨å·¦è¾¹æ•°ç»„ é€’å½’å¹¶ä¸”ç”¨ concat è¿æ¥ let arr = [1,5,2,7,9,10,90,29,25,11,45,34]; function fast(arr){ if(arr.length &lt; 1) return arr; let num = Math.floor(arr.length / 2) let idx = arr.splice(num,1)[0]; let left = []; let right = []; for(let i = 0; i &lt; arr.length; i++){ if(arr[i] &lt; idx){ left.push(arr[i]) }else { right.push(arr[i]) } } return fast(left).concat(idx,fast(right)) } æ’å…¥æ’åº æ‹¿å‡ºä¸€ä¸ªå€¼ï¼Œä½œä¸ºåˆå§‹æ•°ç»„çš„å€¼ï¼Œ é€šè¿‡å¾ªç¯æƒ³è¦æ’åºçš„æ•°ç»„ å¹¶å’Œæ–°æ•°ç»„çš„å€¼ä»åå‘å‰æ¯” å¤§äºå°±spliceåˆ°è¯¥é¡¹åé¢ function insert(arr){ let handle = []; // è¿™æ˜¯æœ€ç»ˆæˆå‹çš„æ•°ç»„ handle.push(arr[0]); // å…ˆæ‹¿ä¸€ä¸ªå€¼ for(let i = 1; i&lt; arr.length; i++){ let news = arr[i]; for(let j = handle.length - 1; j &gt;= 0; j--){ //ä»åå‘å‰æ¯”è¾ƒ if(news &gt; handle[j]){ handle.splice(j+1,0,news); break; } if(j === 0){ // æ¯”åˆ°ä¸º0çš„è¯ç›´æ¥æ”¾åˆ°æ•°ç»„å¤´éƒ¨ handle.unshift(news); } } } return handle } å•é“¾è¡¨åè½¬ çœ‹åˆ°è¿™çš„è¯ï¼Œè¦æ˜ç™½å®ƒåè½¬åæ˜¯ä»€ä¹ˆæ · { a:4, next:{ a:3, next:{ a:2, next:{ a:1, next: null } } } } çœ‹åˆ°è¿™ï¼Œè‚¯å®šæ˜¯æœ‰ä¸ªå¤§æ¦‚çš„æ€è·¯ï¼Œå°±æ˜¯èŠ‚ç‚¹æ›¿æ¢ ](https://www.pipipi.net/wp-content/uploads/front-end-baike/e9030c138fbf4e0e8ba87222f3b66dff~tplv-k3u1fbpfcp-watermark.png) let obj = { a:1, next:{ a:2, next: { a:3, next:{ a:4, next:null } } } } function reverseObj(obj){ let pre = null; // pre æœ€ç»ˆçš„å€¼(åŒ…å«æ¯ä¸€æ­¥) let cur = obj while(cur.next !== null){ let context = cur.next; // é¦–å…ˆæ‹¿åˆ°ä¸‹ä¸€ä¸ªnextçš„å€¼ä¿å­˜ cur.next = pre === null ? null : pre; // preæ˜¯ä¸Šä¸€é¡¹ä¿å­˜çš„å€¼ pre = cur; // å°† å½“å‰é¡¹çš„å€¼èµ‹å€¼ç»™æœ€ç»ˆçš„å€¼ cur = context // æ‹¿åˆ°ä¸‹ä¸€é¡¹nextç»§ç»­é‡å¤ä»¥å•†æ“ä½œ } } ","link":"https://kangjn.github.io/post/suan-fa-xiao-ji/"},{"title":"å­¦ä¹ ç¬”è®°ï¼špromise","content":" thenæ¥æ”¶ä¸¤ä¸ªå‚æ•°, onFulfilled å’Œ onRejected æ£€æŸ¥å¹¶å¤„ç†å‚æ•°, å¦‚æœå‚æ•°ä¸æ˜¯functionå°±å¿½ç•¥(åŸæ ·è¿”å›valueæˆ–è€…reason) class MyPromise { constructor(fn) { // åˆå§‹çŠ¶æ€ä¸ºpending this.status = PENDING;//çŠ¶æ€ this.value = null;//æˆåŠŸçš„å€¼ this.reason = null;//å¤±è´¥çš„å€¼ try { fn(this.resolve.bind(this), this.reject.bind(this)); } catch (e) { this.reject(e); } } resolve(value) { if (this.status === PENDING) { //è¿™å±‚åˆ¤æ–­æ˜¯å› ä¸ºfulfilledçŠ¶æ€åªå¯ä»¥ç”±pendingçŠ¶æ€æ”¹å˜è€Œæ¥ this.status = FULFILLED; this.value = value; } } reject(reason) { if (this.status === PENDING) { //åŒç†è¿™å±‚åˆ¤æ–­æ˜¯å› ä¸ºrejectedçŠ¶æ€åªå¯ä»¥ç”±pendingçŠ¶æ€æ”¹å˜è€Œæ¥ this.status = REJECTED; this.reason = reason; } } then(onFulfilled, onRejected) { const fulFilledFn = this.isFunction(onFulfilled) ? onFulfilled : (value) =&gt; value const rejectedFn = this.isFunction(onRejected) ? onRejected : (reason) =&gt; { throw reason }; } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } } 3. æ ¹æ®å½“å‰promiseçš„çŠ¶æ€, è°ƒç”¨ä¸åŒçš„å‡½æ•° class MyPromise { ..... //è¿™æ—¶å€™thenå‡½æ•°è¢«è°ƒç”¨ä¼šç¬é—´å°±ä¼šæ‰§è¡Œswitchåˆ¤æ–­ï¼Œé‚£è¿™æ—¶å€™å¦‚æœstatuså¯èƒ½è¿˜æ²¡å˜æˆfulfilledæˆ–è€…rejectedï¼Œå¾ˆæœ‰å¯èƒ½è¿˜æ˜¯pending then(onFulfilled, onRejected) { const fulFilledFn = this.isFunction(onFulfilled) ? onFulfilled : (value) =&gt; value const rejectedFn = this.isFunction(onRejected) ? onRejected : (reason) =&gt; { throw reason }; switch (this.status) { case FULFILLED: { fulFilledFn(this.value); break; } case REJECTED: { rejectedFn(this.reason); break; } } } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } } 4ã€é¦–å…ˆè¦æ‹¿åˆ°æ‰€æœ‰çš„å›è°ƒ, ç„¶ååœ¨æŸä¸ªæ—¶æœºå»æ‰§è¡Œä»–. éœ€è¦æ–°å»ºä¸¤ä¸ªæ•°ç»„, åˆ†åˆ«å­˜å‚¨æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ, è°ƒç”¨thençš„æ—¶å€™, å¦‚æœè¿˜æ˜¯pendingå°±å­˜å…¥æ•°ç»„. class MyPromise { FULFILLED_CALLBACK_LIST = [] //å­˜å‚¨æˆåŠŸå›è°ƒ REJECTED_CALLBACK_LIST = [] //å­˜å‚¨å¤±è´¥å›è°ƒ ..... then(onFulfilled, onRejected) { const fulFilledFn = this.isFunction(onFulfilled) ? onFulfilled : (value) =&gt; value const rejectedFn = this.isFunction(onRejected) ? onRejected : (reason) =&gt; { throw reason }; switch (this.status) { case FULFILLED: { fulFilledFn(this.value); break; } case REJECTED: { rejectedFn(this.reason); break; } case PENDING: { this.FULFILLED_CALLBACK_LIST.push(fulFilledFn); this.REJECTED_CALLBACK_LIST.push(rejectedFn); break; } } } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } } 5ã€åœ¨statusçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™è°ƒç”¨æ•°ç»„é‡Œæ‰€æœ‰çš„å‡½æ•° class MyPromise { FULFILLED_CALLBACK_LIST = [] //å­˜å‚¨æˆåŠŸå›è°ƒ REJECTED_CALLBACK_LIST = [] //å­˜å‚¨å¤±è´¥å›è°ƒ ..... resolve(value) { if (this.status === PENDING) { //è¿™å±‚åˆ¤æ–­æ˜¯å› ä¸ºfulfilledçŠ¶æ€åªå¯ä»¥ç”±pendingçŠ¶æ€æ”¹å˜è€Œæ¥ this.status = FULFILLED; this.value = value; //æ‰§è¡Œå­˜å‚¨çš„å‡½æ•° this.FULFILLED_CALLBACK_LIST.forEach(callback =&gt; { callback(this.value); }); } } reject(reason) { if (this.status === PENDING) { //åŒç†è¿™å±‚åˆ¤æ–­æ˜¯å› ä¸ºrejectedçŠ¶æ€åªå¯ä»¥ç”±pendingçŠ¶æ€æ”¹å˜è€Œæ¥ this.status = REJECTED; this.reason = reason; //æ‰§è¡Œå­˜å‚¨çš„å‡½æ•° this.REJECTED_CALLBACK_LIST.forEach(callback =&gt; { callback(this.reason); }); } } then(onFulfilled, onRejected) { const fulFilledFn = this.isFunction(onFulfilled) ? onFulfilled : (value) =&gt; value const rejectedFn = this.isFunction(onRejected) ? onRejected : (reason) =&gt; { throw reason }; switch (this.status) { case FULFILLED: { fulFilledFn(this.value); break; } case REJECTED: { rejectedFn(this.reason); break; } case PENDING: { this.FULFILLED_CALLBACK_LIST.push(fulFilledFn); this.REJECTED_CALLBACK_LIST.push(rejectedFn); break; } } } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } } 7ã€thençš„è¿”å›å€¼ æƒ…å†µ1ï¼šå¦‚æœ onFulfilled æˆ–è€… onRejected æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ e ï¼Œåˆ™æ–°promiseå¿…é¡»reject e class MyPromise { FULFILLED_CALLBACK_LIST = [] //å­˜å‚¨æˆåŠŸå›è°ƒ REJECTED_CALLBACK_LIST = [] //å­˜å‚¨å¤±è´¥å›è°ƒ ..... then(onFulfilled, onRejected) { const fulFilledFn = this.isFunction(onFulfilled) ? onFulfilled : (value) =&gt; value const rejectedFn = this.isFunction(onRejected) ? onRejected : (reason) =&gt; { throw reason }; const fulFilledFnWithCatch = (resolve, reject) =&gt; { try { fulFilledFn(this.value); } catch (e) { reject(e) } }; const rejectedFnWithCatch = (resolve, reject) =&gt; { try { rejectedFn(this.reason); } catch (e) { reject(e); } } switch (this.status) { case FULFILLED: { return new MyPromise(fulFilledFnWithCatch); } case REJECTED: { return new MyPromise(rejectedFnWithCatch); } case PENDING: { return new MyPromise((resolve, reject) =&gt; { this.FULFILLED_CALLBACK_LIST.push(() =&gt; fulFilledFnWithCatch(resolve, reject)); this.REJECTED_CALLBACK_LIST.push(() =&gt; rejectedFnWithCatch(resolve, reject)); }); } } } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } } æƒ…å†µ2ï¼šå¦‚æœonFulfilledä¸æ˜¯å‡½æ•°ä¸”promiseæˆåŠŸæ‰§è¡Œï¼Œé‚£ä¹ˆæ–°çš„promiseå¿…é¡»è¿”å›åŒæ ·çš„çŠ¶æ€å’Œval æƒ…å†µ3ï¼šå¦‚æœonRejectedä¸æ˜¯å‡½æ•°ä¸”promiseæ‹’ç»æ‰§è¡Œï¼Œé‚£ä¹ˆæ–°çš„promiseå¿…é¡»è¿”å›åŒæ ·çš„çŠ¶æ€å’Œreason class MyPromise { FULFILLED_CALLBACK_LIST = [] //å­˜å‚¨æˆåŠŸå›è°ƒ REJECTED_CALLBACK_LIST = [] //å­˜å‚¨å¤±è´¥å›è°ƒ ..... then(onFulfilled, onRejected) { const fulFilledFn = this.isFunction(onFulfilled) ? onFulfilled : (value) =&gt; value const rejectedFn = this.isFunction(onRejected) ? onRejected : (reason) =&gt; { throw reason }; const fulFilledFnWithCatch = (resolve, reject) =&gt; { try { fulFilledFn(this.value); resolve(this.value); } catch (e) { reject(e) } }; const rejectedFnWithCatch = (resolve, reject) =&gt; { try { rejectedFn(this.reason); if (this.isFunction(onRejected)) { resolve(); } } catch (e) { reject(e); } } switch (this.status) { case FULFILLED: { return new MyPromise(fulFilledFnWithCatch); } case REJECTED: { return new MyPromise(rejectedFnWithCatch); } case PENDING: { return new MyPromise((resolve, reject) =&gt; { this.FULFILLED_CALLBACK_LIST.push(() =&gt; fulFilledFnWithCatch(resolve, reject)); this.REJECTED_CALLBACK_LIST.push(() =&gt; rejectedFnWithCatch(resolve, reject)); }); } } } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } } æƒ…å†µ4:å¦‚æœonFulfilledæˆ–è€…onRejected è¿”å›ä¸€ä¸ªå€¼ x ï¼Œåˆ™è¿è¡ŒresolvePromiseæ–¹æ³• class MyPromise { FULFILLED_CALLBACK_LIST = [] //å­˜å‚¨æˆåŠŸå›è°ƒ REJECTED_CALLBACK_LIST = [] //å­˜å‚¨å¤±è´¥å›è°ƒ ..... const fulFilledFnWithCatch = (resolve, reject, newPromise) =&gt; { try { if (!this.isFunction(onFulfilled)) { resolve(this.value); } else { const x = fulFilledFn(this.value); this.resolvePromise(newPromise, x, resolve, reject); } } catch (e) { reject(e) } }; const rejectedFnWithCatch = (resolve, reject, newPromise) =&gt; { try { if (!this.isFunction(onRejected)) { reject(this.reason); } else { const x = rejectedFn(this.reason); this.resolvePromise(newPromise, x, resolve, reject); } } catch (e) { reject(e); } } switch (this.status) { case FULFILLED: { const newPromise = new MyPromise((resolve, reject) =&gt; fulFilledFnWithCatch(resolve, reject, newPromise)); return newPromise; } case REJECTED: { const newPromise = new MyPromise((resolve, reject) =&gt; rejectedFnWithCatch(resolve, reject, newPromise)); return newPromise; } case PENDING: { const newPromise = new MyPromise((resolve, reject) =&gt; { this.FULFILLED_CALLBACK_LIST.push(() =&gt; fulFilledFnWithCatch(resolve, reject, newPromise)); this.REJECTED_CALLBACK_LIST.push(() =&gt; rejectedFnWithCatch(resolve, reject, newPromise)); }); return newPromise; } } //æ£€éªŒæ˜¯å¦ä¸ºfunction isFunction(param) { return typeof param === 'function'; } resolvePromise(newPromise, x, resolve, reject){} } 8ã€resolvePromise resolvePromise(newPromise, x, resolve, reject) { // é˜²æ­¢æ­»å¾ªç¯ if (newPromise === x) { return reject(new TypeError('The promise and the return value are the same')); } if (x instanceof MPromise) { x.then((y) =&gt; { resolvePromise(newPromise, y, resolve, reject); }, reject); } else if (typeof x === 'object' || this.isFunction(x)) { if (x === null) { return resolve(x); } let then = null; try { then = x.then; } catch (error) { return reject(error); } // å¦‚æœ then æ˜¯å‡½æ•° if (this.isFunction(then)) { let called = false; try { then.call( x, (y) =&gt; { if (called) return; called = true; resolvePromise(promise, y, resolve, reject); }, (r) =&gt; { if (called) return; called = true; reject(r); }); } catch (error) { if (called) return; reject(error); } } else { resolve(x); } } else { resolve(x); } } 9ã€onFulfilled å’Œ onRejected æ˜¯å¾®ä»»åŠ¡ then(onFulfilled, onRejected) { ... const fulFilledFnWithCatch = (resolve, reject, newPromise) =&gt; { queueMicrotask(() =&gt; { try { if (!this.isFunction(onFulfilled)) { resolve(this.value); } else { const x = fulFilledFn(this.value); this.resolvePromise(newPromise, x, resolve, reject); } } catch (e) { reject(e) } }) }; const rejectedFnWithCatch = (resolve, reject, newPromise) =&gt; { queueMicrotask(() =&gt; { try { if (!this.isFunction(onRejected)) { reject(this.reason); } else { const x = rejectedFn(this.reason); this.resolvePromise(newPromise, x, resolve, reject); } } catch (e) { reject(e); } }) } switch (this.status) { case FULFILLED: { const newPromise = new MPromise((resolve, reject) =&gt; fulFilledFnWithCatch(resolve, reject, newPromise)); return newPromise; } case REJECTED: { const newPromise = new MPromise((resolve, reject) =&gt; rejectedFnWithCatch(resolve, reject, newPromise)); return newPromise; } case PENDING: { const newPromise = new MPromise((resolve, reject) =&gt; { this.FULFILLED_CALLBACK_LIST.push(() =&gt; fulFilledFnWithCatch(resolve, reject, newPromise)); this.REJECTED_CALLBACK_LIST.push(() =&gt; rejectedFnWithCatch(resolve, reject, newPromise)); }); return newPromise; } } } 10. catchæ–¹æ³• catch (onRejected) { return this.then(null, onRejected); } 11. promise.resolve(é™æ€æ–¹æ³•) å°†ç°æœ‰å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°ï¼Œä¸æ˜¯å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼ˆåˆç§° thenable å¯¹è±¡ï¼‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œä¸”å®ƒçš„çŠ¶æ€ä¸ºfulfilledã€‚ static resolve(param) { if (param instanceof MyPromise) { return param; } return new MyPromise(function (resolve) { resolve(param); }); } 12. promise.reject(é™æ€æ–¹æ³•) è¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸ºrejectedã€‚Promise.rejectæ–¹æ³•çš„å‚æ•°reasonï¼Œä¼šè¢«ä¼ é€’ç»™å®ä¾‹çš„å›è°ƒå‡½æ•°ã€‚ static reject(reason) { return new MPromise((resolve, reject) =&gt; { reject(reason); }); } ","link":"https://kangjn.github.io/post/xue-xi-bi-ji-promise/"},{"title":"å‰ç«¯å­¦ä¹ -Vue","content":"æ ¸å¿ƒç‰¹æ€§ æ•°æ®é©±åŠ¨è§†å›¾ æ•°æ®å˜åŒ–ä¼šè‡ªåŠ¨æ›´æ–°åˆ°å¯¹åº”å…ƒç´ ä¸­ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ DOMï¼Œè¿™ç§è¡Œä¸ºç§°ä½œå•å‘æ•°æ®ç»‘å®šã€‚ å¯¹äºè¾“å…¥æ¡†ç­‰å¯è¾“å…¥å…ƒç´ ï¼Œå¯è®¾ç½®åŒå‘æ•°æ®ç»‘å®šã€‚ åŒå‘æ•°æ®ç»‘å®šæ˜¯åœ¨æ•°æ®ç»‘å®šåŸºç¡€ä¸Šï¼Œå¯è‡ªåŠ¨å°†å…ƒç´ è¾“å…¥å†…å®¹æ›´æ–°ç»™æ•°æ®ï¼Œ å®ç°æ•°æ®ä¸å…ƒç´ å†…å®¹çš„åŒå‘ç»‘å®šã€‚ Vue.js çš„æ•°æ®é©±åŠ¨è§†å›¾æ˜¯åŸºäº MVVM æ¨¡å‹å®ç°çš„ã€‚ MVVM (Model â€“ View â€“ ViewModel )æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ€æƒ³ Model å±‚ï¼Œä»£è¡¨æ•°æ® View å±‚ï¼Œ ä»£è¡¨è§†å›¾æ¨¡æ¿ ViewModel å±‚ï¼Œä»£è¡¨ä¸šåŠ¡é€»è¾‘å¤„ç†ä»£ç  åŸºäºMVVM æ¨¡å‹å®ç°çš„æ•°æ®é©±åŠ¨è§†å›¾è§£æ”¾äº†DOMæ“ä½œ View ä¸ Model å¤„ç†åˆ†ç¦»ï¼Œé™ä½ä»£ç è€¦åˆåº¦ ä½†åŒå‘ç»‘å®šæ—¶çš„ Bug è°ƒè¯•éš¾åº¦å¢å¤§ å¤§å‹é¡¹ç›®çš„ View ä¸ Model è¿‡å¤šï¼Œç»´æŠ¤æˆæœ¬é«˜ ç»„ä»¶åŒ–å¼€å‘ ç»„ä»¶åŒ–å¼€å‘ï¼Œå…è®¸æˆ‘ä»¬å°†ç½‘é¡µåŠŸèƒ½å°è£…ä¸ºè‡ªå®šä¹‰ HTML æ ‡ç­¾ï¼Œå¤ç”¨æ—¶ä¹¦å†™è‡ªå®šä¹‰æ ‡ç­¾åå³å¯ã€‚ ç»„ä»¶ä¸ä»…å¯ä»¥å°è£…ç»“æ„ï¼Œè¿˜å¯ä»¥å°è£…æ ·å¼ä¸é€»è¾‘ä»£ç ï¼Œå¤§å¤§æäº¤ äº†å¼€å‘æ•ˆç‡ä¸å¯ç»´æŠ¤æ€§ã€‚ åŸºç¡€è¯­æ³• Vue å®ä¾‹ é€šè¿‡ Vue å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯ä½¿ç”¨ Vue åŠŸèƒ½çš„åŸºç¡€ã€‚ new Vue({ //é€‰é¡¹å¯¹è±¡ }); el é€‰é¡¹ ç”¨äºé€‰å–ä¸€ä¸ª DOM å…ƒç´ ä½œä¸º Vue å®ä¾‹çš„æŒ‚è½½ç›®æ ‡ã€‚ åªæœ‰æŒ‚è½½å…ƒç´ å†…éƒ¨æ‰ä¼šè¢« Vue è¿›è¡Œå¤„ç†ï¼Œå¤–éƒ¨ä¸ºæ™®é€š HTML å…ƒç´ ã€‚ ä»£è¡¨ MVVM ä¸­çš„ View å±‚(è§†å›¾)ã€‚ å¯ä»¥ä¸º CSS é€‰æ‹©å™¨æ ¼å¼çš„å­—ç¬¦ä¸² æˆ– HTMLElement å®ä¾‹ï¼Œä½†ä¸èƒ½ä¸º html æˆ– bodyã€‚ var vm = new Vue({ el: '#app' }); var app = document.querySelector('#app'); var vm = new Vue({ el: app }); æŒ‚è½½å®Œæ¯•åï¼Œå¯ä»¥é€šè¿‡ vm.$el è¿›è¡Œè®¿é—®ã€‚ var vm = new Vue({ el: '#app' }); console.log(vm.$el); æœªè®¾ç½® el çš„ vue å®ä¾‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ vm.$mount() è¿›è¡ŒæŒ‚è½½ï¼Œå‚æ•°å½¢å¼ä¸ el è§„åˆ™ç›¸åŒã€‚ var app = document.getElementById('app'); var vm = new Vue({}); vm.$mount(app); æ’å€¼è¡¨è¾¾å¼ æŒ‚è½½å…ƒç´ å¯ä»¥ä½¿ç”¨ Vue.js çš„æ¨¡æ¿è¯­æ³•ï¼Œæ¨¡æ¿ä¸­å¯ä»¥é€šè¿‡æ’å€¼è¡¨è¾¾å¼ä¸ºå…ƒç´ è¿›è¡ŒåŠ¨æ€å†…å®¹è®¾ç½®ï¼Œå†™æ³•ä¸º {{ }}ã€‚ &lt;li&gt;ç¬¬ä¸€æ®µç¤ºä¾‹å†…å®¹ï¼š{{ 10 + 20 + 30 }}&lt;/li&gt; &lt;li&gt;ç¬¬äºŒæ®µç¤ºä¾‹å†…å®¹ï¼š{{ 22 &gt; 3 ? '22æ¯”3å¤§' : '3æ¯”22å¤§' }}&lt;/li&gt; &lt;!-- é”™è¯¯å†™æ³• --&gt; &lt;!-- &lt;li id=&quot;{{ 1 + 2 }}&quot;&gt;&lt;/li&gt; --&gt; &lt;!-- &lt;li&gt;{{ var num = 100; }}&lt;/li&gt; --&gt; æ³¨æ„ç‚¹: æ’å€¼è¡¨è¾¾å¼åªèƒ½ä¹¦å†™åœ¨æ ‡ç­¾å†…å®¹åŒºåŸŸï¼Œå¯ä»¥ä¸å…¶å®ƒå†…å®¹æ··åˆã€‚ å†…éƒ¨åªèƒ½ä¹¦å†™ JavaScript è¡¨è¾¾å¼ï¼Œä¸èƒ½ä¹¦å†™è¯­å¥ã€‚ data é€‰é¡¹ ç”¨äºå­˜å‚¨ Vue å®ä¾‹éœ€è¦ä½¿ç”¨çš„æ•°æ®ï¼Œå€¼ä¸ºå¯¹è±¡ç±»å‹ã€‚ data ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡ vm.$data.æ•°æ® æˆ– vm.æ•°æ® è®¿é—®ã€‚ var vm = new Vue({ el: '#app', data: { title: 'æ ‡é¢˜æ–‡æœ¬' } }); console.log(vm.$data.title); console.log(vm.title); data ä¸­çš„æ•°æ®å¯ä»¥ç›´æ¥åœ¨è§†å›¾ä¸­é€šè¿‡æ’å€¼è¡¨è¾¾å¼è®¿é—®ã€‚ data ä¸­çš„æ•°æ®ä¸ºå“åº”å¼æ•°æ®ï¼Œåœ¨å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ &lt;div id=&quot;app&quot;&gt; &lt;p&gt;{{ title }}&lt;/p&gt; &lt;/div&gt; &lt;script&gt; var vm = new Vue({ el: '#app', data: { title: 'æ ‡é¢˜æ–‡æœ¬', } }); vm.title = 'æ–°çš„æ ‡é¢˜å†…å®¹'; &lt;/script&gt; data ä¸­å­˜åœ¨æ•°ç»„æ—¶ï¼Œç´¢å¼•æ“ä½œä¸ length æ“ä½œæ— æ³•è‡ªåŠ¨æ›´æ–°è§†å›¾ï¼Œ è¿™æ—¶å¯ä»¥å€ŸåŠ© Vue.set() æ–¹æ³•æ›¿ä»£æ“ä½œã€‚ var vm = new Vue({ el: '#app', data: { arr: ['å†…å®¹1', 'å†…å®¹2', 'å†…å®¹3'] } }); Vue.set(vm.arr, 0, 'æ–°å†…å®¹'); methods é€‰é¡¹ ç”¨äºå­˜å‚¨éœ€è¦åœ¨ Vue å®ä¾‹ä¸­ä½¿ç”¨çš„å‡½æ•°ã€‚ methods ä¸­çš„æ–¹æ³•å¯ä»¥é€šè¿‡ vm.æ–¹æ³•å è®¿é—®ã€‚ æ–¹æ³•ä¸­çš„ this ä¸º vm å®ä¾‹ï¼Œå¯ä»¥ä¾¿æ·çš„è®¿é—® vm æ•°æ®ç­‰åŠŸèƒ½ã€‚ &lt;div id=&quot;app&quot;&gt; &lt;p&gt;{{ fn(title1) }}&lt;/p&gt; &lt;p&gt;{{ fn(title2) }}&lt;/p&gt; &lt;p&gt;{{ title1.split('-').join('') }}&lt;/p&gt; &lt;p&gt;{{ title2.split('-').join('') }}&lt;/p&gt; &lt;/div&gt; &lt;script&gt; var vm = new Vue({ el: '#app', data: { prefix: 'å¤„ç†çš„ç»“æœä¸ºï¼š', title1: 'a-b-c-d-e', title2: 'x-y-z' }, methods: { fn (value) { // console.log(this); this.fn1(); this.fn2(); return this.prefix + value.split('-').join(''); }, fn1 () { console.log('æ‰§è¡Œäº† fn1 çš„ä»£ç '); }, fn2 () { console.log('æ‰§è¡Œäº† fn2 çš„ä»£ç '); } } }); // console.log(vm) &lt;/script&gt; ","link":"https://kangjn.github.io/post/qian-duan-xue-xi-vue/"},{"title":"springboot-æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½","content":"springboot-æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ ä»£ç  application.yml spring: servlet: multipart: max-file-size: 50MB #ä¸Šä¼ æ–‡ä»¶æœ€å¤§å¤§å° max-request-size: 50MB #å•æ¬¡è¯·æ±‚æœ€å¤§å¤§å° # è‡ªå®šä¹‰æ–‡ä»¶ä¸Šä¼ è·¯å¾„ web: upload-path: C:/Users/Ericam/Desktop/JustCoding/src/main/resources/static/photos/ ps : è·¯å¾„ä¸­ä¸èƒ½åŒ…å«ä¸­æ–‡ï¼Œä¸ç„¶æ— æ³•è¯»å– FileUtils (æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±») package cn.justcoding.util; import org.springframework.web.multipart.MultipartFile; import java.io.File; import java.io.IOException; /** * æ–‡ä»¶ä¸Šä¼ å·¥å…·åŒ… */ public class FileUtils { /** * * @param file æ–‡ä»¶ * @param path æ–‡ä»¶å­˜æ”¾è·¯å¾„ * @param fileName æºæ–‡ä»¶å * @return */ public static boolean upload(MultipartFile file, String path, String fileName){ //ä½¿ç”¨åŸæ–‡ä»¶å String realPath = path + &quot;/&quot; +fileName; File dest = new File(realPath); //åˆ¤æ–­æ–‡ä»¶çˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨ if(!dest.getParentFile().exists()){ dest.getParentFile().mkdir(); } try { //ä¿å­˜æ–‡ä»¶ file.transferTo(dest); return true; } catch (IllegalStateException e) { // TODO Auto-generated catch block e.printStackTrace(); return false; } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); return false; } } } TestController(è¿›è¡Œæµ‹è¯•) @Controller public class TestController { private final ResourceLoader resourceLoader; @Value(&quot;${web.upload-path}&quot;) private String path; @Autowired public TestController(ResourceLoader resourceLoader) { this.resourceLoader = resourceLoader; } /** * è·³è½¬åˆ°æ–‡ä»¶ä¸Šä¼ é¡µé¢ * @return */ @RequestMapping(&quot;test&quot;) public String toUpload(){ return &quot;freemarker/test&quot;; } /** * * @param file è¦ä¸Šä¼ çš„æ–‡ä»¶ * @return */ @RequestMapping(&quot;fileUpload&quot;) public String upload(@RequestParam(&quot;fileName&quot;) MultipartFile file, Map&lt;String, Object&gt; map){ // è¦ä¸Šä¼ çš„ç›®æ ‡æ–‡ä»¶å­˜æ”¾è·¯å¾„ // String localPath = &quot;/src/main/resources/static/photos&quot;; // ä¸Šä¼ æˆåŠŸæˆ–è€…å¤±è´¥çš„æç¤º String msg = &quot;&quot;; if (FileUtils.upload(file, path, file.getOriginalFilename())){ // ä¸Šä¼ æˆåŠŸï¼Œç»™å‡ºé¡µé¢æç¤º msg = &quot;ä¸Šä¼ æˆåŠŸï¼&quot;; }else { msg = &quot;ä¸Šä¼ å¤±è´¥ï¼&quot;; } // æ˜¾ç¤ºå›¾ç‰‡ map.put(&quot;msg&quot;, msg); map.put(&quot;fileName&quot;, file.getOriginalFilename()); return &quot;forward:/test&quot;; } /** * æ˜¾ç¤ºå•å¼ å›¾ç‰‡ * @return */ @RequestMapping(&quot;show&quot;) public ResponseEntity showPhotos(String fileName){ try { // ç”±äºæ˜¯è¯»å–æœ¬æœºçš„æ–‡ä»¶ï¼Œfileæ˜¯ä¸€å®šè¦åŠ ä¸Šçš„ï¼Œ pathæ˜¯åœ¨applicationé…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„ // System.out.println(fileName); return ResponseEntity.ok(resourceLoader.getResource(&quot;file:&quot; + path + fileName)); } catch (Exception e) { return ResponseEntity.notFound().build(); } } @RequestMapping(&quot;batch&quot;) public String handleFileUpload(HttpServletRequest request, Map&lt;String, Object&gt; map) { List&lt;MultipartFile&gt; files = ((MultipartHttpServletRequest) request).getFiles(&quot;file&quot;); MultipartFile file = null; BufferedOutputStream stream = null; String msg = &quot;&quot;; for (int i = 0; i &lt; files.size(); ++i) { file = files.get(i); if (!file.isEmpty()) { try { byte[] bytes = file.getBytes(); stream = new BufferedOutputStream(new FileOutputStream( new File(path + file.getOriginalFilename())));//è®¾ç½®æ–‡ä»¶è·¯å¾„åŠåå­— stream.write(bytes);// å†™å…¥ stream.close(); } catch (Exception e) { stream = null; msg= &quot;ç¬¬ &quot; + i + &quot; ä¸ªæ–‡ä»¶ä¸Šä¼ å¤±è´¥ ==&gt; &quot; + e.getMessage(); } } else { msg= &quot;ç¬¬ &quot; + i + &quot; ä¸ªæ–‡ä»¶ä¸Šä¼ å¤±è´¥å› ä¸ºæ–‡ä»¶ä¸ºç©º&quot;; } } msg= &quot;ä¸Šä¼ æˆåŠŸ&quot;; map.put(&quot;msg&quot;, msg); return &quot;forward:/test&quot;; } @RequestMapping(&quot;/download&quot;) public String downloadFile(HttpServletRequest request, String fileName,HttpServletResponse response,Map&lt;String, Object&gt; map) { String msg = &quot;&quot;; if (fileName != null) { //è®¾ç½®æ–‡ä»¶è·¯å¾„ File file = new File(path+fileName); //File file = new File(realPath , fileName); if (file.exists()) { response.setContentType(&quot;application/force-download&quot;);// è®¾ç½®å¼ºåˆ¶ä¸‹è½½ä¸æ‰“å¼€ response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment;fileName=&quot; + fileName);// è®¾ç½®æ–‡ä»¶å byte[] buffer = new byte[1024]; FileInputStream fis = null; BufferedInputStream bis = null; try { fis = new FileInputStream(file); bis = new BufferedInputStream(fis); OutputStream os = response.getOutputStream(); int i = bis.read(buffer); while (i != -1) { os.write(buffer, 0, i); i = bis.read(buffer); } msg = &quot;ä¸‹è½½æˆåŠŸ&quot;; } catch (Exception e) { e.printStackTrace(); } finally { if (bis != null) { try { bis.close(); } catch (IOException e) { e.printStackTrace(); } } if (fis != null) { try { fis.close(); } catch (IOException e) { e.printStackTrace(); } } } } } msg = &quot;ä¸‹è½½å¤±è´¥&quot;; map.put(&quot;msg&quot;, msg); return &quot;forward:/test&quot;; } } test.ytl (ç®€æ˜“freemarkeræµ‹è¯•æ¨¡æ¿) &lt;!DOCTYPE html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;å›¾ç‰‡ä¸Šä¼ Demo&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1 &gt;å›¾ç‰‡ä¸Šä¼ Demo&lt;/h1&gt; &lt;form action=&quot;fileUpload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;p&gt;é€‰æ‹©æ–‡ä»¶: &lt;input type=&quot;file&quot; name=&quot;fileName&quot;/&gt;&lt;/p&gt; &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;/&gt;&lt;/p&gt; &lt;/form&gt; &lt;#--åˆ¤æ–­æ˜¯å¦ä¸Šä¼ æ–‡ä»¶--&gt; &lt;#if msg??&gt; &lt;span&gt;${msg}&lt;/span&gt;&lt;br&gt; &lt;#else &gt; &lt;span&gt;${msg!(&quot;æ–‡ä»¶æœªä¸Šä¼ &quot;)}&lt;/span&gt;&lt;br&gt; &lt;/#if&gt; &lt;#--æ˜¾ç¤ºå›¾ç‰‡ï¼Œä¸€å®šè¦åœ¨imgä¸­çš„srcå‘è¯·æ±‚ç»™controllerï¼Œå¦åˆ™ç›´æ¥è·³è½¬æ˜¯ä¹±ç --&gt; &lt;#if fileName??&gt; &lt;img src=&quot;/show?fileName=${fileName}&quot; style=&quot;width: 200px&quot;/&gt; &lt;#else&gt; &lt;img src=&quot;/show&quot; style=&quot;width: 100px&quot;/&gt; &lt;/#if&gt; &lt;hr/&gt; &lt;p&gt;å¤šæ–‡ä»¶ä¸Šä¼ &lt;/p&gt; &lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; action=&quot;batch&quot;&gt; &lt;p&gt;æ–‡ä»¶1ï¼š&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;&lt;/p&gt; &lt;p&gt;æ–‡ä»¶2ï¼š&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;&lt;/p&gt; &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;&lt;/p&gt; &lt;/form&gt; &lt;hr/&gt; &lt;p&gt;æ–‡ä»¶ä¸‹è½½&lt;/p&gt; &lt;a href=&quot;download?fileName=${fileName}&quot;&gt;ä¸‹è½½æ–‡ä»¶&lt;/a&gt; &lt;/body&gt; &lt;/html&gt; ","link":"https://kangjn.github.io/post/springboot-wen-jian-shang-chuan-xia-zai/"},{"title":"springboot-7.å¿«é€Ÿä¸Šæ‰‹redis","content":"springboot-7.å¿«é€Ÿä¸Šæ‰‹redis å‰è¨€ ä¸ºä»€ä¹ˆéœ€è¦Redis? åœ¨æ¶‰åŠå¤§æ•°æ®é‡çš„éœ€æ±‚ï¼Œæ¯”å¦‚ä¸€äº›å•†å“æŠ¢è´­çš„æƒ…æ™¯ï¼Œæˆ–è€…æ˜¯ä¸»é¡µè®¿é—®é‡ç¬é—´è¾ƒå¤§çš„æ—¶å€™ï¼Œå•ä¸€ä½¿ç”¨æ•°æ®åº“æ¥ä¿å­˜æ•°æ®çš„ç³»ç»Ÿä¼šå› ä¸ºé¢å‘ç£ç›˜ï¼Œç£ç›˜è¯»/å†™é€Ÿåº¦æ¯”è¾ƒæ…¢çš„é—®é¢˜è€Œå­˜åœ¨ä¸¥é‡çš„æ€§èƒ½å¼Šç«¯ï¼Œä¸€ç¬é—´æˆåƒä¸Šä¸‡çš„è¯·æ±‚åˆ°æ¥ï¼Œéœ€è¦ç³»ç»Ÿåœ¨æçŸ­çš„æ—¶é—´å†…å®Œæˆæˆåƒä¸Šä¸‡æ¬¡çš„è¯»/å†™æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å¾€å¾€ä¸æ˜¯æ•°æ®åº“èƒ½å¤Ÿæ‰¿å—çš„ï¼Œæå…¶å®¹æ˜“é€ æˆæ•°æ®åº“ç³»ç»Ÿç˜«ç—ªï¼Œæœ€ç»ˆå¯¼è‡´æœåŠ¡å®•æœºçš„ä¸¥é‡ç”Ÿäº§é—®é¢˜ã€‚ ä¸ºäº†å…‹æœä¸Šè¿°çš„é—®é¢˜ï¼ŒJava Webé¡¹ç›®é€šå¸¸ä¼šå¼•å…¥NoSQLæŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€ç§åŸºäºå†…å­˜çš„æ•°æ®åº“ï¼Œå¹¶ä¸”æä¾›ä¸€å®šçš„æŒä¹…åŒ–åŠŸèƒ½ã€‚ Redisåœ¨java webä¸­çš„åº”ç”¨åœºæ™¯ å­˜å‚¨ ç¼“å­˜ç”¨çš„æ•°æ®ï¼› éœ€è¦é«˜é€Ÿè¯»/å†™çš„åœºåˆä½¿ç”¨å®ƒå¿«é€Ÿè¯»/å†™ï¼› Redisä½œä¸ºç¼“å­˜çš„è¯»å–é€»è¾‘ ä¸‹è½½å®‰è£…redis ä¸‹è½½åœ°å€ï¼šhttps://github.com/ServiceStack/redis-windows/tree/master/downloads é€‰æ‹©æœ€æ–°ç‰ˆä¸‹è½½ä¸€ä¸ªå³å¯ï¼Œä¸‹è½½å®Œåè§£å‹ä¾¿å¯ä½¿ç”¨ã€‚ ä¸ºäº†æ–¹ä¾¿å¯åŠ¨ï¼Œæˆ‘ä»¬åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª startup.cmd çš„æ–‡ä»¶ï¼Œç„¶åå°†ä»¥ä¸‹å†…å®¹å†™å…¥æ–‡ä»¶ï¼š redis-server redis.windows.conf è¿™ä¸ªå‘½ä»¤å…¶å®å°±æ˜¯åœ¨è°ƒç”¨ redis-server.exe å‘½ä»¤æ¥è¯»å– redis.window.conf çš„å†…å®¹ï¼Œæˆ‘ä»¬åŒå‡»åˆšæ‰åˆ›å»ºå¥½çš„ startup.cmd æ–‡ä»¶ï¼Œå°±èƒ½æˆåŠŸçš„çœ‹åˆ° Redis å¯åŠ¨ï¼š ä¸‹è½½å®‰è£…rediså¯è§†åŒ–å·¥å…· RedisDesktopManager springbooté…ç½®ä½¿ç”¨redis ï¼ˆ1ï¼‰åœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–é¡¹ &lt;!-- Redis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; (2) ç¼–å†™application.yml spring: # redis redis: host: 127.0.0.1 port: 6379 timeout: 3000 #è¿æ¥è¶…æ—¶ password: minIdle: 1 #è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥ maxIdle: 10 maxWait: 3 #è¿æ¥æ± ä¸­çš„æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ maxActive: 8 #è¿æ¥æ± æœ€å¤§è¿æ¥æ•° (3)æ–°å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š (4)Reidisé…ç½®æ–‡ä»¶-RedisConfig.java import com.fasterxml.jackson.annotation.JsonAutoDetect; import com.fasterxml.jackson.annotation.PropertyAccessor; import com.fasterxml.jackson.databind.ObjectMapper; import org.springframework.cache.annotation.CachingConfigurerSupport; import org.springframework.cache.annotation.EnableCaching; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.data.redis.connection.RedisConnectionFactory; import org.springframework.data.redis.core.*; import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer; import org.springframework.data.redis.serializer.StringRedisSerializer; @Configuration @EnableCaching //å¼€å¯æ³¨è§£ public class RedisConfig extends CachingConfigurerSupport { /** * retemplateç›¸å…³é…ç½® * @param factory * @return */ @Bean public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory factory) { RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;(); // é…ç½®è¿æ¥å·¥å‚ template.setConnectionFactory(factory); //ä½¿ç”¨Jackson2JsonRedisSerializeræ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–redisçš„valueå€¼ï¼ˆé»˜è®¤ä½¿ç”¨JDKçš„åºåˆ—åŒ–æ–¹å¼ï¼‰ Jackson2JsonRedisSerializer jacksonSeial = new Jackson2JsonRedisSerializer(Object.class); ObjectMapper om = new ObjectMapper(); // æŒ‡å®šè¦åºåˆ—åŒ–çš„åŸŸï¼Œfield,getå’Œset,ä»¥åŠä¿®é¥°ç¬¦èŒƒå›´ï¼ŒANYæ˜¯éƒ½æœ‰åŒ…æ‹¬privateå’Œpublic om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); // æŒ‡å®šåºåˆ—åŒ–è¾“å…¥çš„ç±»å‹ï¼Œç±»å¿…é¡»æ˜¯éfinalä¿®é¥°çš„ï¼Œfinalä¿®é¥°çš„ç±»ï¼Œæ¯”å¦‚String,Integerç­‰ä¼šè·‘å‡ºå¼‚å¸¸ om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jacksonSeial.setObjectMapper(om); // å€¼é‡‡ç”¨jsonåºåˆ—åŒ– template.setValueSerializer(jacksonSeial); //ä½¿ç”¨StringRedisSerializeræ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–redisçš„keyå€¼ template.setKeySerializer(new StringRedisSerializer()); // è®¾ç½®hash key å’Œvalueåºåˆ—åŒ–æ¨¡å¼ template.setHashKeySerializer(new StringRedisSerializer()); template.setHashValueSerializer(jacksonSeial); template.afterPropertiesSet(); return template; } /** * å¯¹hashç±»å‹çš„æ•°æ®æ“ä½œ * * @param redisTemplate * @return */ @Bean public HashOperations&lt;String, String, Object&gt; hashOperations(RedisTemplate&lt;String, Object&gt; redisTemplate) { return redisTemplate.opsForHash(); } /** * å¯¹rediså­—ç¬¦ä¸²ç±»å‹æ•°æ®æ“ä½œ * * @param redisTemplate * @return */ @Bean public ValueOperations&lt;String, Object&gt; valueOperations(RedisTemplate&lt;String, Object&gt; redisTemplate) { return redisTemplate.opsForValue(); } /** * å¯¹é“¾è¡¨ç±»å‹çš„æ•°æ®æ“ä½œ * * @param redisTemplate * @return */ @Bean public ListOperations&lt;String, Object&gt; listOperations(RedisTemplate&lt;String, Object&gt; redisTemplate) { return redisTemplate.opsForList(); } /** * å¯¹æ— åºé›†åˆç±»å‹çš„æ•°æ®æ“ä½œ * * @param redisTemplate * @return */ @Bean public SetOperations&lt;String, Object&gt; setOperations(RedisTemplate&lt;String, Object&gt; redisTemplate) { return redisTemplate.opsForSet(); } /** * å¯¹æœ‰åºé›†åˆç±»å‹çš„æ•°æ®æ“ä½œ * * @param redisTemplate * @return */ @Bean public ZSetOperations&lt;String, Object&gt; zSetOperations(RedisTemplate&lt;String, Object&gt; redisTemplate) { return redisTemplate.opsForZSet(); } } (5)ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯¹äºRedisè¿›è¡Œè¿›ä¸€æ­¥å°è£…--&gt;Rediså·¥å…·ç±»ï¼ˆRedisUtil.javaï¼‰ ä¸ºäº†æµ‹è¯•æ–¹ä¾¿ï¼Œåªæ”¾å…¥äº†getå’Œsetæ–¹æ³•ã€‚ @Component public class RedisUtil { @Autowired private RedisTemplate&lt;String, Object&gt; redisTemplate; public RedisUtil(RedisTemplate&lt;String, Object&gt; redisTemplate) { this.redisTemplate = redisTemplate; } //============================String============================= /** * æ™®é€šç¼“å­˜è·å– * @param key é”® * @return å€¼ */ public Object get(String key){ return key==null?null:redisTemplate.opsForValue().get(key); } /** * æ™®é€šç¼“å­˜æ”¾å…¥ * @param key é”® * @param value å€¼ * @return trueæˆåŠŸ falseå¤±è´¥ */ public boolean set(String key,Object value) { try { redisTemplate.opsForValue().set(key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } } (6)åœ¨controlleræ–‡ä»¶ä¸­è¿›è¡Œæµ‹è¯• @RestController @RequestMapping(&quot;/user&quot;) public class userController { @Resource private RedisUtil redisUtil; @RequestMapping(&quot;/setRedis&quot;) public boolean redisSet() { return redisUtil.set(&quot;username&quot;,&quot;ericam&quot;); } @RequestMapping(&quot;/getRedis&quot;) public String redisGet() { return redisUtil.get(&quot;username&quot;).toString(); } } (7)é¢„è§ˆ ps:è®°å¾—å¼€å¯redisï¼ˆé€šè¿‡startup.cmdï¼‰ è®¿é—® http://localhost:8080/user/setRedis è¿”å›trueè¯´æ˜ç¼“å­˜å­˜å‚¨æˆåŠŸï¼Œä½¿ç”¨å·¥å…·æŸ¥çœ‹ è·å–ç¼“å­˜å­˜å–çš„å€¼ è®¿é—® http://localhost:8080/user/getRedis ä»¥ä¸Šä¾¿æ˜¯redisçš„åŸºæœ¬ä½¿ç”¨ redisUtil.javaå·¥å…·ç±» import org.springframework.beans.factory.annotation.Autowired; import org.springframework.data.redis.core.RedisTemplate; import org.springframework.stereotype.Component; import org.springframework.util.CollectionUtils; import java.util.List; import java.util.Map; import java.util.Set; import java.util.concurrent.TimeUnit; /** * redisTemplateå°è£… * * @author yinxp@dist.com.cn */ @Component public class RedisUtil { @Autowired private RedisTemplate&lt;String, Object&gt; redisTemplate; public RedisUtil(RedisTemplate&lt;String, Object&gt; redisTemplate) { this.redisTemplate = redisTemplate; } /** * æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´ * @param key é”® * @param time æ—¶é—´(ç§’) * @return */ public boolean expire(String key,long time){ try { if(time&gt;0){ redisTemplate.expire(key, time, TimeUnit.SECONDS); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * æ ¹æ®key è·å–è¿‡æœŸæ—¶é—´ * @param key é”® ä¸èƒ½ä¸ºnull * @return æ—¶é—´(ç§’) è¿”å›0ä»£è¡¨ä¸ºæ°¸ä¹…æœ‰æ•ˆ */ public long getExpire(String key){ return redisTemplate.getExpire(key,TimeUnit.SECONDS); } /** * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ * @param key é”® * @return true å­˜åœ¨ falseä¸å­˜åœ¨ */ public boolean hasKey(String key){ try { return redisTemplate.hasKey(key); } catch (Exception e) { e.printStackTrace(); return false; } } /** * åˆ é™¤ç¼“å­˜ * @param key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª */ @SuppressWarnings(&quot;unchecked&quot;) public void del(String ... key){ if(key!=null&amp;&amp;key.length&gt;0){ if(key.length==1){ redisTemplate.delete(key[0]); }else{ redisTemplate.delete(CollectionUtils.arrayToList(key)); } } } //============================String============================= /** * æ™®é€šç¼“å­˜è·å– * @param key é”® * @return å€¼ */ public Object get(String key){ return key==null?null:redisTemplate.opsForValue().get(key); } /** * æ™®é€šç¼“å­˜æ”¾å…¥ * @param key é”® * @param value å€¼ * @return trueæˆåŠŸ falseå¤±è´¥ */ public boolean set(String key,Object value) { try { redisTemplate.opsForValue().set(key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´ * @param key é”® * @param value å€¼ * @param time æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ * @return trueæˆåŠŸ false å¤±è´¥ */ public boolean set(String key,Object value,long time){ try { if(time&gt;0){ redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS); }else{ set(key, value); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * é€’å¢ * @param key é”® * @param delta è¦å¢åŠ å‡ (å¤§äº0) * @return */ public long incr(String key, long delta){ if(delta&lt;0){ throw new RuntimeException(&quot;é€’å¢å› å­å¿…é¡»å¤§äº0&quot;); } return redisTemplate.opsForValue().increment(key, delta); } /** * é€’å‡ * @param key é”® * @param delta è¦å‡å°‘å‡ (å°äº0) * @return */ public long decr(String key, long delta){ if(delta&lt;0){ throw new RuntimeException(&quot;é€’å‡å› å­å¿…é¡»å¤§äº0&quot;); } return redisTemplate.opsForValue().increment(key, -delta); } //================================Map================================= /** * HashGet * @param key é”® ä¸èƒ½ä¸ºnull * @param item é¡¹ ä¸èƒ½ä¸ºnull * @return å€¼ */ public Object hget(String key,String item){ return redisTemplate.opsForHash().get(key, item); } /** * è·å–hashKeyå¯¹åº”çš„æ‰€æœ‰é”®å€¼ * @param key é”® * @return å¯¹åº”çš„å¤šä¸ªé”®å€¼ */ public Map&lt;Object,Object&gt; hmget(String key){ return redisTemplate.opsForHash().entries(key); } /** * HashSet * @param key é”® * @param map å¯¹åº”å¤šä¸ªé”®å€¼ * @return true æˆåŠŸ false å¤±è´¥ */ public boolean hmset(String key, Map&lt;String,Object&gt; map){ try { redisTemplate.opsForHash().putAll(key, map); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * HashSet å¹¶è®¾ç½®æ—¶é—´ * @param key é”® * @param map å¯¹åº”å¤šä¸ªé”®å€¼ * @param time æ—¶é—´(ç§’) * @return trueæˆåŠŸ falseå¤±è´¥ */ public boolean hmset(String key, Map&lt;String,Object&gt; map, long time){ try { redisTemplate.opsForHash().putAll(key, map); if(time&gt;0){ expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º * @param key é”® * @param item é¡¹ * @param value å€¼ * @return true æˆåŠŸ falseå¤±è´¥ */ public boolean hset(String key,String item,Object value) { try { redisTemplate.opsForHash().put(key, item, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º * @param key é”® * @param item é¡¹ * @param value å€¼ * @param time æ—¶é—´(ç§’) æ³¨æ„:å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´ * @return true æˆåŠŸ falseå¤±è´¥ */ public boolean hset(String key,String item,Object value,long time) { try { redisTemplate.opsForHash().put(key, item, value); if(time&gt;0){ expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * åˆ é™¤hashè¡¨ä¸­çš„å€¼ * @param key é”® ä¸èƒ½ä¸ºnull * @param item é¡¹ å¯ä»¥ä½¿å¤šä¸ª ä¸èƒ½ä¸ºnull */ public void hdel(String key, Object... item){ redisTemplate.opsForHash().delete(key,item); } /** * åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰è¯¥é¡¹çš„å€¼ * @param key é”® ä¸èƒ½ä¸ºnull * @param item é¡¹ ä¸èƒ½ä¸ºnull * @return true å­˜åœ¨ falseä¸å­˜åœ¨ */ public boolean hHasKey(String key, String item){ return redisTemplate.opsForHash().hasKey(key, item); } /** * hashé€’å¢ å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª å¹¶æŠŠæ–°å¢åçš„å€¼è¿”å› * @param key é”® * @param item é¡¹ * @param by è¦å¢åŠ å‡ (å¤§äº0) * @return */ public double hincr(String key, String item,double by){ return redisTemplate.opsForHash().increment(key, item, by); } /** * hashé€’å‡ * @param key é”® * @param item é¡¹ * @param by è¦å‡å°‘è®°(å°äº0) * @return */ public double hdecr(String key, String item,double by){ return redisTemplate.opsForHash().increment(key, item,-by); } //============================set============================= /** * æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼ * @param key é”® * @return */ public Set&lt;Object&gt; sGet(String key){ try { return redisTemplate.opsForSet().members(key); } catch (Exception e) { e.printStackTrace(); return null; } } /** * æ ¹æ®valueä»ä¸€ä¸ªsetä¸­æŸ¥è¯¢,æ˜¯å¦å­˜åœ¨ * @param key é”® * @param value å€¼ * @return true å­˜åœ¨ falseä¸å­˜åœ¨ */ public boolean sHasKey(String key,Object value){ try { return redisTemplate.opsForSet().isMember(key, value); } catch (Exception e) { e.printStackTrace(); return false; } } /** * å°†æ•°æ®æ”¾å…¥setç¼“å­˜ * @param key é”® * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª * @return æˆåŠŸä¸ªæ•° */ public long sSet(String key, Object...values) { try { return redisTemplate.opsForSet().add(key, values); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * å°†setæ•°æ®æ”¾å…¥ç¼“å­˜ * @param key é”® * @param time æ—¶é—´(ç§’) * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª * @return æˆåŠŸä¸ªæ•° */ public long sSetAndTime(String key,long time,Object...values) { try { Long count = redisTemplate.opsForSet().add(key, values); if(time&gt;0) { expire(key, time); } return count; } catch (Exception e) { e.printStackTrace(); return 0; } } /** * è·å–setç¼“å­˜çš„é•¿åº¦ * @param key é”® * @return */ public long sGetSetSize(String key){ try { return redisTemplate.opsForSet().size(key); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * ç§»é™¤å€¼ä¸ºvalueçš„ * @param key é”® * @param values å€¼ å¯ä»¥æ˜¯å¤šä¸ª * @return ç§»é™¤çš„ä¸ªæ•° */ public long setRemove(String key, Object ...values) { try { Long count = redisTemplate.opsForSet().remove(key, values); return count; } catch (Exception e) { e.printStackTrace(); return 0; } } //===============================list================================= /** * è·å–listç¼“å­˜çš„å†…å®¹ * @param key é”® * @param start å¼€å§‹ * @param end ç»“æŸ 0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼ * @return */ public List&lt;Object&gt; lGet(String key, long start, long end){ try { return redisTemplate.opsForList().range(key, start, end); } catch (Exception e) { e.printStackTrace(); return null; } } /** * è·å–listç¼“å­˜çš„é•¿åº¦ * @param key é”® * @return */ public long lGetListSize(String key){ try { return redisTemplate.opsForList().size(key); } catch (Exception e) { e.printStackTrace(); return 0; } } /** * é€šè¿‡ç´¢å¼• è·å–listä¸­çš„å€¼ * @param key é”® * @param index ç´¢å¼• index&gt;=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ * @return */ public Object lGetIndex(String key,long index){ try { return redisTemplate.opsForList().index(key, index); } catch (Exception e) { e.printStackTrace(); return null; } } /** * å°†listæ”¾å…¥ç¼“å­˜ * @param key é”® * @param value å€¼ * @return */ public boolean lSet(String key, Object value) { try { redisTemplate.opsForList().rightPush(key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * å°†listæ”¾å…¥ç¼“å­˜ * @param key é”® * @param value å€¼ * @param time æ—¶é—´(ç§’) * @return */ public boolean lSet(String key, Object value, long time) { try { redisTemplate.opsForList().rightPush(key, value); if (time &gt; 0) { expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * å°†listæ”¾å…¥ç¼“å­˜ * @param key é”® * @param value å€¼ * @return */ public boolean lSet(String key, List&lt;Object&gt; value) { try { redisTemplate.opsForList().rightPushAll(key, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * å°†listæ”¾å…¥ç¼“å­˜ * @param key é”® * @param value å€¼ * @param time æ—¶é—´(ç§’) * @return */ public boolean lSet(String key, List&lt;Object&gt; value, long time) { try { redisTemplate.opsForList().rightPushAll(key, value); if (time &gt; 0) { expire(key, time); } return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * æ ¹æ®ç´¢å¼•ä¿®æ”¹listä¸­çš„æŸæ¡æ•°æ® * @param key é”® * @param index ç´¢å¼• * @param value å€¼ * @return */ public boolean lUpdateIndex(String key, long index,Object value) { try { redisTemplate.opsForList().set(key, index, value); return true; } catch (Exception e) { e.printStackTrace(); return false; } } /** * ç§»é™¤Nä¸ªå€¼ä¸ºvalue * @param key é”® * @param count ç§»é™¤å¤šå°‘ä¸ª * @param value å€¼ * @return ç§»é™¤çš„ä¸ªæ•° */ public long lRemove(String key,long count,Object value) { try { Long remove = redisTemplate.opsForList().remove(key, count, value); return remove; } catch (Exception e) { e.printStackTrace(); return 0; } } /** * æ¨¡ç³ŠæŸ¥è¯¢è·å–keyå€¼ * @param pattern * @return */ public Set keys(String pattern){ return redisTemplate.keys(pattern); } /** * ä½¿ç”¨Redisçš„æ¶ˆæ¯é˜Ÿåˆ— * @param channel * @param message æ¶ˆæ¯å†…å®¹ */ public void convertAndSend(String channel, Object message){ redisTemplate.convertAndSend(channel,message); } } ","link":"https://kangjn.github.io/post/springboot-7kuai-su-shang-shou-redis/"},{"title":"springboot-6.æ•´åˆMybatis","content":"springboot-6.æ•´åˆMybatis ä¸€ .è§£æJavaæ¡†æ¶ä¸­entityå±‚ï¼Œmapperå±‚ï¼Œserviceå±‚å„å±‚ä½œç”¨ ï¼ˆ1ï¼‰entityå±‚ åˆ«åï¼š modelå±‚ ï¼Œdomainå±‚ã€‚ ç”¨é€”ï¼š å®ä½“å±‚ï¼Œç”¨äºå­˜æ”¾æˆ‘ä»¬çš„å®ä½“ç±»ï¼Œä¸æ•°æ®åº“ä¸­çš„å±æ€§å€¼åŸºæœ¬ä¿æŒä¸€è‡´ï¼Œå®ç°setå’Œgetçš„æ–¹æ³•ã€‚ä¸€èˆ¬æ•°æ®åº“ä¸€å¼ è¡¨å¯¹åº”ä¸€ä¸ªå®ä½“ç±»ï¼Œç±»å±æ€§åŒè¡¨å­—æ®µä¸€ä¸€å¯¹åº” ç®€å•ä¾‹å­ï¼šuserè¡¨çš„å®ä½“User public class User { private int id;//id private String username;//ç”¨æˆ·å //â€¦â€¦çœç•¥set,getæ–¹æ³• } ï¼ˆ2ï¼‰mapperå±‚ åˆ«åï¼š daoå±‚ ç”¨é€”ï¼š å¯¹æ•°æ®åº“è¿›è¡Œæ•°æ®æŒä¹…åŒ–æ“ä½œï¼Œé’ˆå¯¹æ•°æ®åº“æ“ä½œçš„ï¼Œä¸»è¦å®ç°å¢åˆ æ”¹æŸ¥æ“ä½œ ç®€å•ä¾‹å­ï¼š @Mapper public interface UserMapper { public User selectUserById(int id); } (3) serviceå±‚ ä¸šåŠ¡é€»è¾‘å±‚ï¼Œè°ƒç”¨daoå±‚æ¥å£ï¼Œæ¥æ”¶daoå±‚è¿”å›çš„æ•°æ®ï¼Œå®Œæˆé¡¹ç›®çš„åŸºæœ¬åŠŸèƒ½è®¾è®¡ã€‚ å°è£…Serviceå±‚çš„ä¸šåŠ¡é€»è¾‘æœ‰åˆ©äºä¸šåŠ¡é€»è¾‘çš„ç‹¬ç«‹æ€§å’Œé‡å¤åˆ©ç”¨æ€§ã€‚ ä½œç”¨ï¼šä¸ºcontrollerå±‚çš„ç±»æä¾›æ¥å£è¿›è¡Œè°ƒç”¨ã€‚ ç®€å•ä¾‹å­ï¼š public interface UserService extends Service&lt;User&gt; { } äºŒ.å¿«é€Ÿä½¿ç”¨ ï¼ˆ1ï¼‰æ·»åŠ ä¾èµ–é¡¹ &lt;!--mybatis--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.1.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--é€šç”¨mapper--&gt; &lt;dependency&gt; &lt;groupId&gt;tk.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mapper-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.5&lt;/version&gt; &lt;/dependency&gt; &lt;!--druidæ•°æ®æº--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.10 &lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.18&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.10 &lt;/version&gt; &lt;/dependency&gt; ï¼ˆ2ï¼‰é…ç½®application.yml spring: #æ•°æ®æºé…ç½® datasource: url: jdbc:mysql://localhost:3306/customer_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC username: root password: ****** driver-class-name: com.mysql.cj.jdbc.Driver type: com.alibaba.druid.pool.DruidDataSource connectionProperties: druid.stat.mergeSql=true #ä¸ºmybatisé…ç½®ï¼Œç”Ÿäº§ç¯å¢ƒå¯åˆ é™¤ restart: include: mapper: /mapper-[\\\\w-\\\\.]+jar pagehelper: /pagehelper-[\\\\w-\\\\.]+jar pagehelper: auto-dialect: msyql reasonable: true support-methods-arguments: true params: count=countSql (3)ç¼–å†™User.javaã€entityå±‚ã€‘ public class User { private String id; private String username; public String getId() { return id; } public void setId(String id) { this.id = id; } public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } } (4)ç¼–å†™UserMapper.java(daoå±‚) @Mapper public interface UserMapper { @Select(&quot;select * from user where id = #{id}&quot;) public User selectUserById(int id); @Select(&quot;select * from user where username = #{username}&quot;) public List&lt;User&gt; selectUserByName(String userName); @Insert(&quot;insert into user(id,username) values (#{id},#{username})&quot;) public void addUser(User user); @Update(&quot;update user set username=#{username} where id=#{id}&quot;) public void updateUser(User user); @Delete(&quot;delete from user where id=#{id}&quot;) public void deleteUser(int id); } (5)ç¼–å†™userController.java @RestController @RequestMapping(&quot;/user&quot;) public class userController { @Autowired UserMapper userMapper; @RequestMapping(value={&quot;/selectUserById&quot;}, method=RequestMethod.GET) public User selectUserById(String id){ User user = userMapper.selectUserById(Integer.parseInt(id)); return user; } @RequestMapping(value={&quot;/selectUserByName&quot;}, method=RequestMethod.GET) public List&lt;User&gt; selectUserByName(String userName){ return userMapper.selectUserByName(userName); } @RequestMapping(value={&quot;/addUser&quot;}, method=RequestMethod.POST) public void addUser(User user){ userMapper.addUser(user); } @RequestMapping(value={&quot;/updateUser&quot;}, method=RequestMethod.POST) public void updateUser(User user){ userMapper.updateUser(user); } @RequestMapping(value={&quot;/deleteUser&quot;}, method=RequestMethod.POST) public void deleteUser(String id){ userMapper.deleteUser(Integer.parseInt(id)); } } æ­¤æ—¶ä¾¿å·²ç»å…¨éƒ¨é…ç½®ç»“æŸ ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå¿½ç•¥äº†serviceå±‚ï¼Œç›´æ¥è°ƒç”¨äº†mapperå±‚ ï¼ˆ6ï¼‰æµ‹è¯• 1. ","link":"https://kangjn.github.io/post/springboot-6zheng-he-mybatis/"},{"title":"springboot-5.å…¨å±€å¼‚å¸¸æ•è·","content":"springboot-5.å…¨å±€å¼‚å¸¸æ•è· åœ¨webåº”ç”¨ä¸­ï¼Œè¯·æ±‚å¤„ç†æ—¶ï¼Œå‡ºç°å¼‚å¸¸æ˜¯éå¸¸å¸¸è§çš„ã€‚æ‰€ä»¥å½“åº”ç”¨å‡ºç°å„ç±»å¼‚å¸¸æ—¶ï¼Œè¿›è¡Œå¼‚å¸¸çš„æ•è·æˆ–è€…äºŒæ¬¡å¤„ç†(æ¯”å¦‚sqlå¼‚å¸¸æ­£å¸¸æ˜¯ä¸èƒ½å¤–æŠ›)æ˜¯éå¸¸å¿…è¦çš„ï¼Œæ¯”å¦‚åœ¨å¼€å‘å¯¹å¤–apiæœåŠ¡æ—¶ï¼Œçº¦å®šäº†å“åº”çš„å‚æ•°æ ¼å¼ï¼Œå¦‚respCodeã€respMsgï¼Œè°ƒç”¨æ–¹æ ¹æ®é”™è¯¯ç è¿›è¡Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚ 1 æµè§ˆå™¨è®¿é—®å¼‚å¸¸æ—¶ï¼š 2.postmanè®¿é—®å¼‚å¸¸æ—¶ï¼š æ˜¾ç„¶ï¼Œé»˜è®¤çš„å¼‚å¸¸é¡µæ˜¯å¯¹ç”¨æˆ·æˆ–è€…è°ƒç”¨è€…è€Œè¨€éƒ½æ˜¯ä¸å‹å¥½çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸Šæˆ‘ä»¬éƒ½ä¼šè¿›è¡Œå®ç°è‡ªå·±ä¸šåŠ¡çš„å¼‚å¸¸æç¤ºä¿¡æ¯ã€‚ æ­£æ–‡ 1.è‡ªå®šä¹‰åŸºç¡€æ¥å£ç±»+è‡ªå®šä¹‰æšä¸¾ç±» public interface BaseErrorInfoInterface { /** é”™è¯¯ç */ String getResultCode(); /** é”™è¯¯æè¿°*/ String getResultMsg(); public enum CommonEnum implements BaseErrorInfoInterface { // æ•°æ®æ“ä½œé”™è¯¯å®šä¹‰ SUCCESS(&quot;200&quot;, &quot;æˆåŠŸ!&quot;), BODY_NOT_MATCH(&quot;400&quot;,&quot;è¯·æ±‚çš„æ•°æ®æ ¼å¼ä¸ç¬¦!&quot;), SIGNATURE_NOT_MATCH(&quot;401&quot;,&quot;è¯·æ±‚çš„æ•°å­—ç­¾åä¸åŒ¹é…!&quot;), NOT_FOUND(&quot;404&quot;, &quot;æœªæ‰¾åˆ°è¯¥èµ„æº!&quot;), INTERNAL_SERVER_ERROR(&quot;500&quot;, &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯!&quot;), SERVER_BUSY(&quot;503&quot;,&quot;æœåŠ¡å™¨æ­£å¿™ï¼Œè¯·ç¨åå†è¯•!&quot;) ; /** é”™è¯¯ç  */ private String resultCode; /** é”™è¯¯æè¿° */ private String resultMsg; CommonEnum(String resultCode, String resultMsg) { this.resultCode = resultCode; this.resultMsg = resultMsg; } @Override public String getResultCode() { return resultCode; } @Override public String getResultMsg() { return resultMsg; } } } 2.è‡ªå®šä¹‰å¼‚å¸¸ç±» public class BizException extends RuntimeException { private static final long serialVersionUID = 1L; /** * é”™è¯¯ç  */ protected String errorCode; /** * é”™è¯¯ä¿¡æ¯ */ protected String errorMsg; public BizException() { super(); } public BizException(BaseErrorInfoInterface errorInfoInterface) { super(errorInfoInterface.getResultCode()); this.errorCode = errorInfoInterface.getResultCode(); this.errorMsg = errorInfoInterface.getResultMsg(); } public BizException(BaseErrorInfoInterface errorInfoInterface, Throwable cause) { super(errorInfoInterface.getResultCode(), cause); this.errorCode = errorInfoInterface.getResultCode(); this.errorMsg = errorInfoInterface.getResultMsg(); } public BizException(String errorMsg) { super(errorMsg); this.errorMsg = errorMsg; } public BizException(String errorCode, String errorMsg) { super(errorCode); this.errorCode = errorCode; this.errorMsg = errorMsg; } public BizException(String errorCode, String errorMsg, Throwable cause) { super(errorCode, cause); this.errorCode = errorCode; this.errorMsg = errorMsg; } public String getErrorCode() { return errorCode; } public void setErrorCode(String errorCode) { this.errorCode = errorCode; } public String getErrorMsg() { return errorMsg; } public void setErrorMsg(String errorMsg) { this.errorMsg = errorMsg; } public String getMessage() { return errorMsg; } @Override public Throwable fillInStackTrace() { return this; } } 3.è‡ªå®šä¹‰æ•°æ®æ ¼å¼ public class ResultBody { /** * å“åº”ä»£ç  */ private String code; /** * å“åº”æ¶ˆæ¯ */ private String message; /** * å“åº”ç»“æœ */ private Object result; public ResultBody() { } public ResultBody(BaseErrorInfoInterface errorInfo) { this.code = errorInfo.getResultCode(); this.message = errorInfo.getResultMsg(); } public String getCode() { return code; } public void setCode(String code) { this.code = code; } public String getMessage() { return message; } public void setMessage(String message) { this.message = message; } public Object getResult() { return result; } public void setResult(Object result) { this.result = result; } /** * æˆåŠŸ * * @return */ public static ResultBody success() { return success(null); } /** * æˆåŠŸ * @param data * @return */ public static ResultBody success(Object data) { ResultBody rb = new ResultBody(); rb.setCode(CommonEnum.SUCCESS.getResultCode()); rb.setMessage(CommonEnum.SUCCESS.getResultMsg()); rb.setResult(data); return rb; } /** * å¤±è´¥ */ public static ResultBody error(BaseErrorInfoInterface errorInfo) { ResultBody rb = new ResultBody(); rb.setCode(errorInfo.getResultCode()); rb.setMessage(errorInfo.getResultMsg()); rb.setResult(null); return rb; } /** * å¤±è´¥ */ public static ResultBody error(String code, String message) { ResultBody rb = new ResultBody(); rb.setCode(code); rb.setMessage(message); rb.setResult(null); return rb; } /** * å¤±è´¥ */ public static ResultBody error( String message) { ResultBody rb = new ResultBody(); rb.setCode(&quot;-1&quot;); rb.setMessage(message); rb.setResult(null); return rb; } @Override public String toString() { return JSONObject.toJSONString(this); } } 4.è‡ªå®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±» @RestControllerAdvice public class GlobalExceptionHandler { private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class); public static final String Demo_View = &quot;error&quot;; /** * å¤„ç†è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸ * @param req * @param e * @return */ @ExceptionHandler(value = BizException.class) public Object bizExceptionHandler(HttpServletRequest request,HttpServletRequest req, BizException e){ if(isAjax(request)) { return ResultBody.error(e.getMessage()); } else { ModelAndView mav = new ModelAndView(); mav.addObject(&quot;exception&quot;,e); mav.addObject(&quot;status&quot;,e.getErrorCode()); mav.setViewName(Demo_View); return mav; } } /** * å¤„ç†ç©ºæŒ‡é’ˆçš„å¼‚å¸¸ * @param req * @param e * @return */ @ExceptionHandler(value =NullPointerException.class) @ResponseBody public ResultBody exceptionHandler(HttpServletRequest req, NullPointerException e){ logger.error(&quot;å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ï¼åŸå› æ˜¯:&quot;,e); return ResultBody.error(BaseErrorInfoInterface.CommonEnum.BODY_NOT_MATCH); } /** * å¤„ç†å…¶ä»–å¼‚å¸¸ * @param req * @param e * @return */ @ExceptionHandler(value =Exception.class) public Object exceptionHandler(HttpServletRequest request,HttpServletRequest req, Exception e){ if(isAjax(request)) { return ResultBody.error(e.getMessage()); } else { ModelAndView mav = new ModelAndView(); mav.addObject(&quot;exception&quot;,e); mav.addObject(&quot;status&quot;,INTERNAL_SERVER_ERROR); mav.setViewName(Demo_View); return mav; } } //åˆ¤æ–­æ˜¯å¦æ˜¯ajaxè¯·æ±‚ public static boolean isAjax(HttpServletRequest httpRequest) { return(httpRequest.getHeader(&quot;X-Requested-With&quot;)!=null &amp;&amp;&quot;XMLHttpRequest&quot;.equals(httpRequest.getHeader(&quot;X-Requested-With&quot;).toString())); } } 5.ç¼–å†™å‰ç«¯å¼‚å¸¸æ˜¾ç¤ºé¡µé¢ ps:åç§°å¯¹åº”æ­¥éª¤4é‡Œçš„String Demo_View ä¸ºäº†æµ‹è¯•ï¼Œå¿«é€Ÿå»ºç«‹ä¸€ä¸ªhtml &lt;!doctype html&gt; &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div th:text=&quot;${url}&quot;&gt;&lt;/div&gt; &lt;div th:text=&quot;${exception.message}&quot;&gt;&lt;/div&gt; &lt;div th:text=&quot;${status}&quot;&gt;&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; æ­¤æ—¶å…¨å±€å¼‚å¸¸æ•è·å·²ç»å»ºç«‹å®Œæ¯•ï¼Œæ¥ä¸‹æ¥è¿›è¡Œæµ‹è¯• æµ‹è¯• 1.webé¡µé¢è·³è½¬ @Controller @RequestMapping(&quot;/err&quot;) public class errorController { @RequestMapping(&quot;/error&quot;) public String error() { int a = 1 / 0; //é™¤ä»¥0ï¼Œäº§ç”Ÿå¼‚å¸¸ return &quot;error&quot;; } } æ­¤æ—¶è®¿é—®webé¡µé¢ï¼š 2.ajaxå½¢å¼è·³è½¬ æ›´æ”¹controlleræ–‡ä»¶ @Controller @RequestMapping(&quot;/err&quot;) public class errorController { @RequestMapping(&quot;&quot;) public String err() { return &quot;thymeleaf/ajaxerror&quot;; } @RequestMapping(&quot;getAjaxError&quot;) public jsonResult ajaxError() { int a = 1/0; return jsonResult.ok(200); } } æ–°å»ºä¸€ä¸ªajaxerror.htmlæ–‡ä»¶äºthymeleafæ–‡ä»¶å¤¹ä¸‹ &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;ajaxæµ‹è¯•&lt;/title&gt; &lt;/head&gt; &lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt; &lt;body&gt; &lt;input id=&quot;test&quot; value=&quot;æµ‹è¯•&quot; type=&quot;submit&quot;&gt; &lt;/body&gt; &lt;script th:src=&quot;@{/static/js/ajaxjs.js}&quot;&gt;&lt;/script&gt; &lt;/html&gt; æ–°å»ºä¸€ä¸ªajax.jsæ–‡ä»¶ç¼–å†™ajaxè¯·æ±‚ $(&quot;#test&quot;).click(function() { $.ajax({ url: &quot;/err/getAjaxError&quot;, type: &quot;POST&quot;, async: false, success: function (data) { if (data.status == 200 &amp;&amp; data.msg == 'OK') { alert(&quot;success&quot;); } else { alert(&quot;å‘ç”Ÿå¼‚å¸¸&quot; + data.msg); } }, error: function (response, ajaxOption, thrownError) { alert(&quot;error&quot;); } }); }); è®°å¾—åœ¨applicationæ–‡ä»¶å¤¹æ·»åŠ é™æ€æ–‡ä»¶è·¯å¾„é…ç½® mvc: static-path-pattern: /static/** æ­¤æ—¶è®¿é—® 3.æµ‹è¯•è‡ªå®šä¹‰å¼‚å¸¸ æ–°å»ºä¸€ä¸ªcontrolleræ–‡ä»¶ @Controller @RequestMapping(value = &quot;/api&quot;) public class UserRestController { @RequestMapping(&quot;&quot;) public String api(ModelMap map) { User u = new User(); map.addAttribute(&quot;user&quot;,u); return &quot;thymeleaf/api&quot;; } @PostMapping(&quot;/user&quot;) public boolean insert(User user) { System.out.println(&quot;å¼€å§‹æ–°å¢...&quot;); //å¦‚æœå§“åä¸ºç©ºå°±æ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„å¼‚å¸¸ï¼ if (user.getUsername() == null) { throw new BizException(&quot;-1&quot;, &quot;ç”¨æˆ·å§“åä¸èƒ½ä¸ºç©ºï¼&quot;); } return true; } } æ–°å»ºä¸€ä¸ªapi.htmlæ–‡ä»¶ &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form action=&quot;/api/user&quot; th:method=&quot;post&quot;&gt; &lt;input type=&quot;text&quot; th:id=&quot;${user.username}&quot; th:name=&quot;${user.username}&quot; th:value=&quot;${user.username}&quot;&gt; &lt;input type=&quot;submit&quot;&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; è®¿é—® 3.æµ‹è¯•è‡ªå®šä¹‰å¼‚å¸¸ @RequestMapping(&quot;/error&quot;) public String error() { throw new BizException(&quot;400&quot;, &quot;è¿™æ˜¯400é”™è¯¯&quot;); } å°¾è¨€ æŒ‰ç…§æ­¥éª¤æ·»åŠ å³å¯å®Œæˆæ“ä½œ~ Userç±»è‡ªè¡Œæ·»åŠ æˆ–è€…æµè§ˆå‰æ–‡å³å¯ã€‚ å…¶ä»– 1.SpringBootå¼‚å¸¸å¤„ç†-è‡ªå®šä¹‰é”™è¯¯é¡µé¢ (1) åœ¨Spring Bootä¸­ä¸€å…±æä¾›äº†å‡ ç§å¤„ç†å¼‚å¸¸çš„æ–¹å¼ï¼Ÿ SpringBoot ä¸­å¯¹äºå¼‚å¸¸å¤„ç†æä¾›äº†äº”ç§å¤„ç†æ–¹å¼ï¼š è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼› @ExceptionHandle æ³¨è§£å¤„ç†å¼‚å¸¸ï¼› @ControllerAdvice+@ExceptionHandler æ³¨è§£å¤„ç†å¼‚å¸¸ï¼› é…ç½® SimpleMappingExceptionResolver å¤„ç†å¼‚å¸¸ï¼› è‡ªå®šä¹‰ HandlerExceptionResolver ç±»å¤„ç†å¼‚å¸¸ (2) ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰é”™è¯¯é¡µé¢æ–¹å¼ï¼Ÿ SpringBoot é»˜è®¤çš„å¤„ç†å¼‚å¸¸çš„æœºåˆ¶ï¼šSpringBoot é»˜è®¤çš„å·²ç»æä¾›äº†ä¸€å¥—å¤„ç†å¼‚å¸¸çš„æœºåˆ¶ã€‚ä¸€æ—¦ç¨‹åºä¸­å‡ºç°äº†å¼‚å¸¸ SpringBoot ä¼šåƒ/error çš„ url å‘é€è¯·æ±‚ã€‚åœ¨ springBoot ä¸­æä¾›äº†ä¸€ä¸ªå« BasicExceptionController æ¥å¤„ç†/error è¯·æ±‚ï¼Œç„¶åè·³è½¬åˆ°é»˜è®¤æ˜¾ç¤ºå¼‚å¸¸çš„é¡µé¢æ¥å±•ç¤ºå¼‚å¸¸ä¿¡æ¯ã€‚ (3) è‡ªä¹‰å®šé”™è¯¯é¡µé¢åº”è¯¥æ”¾åˆ°é¡¹ç›®çš„ä»€ä¹ˆä½ç½®ï¼Ÿ æ”¾åœ¨ä¸€èˆ¬ç½‘é¡µèµ„æºå­˜æ”¾çš„ä½ç½® å³src/main/resources/templates 2.SpringBootå¼‚å¸¸å¤„ç†-@ControlleAdvice (1) @ControllerAdviceæ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ éœ€è¦åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿå¤„ç†å¼‚å¸¸çš„å…¨å±€å¼‚å¸¸ç±»ã€‚ åœ¨è¯¥ç±»ä¸Šéœ€è¦æ·»åŠ @ControllerAdvice æ³¨è§£ã€‚ (2) @ControllerAdvice+@ExceptionHandleræ³¨è§£å¤„ç†å¼‚å¸¸æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ æ˜¯ä¸€ä¸ªå¤„ç†å¼‚å¸¸çš„å…¨å±€å¼‚å¸¸ç±»ï¼Œæ•´ä¸ªé¡¹ç›®åªè¦äº§ç”Ÿäº†è¯¥ç±»æ–¹æ³•æ•è·çš„å¼‚å¸¸éƒ½ä¼šè¢«æ•è·å¤„ç†ã€‚ç¼ºç‚¹æ˜¯è¦æ ¹æ®å¼‚å¸¸ç±»å‹ä¸åŒè§„å®šå¾ˆå¤šçš„å¼‚å¸¸å¤„ç†æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯@ExceptionHandleræ–¹æ³•ï¼Œä»£ç å†—ä½™è€Œä¸”æ²¡æœ‰è§„å®šçš„å¼‚å¸¸ç±»å‹æ— æ³•æ•è·è¿˜æ˜¯ä¼šèµ°SpringBooté»˜è®¤çš„å¼‚å¸¸å¤„ç†æ–¹æ³•ã€‚ ","link":"https://kangjn.github.io/post/springboot-5quan-ju-yi-chang-bu-huo/"},{"title":"springboot-4.æ¨¡æ¿å¼•æ“","content":"springboot-4.æ¨¡æ¿å¼•æ“ å‰è¨€ å…³äºfreemarkerå’Œthymeleafçš„ä»‹ç»è‡ªè¡ŒæŸ¥é˜…ï¼Œæœ¬æ–‡åªè®²å¿«é€Ÿå…¥é—¨ä½¿ç”¨ã€‚ freemarker (1)åœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–é¡¹ &lt;!-- freemarker ä¾èµ– --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt; &lt;/dependency&gt; (2)åœ¨application.ymlæ–‡ä»¶ä¸­æ·»åŠ freemarkerç›¸å…³é…ç½® spring: http: encoding: force: true charset: UTF-8 freemarker: allow-request-override: false cache: false check-template-location: true charset: UTF-8 content-type: text/html; charset=utf-8 expose-request-attributes: false expose-session-attributes: false expose-spring-macro-helpers: false suffix: .ftl template-loader-path: classpath:/templates (3)åœ¨templatesæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªfreemarkeræ–‡ä»¶å¤¹ï¼Œç„¶åå†åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶center.ftl æ–‡ä»¶æ ‘ç»“æ„ï¼š å¿«é€Ÿåˆ›å»ºä¸€ä¸ªç½‘é¡µæ¨¡æ¿è¿›è¡Œæµ‹è¯•ï¼Œå†…å®¹å¦‚ä¸‹ï¼š &lt;!doctype html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;${host}&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; psï¼šå…¶ä¸­hostçš„å€¼é€šè¿‡åå°è¯»å–ã€‚ ï¼ˆ4ï¼‰åœ¨controlleræ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªfreemarkerController.javaæ–‡ä»¶ @Controller public class freemarkerController { @RequestMapping(&quot;/&quot;) public String index(ModelMap map) { map.addAttribute(&quot;host&quot;,&quot;ericam&quot;); return &quot;freemarker/center&quot;; } } ps: é€šè¿‡mapå°†å­—ç¬¦ä¸²ericamèµ‹å€¼ç»™hostï¼Œç„¶åè¿”å›å‰ç«¯é¡µé¢ï¼ˆå¯ä»¥ä¸ç”¨å†™åç¼€ftlï¼‰ (5)é¢„è§ˆ æ­¤æ—¶æ‰“å¼€æµè§ˆå™¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š æ¥ä¸‹æ¥ç€é‡ä»‹ç»thymeleafï¼Œå®ƒåœ¨æ—¥å¸¸é¡¹ç›®ä¸­ä½¿ç”¨æ›´åŠ å¹¿æ³›ã€‚ï¼ˆps:é¡¹ç›®ä¸­å¯ä»¥åŒæ—¶ä½¿ç”¨freemarkerå’Œthymeleafï¼‰ Thymeleaf ä¸€. å¿«é€Ÿå…¥é—¨ä½¿ç”¨ ï¼ˆ1ï¼‰åœ¨pomæ–‡ä»¶å¤¹æ·»åŠ é¡¹ç›®ä¾èµ– &lt;!-- ThymeLeaf ä¾èµ– --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; (2)åœ¨application.ymlæ–‡ä»¶ä¸­æ·»åŠ themeleafç›¸å…³é…ç½® spring: thymeleaf: cache: false # å¼€å‘æ—¶å…³é—­ç¼“å­˜,ä¸ç„¶æ²¡æ³•çœ‹åˆ°å®æ—¶é¡µé¢ mode: HTML # ç”¨éä¸¥æ ¼çš„ HTML encoding: UTF-8 servlet: content-type: text/html (3) åœ¨templatesæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªthemeleafæ–‡ä»¶å¤¹ï¼Œç„¶åå†æ–°å»ºä¸€ä¸ªtest.html æ–‡ä»¶æ ‘ï¼š æ–°å»ºä¸€ä¸ªUser.javaæ–‡ä»¶ æ–‡ä»¶æ ‘ï¼š (4)ç¼–å†™User.javaæ–‡ä»¶ ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œç”¨æˆ·å…·å¤‡å¦‚ä¸‹å±æ€§ï¼š id ç”¨æˆ·å å¹´é¾„ åˆ›å»ºæ—¶é—´ ç”¨æˆ·ç®€ä»‹ public class User { private String id; private int age; private String username; private Date createTime; private String desc; public int getAge() { return age; } public void setAge(int age) { this.age = age; } public String getDesc() { return desc; } public void setDesc(String desc) { this.desc = desc; } //è¯·è¯»è€…è‡ªè¡Œè¡¥å…… æ„é€ å™¨å’Œ get/setæ–¹æ³•.. public String getId() { return id; } public void setId(String id) { this.id = id; } public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public Date getCreateTime() { return createTime; } public void setCreateTime(Date createTime) { this.createTime = createTime; } } (5)æ–°å»ºä¸€ä¸ªthemeleafController.javaè¿›è¡Œæµ‹è¯• @Controller public class themeleafController { @RequestMapping(&quot;/test&quot;) public String test(ModelMap map) { User u = new User(); u.setId(&quot;123&quot;); u.setUsername(&quot;fwf&quot;); u.setCreateTime(new Date(2020-1900,6-1,12)); u.setDesc(&quot;&lt;p&gt;ssssssssssss&lt;/p&gt;&quot;); u.setAge(18); map.addAttribute(&quot;user&quot;,u); //è¿™é‡Œçš„userå¯¹åº”htmlé‡Œçš„user return &quot;thymeleaf/test&quot;; } } (6)æœ€åæˆ‘ä»¬è¿›è¡Œç¼–å†™test.htmlæ–‡ä»¶ &lt;div&gt; &lt;input type=&quot;text&quot; th:id=&quot;${user.id}&quot; th:name=&quot;${user.id}&quot;th:value=&quot;${user.id}&quot;/&gt; &lt;input type=&quot;text&quot; th:id=&quot;${user.username}&quot; th:name=&quot;${user.username}&quot; th:value=&quot;${user.username}&quot;&gt; &lt;input type=&quot;text&quot; th:id=&quot;${user.age}&quot; th:name=&quot;${user.age}&quot; th:value=&quot;${user.age}&quot;&gt; &lt;input type=&quot;text&quot; th:id=&quot;${user.createTime}&quot; th:name=&quot;${user.createTime}&quot; th:value=&quot;${#dates.format(user.createTime,'dd/MM/yyyy')}&quot;&gt; &lt;span th:utext=&quot;${user.desc}&quot;&gt;&lt;/span&gt; &lt;/div&gt; ps: th:utextå¯ä»¥å°†å†…å®¹ä½œä¸ºhtmlæ ¼å¼è¾“å‡ºï¼Œè€Œth:textåˆ™æ˜¯ç›´æ¥è¾“å‡ºæ–‡æœ¬ã€‚ (7)é¢„è§ˆ äºŒ.Thymeleafå¸¸ç”¨æ ‡ç­¾-æ–¹æ³• ï¼ˆ1ï¼‰ä¸Šè¿°test.htmlçš„ç­‰åŒå†™æ³• &lt;div th:object=&quot;${user}&quot;&gt; &lt;input type=&quot;text&quot; th:id=&quot;*{id}&quot; th:name=&quot;*{id}&quot;th:value=&quot;*{id}&quot;/&gt; &lt;input type=&quot;text&quot; th:id=&quot;*{username}&quot; th:name=&quot;*{username}&quot; th:value=&quot;*{username}&quot;&gt; &lt;/div&gt; è¿™æ ·å¯ä»¥ç®€åŒ–å†…å®¹ï¼Œä½¿ç”¨æ›´åŠ å¹¿æ³›ã€‚ ï¼ˆ2ï¼‰è¡¨å•çš„æäº¤ æˆ‘ä»¬åœ¨test.htmlé‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ &lt;div&gt; &lt;form th:action=&quot;@{/postform}&quot; th:object=&quot;${user}&quot; method=&quot;post&quot; th:method=&quot;post&quot;&gt; &lt;input type=&quot;text&quot; th:field=&quot;*{username}&quot;/&gt; &lt;input type=&quot;submit&quot;/&gt; &lt;/form&gt; &lt;/div&gt; ps:æäº¤åœ°å€ä¸º url/postform ,æäº¤æ–¹æ³•ä¸ºpostï¼Œæäº¤çš„å†…å®¹ä¸ºuser.username æ¥ç€åœ¨themeleafControlleræ·»åŠ å¦‚ä¸‹å†…å®¹ @PostMapping(&quot;/postform&quot;) public String postform(User u) //å‰ç«¯ä¼ å…¥äº†ä¸€ä¸ªUserå¯¹è±¡ { System.out.println(u.getUsername()); return &quot;redirect:/test&quot;; //é‡å®šå‘ï¼ˆç­‰äºè½¬å‘/teståœ°å€ } ï¼ˆ3ï¼‰th:ifæ ‡ç­¾ &lt;div th:if=&quot;${user.age}==18&quot;&gt;1&lt;/div&gt; &lt;!--ç­‰äº18ï¼Œæ˜¾ç¤ºè¯¥æ ‡ç­¾--&gt; &lt;div th:if=&quot;${user.age} gt 18&quot;&gt;2&lt;/div&gt;&lt;!--å¤§äº18ï¼Œæ˜¾ç¤ºè¯¥æ ‡ç­¾--&gt; &lt;div th:if=&quot;${user.age} lt 18&quot;&gt;3&lt;/div&gt;&lt;!--å°äº18ï¼Œæ˜¾ç¤ºè¯¥æ ‡ç­¾--&gt; &lt;div th:if=&quot;${user.age} ge 18&quot;&gt;4&lt;/div&gt;&lt;!--å¤§äºç­‰äº18ï¼Œæ˜¾ç¤ºè¯¥æ ‡ç­¾--&gt; &lt;div th:if=&quot;${user.age} le 18&quot;&gt;5&lt;/div&gt;&lt;!--å°äºç­‰äº18ï¼Œæ˜¾ç¤ºè¯¥æ ‡ç­¾--&gt; åˆ©ç”¨ifåˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºç©ºï¼Œéç©ºæ—¶æ˜¾ç¤º &lt;span th:if=&quot;${msg}&quot; th:text=&quot;${msg}&quot;&gt;&lt;/span&gt;&lt;br&gt; if / else çš„å®ç° &lt;span th:if=&quot;${msg}&quot; th:text=&quot;${msg}&quot;&gt;&lt;/span&gt;&lt;br&gt; &lt;span th:unless=&quot;${msg}&quot; th:text=&quot;&quot;&gt;&lt;/span&gt;&lt;br&gt; (4)th:selectedæ ‡ç­¾ &lt;select&gt; &lt;option &gt;é€‰æ‹©æ¡†&lt;/option&gt; &lt;option th:selected=&quot;${user.username eq 'fwf'}&quot;&gt;fwf&lt;/option&gt; &lt;/select&gt; (5)tableè¡¨å• &lt;table&gt; &lt;tr&gt; &lt;th&gt;id&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;th&gt;åˆ›å»ºæ—¶é—´&lt;/th&gt; &lt;/tr&gt; &lt;tr th:each=&quot;person:${userlist}&quot;&gt; &lt;td th:text=&quot;${person.id}&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;${person.username}&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;${person.age gt 18}?å¤§:å°&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;${#dates.format(person.createTime,'yyyy-MM-dd')}&quot;&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸‹themeleafControlleræ–‡ä»¶ï¼Œä¸ºå…¶æ·»åŠ ä¸€ä¸ªuserlistã€‚ @RequestMapping(&quot;/test&quot;) public String test(ModelMap map) { User u = new User(); u.setId(&quot;123&quot;); u.setUsername(&quot;fwf&quot;); u.setCreateTime(new Date(2020-1900,6-1,12)); u.setDesc(&quot;&lt;p&gt;ssssssssssss&lt;/p&gt;&quot;); u.setAge(18); map.addAttribute(&quot;user&quot;,u); List&lt;User&gt; userlist = new ArrayList&lt;&gt;(); //æ·»åŠ ä¸€ä¸ªuserlist userlist.add(u); u = new User(); u.setId(&quot;234&quot;); u.setUsername(&quot;ericam&quot;); u.setCreateTime(new Date(2020-1900,5-1,12)); u.setAge(3); userlist.add(u); map.addAttribute(&quot;userlist&quot;,userlist); return &quot;thymeleaf/test&quot;; } (6)th:switch &lt;div th:switch=&quot;${user.username}&quot;&gt; &lt;p th:case=&quot;'fwf'&quot;&gt;111&lt;/p&gt; &lt;p&gt;&lt;/p&gt; &lt;/div&gt; å¤‡æ³¨ï¼šå¸¸ç”¨æ ‡ç­¾çš„æ•ˆæœå¯ä»¥è‡ªè¡Œå»æµ‹è¯• ","link":"https://kangjn.github.io/post/springboot-4mo-ban-yin-qing/"},{"title":"springboot-3.èµ„æºæ–‡ä»¶å±æ€§é…ç½®","content":"springboot-3.èµ„æºæ–‡ä»¶å±æ€§é…ç½® å‰è¨€ ä¸ºä»€ä¹ˆè¦è¿›è¡Œèµ„æºæ–‡ä»¶å±æ€§é…ç½®å‘¢ï¼Ÿå¯ä»¥æƒ³è±¡æˆå°±æ˜¯ä¸€ä¸ªè®¾ç½®æ–‡ä»¶ã€‚æ¯”å¦‚è®¾ç½®å¥½æ•°æ®åº“å¯†ç .portç«¯å£åï¼Œåœ¨å…¶ä»–åœ°æ–¹åªéœ€è¦ç”¨åå­—å¼•ç”¨å³å¯ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š æˆ‘ä»¬è®¾ç½®ä»¥ä¸‹é¡¹ç›®çš„æŒæœ‰è€…åç§°ä¸ºericam demo: name: &quot;ericam&quot; é‚£ä¹ˆåœ¨å…¶ä»–åœ°æ–¹åªéœ€è¦å¼•ç”¨nameåç§°å³å¯ï¼Œç„¶åå¦‚æœæ•´ä¸ªé¡¹ç›®éœ€è¦å¤šæ¬¡å¼•ç”¨ï¼ŒåæœŸæˆ‘ä»¬åªéœ€è¦åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œæ›´æ”¹ä¸‹åç§°å³å¯ï¼Œä¸å¿…å¤šæ¬¡æ“ä½œã€‚ Spring Bootå¯ä½¿ç”¨æ³¨è§£çš„æ–¹å¼å°†è‡ªå®šä¹‰çš„propertiesæ–‡ä»¶æ˜ å°„åˆ°å®ä½“beanä¸­ï¼Œæ¯”å¦‚application.propertiesæ–‡ä»¶ æˆ–è€…application.yml æ­£æ–‡ ï¼ˆ1ï¼‰é¦–å…ˆï¼Œåœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–é¡¹ &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; ï¼ˆ2ï¼‰ä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ demo: name: &quot;ericam&quot; ï¼ˆ3ï¼‰æ–°å»ºä¸€ä¸ªResource.javaæ–‡ä»¶ package cn.ericam.nndemo; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.context.annotation.Configuration; import org.springframework.context.annotation.PropertySource; @Configuration //ä½¿ç”¨é…ç½®æ³¨è§£ ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯é…ç½®æ–‡ä»¶ @ConfigurationProperties(prefix = &quot;demo&quot;) //prefix æŒ‡å®šé…ç½®æ–‡ä»¶é‡Œçš„å‰ç¼€ @PropertySource(value = &quot;classpath:application.yml&quot;) public class Resource { private String name; public String getName() { return name; } public void setName(String name) { this.name = name; } } psï¼šConfigurationPropertiesæ˜¯ä¸€ä¸ªæ³¨è§£ï¼Œå¯ä»¥æ ‡æ³¨åœ¨ä¸€ä¸ªClassä¸Šï¼Œè¿™æ ·Spring Bootä¼šä»Environmentä¸­è·å–å…¶å±æ€§å¯¹åº”çš„å±æ€§å€¼ç»™å…¶è¿›è¡Œæ³¨å…¥ã€‚ ï¼ˆ4ï¼‰æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å¼•ç”¨ä¸€æ³¢å°è¯•ï¼Œæ‰“å¼€helloController.javaæ–‡ä»¶ @RestController public class helloController { @Autowired private Resource resource; //æ„å»ºä¸€ä¸ªResourceç±»å¯¹è±¡ï¼Œé€šè¿‡autowiredè‡ªåŠ¨èµ‹å€¼ @RequestMapping(&quot;/getR&quot;) public jsonResult gr() { Resource b = new Resource(); BeanUtils.copyProperties(resource,b); //å°†resourceçš„å€¼æ‹·è´å¤åˆ¶ç»™b return jsonResult.ok(b); } } ps:@Autowired æ³¨é‡Šå¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæ„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…ã€‚ é€šè¿‡ @Autowiredçš„ä½¿ç”¨æ¥æ¶ˆé™¤ setã€getæ–¹æ³•ã€‚ æ‰“å¼€æµè§ˆå™¨ application.ymlæ–‡ä»¶ä¸­é‡è¦å±æ€§ server: port: 8080 #ç«¯å£ servlet: context-path: /demo #é…ç½®è·¯å¾„ï¼Œæ­¤åè®¿é—®http://localhost:****/demo/**** ","link":"https://kangjn.github.io/post/springboot-3zi-yuan-wen-jian-shu-xing-pei-zhi/"},{"title":"springboot-2.åˆ©ç”¨æ¥å£è¿”å›æ•°æ®ï¼ˆjsonï¼‰","content":"springboot-2.åˆ©ç”¨æ¥å£è¿”å›æ•°æ®ï¼ˆjsonï¼‰ å‰è¨€ é¡¹ç›®å‰åå°äº¤äº’å­˜åœ¨ä¸¤ç§æ–¹å¼ ä¸€ç§æ™®é€šæ•´ä½“é¡µé¢æäº¤ï¼Œæ¯”å¦‚formæäº¤ï¼› è¿˜æœ‰ä¸€ç§å±€éƒ¨åˆ·æ–°ï¼Œæˆ–è€…å«åšå¼‚æ­¥åˆ·æ–°ï¼Œajaxæäº¤ï¼› @Controllerå°±æ˜¯æ•´ä½“é¡µé¢åˆ·æ–°æäº¤çš„å¤„ç†æ³¨è§£ @RestControllerå°±æ˜¯ajaxæäº¤ï¼Œä¸€èˆ¬è¿”å›jsonæ ¼å¼ï¼Œç›¸å½“äºæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„@ResponseBody+@Controllerç»„åˆ æ­£æ–‡ æ–°å»ºæ–‡ä»¶å¤¹controller ç„¶ååœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º æ§åˆ¶ç±».javaæ–‡ä»¶ [![cWWn9x.png]((https://gitee.com/kangjun/MyBlogImage/raw/master/cWWn9x.png) 1.æœ€ç®€å•çš„æ•°æ®è¿”å› @RestController public class helloController { @RequestMapping(&quot;/&quot;) public String hello() { return &quot;hello&quot;; } } ã€@RequestMappingä½œç”¨ã€‘ å¤„ç†è¯·æ±‚åœ°å€çš„æ˜ å°„ ç”¨äºç±»å’Œæ–¹æ³•ä¸Šï¼Œç±»ä¸Šçš„ â€œè¯·æ±‚åœ°å€â€ æ˜¯æ–¹æ³•ä¸Šçš„ â€œè¯·æ±‚åœ°å€â€ çš„çˆ¶åœ°å€ [ 2.è¿”å›ç±»å¯¹è±¡ä¿¡æ¯ ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹Userï¼Œç„¶ååœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶User.java [ å†…å®¹å¦‚ä¸‹ï¼š public class User { private String name; private String sex; public String getName() { return name; } public void setName(String name) { this.name = name; } public String getSex() { return sex; } public void setSex(String sex) { this.sex = sex; } } ç„¶ååœ¨controlleræ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªuserController.javaæ–‡ä»¶ (è®°å¾—è‡ªè¡Œimportéœ€è¦çš„æ–‡ä»¶) [ @RestController public class userController { @RequestMapping(&quot;/getUser&quot;) public User getUser() { User u = new User(); u.setName(&quot;x&quot;); u.setSex(&quot;nan&quot;); return u; } } 3.è¿”å›å°è£…çš„ç±»å¯¹è±¡ä¿¡æ¯ è§£é‡Šä¸€ä¸‹è¯¥å¤„å’Œ2å¤„çš„åŒºåˆ«ï¼š @Description: è‡ªå®šä¹‰å“åº”æ•°æ®ç»“æ„è¿™ä¸ªç±»æ˜¯æä¾›ç»™é—¨æˆ·ï¼Œiosï¼Œå®‰å“ï¼Œå¾®ä¿¡å•†åŸç”¨çš„é—¨æˆ·æ¥å—æ­¤ç±»æ•°æ®åéœ€è¦ä½¿ç”¨æœ¬ç±»çš„æ–¹æ³•è½¬æ¢æˆå¯¹äºçš„æ•°æ®ç±»å‹æ ¼å¼ï¼ˆç±»ï¼Œæˆ–è€…listï¼‰å…¶ä»–è‡ªè¡Œå¤„ç† 200ï¼šè¡¨ç¤ºæˆåŠŸ 500ï¼šè¡¨ç¤ºé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯åœ¨msgå­—æ®µä¸­ 501ï¼šbeanéªŒè¯é”™è¯¯ï¼Œä¸ç®¡å¤šå°‘ä¸ªé”™è¯¯éƒ½ä»¥mapå½¢å¼è¿”å› 502ï¼šæ‹¦æˆªå™¨æ‹¦æˆªåˆ°ç”¨æˆ·tokenå‡ºé”™ 555ï¼šå¼‚å¸¸æŠ›å‡ºä¿¡æ¯ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å½“å‰å°æäº¤ç”¨æˆ·ä¿¡æ¯ç»™åå°æ—¶ï¼Œåå°ä¼šè¿”å›ä¸€ä¸ªjsonæ•°æ®ï¼Œå…¶ä¸­åŒ…å«çŠ¶æ€ç ï¼ˆ200ç­‰ï¼‰ï¼Œmessageï¼ˆâ€œokâ€æˆ–è€…â€œfailureâ€ï¼‰ï¼Œç„¶åå†åŒ…å«ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ã€‚ é¦–å…ˆï¼Œåœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–é¡¹ jackson-databind jackson-core æ–°å»ºä¸€ä¸ªjsonResult.javaæ–‡ä»¶ package cn.ericam.nndemo.Json; public class jsonResult { // å“åº”ä¸šåŠ¡çŠ¶æ€ private Integer status; // å“åº”æ¶ˆæ¯ private String msg; // å“åº”ä¸­çš„æ•°æ® private Object data; public static jsonResult ok(Object data) { return new jsonResult(data); } //ç±»å«å‚åˆå§‹åŒ–1 public jsonResult(Integer status, String msg, Object data) { this.status = status; this.msg = msg; this.data = data; } //ç±»å«å‚åˆå§‹åŒ–2 public jsonResult(Object data) { this.status = 200; this.msg = &quot;OK&quot;; this.data = data; } //getå’Œsetæ–¹æ³• public Integer getStatus() { return status; } public void setStatus(Integer status) { this.status = status; } public String getMsg() { return msg; } public void setMsg(String msg) { this.msg = msg; } public Object getData() { return data; } public void setData(Object data) { this.data = data; } } ç„¶ååœ¨userController.javaä¸‹ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼š @RestController public class userController { @RequestMapping(&quot;/getUser&quot;) public jsonResult getUser() { User u = new User(); u.setName(&quot;x&quot;); u.setSex(&quot;nan&quot;); return jsonResult.ok(u); } } [ ã€psï¼šIDEAåˆ©ç”¨ctrl+insertå¯ä»¥å¿«é€Ÿç”Ÿæˆgetå’Œsetæ–¹æ³•ã€‘ ","link":"https://kangjn.github.io/post/springboot-2li-yong-jie-kou-fan-hui-shu-ju-json/"},{"title":"springboot-1.ç®€çº¦ç‰ˆåˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨","content":"springboot-1.ç®€çº¦ç‰ˆåˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨ å‹¾é€‰ä¾èµ–é¡¹ ç”±äºåªæ˜¯ä½“éªŒæ­å»ºä¸€ä¸ªspringbooté¡¹ç›®ï¼Œå› æ­¤ä¾èµ–é¡¹åªéœ€è¦å‹¾é€‰ä¸€ä¸ªspring web åˆ›å»ºæˆåŠŸåé¡¹ç›®åˆ—è¡¨å¦‚ä¸‹å›¾æ‰€ç¤º å…¶ä¸­ DemoApplication.java:å…³é”®çš„å¯åŠ¨ç±»ï¼ˆç¨‹åºçš„å…¥å£ï¼‰ pom.xml:Mavenæ„å»ºè¯´æ˜æ–‡ä»¶ DemoApplicationTests.java:ä¸€ä¸ªç©ºçš„Junitæµ‹è¯•ç±»ï¼Œå®ƒåŠ è½½äº†ä¸€ä¸ªä½¿ç”¨Spring Bootå­—å…¸é…ç½®åŠŸèƒ½çš„Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ application.properties:ä¸€ä¸ªç©ºçš„propertiesæ–‡ä»¶ï¼Œæ ¹æ®éœ€è¦æ·»åŠ é…ç½®å±æ€§ ä¸ºäº†æ¼”ç¤ºç®€å•ï¼Œä¸å†æ–°å»ºæ§åˆ¶ç±»ï¼Œè€Œæ˜¯ç›´æ¥åœ¨è¿™ä¸ªå…¥å£ç±»(DemoApplication.java)ä¸­ç¼–å†™ï¼Œæ·»åŠ @RestControllerä»¥åŠindexæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š çº¢è‰²æ¡†å†… å†…å®¹éœ€è¦æ·»åŠ  ps:@RestControlleræ³¨è§£ç­‰ä»·äº@Controller+@ResponseBodyçš„ç»“åˆï¼Œä½¿ç”¨è¿™ä¸ªæ³¨è§£çš„ç±»é‡Œé¢çš„æ–¹æ³•éƒ½ä»¥jsonæ ¼å¼è¾“å‡ºã€‚ è¿è¡Œé¡¹ç›® æµè§ˆå™¨è®¿é—®http://localhost:8080/ è‡³æ­¤ç¬¬ä¸€ä¸ªspringbooté¡¹ç›®å·²ç»åˆ›å»ºå®Œæ¯• ç«¯å£è¢«å ç”¨ ç”±äºé¡¹ç›®éœ€è¦è¿è¡Œåœ¨ç«¯å£8080ï¼Œå½“ç«¯å£è¢«å ç”¨æ—¶ï¼Œéœ€è¦æ€æ­»è¯¥ç«¯å£ä¸Šè¿è¡Œçš„è¿›ç¨‹ è¿›å…¥å‘½ä»¤è¡Œ netstat -o -n -a | findstr :8080 # TCP 0.0.0.0:3000 0.0.0.0:0 LISTENING 3116 taskkill /F /PID 3116 å®ç°çƒ­å¯åŠ¨ çƒ­å¯åŠ¨ï¼šä¿®æ”¹ä»£ç ä¿å­˜æ—¶ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨é¡¹ç›® 1.ä¿®æ”¹pom.xmlæ–‡ä»¶(æ·»åŠ spring-boot-devtoolsåŒ…) &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;true&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; ä¿®æ”¹spring-boot-maven-pluginæ’ä»¶ &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;!--fork:è®¾ç½®Trueï¼Œå¦åˆ™å¯èƒ½devtoolsä¸ä¼šèµ·ä½œç”¨--&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;/configuration&gt; &lt;/plugin&gt; 2.ä¿®æ”¹IDEAé…ç½® æ‰“å¼€ File -&gt; Settings -&gt;Build,Executions,Deployment -&gt; Compiler ï¼Œå‹¾é€‰ ç„¶åï¼ŒCtrl + Shift + Alt + / æ‰“å¼€ å‹¾é€‰è¯¥é€‰é¡¹ çƒ­æ›´æ–°å®Œæˆï¼ ","link":"https://kangjn.github.io/post/springboot-1jian-yue-ban-chuang-jian-di-yi-ge-ying-yong/"},{"title":"gitå‘½ä»¤è¡Œå¸¸ç”¨æŒ‡ä»¤","content":"gitå‘½ä»¤è¡Œæ—¥å¸¸æŒ‡ä»¤ é¦–å…ˆï¼Œéœ€è¦åœ¨Github/Codingå¹³å°æ–°å»ºä¸€ä¸ªä»“åº“ã€‚ æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶å¤¹ï¼Œå³é”®é€‰æ‹©â€œgit bash hereâ€è¿›å…¥å‘½ä»¤è¡Œã€‚ 1.å°†é¡¹ç›®åˆæ¬¡æ‹‰å–åˆ°æœ¬åœ°ï¼ˆcloneï¼‰ git clone é¡¹ç›®åœ°å€ 2. å°†æœ¬åœ°æ–‡ä»¶pushåˆ°è¿œç¨‹ä»“åº“ git init #åˆå§‹åŒ– git add . #å°†æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶æ·»åŠ è‡³æœ¬åœ°ä»“åº“ git commit -m &quot;æè¿°&quot; #æ·»åŠ æœ¬æ¬¡æäº¤æè¿° git remote add origin https://github.com/ç”¨æˆ·å/é¡¹ç›®å.git git push -u origin master ps: git remote add origin...ä¸ºå»ºç«‹æœ¬åœ°ä¸è¿œç¨‹ä¾èµ–ï¼ŒæŸäº›æƒ…å†µä¸‹éœ€è¦é‡ç½®ã€‚ æ¸…ç©ºä¾èµ–å‘½ä»¤ git remote rm origin 3.åˆ é™¤æ–‡ä»¶å¤¹ git pull origin master git rm -r --cached idea #åˆ é™¤ideaæ–‡ä»¶å¤¹ git commit -m 'åˆ é™¤.idea' git push -u origin master 4. git push å‘½ä»¤ä½¿ç”¨ åœºæ™¯1 åœºæ™¯ï¼šå½“æœ¬åœ°çš„å½“å‰åˆ†æ”¯ä¸æ˜¯local_branchï¼› ä½œç”¨ï¼šå°†è¿œç¨‹åˆ†æ”¯æ‹‰å–åˆ°æŒ‡å®šæœ¬åœ°åˆ†æ”¯ï¼› ä¾‹å¦‚ï¼šå½“å‰åˆ†æ”¯æ˜¯devï¼Œä½†æ˜¯ä½ æƒ³æŠŠè¿œç¨‹master â€œåŒæ­¥â€åˆ°æœ¬åœ°masterï¼Œä½†åˆä¸æƒ³ä½¿checkoutåˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼› git pull origin masterï¼šmaster #å°†è¿œç¨‹masteråˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°masteråˆ†æ”¯ åœºæ™¯2 åœºæ™¯ï¼šåœ¨å½“å‰åˆ†æ”¯ä¸Šè¿›è¡ŒåŒæ­¥æ“ä½œï¼› ä½œç”¨ï¼šå°†æŒ‡å®šè¿œç¨‹åˆ†æ”¯åŒæ­¥åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯ï¼› git pull origin master åœºæ™¯3 åœºæ™¯ï¼šæœ¬åœ°åˆ†æ”¯å·²ç»å’Œæƒ³è¦æ‹‰å–çš„åˆ†æ”¯å»ºç«‹äº†â€œå…³è”â€å…³ç³»ï¼› ä½œç”¨ï¼šæ‹‰å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯çš„æ–°ç‰ˆæœ¬&quot;åæ ‡&quot;ï¼Œå¹¶åŒæ­¥å½“å‰åˆ†æ”¯çš„æœ¬åœ°ä»£ç (å…·ä½“æ ¹æ®å…³è”åˆ†æ”¯è€Œå®š) git push 5.å¼ºåˆ¶æ‹‰å– git fetch --all &amp;&amp; git reset --hard origin/master &amp;&amp; git pull git fetch&amp;&amp;git pull git pull : æ‹‰å–ä»£ç å¹¶åˆå¹¶ git fetch :æ‹‰å–ä»£ç  (å¦‚æœéœ€è¦åˆå¹¶ï¼Œæ‰§è¡Œgit merge) git fetchä½¿ç”¨æ–¹æ³• git fetch origin master:tmp // æ‹‰å–è¿œç¨‹masteråˆ†æ”¯ï¼Œå¹¶æ”¾åˆ°æœ¬åœ°tmpåˆ†æ”¯ä¸Š git diff tmp //æŸ¥çœ‹å½“å‰åˆ†æ”¯å’Œtmpåˆ†æ”¯çš„åŒºåˆ« git merge tmp // æŠŠtmpåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ git branch -d tmp // åˆ é™¤tmpåˆ†æ”¯ ","link":"https://kangjn.github.io/post/git-ming-ling-xing-chang-yong-zhi-ling/"},{"title":"è®¾è®¡æ¨¡å¼-å…­å¤§è®¾è®¡åŸåˆ™","content":"å•ä¸€èŒè´£åŸåˆ™ ç®€ä»‹ å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼ŒSingle Responsesibility Principleï¼‰ï¼šThere should never be more than one reason for a class to change.(åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŸå› å¼•èµ·ç±»çš„å˜æ›´) ä¼˜åŠ¿ ç±»çš„å¤æ‚æ€§é™ä½ã€‚å®ç°ä»€ä¹ˆèŒè´£éƒ½æœ‰æ¸…æ™°æ˜ç¡®çš„å®šä¹‰ å¯è¯»æ€§æé«˜ï¼Œå¤æ‚æ€§é™ä½ å¯ç»´æŠ¤æ€§æé«˜ï¼Œå¯è¯»æ€§æé«˜ å˜æ›´å¼•èµ·çš„é£é™©é™ä½ æ³¨æ„ å•ä¸€èŒè´£æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œç”¨â€œèŒè´£â€æˆ–â€œå˜åŒ–åŸå› â€æ¥è¡¡é‡æ¥å£æˆ–ç±»è®¾è®¡çš„æ˜¯å¦ä¼˜è‰¯ï¼Œä½†æ˜¯è¿™ä¸¤è€…éƒ½æ˜¯ä¸å¯åº¦é‡çš„ï¼Œå› é¡¹ç›®å’Œç¯å¢ƒè€Œå®šã€‚ é‡Œæ°æ›¿æ¢åŸåˆ™ ç®€ä»‹ é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼ŒLiskov Substitution Principleï¼‰ï¼š If for each object o1 of type S there is an object o2 of type T suchthat for all programs P defined in terms of T, the behavior of P is unchangedwhen o1 is substituted for o2 then S is a subtype of T.ï¼ˆå¦‚æœå¯¹æ¯ä¸€ä¸ªç±»å‹ä¸ºT1çš„å¯¹è±¡o1ï¼Œéƒ½æœ‰ç±»å‹ä¸ºT2çš„å¯¹è±¡o2ï¼Œä½¿å¾—ä»¥T1å®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰çš„å¯¹è±¡o1éƒ½ä»£æ¢æˆo2æ—¶ï¼Œç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹T2æ˜¯ç±»å‹T1çš„å­ç±»å‹ã€‚ï¼‰ functions that use pointers or references to base classes must beable to use objects of derived classes without knowing it.ï¼ˆæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚ï¼‰ ç†è§£ï¼šåªè¦çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±å¯ä»¥å‡ºç°ï¼Œå³å°†çˆ¶ç±»å¯¹è±¡è°ƒç”¨çš„è¡Œä¸ºåˆ‡æ¢æˆå­ç±»å¯¹è±¡è°ƒç”¨è¡Œä¸ºä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯æˆ–å¼‚å¸¸ï¼Œä½†æ˜¯åè¿‡æ¥å´ä¸è¡Œã€‚ å«ä¹‰ å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³• é‡Œæ°æ›¿æ¢åŸåˆ™å¯ä»¥æ­£ç€ç”¨ï¼Œä¸èƒ½åè¿‡æ¥ç”¨ï¼šå­ç±»å‡ºç°çš„åœ°æ–¹ï¼Œçˆ¶ç±»æœªå¿…å¯ä»¥èƒœä»» è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œè¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§ï¼šå¦‚æœåè¿‡æ¥ä¼šå¼•èµ·ä¸šåŠ¡é€»è¾‘çš„é”™ä¹±ã€‚å­ç±»ä¸­æ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆå‚æ•°ï¼‰å¿…é¡»ä¸è¶…ç±»ä¸­è¢«è¦†å†™çš„æ–¹æ³•çš„å‰ç½®æ¡ä»¶ç›¸åŒæˆ–æ›´å®½æ¾ã€‚ï¼ˆå¦‚ï¼šçˆ¶ç±»æ˜¯HashMapï¼Œå­ç±»æ˜¯HashMapæˆ–Mapï¼‰ è¦†å†™æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å°ï¼šé‡Œæ°æ›¿æ¢åŸåˆ™è¦æ±‚Så°äºç­‰äºTï¼Œåˆ™Så’ŒTè¦ä¹ˆæ˜¯åŒä¸€ç±»å‹ï¼Œè¦ä¹ˆSæ˜¯Tçš„å­ç±»ã€‚ æ³¨æ„ åœ¨ç±»ä¸­è°ƒç”¨å…¶ä»–ç±»æ—¶å¿…é¡»è¦ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£ï¼Œå¦‚æœä¸èƒ½ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£ï¼Œè¯´æ˜ç±»çš„è®¾è®¡å·²ç»è¿èƒŒäº†LSPåŸåˆ™ å¦‚æœå­ç±»ä¸èƒ½å®Œæ•´çš„å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ–è€…çˆ¶ç±»çš„æŸäº›æ–¹æ³•åœ¨å­ç±»ä¸­å·²ç»å‘ç”Ÿäº†&quot;ç•¸å˜&quot;ï¼Œå»ºè®®æ–­å¼€çˆ¶å­ç»§æ‰¿å…³ç³»ï¼Œé‡‡ç”¨ä¾èµ–ã€èšé›†ã€ç»„åˆç­‰å…³ç³»ä»£æ›¿ç»§æ‰¿ ä¾èµ–å€’ç½®åŸåˆ™ ç®€ä»‹ ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼ŒDependence Inversion Principleï¼‰ï¼šHigh level modules should not depend upon low level modules. Both should depend upon abstractions. Abstractions should not depend upon details. Details should depend upon abstractions ç†è§£ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–åº•å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡;æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚;ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ å«ä¹‰ æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®ç°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¾èµ–å…³ç³»æ˜¯é€šè¿‡æ¥å£æˆ–æŠ½è±¡å®ç°çš„ æ¥å£æˆ–æŠ½è±¡ç±»ä¸ä¾èµ–äºå®ç°ç±» å®ç°ç±»ä¾èµ–æ¥å£æˆ–æŠ½è±¡ç±» æ³¨æ„ Javaå˜é‡æœ‰ä¸¤ç§ç±»å‹ï¼šè¡¨é¢ç±»å‹ï¼ˆå®šä¹‰æ—¶å€™èµ‹äºˆçš„ç±»å‹ï¼‰ï¼Œå®é™…ç±»å‹ï¼ˆå¯¹è±¡çš„ç±»å‹ï¼‰ ä¾èµ–çš„ä¸‰ç§å†™æ³•ï¼šæ„é€ å‡½æ•°ä¼ é€’ä¾èµ–å¯¹è±¡ã€setteræ–¹æ³•ä¼ é€’ä¾èµ–å¯¹è±¡ã€æ¥å£å£°æ˜ä¾èµ–å¯¹è±¡ ä¾èµ–å€’ç½®åŸåˆ™æ˜¯å®ç°å¼€é—­åŸåˆ™çš„é‡è¦é€”å¾„ã€‚ ä½¿ç”¨ è¦æƒ³ä½¿ç”¨è¿™ä¸ªè§„åˆ™åªéœ€è¦åšåˆ°ä¸€ä¸‹å‡ ç‚¹ï¼š æ¯ä¸ªç±»å°½é‡éƒ½æœ‰æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œæˆ–ä¸¤è€…çš†æœ‰ å˜é‡çš„è¡¨é¢ç±»å‹å°½é‡æ˜¯æ¥å£æˆ–æŠ½è±¡ç±» ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿ å°½é‡ä¸è¦è¦†å†™åŸºç±»æ–¹æ³• ç»“åˆé‡Œæ°æ›¿æ¢åŸåˆ™ä½¿ç”¨ï¼šæ¥å£è´Ÿè´£å®šä¹‰Publicå±æ€§å’Œæ–¹æ³•ï¼Œå¹¶å£°æ˜ä¸å…¶ä»–å¯¹è±¡çš„ä¾èµ–å…³ç³»ï¼ŒæŠ½è±¡ç±»è´Ÿè´£å…¬å…±æ„é€ éƒ¨åˆ†çš„å®ç°ï¼Œå®ç°ç±»å‡†ç¡®çš„å®ç°ä¸šåŠ¡é€»è¾‘ï¼ŒåŒæ—¶åœ¨é€‚å½“çš„æ—¶å€™å¯¹çˆ¶ç±»è¿›è¡Œç»†åŒ– æ¥å£éš”ç¦»åŸåˆ™ ç®€ä»‹ æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼šInterface Segregation Principleï¼‰ï¼š Clients should not be forced to depend upon interfaces that they don't useï¼ˆå®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–äºå®ƒä¸éœ€è¦çš„æ¥å£ï¼‰ The dependency of one class to another one should depend on the smallest possible interfaceï¼ˆç±»é—´çš„ä¾èµ–å…³ç³»åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šï¼‰ ç†è§£ï¼šå»ºç«‹å•ä¸€æ¥å£ï¼Œä¸è¦å»ºç«‹è‡ƒè‚¿åºå¤§çš„æ¥å£ï¼Œæ¥å£å°½é‡ç»†åŒ–åŒæ—¶æ¥å£æ–¹æ³•å°½é‡å°‘ å«ä¹‰ æ¥å£å°½å¯èƒ½çš„å°ï¼šå‰ææ˜¯ä¸èƒ½è¿èƒŒå•ä¸€èŒè´£åŸåˆ™ï¼Œä¼˜å…ˆè€ƒè™‘å•ä¸€èŒè´£åŸåˆ™ æ¥å£è¦é«˜å†…èšï¼šæé«˜æ¥å£ã€ç±»ã€æ¨¡å—çš„å¤„ç†èƒ½åŠ›ï¼Œå‡å°‘å¯¹å¤–çš„äº¤äº’ å®šåˆ¶æœåŠ¡ï¼šå•ç‹¬ä¸ºä¸€ä¸ªä¸ªä½“æä¾›ä¼˜è‰¯çš„æœåŠ¡ æ¥å£è®¾è®¡æ˜¯æœ‰é™åº¦çš„ æ³¨æ„ æ¥å£éš”ç¦»åŸåˆ™å’Œå•ä¸€èŒè´£å¹¶ä¸å†²çªï¼Œä¸¤è€…é’ˆå¯¹çš„è§’åº¦ä¸åŒã€‚å•ä¸€èŒè´£æ³¨é‡çš„æ˜¯èŒè´£ï¼Œæ˜¯ä¸šåŠ¡é€»è¾‘ä¸Šçš„åˆ’åˆ†ã€‚è€Œæ¥å£éš”ç¦»åŸåˆ™è¦æ±‚æ¥å£çš„æ–¹æ³•å°½é‡å°‘ è®¾è®¡æ˜¯æœ‰é™åº¦çš„ï¼Œä¸è¦æ— é™çš„è€ƒè™‘æœªæ¥å¯èƒ½å‡ºç°çš„æƒ…å†µ ä½¿ç”¨ ä¸€ä¸ªæ¥å£åªæœåŠ¡äºä¸€ä¸ªå­æ¨¡å—æˆ–ä¸šåŠ¡é€»è¾‘ é€šè¿‡ä¸šåŠ¡é€»è¾‘å°½é‡å‹ç¼©æ¥å£ä¸­çš„publicæ–¹æ³•ï¼Œå¹¶ç»å¸¸å›é¡¾æ¥å£ å¦‚æœæ¥å£å·²ç»è¢«æ±¡æŸ“ï¼Œå°½é‡å»ä¿®æ”¹ã€‚å¦‚æœä¸è¡Œï¼Œåˆ™ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œè½¬æ¢å¤„ç† äº†è§£ç¯å¢ƒï¼Œæ ¹æ®ä¸šåŠ¡æ¥è®¾è®¡ è¿ªç±³ç‰¹æ³•åˆ™ ç®€ä»‹ è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLoDï¼šLaw of Demeterï¼‰ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ã€‚å³ä¸€ä¸ªç±»åº”è¯¥å¯¹è‡ªå·±éœ€è¦è€¦åˆæˆ–è°ƒç”¨çš„ç±»çŸ¥é“çš„æœ€å°‘ å«ä¹‰ åªå’Œæœ‹å‹äº¤æµï¼šä¸è¦å‡ºç°getA().getB().getC().getD()çš„å¥‡è‘©å†™æ³• æœ‹å‹ç±»ï¼šå‡ºç°åœ¨æˆå‘˜å˜é‡ã€æ–¹æ³•çš„è¾“å…¥è¾“å‡ºå‚æ•°ä¸­çš„ç±»ç§°ä¸ºæˆå‘˜æœ‹å‹ç±»ï¼Œå‡ºç°åœ¨æ–¹æ³•ä½“å†…éƒ¨çš„ç±»ä¸å±äºæœ‹å‹ç±» æœ‹å‹é—´ä¹Ÿæ˜¯æœ‰è·ç¦»çš„ï¼šå…¬å¼€çš„publicå±æ€§æˆ–æ–¹æ³•è¶Šå¤šï¼Œä¿®æ”¹æ—¶æ¶‰åŠçš„é¢ä¹Ÿå°±è¶Šå¤§ã€‚åœ¨è®¾è®¡æ—¶å€™è¦åå¤è€ƒè™‘æ˜¯å¦å¯ä»¥å‡å°‘publicçš„æ–¹æ³•å’Œå±æ€§ï¼Œå°†å…¶ä¿®æ”¹æˆprivateç­‰ï¼Œå¹¶ä¸”æ˜¯å¦å¯ä»¥åŠ ä¸Šfinalå…³é”®å­— æ˜¯è‡ªå·±çš„å°±æ˜¯è‡ªå·±çš„ï¼šå¦‚æœä¸€ä¸ªæ–¹æ³•æ”¾åœ¨æœ¬ç±»ä¸­ï¼Œæ—¢ä¸å¢åŠ ç±»é—´å…³ç³»ä¹Ÿä¸å¯¹æœ¬ç±»äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå°±æ”¾åœ¨æœ¬ç±»ä¸­ è°¨æ…ä½¿ç”¨Serializableï¼šç”±äºå¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œæ‰€ä»¥ä¸å¿…å¤ªè¿‡åœ¨æ„ã€‚ æ³¨æ„ ä¸€ä¸ªç±»åªå’Œæœ‹å‹äº¤æµä¸å’Œé™Œç”Ÿäººäº¤æµ ï¼Œä¸è¦å‡ºç°getA().getB().getC().getD()çš„å¥‡è‘©å†™æ³• ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»æ˜¯å»ºç«‹åœ¨ç±»é—´çš„ï¼Œè€Œä¸æ˜¯æ–¹æ³•é—´çš„ï¼Œä¸€ä¸ªæ–¹æ³•å°½é‡ä¸å¼•å…¥ä¸€ä¸ªç±»ä¸­ä¸å­˜åœ¨çš„å¯¹è±¡ï¼ŒJDK APIæä¾›çš„é™¤å¤– å°½é‡ä¸è¦å¯¹å¤–å…¬å¸ƒå¤ªå¤šçš„publicæ–¹æ³•å’Œéé™æ€çš„publicå˜é‡ å¦‚æœä¸€ä¸ªç±»è·³è½¬ä¸¤æ¬¡ä»¥ä¸Šæ‰èƒ½è®¿é—®åˆ°å¦å¤–ä¸€ä¸ªç±»ï¼Œå°±éœ€è¦è¿›è¡Œé‡æ„äº†ã€‚ å¼€é—­åŸåˆ™ ç®€ä»‹ å¼€é—­åŸåˆ™ï¼šSoftware entities like classes,modules and functions should be open for extension but closed for modificationsï¼ˆä¸€ä¸ªè½¯ä»¶å®ä½“ï¼Œå¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€å‘å¯¹ä¿®æ”¹å…³é—­ï¼‰ ç†è§£ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“åº”è¯¥é€šè¿‡æ‰©å±•æ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰ä»£ç æ¥å®ç°å˜åŒ–ã€‚ ä¼˜åŠ¿ ä½¿ç”¨å¼€é—­åŸåˆ™èƒ½æœ‰æ•ˆçš„å‡å°‘é‡æ„æ—¶çš„æµ‹è¯• å¯ä»¥æé«˜å¤ç”¨æ€§ å¯ä»¥æé«˜å¯ç»´æŠ¤æ€§ é¢å‘å¯¹è±¡å¼€å‘çš„è¦æ±‚ ä½¿ç”¨ æŠ½è±¡çº¦æŸ é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»çº¦æŸæ‰©å±•ï¼Œå¯¹æ‰©å±•è¿›è¡Œè¾¹ç•Œé™å®šï¼Œä¸å…è®¸å‡ºç°åœ¨æ¥å£æˆ–æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨çš„publicæ–¹æ³• å‚æ•°ç±»å‹ã€å¼•ç”¨å¯¹è±¡å°½é‡ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè€Œä¸æ˜¯å®ç°ç±» æŠ½è±¡å±‚å°½é‡ä¿æŒç¨³å®šï¼Œä¸€æ—¦ç¡®è®¤å°±ä¸å…è®¸ä¿®æ”¹ å…ƒæ•°æ®æ§åˆ¶æ¨¡å—è¡Œä¸ºï¼šå°½é‡ä½¿ç”¨å…ƒæ•°æ®æ¥æ§åˆ¶ç¨‹åºçš„è¡Œä¸ºï¼ˆæè¿°ç¼“è§£å’Œæ•°æ®çš„æ•°æ®ï¼Œé€šä¿—çš„è¯´å°±æ˜¯é…ç½®ï¼‰ åˆ¶å®šé¡¹ç›®ç« ç¨‹ å°è£…å˜åŒ– å°†ç›¸åŒçš„å˜åŒ–å°è£…åˆ°ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ä¸­ å°†ä¸åŒçš„å˜åŒ–å°è£…åˆ°ä¸åŒçš„æ¥å£æˆ–æŠ½è±¡ç±»ä¸­ï¼Œä¸åº”è¯¥æœ‰ä¸¤ä¸ªä¸åŒçš„å˜åŒ–å‡ºç°åœ¨åŒä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ä¸­ æ³¨æ„ å¼€é—­åŸåˆ™å¯¹æ‰©å±•å¼€æ”¾å¯¹ä¿®æ”¹å…³é—­ï¼Œå¹¶ä¸æ„å‘³ç€ä¸åšä»»ä½•ä¿®æ”¹ï¼Œåº•å±‚æ¨¡å—çš„å˜æ›´ï¼Œå¿…ç„¶æœ‰é«˜å±‚æ¨¡å—è¿›è¡Œè€¦åˆï¼Œå¦åˆ™å°±æ˜¯æ— æ„ä¹‰çš„ä»£ç  ","link":"https://kangjn.github.io/post/she-ji-mo-shi-liu-da-she-ji-yuan-ze/"},{"title":"ã€Šè®ºè¯­ã€‹50ç»å…¸åå¥","content":"1ï¼æœé—»é“ï¼Œå¤•æ­»å¯çŸ£ã€‚ æ—©ä¸Šæ˜ç™½çŸ¥æ™“äº†çœŸç†ï¼Œå³ä¾¿æ™šä¸Šæ­»å»ï¼Œä¹Ÿæ˜¯å€¼å¾—çš„ã€‚ 2ï¼è§è´¤æ€é½ç„‰ï¼Œè§ä¸è´¤è€Œå†…è‡ªçœä¹Ÿã€‚ è§åˆ°è´¤äººä¾¿åº”è€ƒè™‘æ€æ ·æ‰èƒ½å‘ä»–çœ‹é½ï¼Œè§åˆ°ä¸è´¤çš„äººä¾¿åº”åœ¨å†…å¿ƒåçœï¼Œçœ‹è‡ªå·±æœ‰æ²¡æœ‰åŒæ ·çš„ç¼ºç‚¹ã€‚ 3ï¼å·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½äºäººã€‚ å¦‚æœä¸å¸Œæœ›ä»–äººè¿™æ ·å¯¹å¾…è‡ªå·±ï¼Œè‡ªå·±ä¹Ÿä¸è¦è¿™æ ·å¯¹å¾…ä»–äººã€‚ 4ï¼ä¸æ€¨å¤©ï¼Œä¸å°¤äººã€‚ é‡åˆ°æŒ«æŠ˜ä¸å¤±è´¥ï¼Œç»ä¸æŠ±æ€¨å¤©ï¼Œä¸è´£æ€ªäººã€‚ 5ï¼ä¸è¿æ€’ï¼Œä¸è´°è¿‡ã€‚ ä¸ä¼šè¿æ€’äºäººï¼Œä¸ä¼šçŠ¯ä¸¤æ¬¡åŒæ ·çš„é”™è¯¯ã€‚ 6ï¼è¿‡è€Œä¸æ”¹ï¼Œæ˜¯è°“è¿‡çŸ£ã€‚ æœ‰äº†è¿‡é”™è€Œä¸æ”¹æ­£ï¼Œè¿™å°±æ˜¯çœŸçš„è¿‡é”™äº†ã€‚ 7ï¼äººè€Œæ— ä¿¡ï¼Œä¸çŸ¥å…¶å¯ä¹Ÿã€‚ ä¸€ä¸ªäººä¸è®²ä¿¡ç”¨ï¼Œä¸çŸ¥ä»–æ€æ ·ç«‹èº«å¤„ä¸–ã€‚ 8ï¼æœ‰åˆ™æ”¹ä¹‹ï¼Œæ— åˆ™åŠ å‹‰ã€‚ åˆ«äººç»™è‡ªå·±æŒ‡å‡ºç¼ºç‚¹é”™è¯¯ï¼Œå¦‚æœæœ‰ï¼Œå°±æ”¹æ­£ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ç”¨æ¥æé†’è‡ªå·±ä¸çŠ¯åŒæ ·çš„é”™è¯¯ã€‚ 9ï¼å¦‚åˆ‡å¦‚ç£‹ï¼Œå¦‚ç¢å¦‚ç£¨ã€‚ å®Œå–„è‡ªèº«çš„ä¿®å…»ï¼Œæ—¢åƒé›•ç¢ç‰å™¨ï¼Œåˆåƒé›•åˆ»çŸ³å¤´ï¼Œéƒ½æ˜¯éœ€è¦ä¸‹åŠŸå¤«çš„ã€‚ 10ï¼äººæ— è¿œè™‘ï¼Œå¿…æœ‰è¿‘å¿§ã€‚ ä¸€ä¸ªäººæ²¡æœ‰é•¿è¿œçš„è€ƒè™‘ï¼Œä¸€å®šä¼šæœ‰çœ¼å‰çš„å¿§æ‚£ã€‚æŒ‡æ™ºè€…èƒ½ä¸ä¸ºçœ¼å‰å¾—å¤±æ‰€ç¾ç»Šï¼Œç›®å…‰é•¿è¿œï¼Œåˆ¤æ–­æ•é”ã€‚ 11ï¼å›å­æ±‚è¯¸å·±ï¼Œå°äººæ±‚è¯¸äººã€‚ å›å­å“ªå„¿åšå¾—ä¸å¯¹ï¼Œä¼šä»è‡ªå·±å†…å¿ƒå»æŸ¥æ‰¾åŸå› ï¼Œè¦æ±‚è‡ªå·±åšå¥½ï¼Œä»è€Œä¿®æ­£è‡ªå·±ï¼›å°äººåˆ™æ˜¯å‘å¤–å»æŸ¥æ‰¾åŸå› ï¼Œè¦æ±‚åˆ«äººåšå¥½ã€‚ 12ï¼å›å­å¦è¡è¡ï¼Œå°äººé•¿æˆšæˆšã€‚ å›å­å…‰æ˜ç£Šè½ï¼Œèƒ¸æ€€å¦è¡ï¼Œå°äººåˆ™æ–¤æ–¤è®¡è¾ƒï¼Œæ‚£å¾—æ‚£å¤±ã€‚ 13ï¼å›å­å–»äºä¹‰ï¼Œå°äººå–»äºåˆ©ã€‚ å›å­èƒ½å¤Ÿé¢†æ‚Ÿçš„æ˜¯é“ä¹‰ï¼Œå°äººèƒ½å¤Ÿé¢†æ‚Ÿçš„æ˜¯åˆ©ç›Šã€‚ 14ï¼å›å­å’Œè€Œä¸åŒï¼Œå°äººåŒè€Œä¸å’Œã€‚ å›å­å’Œè°è€Œä¸åŒæµåˆæ±¡ï¼Œå°äººåŒæµåˆæ±¡è€Œä¸å’Œè°ã€‚ 15ï¼å›å­æ³°è€Œä¸éª„ï¼Œå°äººéª„è€Œä¸æ³°ã€‚ å›å­å¦è¡èˆ’ç•…è€Œä¸éª„å‚²è‡ªå¤§ï¼Œå°äººéª„å‚²è‡ªå¤§è€Œä¸å¦è¡èˆ’ç•…ã€‚ 16ï¼å›å­æˆäººä¹‹ç¾ï¼Œä¸æˆäººä¹‹æ¶ã€‚å°äººåæ˜¯ã€‚ å›å­æˆå…¨åˆ«äººçš„å¥½äº‹ï¼Œè€Œä¸ä¿ƒæˆåˆ«äººçš„åäº‹ã€‚å°äººåˆ™ä¸æ­¤ç›¸åã€‚ 17ï¼å›å­æ¬²è®·äºè¨€ï¼Œè€Œæ•äºè¡Œã€‚ å›å­è¯´è¯è¦è°¨æ…ï¼Œè€Œè¡ŒåŠ¨è¦æ•æ·ã€‚å›å­è¯´è¯è¦è°¨æ…ï¼Œæ˜¯å› ä¸ºâ€œè¦†æ°´éš¾æ”¶â€ï¼Œéšå¿ƒæ‰€æ¬²è¯´å‡ºå£çš„è¯ï¼Œå¯èƒ½å¯¹äºåˆ«äººæœ‰å¤±å°Šé‡ã€‚ä½†æ˜¯ä¸€æ—¦å›å­å¯¹äºå†³å®šçš„äº‹æƒ…ï¼Œç»ä¸çŠ¹è±«æ¨æ‰˜è€Œè€½è¯¯äº†æ—¶å…‰ã€‚è¿™ä¸€ç¼“ä¸€æ€¥ä¹‹é—´ï¼Œæ­£æ˜¯ä½“ç°å›å­æœ‰ä¸ºæœ‰å®ˆçš„å¤„ä¸–åŸåˆ™ã€‚ 18ï¼å›å­é£Ÿæ— æ±‚é¥±ï¼Œå±…æ— æ±‚å®‰ï¼Œæ•äºäº‹è€Œæ…äºè¨€ï¼Œå°±æœ‰é“è€Œæ­£ç„‰ï¼Œå¯è°“å¥½å­¦ä¹Ÿå·²ã€‚ å›å­é£Ÿä¸è¿½æ±‚é¥±è¶³ï¼Œå±…ä½ä¸è¿½æ±‚å®‰é€¸ï¼Œå¯¹å·¥ä½œå‹¤å¥‹æ•æ·ï¼Œè¯´è¯å´è°¨æ…ï¼Œæ¥è¿‘æœ‰é“å¾·æœ‰å­¦é—®çš„äººå¹¶å‘ä»–å­¦ä¹ ï¼Œçº æ­£è‡ªå·±çš„ç¼ºç‚¹ï¼Œå°±å¯ä»¥ç§°å¾—ä¸Šæ˜¯å¥½å­¦äº†ã€‚ **19ï¼ä¸å–„äººå±…ï¼Œå¦‚å…¥èŠå…°ä¹‹å®¤ï¼Œä¹…è€Œä¸é—»å…¶é¦™ï¼Œå³ä¸ä¹‹åŒ–çŸ£ï¼›ä¸ä¸å–„äººå±…ï¼Œå¦‚å…¥é²é±¼ä¹‹è‚†ï¼Œä¹…è€Œä¸é—»å…¶è‡­ï¼›äº¦ä¸ä¹‹åŒ–çŸ£ã€‚ ** å¸¸ä¸å–„äººç›¸å¤„ï¼Œå°±åƒç”Ÿæ´»åœ¨ç§æ»¡å…°èŠä»™è‰çš„èŠ±æˆ¿ï¼Œæ—¶é—´é•¿äº†ä¾¿å¯Ÿè§‰ä¸åˆ°é¦™å‘³ï¼Œé‚£æ˜¯å› ä¸ºå·²ç»ä¹ æƒ¯äº†å–„è¡Œçš„èŠ¬èŠ³ï¼›å¸¸ä¸ä¸å–„çš„äººç›¸å¤„ï¼Œå°±åƒä½è¿›äº†æ»¡æ˜¯è‡­é±¼çƒ‚è™¾çš„æµ·é²œå¸‚åœºï¼Œæ—¶é—´é•¿äº†ä¾¿å¯Ÿè§‰ä¸åˆ°è…¥å‘³ï¼Œä¹Ÿæ˜¯å› ä¸ºé—»æƒ¯äº†æ¶è¡Œçš„è…è‡­ã€‚ åœ£äººæ­¤è¨€æ˜¯åœ¨å‘Šè¯«æˆ‘ä»¬ï¼šä¸äººç›¸å¤„ï¼Œå…ˆçœ‹äººå“ã€‚ å¸¸è·Ÿå–„è‰¯çš„äººåœ¨ä¸€èµ·ï¼Œä¾¿ä¼šè€³æ¿¡ç›®æŸ“åœ°è·Ÿç€è¡Œå–„äº‹ã€è¯´å–„è¨€ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œå¿ƒèƒ¸ä¹Ÿä¼šå˜å¾—æ›´åŠ å®½å¹¿ã€‚ å¸¸è·Ÿé‚ªæ¶çš„äººåœ¨ä¸€èµ·ï¼Œåˆ™ä¼šä¸çŸ¥ä¸è§‰åœ°è·Ÿåšé”™äº‹ã€è¯´æ¶è¯ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œéš¾å…ä¼šæŠ˜æŸè‡ªèº«çš„å“è¡Œã€‚ 20ï¼å›å­æœ‰ä¸‰ç•ï¼šç•å¤©å‘½ï¼Œç•å¤§äººï¼Œç•åœ£äººä¹‹è¨€ã€‚å°äººä¸çŸ¥å¤©å‘½è€Œä¸ç•ä¹Ÿï¼Œç‹å¤§äººï¼Œä¾®åœ£äººä¹‹è¨€â€ã€‚ å›å­æœ‰ä¸‰ä»¶æ•¬ç•çš„äº‹æƒ…ï¼šæ•¬ç•å¤©å‘½ï¼Œæ•¬ç•å±…é«˜ä½çš„äººï¼Œæ•¬ç•åœ£äººçš„è¯ï¼Œå°äººä¸çŸ¥é“å¤©æ‰€èµ‹äºˆçš„æ­£ç†è€Œä¸æ•¬ç•ï¼Œæ€ æ…¢è½»è§†é«˜ä½çš„äººï¼Œæˆä¾®åœ£äººçš„è¯ã€‚ 21ï¼å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹ï¼Ÿæœ‰æœ‹è‡ªè¿œæ–¹æ¥ï¼Œä¸äº¦ä¹ä¹ï¼Ÿäººä¸çŸ¥è€Œä¸æ„ ï¼Œä¸äº¦å›å­ä¹ï¼Ÿ å­¦è¿‡çš„çŸ¥è¯†ï¼Œåœ¨é€‚å½“çš„æ—¶å€™å»å¤ä¹ å®ƒï¼Œè¿™ä¸æ˜¯ä»¤äººæ„Ÿåˆ°å¿«ä¹çš„äº‹å—ï¼Ÿ æœ‰æœ‹å‹ä»è¿œæ–¹æ¥ï¼Œè¿™ä¸æ˜¯ä»¶ä»¤äººæ„Ÿåˆ°å¿«ä¹çš„äº‹å—ï¼Ÿ åˆ«äººä¸äº†è§£æˆ‘ï¼Œæˆ‘ä¹Ÿä¸ç”Ÿæ°”ï¼Œè¿™ä¸ä¹Ÿæ˜¯ä¸€ç§å›å­é£åº¦çš„è¡¨ç°å—ï¼Ÿ 22ï¼ä¸‰äººè¡Œï¼Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚æ‹©å…¶å–„è€…è€Œä»ä¹‹ï¼Œå…¶ä¸å–„è€…è€Œæ”¹ä¹‹ã€‚ å‡ ä¸ªäººåŒè¡Œï¼Œå…¶ä¸­å¿…æœ‰å€¼å¾—æˆ‘å­¦ä¹ çš„äººï¼Œé€‰å–ä»–çš„ä¼˜ç‚¹å‘ä»–å­¦ä¹ ï¼Œå¯¹ä»–çš„ç¼ºç‚¹å¼•ä»¥ä¸ºæˆ’ï¼Œæœ‰åˆ™æ”¹ä¹‹ã€‚ 23ï¼å­¦è€Œä¸åŒï¼Œè¯²äººä¸å€¦ã€‚ åŠªåŠ›å­¦ä¹ å´ä¸æ„Ÿåˆ°æ»¡è¶³ï¼Œæ•™å¯¼åˆ«äººä¸æ„Ÿåˆ°åŒå€¦ã€‚ 24ï¼å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚ åªå­¦ä¹ å´ä¸æ€è€ƒå°±ä¼šæ„Ÿåˆ°è¿·èŒ«ï¼Œåªç©ºæƒ³å´ä¸å­¦ä¹ å°±ä¼šç–²å€¦è€Œæ²¡æœ‰æ”¶è·ã€‚ 25ï¼æ•è€Œå¥½å­¦ï¼Œä¸è€»ä¸‹é—®ï¼Œæ˜¯ä»¥è°“ä¹‹æ–‡ä¹Ÿã€‚ èªæ˜è€Œä¸”å¥½å­¦ï¼Œä¸è®¤ä¸ºå‘åœ°ä½æ¯”è‡ªå·±ä½ã€å­¦è¯†æ¯”è‡ªå·±æµ…çš„äººè¯·æ•™æ˜¯å¯è€»çš„äº‹ï¼Œä»»ä½•ä¸€ä¸ªèƒ½å¦‚æ­¤ä½œä¸ºçš„äººï¼Œæ€ä¼šä¸èƒ½æˆæ‰ï¼Ÿ 26ï¼çŸ¥ä¹‹ä¸ºçŸ¥ä¹‹ï¼Œä¸çŸ¥ä¸ºä¸çŸ¥ï¼Œæ˜¯çŸ¥ä¹Ÿã€‚ çŸ¥é“å°±æ˜¯çŸ¥é“ï¼Œä¸çŸ¥é“åº”å½“è¯´ä¸çŸ¥é“ï¼Œè¿™æ‰æ˜¯æ˜æ™ºçš„è¡Œä¸ºã€‚ 27ï¼æ¸©æ•…è€ŒçŸ¥æ–°ï¼Œå¯ä»¥ä¸ºå¸ˆçŸ£ã€‚ æ¸©ä¹ æ—§çŸ¥è¯†ä»è€Œå¾—åˆ°æ–°çš„ç†è§£ä¸ä½“ä¼šï¼Œå‡­å€Ÿè¿™ä¸€ç‚¹å°±å¯ä»¥æˆä¸ºè€å¸ˆäº†ã€‚ 28ï¼å­æ›°ï¼šâ€œå¾åæœ‰äº”è€Œå¿—äºå­¦ï¼Œä¸‰åè€Œç«‹ï¼Œå››åè€Œä¸æƒ‘ï¼Œäº”åè€ŒçŸ¥å¤©å‘½ï¼Œå…­åè€Œè€³é¡ºï¼Œä¸ƒåè€Œä»å¿ƒæ‰€æ¬²ï¼Œä¸é€¾çŸ©ã€‚â€ å­”å­è¯´ï¼šâ€œæˆ‘åäº”å²æ—¶ï¼Œä¾¿ç«‹å®šå¿—å‘å­¦ä¹ ï¼›ä¸‰åå²æ—¶ï¼Œèƒ½ç«‹èº«å¤„ä¸–ï¼›å››åå²æ—¶ï¼Œå¯ä»¥å…äºè¿·æƒ‘ï¼›äº”åå²æ—¶ï¼Œå·²ç»èƒ½å¤Ÿé¢†æ‚Ÿå¤©å‘½ï¼›å…­åå²æ—¶ï¼Œå°±å¯ä»¥é¡ºä»å¤©å‘½ï¼›ä¸ƒåå²æ—¶ï¼Œç»ˆäºèƒ½åšåˆ°åšäº‹éšå¿ƒæ‰€æ¬²ï¼Œå´éƒ½èƒ½åˆäºè§„çŸ©çš„å¢ƒç•Œäº†ã€‚â€ 29ï¼æ¬²é€Ÿåˆ™ä¸è¾¾ï¼›è§å°åˆ©åˆ™å¤§äº‹ä¸æˆã€‚ ä¸è¦æ±‚å¿«ï¼Œä¸è¦è´ªæ±‚å°åˆ©ã€‚æ±‚å¿«åè€Œè¾¾ä¸åˆ°ç›®çš„ï¼Œè´ªæ±‚å°åˆ©å°±åšä¸æˆå¤§äº‹ã€‚ 30ï¼å°ä¸å¿ï¼Œåˆ™ä¹±å¤§è°‹ã€‚ å°äº‹ä¸å¿è€ï¼Œå°±ä¼šåäº†å¤§äº‹æƒ…ã€‚ 31ï¼çŸ¥è€…ä¸æƒ‘ï¼Œä»è€…ä¸å¿§ï¼Œå‹‡è€…ä¸æƒ§ã€‚ æœ‰æ™ºæ…§çš„äººä¸ä¼šè¿·æƒ‘ï¼Œæœ‰ä»å¾·çš„äººä¸ä¼šå¿§æ„ï¼Œå‹‡æ•¢çš„äººä¸ä¼šç•æƒ§ã€‚ 32ï¼è§ä¹‰ä¸ä¸ºï¼Œæ— å‹‡ä¹Ÿã€‚ è§åˆ°åº”è¯¥æŒºèº«è€Œå‡ºçš„äº‹æƒ…ï¼Œå´è¢–æ‰‹æ—è§‚ï¼Œå°±æ˜¯æ€¯æ‡¦ã€‚ 33ï¼å¿—å£«ä»äººï¼Œæ— æ±‚ç”Ÿä»¥å®³ä»ï¼Œæœ‰æ€èº«ä»¥æˆä»ã€‚ ä¸€ä½æ€€æœ‰å¤§å¿—å’Œä»å¾·çš„äººï¼Œä¸ä¼šè´ªç”Ÿæ€•æ­»è€ŒæŸå®³ä»å¾·ï¼Œåªä¼šä¸æƒœç‰ºç‰²ç”Ÿå‘½è€Œæˆå…¨ä»å¾·ã€‚ 34ï¼ä¸‰å†›å¯å¤ºå¸…ä¹Ÿï¼ŒåŒ¹å¤«ä¸å¯å¤ºå¿—ä¹Ÿã€‚ ä¸‰å†›å¯ä»¥ä¸§å¤±ä¸»å¸…ï¼Œä¸€ä¸ªäººçš„å¿—æ°”ä¸ä¸»å¼ å´æ˜¯ä¸èƒ½è¢«å¼ºè¿«æ”¹å˜çš„ã€‚ 35ï¼å£«ä¸å¯ä»¥ä¸å¼˜æ¯…ï¼Œä»»é‡è€Œé“è¿œã€‚ æœ‰å¿—è€…ä¸å¯ä»¥ä¸å¿ƒèƒ¸å¼€é˜”ï¼Œæ„å¿—åšå¼ºï¼Œå› ä¸ºæ‹…å­æ²‰é‡è€Œä¸”é“è·¯é¥è¿œã€‚ 36ï¼åä¸æ­£ï¼Œåˆ™è¨€ä¸é¡ºï¼Œè¨€ä¸é¡ºï¼Œåˆ™äº‹ä¸æˆã€‚ ååˆ†ä¸æ­£ï¼Œæ‰€è¯´çš„è¯å°±ä¸åˆé“ç†ã€‚è¯´è¯ä¸åˆç†ï¼Œäº‹æƒ…å°±åŠä¸æˆã€‚ 37ï¼è‡ªå¤çš†æœ‰æ­»ï¼Œæ°‘æ— ä¿¡ä¸ç«‹ã€‚ å­è´¡é—®æ€ä¹ˆæ²»ç†å›½å®¶ã€‚å­”å­è¯´ï¼šâ€œç²®é£Ÿå……è¶³ï¼Œå†›å¤‡å……è¶³ï¼Œäººæ°‘ä¿¡ä»»å½“æ”¿è€…ã€‚â€å­è´¡è¯´ï¼šâ€œå¦‚æœä¸å¾—ä¸å»æ‰ä¸€é¡¹ï¼Œé‚£ä¹ˆè¿™ä¸‰é¡¹åº”å…ˆå»æ‰å“ªä¸€é¡¹ï¼Ÿâ€å­”å­è¯´ï¼šâ€œå»æ‰å†›å¤‡ã€‚â€å­è´¡è¯´ï¼šâ€œå¦‚æœä¸å¾—ä¸å†å»æ‰ä¸€é¡¹ï¼Œé‚£ä¹ˆè¿™ä¸¤é¡¹åº”å»æ‰å“ªä¸€é¡¹ï¼Ÿâ€å­”å­è¯´ï¼šâ€œå»æ‰ç²®é£Ÿã€‚è‡ªå¤ä»¥æ¥äººç»ˆç©¶æ˜¯è¦æ­»çš„ï¼Œè€ç™¾å§“å¦‚æœä¸ä¿¡ä»»å½“æ”¿è€…ï¼Œé‚£ä¹ˆå›½å®¶å°±ä¸èƒ½æˆç«‹äº†ã€‚â€ 38ï¼å…¶èº«æ­£ï¼Œä¸ä»¤è€Œè¡Œï¼›å…¶èº«ä¸æ­£ï¼Œè™½ä»¤ä¸ä»ã€‚ è‡ªèº«å“è¡Œç«¯æ­£ï¼Œå³ä½¿ä¸ä¸‹è¾¾å‘½ä»¤ï¼Œç™¾å§“ä¹Ÿä¼šè‡ªè§‰å»åšï¼›è‡ªèº«å“è¡Œä¸ç«¯æ­£ï¼Œå³ä½¿ä¸‹è¾¾äº†å‘½ä»¤ï¼Œç™¾å§“ä¹Ÿä¸ä¼šæœä»ã€‚ 39ï¼ä¸åœ¨å…¶ä½ï¼Œä¸è°‹å…¶æ”¿ã€‚ ä¸åœ¨é‚£ä¸ªèŒä½ä¸Šï¼Œå°±ä¸å»è€ƒè™‘é‚£ä¸ªèŒä½ä¸Šçš„äº‹ã€‚ä¸æ˜¯äº‹ä¸å…³å·±çš„å†·æ¼ ï¼Œè€Œæ˜¯è¡Œäº‹æªå®ˆæœ¬åˆ†ã€‚ 40ï¼å¬å…¶è¨€è€Œè§‚å…¶è¡Œã€‚ æŒ‡å¬äº†ä»–çš„è¯ï¼Œè¿˜è¦çœ‹ä»–çš„è¡ŒåŠ¨ã€‚ æŒ‡ä¸è¦åªå¬è¨€è®ºï¼Œè¿˜è¦çœ‹å®é™…è¡ŒåŠ¨ã€‚ 41ï¼å››æµ·ä¹‹å†…ï¼Œçš†å…„å¼Ÿä¹Ÿã€‚ å¸é©¬ç‰›è§åˆ°å¸ˆå…„å­å¤åå¿§æ„åœ°è¯´ä»–äººçš†æœ‰å…„å¼Ÿç›¸äº²ï¼Œè€Œå”¯ç‹¬æˆ‘æ²¡æœ‰å…„å¼Ÿç›¸äº²ã€‚å­å¤å®‰æ…°ä»–è¯´å›å­å’Œäººäº¤å¾€æ€åº¦æ­è°¨è€Œåˆä¹ç¤¼èŠ‚ï¼Œé‚£ä¹ˆæ™®å¤©ä¹‹ä¸‹åˆ°å¤„éƒ½æ˜¯å…„å¼Ÿã€‚ 42ï¼ä¸æœ‹å‹äº¤ï¼Œè¨€è€Œæœ‰ä¿¡ã€‚ ä¸æœ‹å‹ä»¬äº¤å¾€ï¼Œåº”è¯¥è¯šå®å®ˆä¿¡ï¼Œè¯´åˆ°åšåˆ°ã€‚ 43ï¼ç¤¼ä¹‹ç”¨ï¼Œå’Œä¸ºè´µã€‚ ç¤¼çš„ä½œç”¨ï¼Œåœ¨äºä½¿äººçš„å…³ç³»å˜å¾—æ›´åŠ å’Œè°ã€‚ 44ï¼ç›Šè€…ä¸‰å‹ï¼ŒæŸè€…ä¸‰å‹ã€‚å‹ç›´ï¼Œå‹è°…ï¼Œå‹å¤šé—»ï¼Œç›ŠçŸ£ï¼›å‹ä¾¿è¾Ÿï¼Œå‹å–„æŸ”ï¼Œå‹ä¾¿ä½ï¼ŒæŸçŸ£ã€‚ æœ‰ç›Šçš„æœ‹å‹æœ‰ä¸‰ç§ï¼Œæœ‰å®³çš„æœ‹å‹ä¹Ÿæœ‰ä¸‰ç§ã€‚ä¸æ­£ç›´çš„äººäº¤æœ‹å‹ï¼Œä¸å®ˆä¿¡çš„äººäº¤æœ‹å‹ï¼Œä¸è§å¤šè¯†å¹¿çš„äººäº¤æœ‹å‹ï¼Œæ˜¯æœ‰ç›Šçš„ã€‚ä¸è°„åªšé€¢è¿çš„äººäº¤æœ‹å‹ï¼Œä¸ä¸¤é¢ä¸‰åˆ€çš„äººäº¤æœ‹å‹ï¼Œä¸èŠ±è¨€å·§è¯­çš„äººäº¤æœ‹å‹ï¼Œæ˜¯æœ‰å®³çš„ã€‚ 45ï¼é“ä¸åŒï¼Œä¸ç›¸ä¸ºè°‹ã€‚ ç«‹åœºä¸åŒã€è§‚ç‚¹ä¸åŒï¼Œä¹Ÿå°±ä¸è¦ç›¸äº’å•†è®®è°‹åˆ’äº†ã€‚ 46ï¼çˆ¶æ¯åœ¨ï¼Œä¸è¿œæ¸¸ï¼Œæ¸¸å¿…æœ‰æ–¹ã€‚ çˆ¶æ¯å¹´è¿ˆåœ¨ä¸–ï¼Œå°½é‡ä¸é•¿æœŸåœ¨å¤–åœ°ã€‚ä¸å¾—å·²ï¼Œå¿…é¡»å‘Šè¯‰çˆ¶æ¯å»å“ªé‡Œï¼Œä¸ºä»€ä¹ˆå»ï¼Œä»€ä¹ˆæ—¶å€™å›æ¥ï¼Œå¹¶å®‰æ’å¥½çˆ¶æ¯çš„èµ¡å…»ã€‚ 47ï¼æ˜¯å¯å¿ä¹Ÿï¼Œå­°ä¸å¯å¿ä¹Ÿã€‚ å­”å­è°ˆåˆ°å­£æ°è¯´ï¼šâ€œä»–ç”¨å¤©å­çš„èˆè¹ˆé˜µå®¹åœ¨è‡ªå·±çš„åº­é™¢ä¸­èˆè¹ˆï¼Œå¦‚æœè¿™æ ·åƒ­ç¤¼çš„äº‹æƒ…éƒ½å¯ä»¥å®¹å¿çš„è¯ï¼Œè¿˜æœ‰ä»€ä¹ˆäº‹æƒ…æ˜¯ä¸å¯ä»¥å®¹å¿çš„å‘¢ï¼Ÿâ€ 48ï¼æ¯‹æ„ï¼Œæ¯‹å¿…ï¼Œæ¯‹å› ï¼Œæ¯‹æˆ‘ã€‚ ä¸å‡­ç©ºçŒœæµ‹ï¼Œä¸æ­»æ¿ï¼Œä¸å›ºæ‰§ï¼Œä¸è‡ªä»¥ä¸ºæ˜¯ã€‚ 49ï¼å£«å¿—äºé“ï¼Œè€Œè€»æ¶è¡£æ¶é£Ÿè€…ï¼Œæœªè¶³ä¸è®®ä¹Ÿã€‚ æœ‰å¿—ä¹‹å£«ï¼Œæ—¢ç„¶å­˜å¿ƒåœ¨é“ï¼Œå°±ä¸åº”è¯¥è´ªæ±‚äº«å—ï¼Œå¦‚æœè¿˜ä»¥ç²—ç³™çš„è¡£æœå’Œç®€é™‹çš„é¥®é£Ÿä¸ºè€»è¾±ï¼Œé‚£å°±ä¸å€¼å¾—å’Œä»–è¯´ä»€ä¹ˆäº†ã€‚ 50ï¼å¾€è€…ä¸å¯è°ï¼Œæ¥è€…çŠ¹å¯è¿½ã€‚ è¿‡å»çš„ä¸å¯æŒ½å›ï¼Œæœªæ¥çš„è¿˜å¯ä»¥èµ¶ä¸Šã€‚ ","link":"https://kangjn.github.io/post/lesslesslun-yu-greatergreater-50-jing-dian-ming-ju/"},{"title":"RabbitMQä½¿ç”¨æ•™ç¨‹(äº”)","content":"4.7.ä¸»é¢˜æ¨¡å¼ï¼ˆé€šé…ç¬¦æ¨¡å¼ï¼‰ 4.7.1.å›¾ç¤º åŒä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ã€‚ä¸€ä¸ªæ¶ˆè´¹è€…é˜Ÿåˆ—å¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹ï¼Œåªæœ‰å…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹ä¼šæ¶ˆè´¹åˆ°æ¶ˆæ¯ã€‚ 4.7.2.ç”Ÿäº§è€… package com.zpc.rabbitmq.topic; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.zpc.rabbitmq.util.ConnectionUtil; public class Send { private final static String EXCHANGE_NAME = &quot;test_exchange_topic&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜exchange channel.exchangeDeclare(EXCHANGE_NAME, &quot;topic&quot;); // æ¶ˆæ¯å†…å®¹ String message = &quot;Hello World!!&quot;; channel.basicPublish(EXCHANGE_NAME, &quot;routekey.1&quot;, null, message.getBytes()); System.out.println(&quot; [x] Sent '&quot; + message + &quot;'&quot;); channel.close(); connection.close(); } } 4.7.3.æ¶ˆè´¹è€…1ï¼ˆå‰å°ç³»ç»Ÿï¼‰ package com.zpc.rabbitmq.topic; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; import com.zpc.rabbitmq.util.ConnectionUtil; public class Recv { private final static String QUEUE_NAME = &quot;test_queue_topic_work_1&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_topic&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœº channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, &quot;routekey.*&quot;); // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… channel.basicQos(1); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ—ï¼Œæ‰‹åŠ¨è¿”å›å®Œæˆ channel.basicConsume(QUEUE_NAME, false, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [Recv_x] Received '&quot; + message + &quot;'&quot;); Thread.sleep(10); channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); } } } 4.7.4.æ¶ˆè´¹è€…2ï¼ˆæœç´¢ç³»ç»Ÿï¼‰ package com.zpc.rabbitmq.topic; import com.zpc.rabbitmq.util.ConnectionUtil; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; public class Recv2 { private final static String QUEUE_NAME = &quot;test_queue_topic_work_2&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_topic&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœº channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, &quot;*.*&quot;); // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… channel.basicQos(1); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ—ï¼Œæ‰‹åŠ¨è¿”å›å®Œæˆ channel.basicConsume(QUEUE_NAME, false, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [Recv2_x] Received '&quot; + message + &quot;'&quot;); Thread.sleep(10); channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); } } } 5.Springbooté›†æˆRabbitMQ springbooté›†æˆRabbitMQéå¸¸ç®€å•ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„ä½¿ç”¨é…ç½®éå¸¸å°‘ï¼Œspringbootæä¾›äº†spring-boot-starter-amqpå¯¹æ¶ˆæ¯å„ç§æ”¯æŒã€‚ 5.1.ç®€å•é˜Ÿåˆ— 1ã€é…ç½®pomæ–‡ä»¶ï¼Œä¸»è¦æ˜¯æ·»åŠ spring-boot-starter-amqpçš„æ”¯æŒ org.springframework.boot spring-boot-starter-amqp 2ã€é…ç½®application.propertiesæ–‡ä»¶ é…ç½®rabbitmqçš„å®‰è£…åœ°å€ã€ç«¯å£ä»¥åŠè´¦æˆ·ä¿¡æ¯ spring.application.name=spirng-boot-rabbitmq spring.rabbitmq.host=127.0.0.1 spring.rabbitmq.port=5672 spring.rabbitmq.username=admin spring.rabbitmq.password=admin 3ã€é…ç½®é˜Ÿåˆ— package com.zpc.rabbitmq; import org.springframework.amqp.core.Queue; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; @Configuration public class RabbitConfig { @Bean public Queue queue() { return new Queue(&quot;q_hello&quot;); } } 4ã€å‘é€è€… package com.zpc.rabbitmq; import org.springframework.amqp.core.AmqpTemplate; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; import java.text.SimpleDateFormat; import java.util.Date; @Component public class HelloSender { @Autowired private AmqpTemplate rabbitTemplate; public void send() { String date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).format(new Date());//24å°æ—¶åˆ¶ String context = &quot;hello &quot; + date; System.out.println(&quot;Sender : &quot; + context); //ç®€å•å¯¹åˆ—çš„æƒ…å†µä¸‹routingKeyå³ä¸ºQå this.rabbitTemplate.convertAndSend(&quot;q_hello&quot;, context); } } 5ã€æ¥æ”¶è€… package com.zpc.rabbitmq; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_hello&quot;) public class HelloReceiver { @RabbitHandler public void process(String hello) { System.out.println(&quot;Receiver : &quot; + hello); } } 6ã€æµ‹è¯• package com.zpc.rabbitmq; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.test.context.junit4.SpringRunner; @RunWith(SpringRunner.class) @SpringBootTest public class RabbitMqHelloTest { @Autowired private HelloSender helloSender; @Test public void hello() throws Exception { helloSender.send(); } } 5.2.å¤šå¯¹å¤šä½¿ç”¨ï¼ˆWorkæ¨¡å¼ï¼‰ æ³¨å†Œä¸¤ä¸ªReceiver: package com.zpc.rabbitmq; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_hello&quot;) public class HelloReceiver2 { @RabbitHandler public void process(String hello) { System.out.println(&quot;Receiver2 : &quot; + hello); } } @Test public void oneToMany() throws Exception { for (int i=0;i&lt;100;i++){ helloSender.send(i); Thread.sleep(300); } } public void send(int i) { String date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).format(new Date());//24å°æ—¶åˆ¶ String context = &quot;hello &quot; + i + &quot; &quot; + date; System.out.println(&quot;Sender : &quot; + context); //ç®€å•å¯¹åˆ—çš„æƒ…å†µä¸‹routingKeyå³ä¸ºQå this.rabbitTemplate.convertAndSend(&quot;q_hello&quot;, context); } 5.3.Topic Exchangeï¼ˆä¸»é¢˜æ¨¡å¼ï¼‰ topic æ˜¯RabbitMQä¸­æœ€çµæ´»çš„ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®routing_keyè‡ªç”±çš„ç»‘å®šä¸åŒçš„é˜Ÿåˆ— é¦–å…ˆå¯¹topicè§„åˆ™é…ç½®ï¼Œè¿™é‡Œä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—(æ¶ˆè´¹è€…)æ¥æ¼”ç¤ºã€‚ 1)é…ç½®é˜Ÿåˆ—ï¼Œç»‘å®šäº¤æ¢æœº package com.zpc.rabbitmq.topic; import org.springframework.amqp.core.Binding; import org.springframework.amqp.core.BindingBuilder; import org.springframework.amqp.core.Queue; import org.springframework.amqp.core.TopicExchange; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; @Configuration public class TopicRabbitConfig { final static String message = &quot;q_topic_message&quot;; final static String messages = &quot;q_topic_messages&quot;; @Bean public Queue queueMessage() { return new Queue(TopicRabbitConfig.message); } @Bean public Queue queueMessages() { return new Queue(TopicRabbitConfig.messages); } /** * å£°æ˜ä¸€ä¸ªTopicç±»å‹çš„äº¤æ¢æœº * @return */ @Bean TopicExchange exchange() { return new TopicExchange(&quot;mybootexchange&quot;); } /** * ç»‘å®šQåˆ°äº¤æ¢æœº,å¹¶ä¸”æŒ‡å®šroutingKey * @param queueMessage * @param exchange * @return */ @Bean Binding bindingExchangeMessage(Queue queueMessage, TopicExchange exchange) { return BindingBuilder.bind(queueMessage).to(exchange).with(&quot;topic.message&quot;); } @Bean Binding bindingExchangeMessages(Queue queueMessages, TopicExchange exchange) { return BindingBuilder.bind(queueMessages).to(exchange).with(&quot;topic.#&quot;); } } 2)åˆ›å»º2ä¸ªæ¶ˆè´¹è€… q_topic_message å’Œq_topic_messages package com.zpc.rabbitmq.topic; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_topic_message&quot;) public class Receiver1 { @RabbitHandler public void process(String hello) { System.out.println(&quot;Receiver1 : &quot; + hello); } } package com.zpc.rabbitmq.topic; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_topic_messages&quot;) public class Receiver2 { @RabbitHandler public void process(String hello) { System.out.println(&quot;Receiver2 : &quot; + hello); } } 3)æ¶ˆæ¯å‘é€è€…ï¼ˆç”Ÿäº§è€…ï¼‰ package com.zpc.rabbitmq.topic; import org.springframework.amqp.core.AmqpTemplate; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; @Component public class MsgSender { @Autowired private AmqpTemplate rabbitTemplate; public void send1() { String context = &quot;hi, i am message 1&quot;; System.out.println(&quot;Sender : &quot; + context); this.rabbitTemplate.convertAndSend(&quot;mybootexchange&quot;, &quot;topic.message&quot;, context); } public void send2() { String context = &quot;hi, i am messages 2&quot;; System.out.println(&quot;Sender : &quot; + context); this.rabbitTemplate.convertAndSend(&quot;mybootexchange&quot;, &quot;topic.messages&quot;, context); } } send1æ–¹æ³•ä¼šåŒ¹é…åˆ°topic.#å’Œtopic.messageï¼Œä¸¤ä¸ªReceiveréƒ½å¯ä»¥æ”¶åˆ°æ¶ˆæ¯ï¼Œå‘é€send2åªæœ‰topic.#å¯ä»¥åŒ¹é…æ‰€æœ‰åªæœ‰Receiver2ç›‘å¬åˆ°æ¶ˆæ¯ã€‚ 4)æµ‹è¯• package com.zpc.rabbitmq.topic; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.test.context.junit4.SpringRunner; @RunWith(SpringRunner.class) @SpringBootTest public class RabbitTopicTest { @Autowired private MsgSender msgSender; @Test public void send1() throws Exception { msgSender.send1(); } @Test public void send2() throws Exception { msgSender.send2(); } } 5.4.Fanout Exchangeï¼ˆè®¢é˜…æ¨¡å¼ï¼‰ Fanout å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„å¹¿æ’­æ¨¡å¼æˆ–è€…è®¢é˜…æ¨¡å¼ï¼Œç»™Fanoutäº¤æ¢æœºå‘é€æ¶ˆæ¯ï¼Œç»‘å®šäº†è¿™ä¸ªäº¤æ¢æœºçš„æ‰€æœ‰é˜Ÿåˆ—éƒ½æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ã€‚ 1)é…ç½®é˜Ÿåˆ—ï¼Œç»‘å®šäº¤æ¢æœº package com.zpc.rabbitmq.fanout; import org.springframework.amqp.core.Binding; import org.springframework.amqp.core.BindingBuilder; import org.springframework.amqp.core.FanoutExchange; import org.springframework.amqp.core.Queue; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; @Configuration public class FanoutRabbitConfig { @Bean public Queue aMessage() { return new Queue(&quot;q_fanout_A&quot;); } @Bean public Queue bMessage() { return new Queue(&quot;q_fanout_B&quot;); } @Bean public Queue cMessage() { return new Queue(&quot;q_fanout_C&quot;); } @Bean FanoutExchange fanoutExchange() { return new FanoutExchange(&quot;mybootfanoutExchange&quot;); } @Bean Binding bindingExchangeA(Queue aMessage, FanoutExchange fanoutExchange) { return BindingBuilder.bind(aMessage).to(fanoutExchange); } @Bean Binding bindingExchangeB(Queue bMessage, FanoutExchange fanoutExchange) { return BindingBuilder.bind(bMessage).to(fanoutExchange); } @Bean Binding bindingExchangeC(Queue cMessage, FanoutExchange fanoutExchange) { return BindingBuilder.bind(cMessage).to(fanoutExchange); } } 2ï¼‰åˆ›å»º3ä¸ªæ¶ˆè´¹è€… package com.zpc.rabbitmq.fanout; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_fanout_A&quot;) public class ReceiverA { @RabbitHandler public void process(String hello) { System.out.println(&quot;AReceiver : &quot; + hello + &quot;/n&quot;); } } package com.zpc.rabbitmq.fanout; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_fanout_B&quot;) public class ReceiverB { @RabbitHandler public void process(String hello) { System.out.println(&quot;BReceiver : &quot; + hello + &quot;/n&quot;); } } package com.zpc.rabbitmq.fanout; import org.springframework.amqp.rabbit.annotation.RabbitHandler; import org.springframework.amqp.rabbit.annotation.RabbitListener; import org.springframework.stereotype.Component; @Component @RabbitListener(queues = &quot;q_fanout_C&quot;) public class ReceiverC { @RabbitHandler public void process(String hello) { System.out.println(&quot;CReceiver : &quot; + hello + &quot;/n&quot;); } } 3ï¼‰ç”Ÿäº§è€… package com.zpc.rabbitmq.fanout; import org.springframework.amqp.core.AmqpTemplate; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; @Component public class MsgSenderFanout { @Autowired private AmqpTemplate rabbitTemplate; public void send() { String context = &quot;hi, fanout msg &quot;; System.out.println(&quot;Sender : &quot; + context); this.rabbitTemplate.convertAndSend(&quot;mybootfanoutExchange&quot;,&quot;&quot;, context); } } 4ï¼‰æµ‹è¯• package com.zpc.rabbitmq.fanout; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.test.context.junit4.SpringRunner; @RunWith(SpringRunner.class) @SpringBootTest public class RabbitFanoutTest { @Autowired private MsgSenderFanout msgSender; @Test public void send1() throws Exception { msgSender.send(); } } ç»“æœå¦‚ä¸‹ï¼Œä¸‰ä¸ªæ¶ˆè´¹è€…éƒ½æ”¶åˆ°æ¶ˆæ¯ï¼š AReceiver : hi, fanout msg CReceiver : hi, fanout msg BReceiver : hi, fanout msg 6.æ€»ç»“ ä½¿ç”¨MQå®ç°å•†å“æ•°æ®çš„åŒæ­¥ä¼˜åŠ¿ï¼š 1ã€é™ä½ç³»ç»Ÿé—´è€¦åˆåº¦ 2ã€ä¾¿äºç®¡ç†æ•°æ®çš„åŒæ­¥ï¼ˆæ•°æ®ä¸€è‡´æ€§ï¼‰ æ¨èé˜…è¯» ã€ŠRabbitMQè¯¦è§£ã€‹ ","link":"https://kangjn.github.io/post/rabbitmq-shi-yong-jiao-cheng-wu/"},{"title":"RabbitMQä½¿ç”¨æ•™ç¨‹(å››)","content":"4.4.æ¶ˆæ¯çš„ç¡®è®¤æ¨¡å¼ æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯å¦‚ä½•çŸ¥é“æ¶ˆæ¯å·²ç»è¢«æ¶ˆè´¹å‘¢ï¼Ÿ æ¨¡å¼1ï¼šè‡ªåŠ¨ç¡®è®¤ åªè¦æ¶ˆæ¯ä»é˜Ÿåˆ—ä¸­è·å–ï¼Œæ— è®ºæ¶ˆè´¹è€…è·å–åˆ°æ¶ˆæ¯åæ˜¯å¦æˆåŠŸæ¶ˆæ¯ï¼Œéƒ½è®¤ä¸ºæ˜¯æ¶ˆæ¯å·²ç»æˆåŠŸæ¶ˆè´¹ã€‚ æ¨¡å¼2ï¼šæ‰‹åŠ¨ç¡®è®¤ æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯åï¼ŒæœåŠ¡å™¨ä¼šå°†è¯¥æ¶ˆæ¯æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€ï¼Œç­‰å¾…æ¶ˆè´¹è€…çš„åé¦ˆï¼Œå¦‚æœæ¶ˆè´¹è€…ä¸€ç›´æ²¡æœ‰åé¦ˆï¼Œé‚£ä¹ˆè¯¥æ¶ˆæ¯å°†ä¸€ç›´å¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚ æ‰‹åŠ¨æ¨¡å¼ï¼š è‡ªåŠ¨æ¨¡å¼ï¼š 4.5.è®¢é˜…æ¨¡å¼ 4.5.1.å›¾ç¤º è§£è¯»ï¼š 1ã€1ä¸ªç”Ÿäº§è€…ï¼Œå¤šä¸ªæ¶ˆè´¹è€… 2ã€æ¯ä¸€ä¸ªæ¶ˆè´¹è€…éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªé˜Ÿåˆ— 3ã€ç”Ÿäº§è€…æ²¡æœ‰å°†æ¶ˆæ¯ç›´æ¥å‘é€åˆ°é˜Ÿåˆ—ï¼Œè€Œæ˜¯å‘é€åˆ°äº†äº¤æ¢æœº 4ã€æ¯ä¸ªé˜Ÿåˆ—éƒ½è¦ç»‘å®šåˆ°äº¤æ¢æœº 5ã€ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ï¼Œç»è¿‡äº¤æ¢æœºï¼Œåˆ°è¾¾é˜Ÿåˆ—ï¼Œå®ç°ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–çš„ç›®çš„ æ³¨æ„ï¼šä¸€ä¸ªæ¶ˆè´¹è€…é˜Ÿåˆ—å¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹ï¼Œåªæœ‰å…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹ä¼šæ¶ˆè´¹ 4.5.2.æ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼ˆçœ‹ä½œæ˜¯åå°ç³»ç»Ÿï¼‰ å‘äº¤æ¢æœºä¸­å‘é€æ¶ˆæ¯ã€‚ package com.zpc.rabbitmq.subscribe; import com.zpc.rabbitmq.util.ConnectionUtil; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; public class Send { private final static String EXCHANGE_NAME = &quot;test_exchange_fanout&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜exchange channel.exchangeDeclare(EXCHANGE_NAME, &quot;fanout&quot;); // æ¶ˆæ¯å†…å®¹ String message = &quot;Hello World!&quot;; channel.basicPublish(EXCHANGE_NAME, &quot;&quot;, null, message.getBytes()); System.out.println(&quot; [x] Sent '&quot; + message + &quot;'&quot;); channel.close(); connection.close(); } } æ³¨æ„ï¼šæ¶ˆæ¯å‘é€åˆ°æ²¡æœ‰é˜Ÿåˆ—ç»‘å®šçš„äº¤æ¢æœºæ—¶ï¼Œæ¶ˆæ¯å°†ä¸¢å¤±ï¼Œå› ä¸ºï¼Œäº¤æ¢æœºæ²¡æœ‰å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œæ¶ˆæ¯åªèƒ½å­˜åœ¨åœ¨é˜Ÿåˆ—ä¸­ã€‚ 4.5.3.æ¶ˆè´¹è€…1ï¼ˆçœ‹ä½œæ˜¯å‰å°ç³»ç»Ÿï¼‰ package com.zpc.rabbitmq.subscribe; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; import com.zpc.rabbitmq.util.ConnectionUtil; public class Recv { private final static String QUEUE_NAME = &quot;test_queue_work1&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_fanout&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœº channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, &quot;&quot;); // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… channel.basicQos(1); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ—ï¼Œæ‰‹åŠ¨è¿”å›å®Œæˆ channel.basicConsume(QUEUE_NAME, false, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [Recv] Received '&quot; + message + &quot;'&quot;); Thread.sleep(10); channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); } } } 4.5.4.æ¶ˆè´¹è€…2ï¼ˆçœ‹ä½œæ˜¯æœç´¢ç³»ç»Ÿï¼‰ package com.zpc.rabbitmq.subscribe; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; import com.zpc.rabbitmq.util.ConnectionUtil; public class Recv2 { private final static String QUEUE_NAME = &quot;test_queue_work2&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_fanout&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœº channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, &quot;&quot;); // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… channel.basicQos(1); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ—ï¼Œæ‰‹åŠ¨è¿”å›å®Œæˆ channel.basicConsume(QUEUE_NAME, false, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [Recv2] Received '&quot; + message + &quot;'&quot;); Thread.sleep(10); channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); } } } 4.5.5.æµ‹è¯• æµ‹è¯•ç»“æœï¼š åŒä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ã€‚ä¸€ä¸ªæ¶ˆè´¹è€…é˜Ÿåˆ—å¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹ï¼Œåªæœ‰å…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹ä¼šæ¶ˆè´¹åˆ°æ¶ˆæ¯ã€‚ åœ¨ç®¡ç†å·¥å…·ä¸­æŸ¥çœ‹é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ç»‘å®šå…³ç³»ï¼š 4.6.è·¯ç”±æ¨¡å¼ 4.6.1.å›¾ç¤º 4.6.2.ç”Ÿäº§è€… 4.6.3.æ¶ˆè´¹è€…1(å‡è®¾æ˜¯å‰å°ç³»ç»Ÿ) 4.6.4.æ¶ˆè´¹2ï¼ˆå‡è®¾æ˜¯æœç´¢ç³»ç»Ÿï¼‰ ","link":"https://kangjn.github.io/post/rabbitmq-shi-yong-jiao-cheng-si/"},{"title":"RabbitMQä½¿ç”¨æ•™ç¨‹(ä¸‰)","content":"4ã€å­¦ä¹ äº”ç§é˜Ÿåˆ— 4.1 ç®€å•é˜Ÿåˆ— 4.1.1.å›¾ç¤º Pï¼šæ¶ˆæ¯çš„ç”Ÿäº§è€… Cï¼šæ¶ˆæ¯çš„æ¶ˆè´¹è€… çº¢è‰²ï¼šé˜Ÿåˆ— ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ã€‚ 4.1.2.å¯¼å…¥RabbitMQçš„å®¢æˆ·ç«¯ä¾èµ– com.rabbitmq amqp-client 3.4.1 4.1.3.è·å–MQçš„è¿æ¥ package com.zpc.rabbitmq.util; import com.rabbitmq.client.ConnectionFactory; import com.rabbitmq.client.Connection; public class ConnectionUtil { public static Connection getConnection() throws Exception { //å®šä¹‰è¿æ¥å·¥å‚ ConnectionFactory factory = new ConnectionFactory(); //è®¾ç½®æœåŠ¡åœ°å€ factory.setHost(&quot;localhost&quot;); //ç«¯å£ factory.setPort(5672); //è®¾ç½®è´¦å·ä¿¡æ¯ï¼Œç”¨æˆ·åã€å¯†ç ã€vhost factory.setVirtualHost(&quot;testhost&quot;); factory.setUsername(&quot;admin&quot;); factory.setPassword(&quot;admin&quot;); // é€šè¿‡å·¥ç¨‹è·å–è¿æ¥ Connection connection = factory.newConnection(); return connection; } } 4.1.4.ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ— package com.zpc.rabbitmq.simple; import com.zpc.rabbitmq.util.ConnectionUtil; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; public class Send { private final static String QUEUE_NAME = &quot;q_test_01&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); // ä»è¿æ¥ä¸­åˆ›å»ºé€šé“ Channel channel = connection.createChannel(); // å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // æ¶ˆæ¯å†…å®¹ String message = &quot;Hello World!&quot;; channel.basicPublish(&quot;&quot;, QUEUE_NAME, null, message.getBytes()); System.out.println(&quot; [x] Sent '&quot; + message + &quot;'&quot;); //å…³é—­é€šé“å’Œè¿æ¥ channel.close(); connection.close(); } } 4.1.5.ç®¡ç†å·¥å…·ä¸­æŸ¥çœ‹æ¶ˆæ¯ ç‚¹å‡»ä¸Šé¢çš„é˜Ÿåˆ—åç§°ï¼ŒæŸ¥è¯¢å…·ä½“çš„é˜Ÿåˆ—ä¸­çš„ä¿¡æ¯ï¼š 4.1.6.æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ package com.zpc.rabbitmq.simple; import com.zpc.rabbitmq.util.ConnectionUtil; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; public class Recv { private final static String QUEUE_NAME = &quot;q_test_01&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); // ä»è¿æ¥ä¸­åˆ›å»ºé€šé“ Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ— channel.basicConsume(QUEUE_NAME, true, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [x] Received '&quot; + message + &quot;'&quot;); } } } 4.2.Workæ¨¡å¼ 4.2.1.å›¾ç¤º ä¸€ä¸ªç”Ÿäº§è€…ã€2ä¸ªæ¶ˆè´¹è€…ã€‚ ä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…è·å–ã€‚ 4.2.2.æ¶ˆè´¹è€…1 package com.zpc.rabbitmq.work; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; import com.zpc.rabbitmq.util.ConnectionUtil; public class Recv { private final static String QUEUE_NAME = &quot;test_queue_work&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… //channel.basicQos(1); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ—ï¼Œfalseè¡¨ç¤ºæ‰‹åŠ¨è¿”å›å®ŒæˆçŠ¶æ€ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨ channel.basicConsume(QUEUE_NAME, true, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [y] Received '&quot; + message + &quot;'&quot;); //ä¼‘çœ  Thread.sleep(10); // è¿”å›ç¡®è®¤çŠ¶æ€ï¼Œæ³¨é‡Šæ‰è¡¨ç¤ºä½¿ç”¨è‡ªåŠ¨ç¡®è®¤æ¨¡å¼ //channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false)ï¼› } } } 4.2.3.æ¶ˆè´¹è€…2 package com.zpc.rabbitmq.work; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; import com.rabbitmq.client.QueueingConsumer; import com.zpc.rabbitmq.util.ConnectionUtil; public class Recv2 { private final static String QUEUE_NAME = &quot;test_queue_work&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… //channel.basicQos(1); // å®šä¹‰é˜Ÿåˆ—çš„æ¶ˆè´¹è€… QueueingConsumer consumer = new QueueingConsumer(channel); // ç›‘å¬é˜Ÿåˆ—ï¼Œfalseè¡¨ç¤ºæ‰‹åŠ¨è¿”å›å®ŒæˆçŠ¶æ€ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨ channel.basicConsume(QUEUE_NAME, true, consumer); // è·å–æ¶ˆæ¯ while (true) { QueueingConsumer.Delivery delivery = consumer.nextDelivery(); String message = new String(delivery.getBody()); System.out.println(&quot; [x] Received '&quot; + message + &quot;'&quot;); // ä¼‘çœ 1ç§’ Thread.sleep(1000); //ä¸‹é¢è¿™è¡Œæ³¨é‡Šæ‰è¡¨ç¤ºä½¿ç”¨è‡ªåŠ¨ç¡®è®¤æ¨¡å¼ //channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); } } } 4.2.4.ç”Ÿäº§è€… å‘é˜Ÿåˆ—ä¸­å‘é€100æ¡æ¶ˆæ¯ã€‚ package com.zpc.rabbitmq.work; import com.zpc.rabbitmq.util.ConnectionUtil; import com.rabbitmq.client.Channel; import com.rabbitmq.client.Connection; public class Send { private final static String QUEUE_NAME = &quot;test_queue_work&quot;; public static void main(String[] argv) throws Exception { // è·å–åˆ°è¿æ¥ä»¥åŠmqé€šé“ Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); for (int i = 0; i &lt; 100; i++) { // æ¶ˆæ¯å†…å®¹ String message = &quot;&quot; + i; channel.basicPublish(&quot;&quot;, QUEUE_NAME, null, message.getBytes()); System.out.println(&quot; [x] Sent '&quot; + message + &quot;'&quot;); Thread.sleep(i * 10); } channel.close(); connection.close(); } } 4.2.5.æµ‹è¯• æµ‹è¯•ç»“æœï¼š 1ã€æ¶ˆè´¹è€…1å’Œæ¶ˆè´¹è€…2è·å–åˆ°çš„æ¶ˆæ¯å†…å®¹æ˜¯ä¸åŒçš„ï¼ŒåŒä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…è·å–ã€‚ 2ã€æ¶ˆè´¹è€…1å’Œæ¶ˆè´¹è€…2è·å–åˆ°çš„æ¶ˆæ¯çš„æ•°é‡æ˜¯ç›¸åŒçš„ï¼Œä¸€ä¸ªæ˜¯æ¶ˆè´¹å¥‡æ•°å·æ¶ˆæ¯ï¼Œä¸€ä¸ªæ˜¯å¶æ•°ã€‚ å…¶å®ï¼Œè¿™æ ·æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºæ¶ˆè´¹è€…1çº¿ç¨‹åœé¡¿çš„æ—¶é—´çŸ­ã€‚åº”è¯¥æ˜¯æ¶ˆè´¹è€…1è¦æ¯”æ¶ˆè´¹è€…2è·å–åˆ°çš„æ¶ˆæ¯å¤šæ‰å¯¹ã€‚ RabbitMQ é»˜è®¤å°†æ¶ˆæ¯é¡ºåºå‘é€ç»™ä¸‹ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œè¿™æ ·ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…ä¼šå¾—åˆ°ç›¸åŒæ•°é‡çš„æ¶ˆæ¯ã€‚å³è½®è¯¢ï¼ˆround-robinï¼‰åˆ†å‘æ¶ˆæ¯ã€‚ æ€æ ·æ‰èƒ½åšåˆ°æŒ‰ç…§æ¯ä¸ªæ¶ˆè´¹è€…çš„èƒ½åŠ›åˆ†é…æ¶ˆæ¯å‘¢ï¼Ÿè”åˆä½¿ç”¨ Qos å’Œ Acknowledge å°±å¯ä»¥åšåˆ°ã€‚ basicQos æ–¹æ³•è®¾ç½®äº†å½“å‰ä¿¡é“æœ€å¤§é¢„è·å–ï¼ˆprefetchï¼‰æ¶ˆæ¯æ•°é‡ä¸º1ã€‚æ¶ˆæ¯ä»é˜Ÿåˆ—å¼‚æ­¥æ¨é€ç»™æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…çš„ ack ä¹Ÿæ˜¯å¼‚æ­¥å‘é€ç»™é˜Ÿåˆ—ï¼Œä»é˜Ÿåˆ—çš„è§†è§’å»çœ‹ï¼Œæ€»æ˜¯ä¼šæœ‰ä¸€æ‰¹æ¶ˆæ¯å·²æ¨é€ä½†å°šæœªè·å¾— ack ç¡®è®¤ï¼ŒQos çš„ prefetchCount å‚æ•°å°±æ˜¯ç”¨æ¥é™åˆ¶è¿™æ‰¹æœªç¡®è®¤æ¶ˆæ¯æ•°é‡çš„ã€‚è®¾ä¸º1æ—¶ï¼Œé˜Ÿåˆ—åªæœ‰åœ¨æ”¶åˆ°æ¶ˆè´¹è€…å‘å›çš„ä¸Šä¸€æ¡æ¶ˆæ¯ ack ç¡®è®¤åï¼Œæ‰ä¼šå‘è¯¥æ¶ˆè´¹è€…å‘é€ä¸‹ä¸€æ¡æ¶ˆæ¯ã€‚prefetchCount çš„é»˜è®¤å€¼ä¸º0ï¼Œå³æ²¡æœ‰é™åˆ¶ï¼Œé˜Ÿåˆ—ä¼šå°†æ‰€æœ‰æ¶ˆæ¯å°½å¿«å‘ç»™æ¶ˆè´¹è€…ã€‚ 2ä¸ªæ¦‚å¿µ è½®è¯¢åˆ†å‘ ï¼šä½¿ç”¨ä»»åŠ¡é˜Ÿåˆ—çš„ä¼˜ç‚¹ä¹‹ä¸€å°±æ˜¯å¯ä»¥è½»æ˜“çš„å¹¶è¡Œå·¥ä½œã€‚å¦‚æœæˆ‘ä»¬ç§¯å‹äº†å¥½å¤šå·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ å·¥ä½œè€…ï¼ˆæ¶ˆè´¹è€…ï¼‰æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä½¿å¾—ç³»ç»Ÿçš„ä¼¸ç¼©æ€§æ›´åŠ å®¹æ˜“ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQå°†é€ä¸ªå‘é€æ¶ˆæ¯åˆ°åœ¨åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ¶ˆè´¹è€…(è€Œä¸è€ƒè™‘æ¯ä¸ªä»»åŠ¡çš„æ—¶é•¿ç­‰ç­‰ï¼Œä¸”æ˜¯æå‰ä¸€æ¬¡æ€§åˆ†é…ï¼Œå¹¶éä¸€ä¸ªä¸€ä¸ªåˆ†é…)ã€‚å¹³å‡æ¯ä¸ªæ¶ˆè´¹è€…è·å¾—ç›¸åŒæ•°é‡çš„æ¶ˆæ¯ã€‚è¿™ç§æ–¹å¼åˆ†å‘æ¶ˆæ¯æœºåˆ¶ç§°ä¸ºRound-Robinï¼ˆè½®è¯¢ï¼‰ã€‚ å…¬å¹³åˆ†å‘ ï¼šè™½ç„¶ä¸Šé¢çš„åˆ†é…æ³•æ–¹å¼ä¹Ÿè¿˜è¡Œï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±æ˜¯ï¼šæ¯”å¦‚ï¼šç°åœ¨æœ‰2ä¸ªæ¶ˆè´¹è€…ï¼Œæ‰€æœ‰çš„å¥‡æ•°çš„æ¶ˆæ¯éƒ½æ˜¯ç¹å¿™çš„ï¼Œè€Œå¶æ•°åˆ™æ˜¯è½»æ¾çš„ã€‚æŒ‰ç…§è½®è¯¢çš„æ–¹å¼ï¼Œå¥‡æ•°çš„ä»»åŠ¡äº¤ç»™äº†ç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨å¿™ä¸ªä¸åœã€‚å¶æ•°çš„ä»»åŠ¡äº¤ç»™å¦ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œåˆ™ç«‹å³å®Œæˆä»»åŠ¡ï¼Œç„¶åé—²å¾—ä¸è¡Œã€‚è€ŒRabbitMQåˆ™æ˜¯ä¸äº†è§£è¿™äº›çš„ã€‚è¿™æ˜¯å› ä¸ºå½“æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—ï¼ŒRabbitMQå°±ä¼šåˆ†æ´¾æ¶ˆæ¯ã€‚å®ƒä¸çœ‹æ¶ˆè´¹è€…ä¸ºåº”ç­”çš„æ•°ç›®ï¼Œåªæ˜¯ç›²ç›®çš„å°†æ¶ˆæ¯å‘ç»™è½®è¯¢æŒ‡å®šçš„æ¶ˆè´¹è€…ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨basicQos( prefetchCount = 1)æ–¹æ³•ï¼Œæ¥é™åˆ¶RabbitMQåªå‘ä¸è¶…è¿‡1æ¡çš„æ¶ˆæ¯ç»™åŒä¸€ä¸ªæ¶ˆè´¹è€…ã€‚å½“æ¶ˆæ¯å¤„ç†å®Œæ¯•åï¼Œæœ‰äº†åé¦ˆï¼Œæ‰ä¼šè¿›è¡Œç¬¬äºŒæ¬¡å‘é€ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨å…¬å¹³åˆ†å‘ï¼Œå¿…é¡»å…³é—­è‡ªåŠ¨åº”ç­”ï¼Œæ”¹ä¸ºæ‰‹åŠ¨åº”ç­”ã€‚ 4.3.Workæ¨¡å¼çš„â€œèƒ½è€…å¤šåŠ³â€ æ‰“å¼€ä¸Šè¿°ä»£ç çš„æ³¨é‡Šï¼š // åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªä¼šå‘ä¸€æ¡æ¶ˆæ¯ç»™æ¶ˆè´¹è€… channel.basicQos(1); //å¼€å¯è¿™è¡Œ è¡¨ç¤ºä½¿ç”¨æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼ channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); åŒæ—¶æ”¹ä¸ºæ‰‹åŠ¨ç¡®è®¤ï¼š // ç›‘å¬é˜Ÿåˆ—ï¼Œfalseè¡¨ç¤ºæ‰‹åŠ¨è¿”å›å®ŒæˆçŠ¶æ€ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨ channel.basicConsume(QUEUE_NAME, false, consumer); æµ‹è¯•ï¼š æ¶ˆè´¹è€…1æ¯”æ¶ˆè´¹è€…2è·å–çš„æ¶ˆæ¯æ›´å¤šã€‚ ","link":"https://kangjn.github.io/post/rabbitmq-shi-yong-jiao-cheng-san/"},{"title":"RabbitMQä½¿ç”¨æ•™ç¨‹(äºŒ)","content":"2.4.å­¦ä¹ 5ç§é˜Ÿåˆ— 2.5.å®‰è£…æ–‡æ¡£ 3.æ­å»ºRabbitMQç¯å¢ƒ 3.1.ä¸‹è½½ ä¸‹è½½åœ°å€ï¼šhttp://www.rabbitmq.com/download.html 3.2.windowsä¸‹å®‰è£… 3.2.1.å®‰è£…Erlang ä¸‹è½½ï¼šhttp://www.erlang.org/download/otp_win64_17.3.exe å å®‰è£… 3.2.2.å®‰è£…RabbitMQ 3.2.3.å¯ç”¨ç®¡ç†å·¥å…· 1ã€åŒå‡» 2ã€è¿›å…¥C:\\Program Files (x86)\\RabbitMQ Server\\rabbitmq_server-3.4.1\\sbinè¾“å…¥å‘½ä»¤ï¼š rabbitmq-plugins enable rabbitmq_management è¿™æ ·å°±å¯åŠ¨äº†ç®¡ç†å·¥å…·ï¼Œå¯ä»¥è¯•ä¸€ä¸‹å‘½ä»¤ï¼š åœæ­¢ï¼šnet stop RabbitMQ å¯åŠ¨ï¼šnet start RabbitMQ 3ã€åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€æŸ¥çœ‹ï¼šhttp://127.0.0.1:15672/ 4ã€ä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼šguest/ guest 3.3.Linuxä¸‹å®‰è£… 3.3.1.å®‰è£…Erlang 3.3.2.æ·»åŠ yumæ”¯æŒ cd /usr/local/src/ mkdir rabbitmq cd rabbitmq wget http://packages.erlang-solutions.com/erlang-solutions-1.0-1.noarch.rpm rpm -Uvh erlang-solutions-1.0-1.noarch.rpm rpm --import http://packages.erlang-solutions.com/rpm/erlang_solutions.asc ä½¿ç”¨yumå®‰è£…ï¼š sudo yum install erlang 3.3.3.å®‰è£…RabbitMQ ä¸Šä¼ rabbitmq-server-3.4.1-1.noarch.rpmæ–‡ä»¶åˆ°/usr/local/src/rabbitmq/ å®‰è£…ï¼š rpm -ivh rabbitmq-server-3.4.1-1.noarch.rpm 3.3.4.å¯åŠ¨ã€åœæ­¢ service rabbitmq-server start service rabbitmq-server stop service rabbitmq-server restart 3.3.5.è®¾ç½®å¼€æœºå¯åŠ¨ chkconfig rabbitmq-server on 3.3.6.è®¾ç½®é…ç½®æ–‡ä»¶ cd /etc/rabbitmq cp /usr/share/doc/rabbitmq-server-3.4.1/rabbitmq.config.example /etc/rabbitmq/ mv rabbitmq.config.example rabbitmq.config 3.3.7.å¼€å¯ç”¨æˆ·è¿œç¨‹è®¿é—® vi /etc/rabbitmq/rabbitmq.config æ³¨æ„è¦å»æ‰åé¢çš„é€—å·ã€‚ 3.3.8.å¼€å¯webç•Œé¢ç®¡ç†å·¥å…· rabbitmq-plugins enable rabbitmq_management service rabbitmq-server restart 3.3.9.é˜²ç«å¢™å¼€æ”¾15672ç«¯å£ /sbin/iptables -I INPUT -p tcp --dport 15672 -j ACCEPT /etc/rc.d/init.d/iptables save 3.4.å®‰è£…çš„æ³¨æ„äº‹é¡¹ 1ã€æ¨èä½¿ç”¨é»˜è®¤çš„å®‰è£…è·¯å¾„ 2ã€ç³»ç»Ÿç”¨æˆ·åå¿…é¡»æ˜¯è‹±æ–‡ ","link":"https://kangjn.github.io/post/rabbitmq-shi-yong-jiao-cheng-er/"},{"title":"RabbitMQä½¿ç”¨æ•™ç¨‹(ä¸€)","content":"1.ä»€ä¹ˆæ˜¯MQ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼Œç®€ç§°MQï¼‰ï¼Œä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œæœ¬è´¨æ˜¯ä¸ªé˜Ÿåˆ—ï¼ŒFIFOå…ˆå…¥å…ˆå‡ºï¼Œåªä¸è¿‡é˜Ÿåˆ—ä¸­å­˜æ”¾çš„å†…å®¹æ˜¯messageè€Œå·²ã€‚ å…¶ä¸»è¦ç”¨é€”ï¼šä¸åŒè¿›ç¨‹Process/çº¿ç¨‹Threadä¹‹é—´é€šä¿¡ã€‚ ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿæ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿæœ‰å‡ ä¸ªåŸå› ï¼š ä¸åŒè¿›ç¨‹ï¼ˆprocessï¼‰ä¹‹é—´ä¼ é€’æ¶ˆæ¯æ—¶ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´è€¦åˆç¨‹åº¦è¿‡é«˜ï¼Œæ”¹åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œå¼•å‘å¿…é¡»ä¿®æ”¹å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸ºäº†éš”ç¦»è¿™ä¸¤ä¸ªè¿›ç¨‹ï¼Œåœ¨ä¸¤è¿›ç¨‹é—´æŠ½ç¦»å‡ºä¸€å±‚ï¼ˆä¸€ä¸ªæ¨¡å—ï¼‰ï¼Œæ‰€æœ‰ä¸¤è¿›ç¨‹ä¹‹é—´ä¼ é€’çš„æ¶ˆæ¯ï¼Œéƒ½å¿…é¡»é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æ¥ä¼ é€’ï¼Œå•ç‹¬ä¿®æ”¹æŸä¸€ä¸ªè¿›ç¨‹ï¼Œä¸ä¼šå½±å“å¦ä¸€ä¸ªï¼› ä¸åŒè¿›ç¨‹ï¼ˆprocessï¼‰ä¹‹é—´ä¼ é€’æ¶ˆæ¯æ—¶ï¼Œä¸ºäº†å®ç°æ ‡å‡†åŒ–ï¼Œå°†æ¶ˆæ¯çš„æ ¼å¼è§„èŒƒåŒ–äº†ï¼Œå¹¶ä¸”ï¼ŒæŸä¸€ä¸ªè¿›ç¨‹æ¥å—çš„æ¶ˆæ¯å¤ªå¤šï¼Œä¸€ä¸‹å­æ— æ³•å¤„ç†å®Œï¼Œå¹¶ä¸”ä¹Ÿæœ‰å…ˆåé¡ºåºï¼Œå¿…é¡»å¯¹æ”¶åˆ°çš„æ¶ˆæ¯è¿›è¡Œæ’é˜Ÿï¼Œå› æ­¤è¯ç”Ÿäº†äº‹å®ä¸Šçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼› å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„è¯¦ç»†ä»‹ç»è¯·å‚é˜…ï¼š ã€ŠJavaå¸å›½ä¹‹æ¶ˆæ¯é˜Ÿåˆ—ã€‹ ã€Šä¸€ä¸ªæ•…äº‹å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ã€‹ ã€Šåˆ°åº•ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨MQã€‹ MQæ¡†æ¶éå¸¸ä¹‹å¤šï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰RabbitMqã€ActiveMqã€ZeroMqã€kafkaï¼Œä»¥åŠé˜¿é‡Œå¼€æºçš„RocketMQã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»RabbitMqã€‚ 2.RabbitMQ 2.1.RabbitMQçš„ç®€ä»‹ å¼€å‘è¯­è¨€ï¼šErlang â€“ é¢å‘å¹¶å‘çš„ç¼–ç¨‹è¯­è¨€ã€‚ 2.1.1.AMQP AMQPæ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€ä¸ªåè®®ã€‚ 2.2.å®˜ç½‘ 2.3.MQçš„å…¶ä»–äº§å“ ","link":"https://kangjn.github.io/post/rabbitmq-shi-yong-jiao-cheng-yi/"},{"title":"å‰ç«¯é¢è¯•é¢˜ç›®ï¼ˆäºŒï¼‰","content":"è§£å†³HTML5æ–°æ ‡ç­¾çš„å…¼å®¹æ€§ï¼š &lt;![if lt IE 9]&gt; //è§£å†³IE6-8æ”¯æŒHTML5æ–°å…ƒç´  //è§£å†³IE6-8å¯¹css Media Query//åª’ä½“æŸ¥è¯¢ &lt;![endif]&gt; a:hoverï¼Œa:activeå¤±æ•ˆçš„é—®é¢˜ï¼Ÿ(lvha) ç°è±¡ï¼š aæ ‡ç­¾çš„ä¼ªç±»é€‰æ‹©å™¨ï¼Œåœ¨ç‚¹å‡»ä¹‹åï¼Œä¸€ç›´ä¿æŒä¸ºa:visitedçš„æ ·å¼ã€‚a:hoverï¼Œa:activeçš„csså¤±æ•ˆäº†ã€‚ è§£å†³æ–¹å¼ï¼š a:link {color:black} a:visited{color:pink} a:hover {color: blue} a:active {color: green} å°†a:visitedæ ·å¼å†™åœ¨å‰é¢ï¼Œä¸€ç§é¡ºåºä¸ºï¼ša:link{} a:visited{} a:hover{} a:active{}ã€‚ å¦‚æœå†™æˆè¿™æ ·ï¼ša:link{} a:hover{} a:active{} a:visited{} å¯èƒ½æ˜¯a:visited{}å°†a:hover{} a:active{}çš„æ ·å¼ç»™è¦†ç›–äº†ã€‚ ä¸ºäº†äº§ç”Ÿé¢„æœŸçš„æ•ˆæœï¼Œåœ¨CSSå®šä¹‰ä¸­ï¼Œa:hoverå¿…é¡»ä½äºa:linkå’Œa:visitedä¹‹åï¼Œa:activeå¿…é¡»ä½äºa:hoverä¹‹åã€‚ é€‰æ‹©å™¨ä¼˜å…ˆçº§ï¼Ÿ å†…è”æ ·å¼&gt;å†…éƒ¨æ ·å¼&gt;å¤–éƒ¨æ ·å¼ ï¼important&gt;å†…è”æ ·å¼ï¼ˆ1000ï¼‰&gt;id(100)&gt;class(10)&gt;æ ‡ç­¾ã€‹ç»§æ‰¿æ ·å¼ æ³¨æ„ï¼š 1ã€!importantå£°æ˜çš„æ ·å¼ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœå†²çªå†è¿›è¡Œè®¡ç®—ã€‚ 2ã€å¦‚æœä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™é€‰æ‹©æœ€åå‡ºç°çš„æ ·å¼ã€‚ 3ã€ç»§æ‰¿å¾—åˆ°çš„æ ·å¼çš„ä¼˜å…ˆçº§æœ€ä½ã€‚ æ–‡æœ¬æ€ä¹ˆè‡ªåŠ¨æ¢è¡Œï¼Ÿ word-wrap:å…è®¸å¯¹é•¿çš„ä¸å¯åˆ†å‰²çš„å•è¯è¿›è¡Œåˆ†å‰²å¹¶æ¢è¡Œåˆ°ä¸‹ä¸€è¡Œã€‚ word-wrap:normal word-wrap:break-word box-sizingæ¨¡å‹ï¼Ÿ content-box:é»˜è®¤ paddingå’Œborderä¸åŒ…å«åœ¨å…ƒç´ çš„å®½åº¦å†…ï¼Œå…ƒç´ çš„å®é™…å®½åº¦ä¸ºï¼šwidth+border+padding border-box: paddingå’ŒborderåŒ…å«åœ¨å…ƒç´ çš„å®½åº¦å†…ï¼Œå…ƒç´ çš„å®é™…å®½åº¦ä¸ºï¼šwidth jsä¸­åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡ ? var f=function(){} new Object() function f() this? æŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æŒ‡window HTML5è¡¨å•æ–°å…ƒç´ ï¼Ÿ date time color number range email url search 5ç§å¸¸è§çš„HTTPçŠ¶æ€ç åŠæ„ä¹‰ï¼Ÿ 200:è¯·æ±‚æˆåŠŸ 301ã€302ï¼šæ°¸ä¹…é‡å®šå‘/æš‚æ—¶é‡å®šå‘ 400ï¼šè¯·æ±‚æ ¼å¼é”™è¯¯ 404ï¼šæ‰¾ä¸åˆ°èµ„æº 500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ æ€ä¹ˆè®©ä¸€ä¸ªå›¾ç‰‡åœ¨ä¸€ä¸ªDIVä¸­å‚ç›´å±…ä¸­å¯¹é½ï¼Ÿ çˆ¶å…ƒç´ ä½¿ç”¨ç›¸å¯¹å®šä½ å­å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ æ€ä¹ˆè®©æ–‡å­—å‚ç›´å±…ä¸­å¯¹é½ï¼Ÿ ä¸€è¡Œæ–‡å­—çˆ¶å…ƒç´ ä¸å›ºå®šï¼špadding:20px çˆ¶å…ƒç´ å›ºå®šï¼Œå¤šè¡Œæ–‡å­—ï¼šçˆ¶å…ƒç´ ï¼šwidth:200px display:table å­å…ƒç´ :vertical-align:middle display:table-cell å¦‚ä½•è®©å›¾ç‰‡è·Ÿæ–‡å­—åœ¨å±…ä¸­æ˜¾ç¤ºï¼š çˆ¶å…ƒç´ è®¾ç½®ä¸ºvertical-align:middle æµè§ˆå™¨å…¼å®¹ï¼Ÿ 1ã€ä¸åŒçš„æµè§ˆå™¨é»˜è®¤æ ·å¼ä¸ä¸€æ ·ï¼špadding margin 2ã€IE6ä½ç‰ˆæœ¬ä¸­ï¼Œå…ƒç´ çš„è°ƒè¯•åŒ…å«å†…å®¹ï¼Œå…¶ä»–æµè§ˆå™¨å¦‚æœå†…å®¹è¶…å‡ºé«˜åº¦å°±ä¼šæ˜¾ç¤ºï¼Œå¯ä»¥è®¾ç½®overflow:hidden 3ã€å­å…ƒç´ è®¾ç½®ä¸Šå¤–è¾¹è·çš„æ—¶å€™ï¼Œçˆ¶å…ƒç´ éœ€è¦è®¾ç½®è¾¹æ¡†æˆ–è€…ä¸Šå¤–è¾¹è·ï¼ŒIEæ˜¾ç¤ºæ­£å¸¸ï¼Œå…¶ä»–æµè§ˆå™¨å°±ä¼šå˜æˆçˆ¶å…ƒç´ çš„å¤–è¾¹è· é¡µé¢ä¼˜åŒ–/ç«™ç‚¹ä¼˜åŒ–ï¼Ÿ 1ã€CSS sprites:å°†å¤šä¸ªèƒŒæ™¯å›¾åˆå¹¶åˆ°ä¸€ä¸ªå›¾ç‰‡ä¸Šï¼Œå†é€šè¿‡background-image å’Œbackground-positionè¿›è¡Œè°ƒæ•´//ä¼šå‡å°‘HTTPè¯·æ±‚ï¼ŒåŠ å¿«é¡µé¢æ˜¾ç¤ºé€Ÿåº¦ 2ã€ä»£ç å‹ç¼©/css/js yui compressor æ•°ç»„çš„æ–¹æ³•ï¼š join concat push pop unshift shift slice splice æ­£åˆ™è¡¨è¾¾å¼ï¼š \\dæ•°å­— \\sç©ºç™½å­—ç¬¦ \\wæ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ ï¼Ÿ 0-1 æˆ– æ”¹ä¸ºæ‡’æƒ°æ¨¡å¼ 0-n 1-n ^ å¼€å…³ $ ç»“å°¾ \\b è¾¹ç•Œ new ä¸€ä¸ªå¯¹è±¡å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿ ç¬¬ä¸€æ­¥æ˜¯å»ºç«‹ä¸€ä¸ªæ–°å¯¹è±¡ï¼› ç¬¬äºŒæ­¥å°†è¯¥å¯¹è±¡å†…ç½®çš„åŸå‹å¯¹è±¡è®¾ç½®ä¸ºæ„é€ å‡½æ•°prototypeå¼•ç”¨çš„é‚£ä¸ªåŸå‹å¯¹è±¡ï¼› ç¬¬ä¸‰æ­¥å°±æ˜¯å°†è¯¥å¯¹è±¡ä½œä¸ºthiså‚æ•°è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå®Œæˆæˆå‘˜è®¾ç½®ç­‰åˆå§‹åŒ–å·¥ä½œã€‚ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ï¼Ÿ typeof &quot;sflkj&quot; typeofæ— æ³•åˆ¤æ–­æ•°ç»„è·Ÿå¯¹è±¡ [] instanceof Array Array.prototype.isPrototypeOf([]) Array.isArray([]) è·å–ä¸€ä¸ªé€‰é¡¹å¡çš„å€¼ï¼Ÿ aa bb function showinfo(){ var sel=document.getElementById(\"s1\"); var i=sel.selectedIndex; var result=sel.options[i].value; } æµè§ˆå™¨å¯¹è±¡æœ‰å“ªäº›ï¼Ÿ navigator history window location screen event document windowå¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•ï¼Ÿ alert confirm prompt close jsç»‘å®šäº‹ä»¶ï¼š btnObj.addEventListener(&quot;click&quot;,function(){}) jquery æŠŠå˜é‡$çš„æ§åˆ¶æƒäº¤ç»™å…¶ä»–JSåº“ jQuery.noConflict(); jQuery(function($){}) jQuery éå†ï¼Ÿï¼ˆ$.each()æ–¹æ³•ï¼‰ asdf luili 234 var m=$(\"ul li\"); m.each(function(i){ if(i==0){ $(this).css(\"font-size\",\"18px\") } }) æ€ä¹ˆæŠŠä¸€ä¸ªJSONå­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªjså¯¹è±¡ï¼Ÿ var jt='{&quot;name&quot;:&quot;tom&quot;,&quot;age&quot;:40}' var jsObj=JSON.parse(jt)//{&quot;name&quot;:&quot;tom&quot;,&quot;age&quot;:40} æŠŠä¸€ä¸ªjså¯¹è±¡è½¬æ¢æˆä¸€ä¸ªjosnå­—ç¬¦å•ï¼Ÿ var jt={&quot;name&quot;:&quot;tom&quot;,&quot;age&quot;:40} var jsObj=JSON.stringify(jt)//'{&quot;name&quot;:&quot;tom&quot;,&quot;age&quot;:40}' è¡¨å•åºåˆ—åŒ–æˆå­—ç¬¦ä¸²ï¼šserializeï¼ˆï¼‰ åºåˆ—åŒ–æˆjsonå¯¹è±¡ï¼šserializeArray() æ‰‹æœºç«¯å¤´éƒ¨æ€ä¹ˆå†™ï¼Ÿ ä¸é€šè¿‡æ’ä»¶å®ç°è‡ªå“åº”å¸ƒå±€ï¼Ÿ CSSï¼‹å®½åº¦ç™¾åˆ†æ¯”ï¼‹æµ®åŠ¨ï¼‹åª’ä½“æŸ¥è¯¢æŠ€æœ¯å°±å¯ä»¥æ‰‹åŠ¨å®ç°å“åº”å¼å¸ƒå±€ CSSçš„åª’ä½“æŸ¥è¯¢ï¼Ÿ @media screen and(min-width:990px){//(ä¸€ä¸ªcssæ–‡ä»¶å†…) #id{ float:left } } @media screen and(min-width:700px) and (max-width:989px){ #id{ float:left } @media screen and(max-width:699px){ } angularjsï¼Ÿ é‡‡ç”¨MVCæ¨¡å¼ æ•°æ®ç»‘å®š ä¾èµ–æ³¨å…¥ æ¨¡å—åŒ–è®¾è®¡ åˆå§‹åŒ–ä¸€ä¸ªæ¨¡å‹æ•°æ® ng-bind=&quot;name&quot; ng-repeat=&quot;data in array&quot; angular.module(&quot;myApp&quot;,[&quot;ng&quot;]){ .controller(&quot;myCtrl&quot;,function($scope){ $scope.newsTitle=&quot;hello&quot; }) } ä»€ä¹ˆæ˜¯é«˜å†…èšï¼Œä½è€¦åˆï¼Ÿ é«˜å†…èšï¼šä¸€ä¸ªæ¨¡å—å†…çš„å…ƒç´ çš„å…³ç³»èµµç´§å¯†è¶Šå¥½ ä½è€¦åˆï¼šä¸åŒæ¨¡å—é—´çš„å…³ç³»å°½é‡ä¸è¦æœ‰å…³è” ","link":"https://kangjn.github.io/post/qian-duan-mian-shi-ti-mu-er/"},{"title":"å‰ç«¯é¢è¯•é¢˜ç›®ï¼ˆä¸€ï¼‰","content":"ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•° null å’Œundefinedçš„åŒºåˆ«ï¼Ÿ å…±åŒç‚¹ï¼šéƒ½æ˜¯åŸå§‹ç±»å‹ï¼Œä¿å­˜åœ¨æ ˆä¸­å˜é‡æœ¬åœ° ä¸åŒç‚¹ï¼š undefined:è¡¨ç¤ºå˜é‡å£°æ˜ä½†ç¤ºè¢«èµ‹å€¼ã€‚æ˜¯æ‰€æœ‰æœªèµ‹å€¼å˜é‡çš„é»˜è®¤å€¼ï¼Œä¸ä¸»åŠ¨ä½¿ç”¨ null:è¡¨ç¤ºä¸€ä¸ªå˜é‡ä¸å†æŒ‡å‘ä»»ä½•å¯¹è±¡åœ°å€ è¡¨ç¤ºå˜é‡å¯èƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ç›®å‰æš‚æ—¶ä»€ä¹ˆä¹Ÿæ²¡æŒ‡å‘ï¼Œä¸€èˆ¬ç”¨æ¥ä¸»åŠ¨é‡Šæ”¾æŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ å¸¸è§è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ æœ‰å“ªäº›ï¼Œä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ è¡Œå†…å…ƒç´ ï¼šspan img a u s i input select å—çº§å…ƒç´ ï¼šdiv ul ol li dt dd h1-h6 å—çº§å…ƒç´ ä¼šå•ç‹¬å ä¸€è¡Œï¼Œè¡Œå†…å…ƒç´ ä¼šåœ¨ä¸€è¡Œæ˜¾ç¤ºã€‚ ä»€ä¹ˆæ˜¯ajaxï¼Ÿ ajaxæ˜¯ä¸€ç§åœ¨ä¸éœ€è¦é‡æ–°åŠ è½½é¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤æ¢ã€å®ç°é¡µé¢å±€éƒ¨æ›´æ–°çš„ä¸€ç§æŠ€æœ¯ã€‚ å®è´¨æ˜¯ä½¿ç”¨æ ¸å¿ƒå¯¹è±¡XMLHttpRequestå¼‚æ­¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå®ç°é¡µé¢å±€éƒ¨æ•°æ®åˆ·æ–°ï¼š å¦‚ä½•åˆ›å»ºXMLHttpRequestè¯·æ±‚æ­¥éª¤ï¼š 1ã€è·å–ajaxå¯¹è±¡ var xhr=new XMLHttpRequest(); 2ã€åˆ›å»ºè¯·æ±‚:è°ƒç”¨XMLHttpRequestå¯¹è±¡çš„openæ–¹æ³• xhr.open(&quot;get/post&quot;,&quot;xx.php&quot;,true[æ˜¯å¦ä¸ºå¼‚æ­¥]) 3ã€å›è°ƒå‡½æ•°çš„å¤„ç† xhr.onreadystatechange=function(){ if(xhr.readyState4){ if(xhr.status200){ var txt=xhr.responseText/responseXML } } } 4ã€å‘é€è¯·æ±‚ xhr.send(&quot;name=value$pwd=value&quot;); readyStateå±æ€§ï¼š 0=æœªåˆå§‹åŒ– 1=æ­£åœ¨åŠ è½½ 2=ä»¥åŠ è½½ 3=äº¤äº’ä¸­ 4=åŠ è½½å®Œæˆ Ajaxå¼‚æ­¥è¯·æ±‚ï¼Ÿ .ajax( { url:&quot;destination.php&quot;, type:&quot;post&quot;, data:(&quot;#id&quot;).val(), dataType:&quot;json&quot;, success:function(data){ console.log(data) } error:function(){ window.alert(&quot;error&quot;) } } ) AJAXçš„ä¼˜ç¼ºç‚¹ï¼Ÿ ä¼˜ç‚¹ï¼š é¡µé¢å±€éƒ¨åˆ·æ–°ï¼Œæé«˜ç”¨æˆ·ä½“éªŒ å‡è½»æœåŠ¡å™¨è´Ÿæ‹… å…·æœ‰æ›´è¿…é€Ÿçš„å“åº”èƒ½åŠ› èƒ½è¢«å¹¿æ³›æ”¯æŒ ç¼ºç‚¹ï¼š ä¸æ”¯æŒæµè§ˆå™¨åé€€æŒ‰é’® å®‰å…¨é—®é¢˜ å¯¹æœç´¢å¼•æ“æ”¯æŒæ¯”è¾ƒå¼± htmlä¸­æœ‰å“ªäº›å®šä½ï¼Ÿ static:é»˜è®¤è§„åˆ™å®šä½ã€‚ absolute:ç»å¯¹å®šä½ ï¼Œå¦‚æœä»–çš„çˆ¶çº§è®¾ç½®æˆäº†é™¤staticä¹‹å¤–çš„å®šä½æ–¹å¼ï¼Œå°±ä¼šç›¸å¯¹äºä»–çš„çˆ¶çº§å®šä½ï¼Œå¦‚æœéƒ½æ²¡æœ‰ï¼Œä¼šç›¸å¯¹äºbodyå®šä½ã€ä¸å é¡µé¢ç©ºé—´ relative:ç›¸å¯¹å®šä½ï¼Œç›¸å¯¹äºåˆå§‹ä½ç½®å®šä½/å é¡µé¢ç©ºé—´ fixed:å›ºå®šå®šä½ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£ http å»ºç«‹TCPè¿æ¥ å‘é€è¯·æ±‚å‘½ä»¤ å‘é€è¯·æ±‚å¤´éƒ¨ æœåŠ¡å™¨åº”ç­” æœåŠ¡å™¨å‘é€åº”ç­”å¤´éƒ¨ æœåŠ¡å™¨å‘é€åº”ç­”å…·ä½“ä¿¡æ¯ å…³é—­è¿æ¥ å¦‚ä½•å±…ä¸­DIVï¼Ÿ ç»™DIVè®¾ç½®ä¸€ä¸ªå®½åº¦ï¼Œå†è®¾ç½®marginä¸º:0 auto; å¦‚ä½•å±…ä¸­ä¸€ä¸ªæµ®åŠ¨å…ƒç´ ï¼Ÿ ä½¿ç”¨ä¸€ä¸ªå±…ä¸­æ˜¾ç¤ºçš„DIVåŒ…å«äº›æµ®åŠ¨å…ƒç´ ã€‚ position:fixed;//å›ºå®šå®šä½ width: 200px; height: 200px; background: red; margin-left:-100px; margin-top: -100px; left: 50%; top: 50%; çº¯CSSå®ç°ä¸€ä¸ªä¸‰è§’å½¢ï¼Ÿ width: 0; height: 0; border:25px solid transparent; border-top-color: red; é‡å†™trim()æ–¹æ³• if(String.prototype.trim===undefined){ String.prototype.trim=function () { return this.replace(/^\\s+|\\s+$/g) } } var str=&quot; helloworld &quot;; document.write(&quot;|&quot;+str+&quot;| &quot;); str=str.trim(); document.write(&quot;|&quot;+str+&quot;|&quot;); function trim(str){//åŒæ—¶å»æ‰å¼€å¤´å’Œç»“å°¾çš„ç©ºå­—ç¬¦ var reg=/^\\s+|\\s+$/g; return str.replace(reg,&quot;&quot;); } var str=&quot; zhang dong &quot;; console.log(ltrim(str));//&quot;zhang dong &quot; console.log(rtrim(str));//&quot; zhang dong&quot; console.log(trim(str));//&quot;zhang dong&quot; æ°´ä»™èŠ±æ•° var a,b,c for(var i=100;i&lt;1000;i++){ a=parseInt(i%10); b=parseInt((i/10)%10); c=parseInt(i/100); if(iaaa+bbb+ccc){ console.log(i); } } åˆ¤æ–­æŸä¸€å¹´æ˜¯ä¸æ˜¯é—°å¹´ function isLeap(year){ console.log(year%40&amp;&amp;year%100!=0||year%400==0?&quot;é—°å¹´&quot;:&quot;å¹³å¹´&quot;); } isLeap(prompt(&quot;ä¸»è¾“å…¥å¹´ä»½&quot;)); åœ¨å•è¯åé¢åŠ ä¸Šæ•°å­— var str=&quot;one two three four&quot;; var i=4; var reg=/\\b[a-z]+\\b/g; str=str.replace(reg,function(kw){ return kw+i++; }) console.log(str); åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„ var str=[] Array.prototype.isPrototypeOf(str);//true Object.prototype.toString.call(str);//[Object Array]; str instanceof Array; Array.isArray([]) ä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Ÿ çˆ¶å¯¹è±¡å·²æœ‰çš„æˆå‘˜ï¼Œå­å¯¹è±¡ä¸ç”¨é‡å¤å®šä¹‰ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ ä»€ä¹ˆæ˜¯åŸå‹ï¼Ÿ æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§å¼•ç”¨çš„å°±æ˜¯åŸå‹å¯¹è±¡ï¼Œ åŸå‹å¯¹è±¡å°±æ˜¯ä¿å­˜å…±æœ‰å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ windowçª—å£çš„å…¨å±€å¯¹è±¡ï¼Ÿ history navigator screen location event åŠ¨æ€åŠ è½½Dom? var frg=document.createDocumentFragment(); var m=document.createElement(&quot;div&quot;); m.innerHTML=&quot;this is first page&quot;; frg.appendChild(m); document.body.appendChild(frg); æ•°ç»„å»é‡ï¼Ÿ var arr=[1,2,3,3,4,&quot;a&quot;,&quot;a&quot;,&quot;b&quot;] function unique(arr){ for(var i=0,arr2={};i&lt;arr.length;i++){ arr2[arr[i]]===undefined&amp;&amp;(arr2[arr[i]]=1); } var arr=[]; for(var key in arr2){ arr.push(key) } return arr; } console.log(unique(arr)); var arr1=[2,5,9,1,7] function sort(arr){ for(var i=0;iarr[j+1]]){ var temp=arr[j]; arr[j]=arr[j+1]; arr[j+1]=temp; } } } } sort(arr1); console.log(arr1) æ•°ç»„é™ç»´ var arr=[[1,2,3],[1,3,2]]; var res=Array.prototype.concat.apply([],arr) console.log(res); å¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–ï¼Ÿ å¯ä»¥è®©é¡µé¢å†…å®¹ç»“æ„åŒ–ï¼Œä¾¿äºæµè§ˆå™¨è§£æï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤åº¦å’Œå¯é‡ç”¨æ€§ å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾ï¼š å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ font-size font-family color display:noneå’Œvisibility:hiddençš„åŒºåˆ«ï¼Ÿ displayä¸å æ®é¡µé¢ç©ºé—´ visibilityä»ç„¶å æ®ç©ºé—´ css3ä¼ªç±»é€‰æ‹©å™¨ :enabled :disabled :checked :firtt-child :last-child ä¸ºä»€ä¹ˆå»ºè®®åœ¨è®¾ç½®èƒŒæ™¯å›¾åƒçš„åŒæ—¶è¿˜è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼Ÿ å¦‚æœå› ä¸ºå„ç§åŸå› å›¾ç‰‡æ— æ³•åŠ è½½çš„æ—¶å€™ï¼Œé¡µé¢ä¼šæ˜¾ç¤ºèƒŒæ™¯é¢œè‰²ã€‚ CSS spriteçš„ä¼˜ç¼ºç‚¹ï¼Ÿ æŠŠç½‘é¡µä¸­çš„ä¸€äº›èƒŒæ™¯å›¾ç‰‡æ•´åˆåˆ°ä¸€å¼ å›¾ç‰‡ä¸­ï¼Œå†åˆ©ç”¨background-image/repeat/positionè¿›è¡Œå›¾ç‰‡å®šä½ ä¼˜ç‚¹ï¼š å‡å°‘ç½‘é¡µçš„httpè¯·æ±‚ï¼Œæé«˜æ€§èƒ½ å‡å°‘å›¾ç‰‡çš„å¤§å° ç»´æŠ¤æ›´æ–¹ä¾¿ï¼Œåªéœ€è¦åœ¨ä¸€å¼ å›¾ç‰‡ä¸Šä¿®æ”¹å°±å¯ä»¥ã€‚ ç¼ºç‚¹ï¼š å›¾ç‰‡åˆæˆæ¯”è¾ƒéº»çƒ¦ èƒŒæ™¯è®¾ç½®æ—¶éœ€è¦å¾—åˆ°æ¯ä¸€ä¸ªå›¾ç‰‡çš„ç²¾ç¡®ä½ç½® CSS3æ–°ç‰¹æ€§ box-shadow border-radius text-shadow ","link":"https://kangjn.github.io/post/qian-duan-mian-shi-ti-mu-yi/"}]}